<script>!function(){var D={version:"3.5.17"},o=[].slice,f=function(e){return o.call(e)},x=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function I(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(x)try{f(x.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,r=t.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){r.call(this,e,t,n+"")},a.setProperty=function(e,t,n){i.call(this,e,t+"",n)}}function l(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(o){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;o(e[a],t)<0?n=a+1:r=a}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;0<o(e[a],t)?r=a:n=a+1}return n}}}D.ascending=l,D.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},D.min=function(e,t){var n,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<o;)null!=(r=e[a])&&r<n&&(n=r)}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&r<n&&(n=r)}return n},D.max=function(e,t){var n,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<o;)null!=(r=e[a])&&n<r&&(n=r)}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&n<r&&(n=r)}return n},D.extent=function(e,t){var n,r,a,o=-1,i=e.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=e[o])&&r<=r){n=a=r;break}for(;++o<i;)null!=(r=e[o])&&(r<n&&(n=r),a<r&&(a=r))}else{for(;++o<i;)if(null!=(r=t.call(e,e[o],o))&&r<=r){n=a=r;break}for(;++o<i;)null!=(r=t.call(e,e[o],o))&&(r<n&&(n=r),a<r&&(a=r))}return[n,a]},D.sum=function(e,t){var n,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)u(n=+e[o])&&(r+=n);else for(;++o<a;)u(n=+t.call(e,e[o],o))&&(r+=n);return r},D.mean=function(e,t){var n,r=0,a=e.length,o=-1,i=a;if(1===arguments.length)for(;++o<a;)u(n=c(e[o]))?r+=n:--i;else for(;++o<a;)u(n=c(t.call(e,e[o],o)))?r+=n:--i;if(i)return r/i},D.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],o=n-r;return o?a+o*(e[r]-a):a},D.median=function(e,t){var n,r=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)u(n=c(e[o]))&&r.push(n);else for(;++o<a;)u(n=c(t.call(e,e[o],o)))&&r.push(n);if(r.length)return D.quantile(r.sort(l),.5)},D.variance=function(e,t){var n,r,a=e.length,o=0,i=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)u(n=c(e[s]))&&(i+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<a;)u(n=c(t.call(e,e[s],s)))&&(i+=(r=n-o)*(n-(o+=r/++l)));if(1<l)return i/(l-1)},D.deviation=function(){var e=D.variance.apply(this,arguments);return e?Math.sqrt(e):e};var d=e(l);function h(e){return e.length}D.bisectLeft=d.left,D.bisect=D.bisectRight=d.right,D.bisector=function(n){return e(1===n.length?function(e,t){return l(n(e),t)}:n)},D.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,a,o=n-t;o;)a=Math.random()*o--|0,r=e[o+t],e[o+t]=e[a+t],e[a+t]=r;return e},D.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},D.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},D.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=D.min(e,h),r=new Array(n);++t<n;)for(var a,o=-1,i=r[t]=new Array(a);++o<a;)i[o]=e[o][t];return r},D.zip=function(){return D.transpose(arguments)},D.keys=function(e){var t=[];for(var n in e)t.push(n);return t},D.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},D.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},D.merge=function(e){for(var t,n,r,a=e.length,o=-1,i=0;++o<a;)i+=e[o].length;for(n=new Array(i);0<=--a;)for(t=(r=e[a]).length;0<=--t;)n[--i]=r[t];return n};var P=Math.abs;function p(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function v(){this._=Object.create(null)}D.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],o=function(e){var t=1;for(;e*t%1;)t*=10;return t}(P(n)),i=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++i)>t;)a.push(r/o);else for(;(r=e+n*++i)<t;)a.push(r/o);return a},D.map=function(e,t){var n=new v;if(e instanceof v)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,o=e.length;if(1===arguments.length)for(;++a<o;)n.set(a,e[a]);else for(;++a<o;)n.set(t.call(e,r=e[a],a),r)}else for(var i in e)n.set(i,e[i]);return n};var g="__proto__",y="\0";function m(e){return(e+="")===g||e[0]===y?y+e:e}function b(e){return(e+="")[0]===y?e.slice(1):e}function _(e){return m(e)in this._}function w(e){return(e=m(e))in this._&&delete this._[e]}function k(){var e=[];for(var t in this._)e.push(b(t));return e}function M(){var e=0;for(var t in this._)++e;return e}function T(){for(var e in this._)return!1;return!0}function A(){this._=Object.create(null)}function E(e){return e}function S(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}function L(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=C.length;n<r;++n){var a=C[n]+t;if(a in e)return a}}p(v,{has:_,get:function(e){return this._[m(e)]},set:function(e,t){return this._[m(e)]=t},remove:w,keys:k,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:M,empty:T,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}}),D.nest=function(){var d,f,h={},p=[],t=[];function g(n,e,r){if(r>=p.length)return f?f.call(h,e):d?e.sort(d):e;for(var t,a,o,i,s=-1,l=e.length,c=p[r++],u=new v;++s<l;)(i=u.get(t=c(a=e[s])))?i.push(a):u.set(t,[a]);return n?(a=n(),o=function(e,t){a.set(e,g(n,t,r))}):(a={},o=function(e,t){a[e]=g(n,t,r)}),u.forEach(o),a}return h.map=function(e,t){return g(t,e,0)},h.entries=function(e){return function n(e,r){if(r>=p.length)return e;var a=[],o=t[r++];return e.forEach(function(e,t){a.push({key:e,values:n(t,r)})}),o?a.sort(function(e,t){return o(e.key,t.key)}):a}(g(D.map,e,0),0)},h.key=function(e){return p.push(e),h},h.sortKeys=function(e){return t[p.length-1]=e,h},h.sortValues=function(e){return d=e,h},h.rollup=function(e){return f=e,h},h},D.set=function(e){var t=new A;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},p(A,{has:_,add:function(e){return this._[m(e+="")]=!0,e},remove:w,values:k,size:M,empty:T,forEach:function(e){for(var t in this._)e.call(this,b(t))}}),D.behavior={},D.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=S(e,t,t[n]);return e};var C=["webkit","ms","moz","Moz","o","O"];function z(){}function O(){}function j(a){var o=[],i=new v;function e(){for(var e,t=o,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return a}return e.on=function(e,t){var n,r=i.get(e);return arguments.length<2?r&&r.on:(r&&(r.on=null,o=o.slice(0,n=o.indexOf(r)).concat(o.slice(n+1)),i.remove(e)),t&&o.push(i.set(e,{on:t})),a)},e}function R(){D.event.preventDefault()}function N(){for(var e,t=D.event;e=t.sourceEvent;)t=e;return t}function F(a){for(var o=new O,e=0,t=arguments.length;++e<t;)o[arguments[e]]=j(o);return o.of=function(n,r){return function(e){try{var t=e.sourceEvent=D.event;e.target=a,D.event=e,o[e.type].apply(n,r)}finally{D.event=t}}},o}D.dispatch=function(){for(var e=new O,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=j(e);return e},O.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},D.event=null,D.requote=function(e){return e.replace(B,"\\$&")};var B=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,q={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function H(e){return q(e,Y),e}var V=function(e,t){return t.querySelector(e)},U=function(e,t){return t.querySelectorAll(e)},G=function(e,t){var n=e.matches||e[L(e,"matchesSelector")];return(G=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(V=function(e,t){return Sizzle(e,t)[0]||null},U=Sizzle,G=Sizzle.matchesSelector),D.selection=function(){return D.select(x.documentElement)};var Y=D.selection.prototype=[];function X(e){return"function"==typeof e?e:function(){return V(e,this)}}function Z(e){return"function"==typeof e?e:function(){return U(e,this)}}Y.select=function(e){var t,n,r,a,o=[];e=X(e);for(var i=-1,s=this.length;++i<s;){o.push(t=[]),t.parentNode=(r=this[i]).parentNode;for(var l=-1,c=r.length;++l<c;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,i)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return H(o)},Y.selectAll=function(e){var t,n,r=[];e=Z(e);for(var a=-1,o=this.length;++a<o;)for(var i=this[a],s=-1,l=i.length;++s<l;)(n=i[s])&&(r.push(t=f(e.call(n,n.__data__,s,a))),t.parentNode=n);return H(r)};var W="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(t,n){return t=D.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function $(e){return e.trim().replace(/\s+/g," ")}function K(e){return new RegExp("(?:^|\\s+)"+D.requote(e)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(n,r){var a=(n=ee(n).map(ne)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<a;)n[e](this,t)}:function(){for(var e=-1;++e<a;)n[e](this,r)}}function ne(r){var a=K(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(a.lastIndex=0,a.test(n)||e.setAttribute("class",$(n+" "+r))):e.setAttribute("class",$(n.replace(a," ")))}}function re(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function ae(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function oe(n){return"function"==typeof n?n:(n=D.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===W&&e.documentElement.namespaceURI===W?e.createElement(n):e.createElementNS(t,n)}}function ie(){var e=this.parentNode;e&&e.removeChild(this)}function se(e){return{__data__:e}}function le(e){return function(){return G(this,e)}}function ce(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,o=e[n],i=0,s=o.length;i<s;i++)(a=o[i])&&t(a,i,n);return e}function ue(e){return q(e,de),e}D.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),J.hasOwnProperty(n)?{space:J[n],local:e}:e}},Y.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=D.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(Q(t,e[t]));return this}return this.each(Q(e,t))},Y.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ee(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!K(e[a]).test(t))return!1;return!0}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},Y.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(re(n,e[n],t));return this}if(r<2){var a=this.node();return I(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(re(e,t,n))},Y.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(e){return e=oe(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Y.insert=function(e,t){return e=oe(e),t=X(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Y.remove=function(){return this.each(ie)},Y.data=function(e,p){var t,n,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(t=this[0]).length);++r<a;)(n=t[r])&&(e[r]=n.__data__);return e}function o(e,t){var n,r,a,o=e.length,i=t.length,s=Math.min(o,i),l=new Array(i),c=new Array(i),u=new Array(o);if(p){var d,f=new v,h=new Array(o);for(n=-1;++n<o;)(r=e[n])&&(f.has(d=p.call(r,r.__data__,n))?u[n]=r:f.set(d,r),h[n]=d);for(n=-1;++n<i;)(r=f.get(d=p.call(t,a=t[n],n)))?!0!==r&&((l[n]=r).__data__=a):c[n]=se(a),f.set(d,!0);for(n=-1;++n<o;)n in h&&!0!==f.get(h[n])&&(u[n]=e[n])}else{for(n=-1;++n<s;)r=e[n],a=t[n],r?(r.__data__=a,l[n]=r):c[n]=se(a);for(;n<i;++n)c[n]=se(t[n]);for(;n<o;++n)u[n]=e[n]}c.update=l,c.parentNode=l.parentNode=u.parentNode=e.parentNode,g.push(c),y.push(l),m.push(u)}var g=ue([]),y=H([]),m=H([]);if("function"==typeof e)for(;++r<a;)o(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<a;)o(t=this[r],e);return y.enter=function(){return g},y.exit=function(){return m},y},Y.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Y.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=le(e));for(var o=0,i=this.length;o<i;o++){a.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return H(a)},Y.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,o=r[a];0<=--a;)(n=r[a])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Y.sort=function(e){e=function(n){arguments.length||(n=l);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Y.each=function(r){return ce(this,function(e,t,n){r.call(e,e.__data__,t,n)})},Y.call=function(e){var t=f(arguments);return e.apply(t[0]=this,t),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var o=n[r];if(o)return o}return null},Y.size=function(){var e=0;return ce(this,function(){++e}),e};var de=[];function fe(a,t,n){var r="__on"+a,e=a.indexOf("."),o=pe;0<e&&(a=a.slice(0,e));var i=he.get(a);function s(){var e=this[r];e&&(this.removeEventListener(a,e,e.$),delete this[r])}return i&&(a=i,o=ge),e?t?function(){var e=o(t,f(arguments));s.call(this),this.addEventListener(a,this[r]=e,e.$=n),e._=t}:s:t?z:function(){var e,t=new RegExp("^__on([^.]+)"+D.requote(a)+"$");for(var n in this)if(e=n.match(t)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}}D.selection.enter=ue,(D.selection.enter.prototype=de).append=Y.append,de.empty=Y.empty,de.node=Y.node,de.call=Y.call,de.size=Y.size,de.select=function(e){for(var t,n,r,a,o,i=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,i.push(t=[]),t.parentNode=a.parentNode;for(var c=-1,u=a.length;++c<u;)(o=a[c])?(t.push(r[c]=n=e.call(a.parentNode,o.__data__,c,s)),n.__data__=o.__data__):t.push(null)}return H(i)},de.insert=function(e,t){var i,s,l;return arguments.length<2&&(i=this,t=function(e,t,n){var r,a=i[n].update,o=a.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=a[s])&&++s<o;);return r}),Y.insert.call(this,e,t)},D.select=function(e){var t;return"string"==typeof e?(t=[V(e,x)]).parentNode=x.documentElement:(t=[e]).parentNode=s(e),H([t])},D.selectAll=function(e){var t;return"string"==typeof e?(t=f(U(e,x))).parentNode=x.documentElement:(t=f(e)).parentNode=null,H([t])},Y.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(fe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(fe(e,t,n))};var he=D.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pe(n,r){return function(e){var t=D.event;D.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{D.event=t}}}function ge(e,t){var n=pe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}x&&he.forEach(function(e){"on"+e in x&&he.remove(e)});var ye,me=0;function ve(e){var n=".dragsuppress-"+ ++me,r="click"+n,a=D.select(I(e)).on("touchmove"+n,R).on("dragstart"+n,R).on("selectstart"+n,R);if(null==ye&&(ye=!("onselectstart"in e)&&L(e.style,"userSelect")),ye){var o=s(e).style,i=o[ye];o[ye]="none"}return function(e){if(a.on(n,null),ye&&(o[ye]=i),e){var t=function(){a.on(r,null)};a.on(r,function(){R(),t()},!0),setTimeout(t,0)}}}D.mouse=function(e){return be(e,N())};var xe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function be(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(xe<0){var a=I(e);if(a.scrollX||a.scrollY){var o=(n=D.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xe=!(o.f||o.e),n.remove()}}return xe?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function _e(){return D.event.changedTouches[0].identifier}D.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=N().changedTouches),t)for(var r,a=0,o=t.length;a<o;++a)if((r=t[a]).identifier===n)return be(e,r)},D.behavior.drag=function(){var g=F(n,"drag","dragstart","dragend"),y=null,e=r(z,D.mouse,I,"mousemove","mouseup"),t=r(_e,D.touch,E,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,f,h,p){return function(){var r,e=D.event.target.correspondingElement||D.event.target,a=this.parentNode,o=g.of(this,arguments),i=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=D.select(f(e)).on(h+t,function(){var e,t,n=d(a,s);if(!n)return;e=n[0]-c[0],t=n[1]-c[1],i|=e|t,o({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t})}).on(p+t,function(){if(!d(a,s))return;n.on(h+t,null).on(p+t,null),l(i),o({type:"dragend"})}),l=ve(e),c=d(a,s);r=y?[(r=y.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],o({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(y=e,n):y},D.rebind(n,g,"on")},D.touches=function(n,e){return arguments.length<2&&(e=N().touches),e?f(e).map(function(e){var t=be(n,e);return t.identifier=e.identifier,t}):[]};var we=1e-6,ke=we*we,Me=Math.PI,Te=2*Me,Ae=Te-we,Se=Me/2,Le=Me/180,Ce=180/Me;function ze(e){return 0<e?1:e<0?-1:0}function Oe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function je(e){return 1<e?0:e<-1?Me:Math.acos(e)}function Pe(e){return 1<e?Se:e<-1?-Se:Math.asin(e)}function De(e){return((e=Math.exp(e))+1/e)/2}function Ie(e){return(e=Math.sin(e/2))*e}var Ee=Math.SQRT2;D.interpolateZoom=function(e,t){var n,i,s=e[0],l=e[1],c=e[2],r=t[0],a=t[1],o=t[2],u=r-s,d=a-l,f=u*u+d*d;if(f<ke)i=Math.log(o/c)/Ee,n=function(e){return[s+e*u,l+e*d,c*Math.exp(Ee*e*i)]};else{var h=Math.sqrt(f),p=(o*o-c*c+4*f)/(2*c*2*h),g=(o*o-c*c-4*f)/(2*o*2*h),y=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);i=(m-y)/Ee,n=function(e){var t,n,r=e*i,a=De(y),o=c/(2*h)*(a*(n=Ee*r+y,((n=Math.exp(2*n))-1)/(n+1))-(t=y,((t=Math.exp(t))-1/t)/2));return[s+o*u,l+o*d,c*a/De(Ee*r+y)]}}return n.duration=1e3*i,n},D.behavior.zoom=function(){var t,l,n,r,b,a,o,i,s,_={x:0,y:0,k:1},c=[960,500],u=Fe,d=250,f=0,w="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",k="touchstart.zoom",M=F(g,"zoomstart","zoom","zoomend");function g(e){e.on(w,j).on(Ne+".zoom",m).on("dblclick.zoom",v).on(k,P)}function T(e){return[(e[0]-_.x)/_.k,(e[1]-_.y)/_.k]}function A(e){_.k=Math.max(u[0],Math.min(u[1],e))}function S(e,t){var n;t=[(n=t)[0]*_.k+_.x,n[1]*_.k+_.y],_.x+=e[0]-t[0],_.y+=e[1]-t[1]}function L(e,t,n,r){e.__chart__={x:_.x,y:_.y,k:_.k},A(Math.pow(2,r)),S(l=t,n),e=D.select(e),0<d&&(e=e.transition().duration(d)),e.call(g.event)}function y(){o&&o.domain(a.range().map(function(e){return(e-_.x)/_.k}).map(a.invert)),s&&s.domain(i.range().map(function(e){return(e-_.y)/_.k}).map(i.invert))}function C(e){f++||e({type:"zoomstart"})}function z(e){y(),e({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function O(e){--f||(e({type:"zoomend"}),l=null)}function j(){var e=this,t=M.of(e,arguments),n=0,r=D.select(I(e)).on(h,function(){n=1,S(D.mouse(e),a),z(t)}).on(p,function(){r.on(h,null).on(p,null),o(n),O(t)}),a=T(D.mouse(e)),o=ve(e);cs.call(e),C(t)}function P(){var c,u=this,d=M.of(u,arguments),f={},h=0,a=".zoom-"+D.event.changedTouches[0].identifier,p="touchmove"+a,g="touchend"+a,y=[],o=D.select(u),i=ve(u);function m(){var e=D.touches(u);return c=_.k,e.forEach(function(e){e.identifier in f&&(f[e.identifier]=T(e))}),e}function e(){var e=D.event.target;D.select(e).on(p,v).on(g,x),y.push(e);for(var t=D.event.changedTouches,n=0,r=t.length;n<r;++n)f[t[n].identifier]=null;var a=m(),o=Date.now();if(1===a.length){if(o-b<500){var i=a[0];L(u,i,f[i.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),R()}b=o}else if(1<a.length){i=a[0];var s=a[1],l=i[0]-s[0],c=i[1]-s[1];h=l*l+c*c}}function v(){var e,t,n,r,a=D.touches(u);cs.call(u);for(var o=0,i=a.length;o<i;++o,r=null)if(n=a[o],r=f[n.identifier]){if(t)break;e=n,t=r}if(r){var s=(s=n[0]-e[0])*s+(s=n[1]-e[1])*s,l=h&&Math.sqrt(s/h);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],A(l*c)}b=null,S(e,t),z(d)}function x(){if(D.event.touches.length){for(var e=D.event.changedTouches,t=0,n=e.length;t<n;++t)delete f[e[t].identifier];for(var r in f)return void m()}D.selectAll(y).on(a,null),o.on(w,j).on(k,P),i(),O(d)}e(),C(d),o.on(w,null).on(k,e)}function m(){var e=M.of(this,arguments);r?clearTimeout(r):(cs.call(this),t=T(l=n||D.mouse(this)),C(e)),r=setTimeout(function(){r=null,O(e)},50),R(),A(Math.pow(2,.002*Re())*_.k),S(l,t),z(e)}function v(){var e=D.mouse(this),t=Math.log(_.k)/Math.LN2;L(this,e,T(e),D.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Ne||(Ne="onwheel"in x?(Re=function(){return-D.event.deltaY*(D.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(Re=function(){return D.event.wheelDelta},"mousewheel"):(Re=function(){return-D.event.detail},"MozMousePixelScroll")),g.event=function(e){e.each(function(){var s=M.of(this,arguments),t=_;fs?D.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},C(s)}).tween("zoom:zoom",function(){var r=c[0],e=c[1],a=l?l[0]:r/2,o=l?l[1]:e/2,i=D.interpolateZoom([(a-_.x)/_.k,(o-_.y)/_.k,r/_.k],[(a-t.x)/t.k,(o-t.y)/t.k,r/t.k]);return function(e){var t=i(e),n=r/t[2];this.__chart__=_={x:a-t[0]*n,y:o-t[1]*n,k:n},z(s)}}).each("interrupt.zoom",function(){O(s)}).each("end.zoom",function(){O(s)}):(this.__chart__=_,C(s),z(s),O(s))})},g.translate=function(e){return arguments.length?(_={x:+e[0],y:+e[1],k:_.k},y(),g):[_.x,_.y]},g.scale=function(e){return arguments.length?(_={x:_.x,y:_.y,k:null},A(+e),y(),g):_.k},g.scaleExtent=function(e){return arguments.length?(u=null==e?Fe:[+e[0],+e[1]],g):u},g.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],g):n},g.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],g):c},g.duration=function(e){return arguments.length?(d=+e,g):d},g.x=function(e){return arguments.length?(a=(o=e).copy(),_={x:0,y:0,k:1},g):o},g.y=function(e){return arguments.length?(i=(s=e).copy(),_={x:0,y:0,k:1},g):s},D.rebind(g,M,"on")};var Re,Ne,Fe=[0,1/0];function Be(){}function qe(e,t,n){return this instanceof qe?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof qe?new qe(e.h,e.s,e.l):ct(""+e,ut,qe):new qe(e,t,n)}(D.color=Be).prototype.toString=function(){return this.rgb()+""};var He=(D.hsl=qe).prototype=new Be;function Ve(e,t,n){var r,a;function o(e){return Math.round(255*(360<(t=e)?t-=360:t<0&&(t+=360),t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r));var t}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new at(o(e+120),o(e),o(e-120))}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.c,e.l):et(e instanceof Xe?e.l:(e=dt((e=D.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ue(e,t,n)}He.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new qe(this.h,this.s,this.l/e)},He.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new qe(this.h,this.s,e*this.l)},He.rgb=function(){return Ve(this.h,this.s,this.l)};var Ge=(D.hcl=Ue).prototype=new Be;function Ye(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Xe(n,Math.cos(e*=Le)*t,Math.sin(e)*t)}function Xe(e,t,n){return this instanceof Xe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Xe?new Xe(e.l,e.a,e.b):e instanceof Ue?Ye(e.h,e.c,e.l):dt((e=at(e)).r,e.g,e.b):new Xe(e,t,n)}Ge.brighter=function(e){return new Ue(this.h,this.c,Math.min(100,this.l+Ze*(arguments.length?e:1)))},Ge.darker=function(e){return new Ue(this.h,this.c,Math.max(0,this.l-Ze*(arguments.length?e:1)))},Ge.rgb=function(){return Ye(this.h,this.c,this.l).rgb()},D.lab=Xe;var Ze=18,We=.95047,Je=1,Qe=1.08883,$e=Xe.prototype=new Be;function Ke(e,t,n){var r=(e+16)/116,a=r+t/500,o=r-n/200;return new at(rt(3.2404542*(a=tt(a)*We)-1.5371385*(r=tt(r)*Je)-.4985314*(o=tt(o)*Qe)),rt(-.969266*a+1.8760108*r+.041556*o),rt(.0556434*a-.2040259*r+1.0572252*o))}function et(e,t,n){return 0<e?new Ue(Math.atan2(n,t)*Ce,Math.sqrt(t*t+n*n),e):new Ue(NaN,NaN,e)}function tt(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function nt(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function rt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function at(e,t,n){return this instanceof at?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof at?new at(e.r,e.g,e.b):ct(""+e,at,Ve):new at(e,t,n)}function ot(e){return new at(e>>16,e>>8&255,255&e)}function it(e){return ot(e)+""}$e.brighter=function(e){return new Xe(Math.min(100,this.l+Ze*(arguments.length?e:1)),this.a,this.b)},$e.darker=function(e){return new Xe(Math.max(0,this.l-Ze*(arguments.length?e:1)),this.a,this.b)},$e.rgb=function(){return Ke(this.l,this.a,this.b)};var st=(D.rgb=at).prototype=new Be;function lt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ct(e,t,n){var r,a,o,i=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(ht(a[0]),ht(a[1]),ht(a[2]))}return(o=pt.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(i=(3840&o)>>4,i|=i>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(i=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(i,s,l))}function ut(e,t,n){var r,a,o=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-o,l=(i+o)/2;return s?(a=l<.5?s/(i+o):s/(2-i-o),r=e==i?(t-n)/s+(t<n?6:0):t==i?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=0<l&&l<1?0:r),new qe(r,a,l)}function dt(e,t,n){var r=nt((.4124564*(e=ft(e))+.3575761*(t=ft(t))+.1804375*(n=ft(n)))/We),a=nt((.2126729*e+.7151522*t+.072175*n)/Je);return Xe(116*a-16,500*(r-a),200*(a-nt((.0193339*e+.119192*t+.9503041*n)/Qe)))}function ft(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}st.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new at(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new at(30,30,30)},st.darker=function(e){return new at((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},st.hsl=function(){return ut(this.r,this.g,this.b)},st.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var pt=D.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function gt(e){return"function"==typeof e?e:function(){return e}}function yt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),mt(e,t,r,n)}}function mt(a,o,i,e){var n,s={},l=D.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=i.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(a)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=D.event;D.event=e;try{l.progress.call(s,u)}finally{D.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(o=null==e?null:e+"",s):o},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return i=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(f(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,a,!0),null==o||"accept"in c||(c.accept=o+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=o&&u.overrideMimeType&&u.overrideMimeType(o),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},D.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}pt.forEach(function(e,t){pt.set(e,ot(t))}),D.functor=gt,D.xhr=yt(E),D.dsv=function(a,o){var t=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);function i(e,t,n){arguments.length<3&&(n=t,t=null);var r=mt(e,o,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return i.parse(e.responseText)}function l(t){return function(e){return i.parse(e.responseText,t)}}function n(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,r){var a;return i.parseRows(e,function(e,t){if(a)return a(e,t-1);var n=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");a=r?function(e,t){return r(n(e),t)}:n})},i.parseRows=function(a,e){var t,o,i={},s={},n=[],l=a.length,c=0,r=0;function u(){if(l<=c)return s;if(o)return o=!1,i;var e=c;if(34===a.charCodeAt(e)){for(var t=e;t++<l;)if(34===a.charCodeAt(t)){if(34!==a.charCodeAt(t+1))break;++t}return c=t+2,13===(n=a.charCodeAt(t+1))?(o=!0,10===a.charCodeAt(t+2)&&++c):10===n&&(o=!0),a.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=a.charCodeAt(c++)))o=!0;else if(13===n)o=!0,10===a.charCodeAt(c)&&(++c,++r);else if(n!==f)continue;return a.slice(e,c-r)}return a.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==i&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new A,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(a)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(a)})).join("\n")},i.formatRows=function(e){return e.map(n).join("\n")},i},D.csv=D.dsv(",","text/csv"),D.tsv=D.dsv("\t","text/tab-separated-values");var vt,xt,bt,_t,wt=this[L(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function kt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var a={c:e,t:n+t,n:null};return xt?xt.n=a:vt=a,xt=a,bt||(_t=clearTimeout(_t),bt=1,wt(Mt)),a}function Mt(){var e=Tt(),t=At()-e;24<t?(isFinite(t)&&(clearTimeout(_t),_t=setTimeout(Mt,t)),bt=0):(bt=1,wt(Mt))}function Tt(){for(var e=Date.now(),t=vt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function At(){for(var e,t=vt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:vt=t.n;return xt=e,n}function St(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}D.timer=function(){kt.apply(this,arguments)},D.timer.flush=function(){Tt(),At()},D.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Lt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*P(8-t));return{scale:8<t?function(e){return e/n}:function(e){return e*n},symbol:e}});D.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=D.round(e,St(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Lt[8+n/3]};var Ct=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,zt=D.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=D.round(e,St(e,t))).toFixed(Math.max(0,Math.min(20,St(e*(1+1e-15),t))))}});function Ot(e){return e+""}var jt=D.time={},Pt=Date;function Dt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Dt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){It.setUTCDate.apply(this._,arguments)},setDay:function(){It.setUTCDay.apply(this._,arguments)},setFullYear:function(){It.setUTCFullYear.apply(this._,arguments)},setHours:function(){It.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){It.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){It.setUTCMinutes.apply(this._,arguments)},setMonth:function(){It.setUTCMonth.apply(this._,arguments)},setSeconds:function(){It.setUTCSeconds.apply(this._,arguments)},setTime:function(){It.setTime.apply(this._,arguments)}};var It=Date.prototype;function Et(r,o,i){function e(e){var t=r(e),n=a(t,1);return e-t<n-e?t:n}function s(e){return o(e=r(new Pt(e-1)),1),e}function a(e,t){return o(e=new Pt(+e),t),e}function l(e,t,n){var r=s(e),a=[];if(1<n)for(;r<t;)i(r)%n||a.push(new Date(+r)),o(r,1);else for(;r<t;)a.push(new Date(+r)),o(r,1);return a}(r.floor=r).round=e,r.ceil=s,r.offset=a,r.range=l;var t=r.utc=Rt(r);return(t.floor=t).round=Rt(e),t.ceil=Rt(s),t.offset=Rt(a),t.range=function(e,t,n){try{var r=new(Pt=Dt);return r._=e,l(r,t,n)}finally{Pt=Date}},r}function Rt(r){return function(e,t){try{var n=new(Pt=Dt);return n._=e,r(n,t)._}finally{Pt=Date}}}jt.year=Et(function(e){return(e=jt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),jt.years=jt.year.range,jt.years.utc=jt.year.utc.range,jt.day=Et(function(e){var t=new Pt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),jt.days=jt.day.range,jt.days.utc=jt.day.utc.range,jt.dayOfYear=function(e){var t=jt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=jt[e]=Et(function(e){return(e=jt.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});jt[e+"s"]=t.range,jt[e+"s"].utc=t.utc.range,jt[e+"OfYear"]=function(e){var t=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(t+n)%7)/7)}}),jt.week=jt.sunday,jt.weeks=jt.sunday.range,jt.weeks.utc=jt.sunday.utc.range,jt.weekOfYear=jt.sundayOfYear;var Nt={"-":"",_:" ",0:"0"},Ft=/^\s*\d+/,Bt=/^%/;function qt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function Ht(e){return new RegExp("^(?:"+e.map(D.requote).join("|")+")","i")}function Vt(e){for(var t=new v,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ut(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Gt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Yt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zt(e,t,n){Ft.lastIndex=0;var r,a=Ft.exec(t.slice(n,n+2));return a?(e.y=(r=+a[0])+(68<r?1900:2e3),n+a[0].length):-1}function Wt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Jt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $t(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Kt(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function en(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function tn(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function nn(e,t,n){Ft.lastIndex=0;var r=Ft.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rn(e){var t=e.getTimezoneOffset(),n=0<t?"-":"+",r=P(t)/60|0,a=P(t)%60;return n+qt(r,"0",2)+qt(a,"0",2)}function an(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function on(r){for(var e=r.length,t=-1;++t<e;)r[t][0]=this(r[t][0]);return function(e){for(var t=0,n=r[t];!n[1](e);)n=r[++t];return n[0](e)}}D.locale=function(e){return{numberFormat:(t=e,M=t.decimal,s=t.thousands,l=t.grouping,r=t.currency,T=l&&s?function(e,t){for(var n=e.length,r=[],a=0,o=l[0],i=0;0<n&&0<o&&(t<i+o+1&&(o=Math.max(1,t-i)),r.push(e.substring(n-=o,n+o)),!((i+=o+1)>t));)o=l[a=(a+1)%l.length];return r.reverse().join(s)}:E,function(e){var t=Ct.exec(e),u=t[1]||" ",d=t[2]||">",f=t[3]||"-",n=t[4]||"",h=t[5],p=+t[6],g=t[7],y=t[8],m=t[9],v=1,x="",b="",_=!1,w=!0;switch(y&&(y=+y.substring(1)),(h||"0"===u&&"="===d)&&(h=u="0",d="="),m){case"n":g=!0,m="g";break;case"%":v=100,b="%",m="f";break;case"p":v=100,b="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(x="0"+m.toLowerCase());case"c":w=!1;case"d":_=!0,y=0;break;case"s":v=-1,m="r"}"$"===n&&(x=r[0],b=r[1]),"r"!=m||y||(m="g"),null!=y&&("g"==m?y=Math.max(1,Math.min(21,y)):"e"!=m&&"f"!=m||(y=Math.max(0,Math.min(20,y)))),m=zt.get(m)||Ot;var k=h&&g;return function(e){var t=b;if(_&&e%1)return"";var n=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===f?"":f;if(v<0){var r=D.formatPrefix(e,y);e=r.scale(e),t=r.symbol+b}else e*=v;var a,o,i=(e=m(e,y)).lastIndexOf(".");if(i<0){var s=w?e.lastIndexOf("e"):-1;s<0?(a=e,o=""):(a=e.substring(0,s),o=e.substring(s))}else a=e.substring(0,i),o=M+e.substring(i+1);!h&&g&&(a=T(a,1/0));var l=x.length+a.length+o.length+(k?0:n.length),c=l<p?new Array(l=p-l+1).join(u):"";return k&&(a=T(c+a,c.length?p-o.length:1/0)),n+=x,e=a+o,("<"===d?n+e+c:">"===d?c+n+e:"^"===d?c.substring(0,l>>=1)+n+e+c.substring(l):n+(k?e:c+e))+t}}),timeFormat:function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){for(var t,n,r,a=[],o=-1,i=0;++o<l;)37===s.charCodeAt(o)&&(a.push(s.slice(i,o)),null!=(n=Nt[t=s.charAt(++o)])&&(t=s.charAt(++o)),(r=b[t])&&(t=r(e,null==n?"e"===t?" ":"0":n)),a.push(t),i=o+1);return a.push(s.slice(i,o)),a.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,s,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var n=null!=t.Z&&Pt!==Dt,r=new(n?Dt:Pt);return"j"in t?r.setFullYear(t.y,0,t.j):"W"in t||"U"in t?("w"in t||(t.w="W"in t?1:0),r.setFullYear(t.y,0,1),r.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(r.getDay()+5)%7:t.w+7*t.U-(r.getDay()+6)%7)):r.setFullYear(t.y,t.m,t.d),r.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),n?r._:r},e.toString=function(){return s},e}function u(e,t,n,r){for(var a,o,i,s=0,l=t.length,c=n.length;s<l;){if(c<=r)return-1;if(37===(a=t.charCodeAt(s++))){if(i=t.charAt(s++),!(o=_[i in Nt?t.charAt(s++):i])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.multi=(c.utc=function(e){var n=c(e);function t(e){try{var t=new(Pt=Dt);return t._=e,n(t)}finally{Pt=Date}}return t.parse=function(e){try{Pt=Dt;var t=n.parse(e);return t&&t._}finally{Pt=Date}},t.toString=n.toString,t}).multi=on;var d=D.map(),f=Ht(o),h=Vt(o),p=Ht(i),g=Vt(i),y=Ht(s),m=Vt(s),v=Ht(l),x=Vt(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return qt(e.getDate(),t,2)},e:function(e,t){return qt(e.getDate(),t,2)},H:function(e,t){return qt(e.getHours(),t,2)},I:function(e,t){return qt(e.getHours()%12||12,t,2)},j:function(e,t){return qt(1+jt.dayOfYear(e),t,3)},L:function(e,t){return qt(e.getMilliseconds(),t,3)},m:function(e,t){return qt(e.getMonth()+1,t,2)},M:function(e,t){return qt(e.getMinutes(),t,2)},p:function(e){return a[+(12<=e.getHours())]},S:function(e,t){return qt(e.getSeconds(),t,2)},U:function(e,t){return qt(jt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return qt(jt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return qt(e.getFullYear()%100,t,2)},Y:function(e,t){return qt(e.getFullYear()%1e4,t,4)},Z:rn,"%":function(){return"%"}},_={a:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){f.lastIndex=0;var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return u(e,b.c.toString(),t,n)},d:Qt,e:Qt,H:Kt,I:Kt,j:$t,L:nn,m:Jt,M:en,p:function(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:tn,U:Gt,w:Ut,W:Yt,x:function(e,t,n){return u(e,b.x.toString(),t,n)},X:function(e,t,n){return u(e,b.X.toString(),t,n)},y:Zt,Y:Xt,Z:Wt,"%":an};return c}(e)};var t,M,s,l,r,T};var sn=D.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}D.format=sn.numberFormat,D.geo={},ln.prototype={s:0,t:0,add:function(e){un(e,this.t,cn),un(cn.s,this.s,this),this.s?this.t+=cn.t:this.s=cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cn=new ln;function un(e,t,n){var r=n.s=e+t,a=r-e,o=r-a;n.t=e-o+(t-a)}function dn(e,t){e&&hn.hasOwnProperty(e.type)&&hn[e.type](e,t)}D.geo.stream=function(e,t){e&&fn.hasOwnProperty(e.type)?fn[e.type](e,t):dn(e,t)};var fn={Feature:function(e,t){dn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)dn(n[r].geometry,t)}},hn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){pn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)pn(n[r],t,0)},Polygon:function(e,t){gn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)gn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)dn(n[r],t)}};function pn(e,t,n){var r,a=-1,o=e.length-n;for(t.lineStart();++a<o;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function gn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)pn(e[n],t,1);t.polygonEnd()}D.geo.area=function(e){return yn=0,D.geo.stream(e,Cn),yn};var yn,mn,vn,xn,bn,_n,wn,kn,Mn,Tn,An,Sn,Ln=new ln,Cn={sphere:function(){yn+=4*Me},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Ln.reset(),Cn.lineStart=zn},polygonEnd:function(){var e=2*Ln;yn+=e<0?4*Me+e:e,Cn.lineStart=Cn.lineEnd=Cn.point=z}};function zn(){var n,r,u,d,f;function a(e,t){t=t*Le/2+Me/4;var n=(e*=Le)-u,r=0<=n?1:-1,a=r*n,o=Math.cos(t),i=Math.sin(t),s=f*i,l=d*o+s*Math.cos(a),c=s*r*Math.sin(a);Ln.add(Math.atan2(c,l)),u=e,d=o,f=i}Cn.point=function(e,t){Cn.point=a,u=(n=e)*Le,d=Math.cos(t=(r=t)*Le/2+Me/4),f=Math.sin(t)},Cn.lineEnd=function(){a(n,r)}}function On(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Dn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function In(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function En(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Rn(e){return[Math.atan2(e[1],e[0]),Pe(e[2])]}function Nn(e,t){return P(e[0]-t[0])<we&&P(e[1]-t[1])<we}D.geo.bounds=function(){var u,d,f,h,p,r,a,g,o,l,c,y={point:m,lineStart:e,lineEnd:t,polygonStart:function(){y.point=n,y.lineStart=s,y.lineEnd=v,o=0,Cn.polygonStart()},polygonEnd:function(){Cn.polygonEnd(),y.point=m,y.lineStart=e,y.lineEnd=t,Ln<0?(u=-(f=180),d=-(h=90)):we<o?h=90:o<-we&&(d=-90),c[0]=u,c[1]=f}};function m(e,t){l.push(c=[u=e,f=e]),t<d&&(d=t),h<t&&(h=t)}function i(e,t){var n=On([e*Le,t*Le]);if(g){var r=Pn(g,n),a=Pn([r[1],-r[0],0],r);En(a),a=Rn(a);var o=e-p,i=0<o?1:-1,s=a[0]*Ce*i,l=180<P(o);if(l^(i*p<s&&s<i*e)){var c=a[1]*Ce;h<c&&(h=c)}else if(l^(i*p<(s=(s+360)%360-180)&&s<i*e)){(c=-a[1]*Ce)<d&&(d=c)}else t<d&&(d=t),h<t&&(h=t);l?e<p?x(u,e)>x(u,f)&&(f=e):x(e,f)>x(u,f)&&(u=e):u<=f?(e<u&&(u=e),f<e&&(f=e)):p<e?x(u,e)>x(u,f)&&(f=e):x(e,f)>x(u,f)&&(u=e)}else m(e,t);g=n,p=e}function e(){y.point=i}function t(){c[0]=u,c[1]=f,y.point=m,g=null}function n(e,t){if(g){var n=e-p;o+=180<P(n)?n+(0<n?360:-360):n}else r=e,a=t;Cn.point(e,t),i(e,t)}function s(){Cn.lineStart()}function v(){n(r,a),Cn.lineEnd(),P(o)>we&&(u=-(f=180)),c[0]=u,c[1]=f,g=null}function x(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function _(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){if(h=f=-(u=d=1/0),l=[],D.geo.stream(e,y),a=l.length){l.sort(b);for(var t=1,n=[s=l[0]];t<a;++t)_((o=l[t])[0],s)||_(o[1],s)?(x(s[0],o[1])>x(s[0],s[1])&&(s[1]=o[1]),x(o[0],s[1])>x(s[0],s[1])&&(s[0]=o[0])):n.push(s=o);for(var r,a,o,i=-1/0,s=(t=0,n[a=n.length-1]);t<=a;s=o,++t)o=n[t],(r=x(s[1],o[0]))>i&&(i=r,u=o[0],f=s[1])}return l=c=null,u===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[u,d],[f,h]]}}(),D.geo.centroid=function(e){mn=vn=xn=bn=_n=wn=kn=Mn=Tn=An=Sn=0,D.geo.stream(e,Fn);var t=Tn,n=An,r=Sn,a=t*t+n*n+r*r;return a<ke&&(t=wn,n=kn,r=Mn,vn<we&&(t=xn,n=bn,r=_n),(a=t*t+n*n+r*r)<ke)?[NaN,NaN]:[Math.atan2(n,t)*Ce,Pe(r/Math.sqrt(a))*Ce]};var Fn={sphere:z,point:Bn,lineStart:Hn,lineEnd:Vn,polygonStart:function(){Fn.lineStart=Un},polygonEnd:function(){Fn.lineStart=Hn}};function Bn(e,t){e*=Le;var n=Math.cos(t*=Le);qn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function qn(e,t,n){xn+=(e-xn)/++mn,bn+=(t-bn)/mn,_n+=(n-_n)/mn}function Hn(){var s,l,c;function r(e,t){e*=Le;var n=Math.cos(t*=Le),r=n*Math.cos(e),a=n*Math.sin(e),o=Math.sin(t),i=Math.atan2(Math.sqrt((i=l*o-c*a)*i+(i=c*r-s*o)*i+(i=s*a-l*r)*i),s*r+l*a+c*o);vn+=i,wn+=i*(s+(s=r)),kn+=i*(l+(l=a)),Mn+=i*(c+(c=o)),qn(s,l,c)}Fn.point=function(e,t){e*=Le;var n=Math.cos(t*=Le);s=n*Math.cos(e),l=n*Math.sin(e),c=Math.sin(t),Fn.point=r,qn(s,l,c)}}function Vn(){Fn.point=Bn}function Un(){var r,a,h,p,g;function o(e,t){e*=Le;var n=Math.cos(t*=Le),r=n*Math.cos(e),a=n*Math.sin(e),o=Math.sin(t),i=p*o-g*a,s=g*r-h*o,l=h*a-p*r,c=Math.sqrt(i*i+s*s+l*l),u=h*r+p*a+g*o,d=c&&-je(u)/c,f=Math.atan2(c,u);Tn+=d*i,An+=d*s,Sn+=d*l,vn+=f,wn+=f*(h+(h=r)),kn+=f*(p+(p=a)),Mn+=f*(g+(g=o)),qn(h,p,g)}Fn.point=function(e,t){r=e,a=t,Fn.point=o,e*=Le;var n=Math.cos(t*=Le);h=n*Math.cos(e),p=n*Math.sin(e),g=Math.sin(t),qn(h,p,g)},Fn.lineEnd=function(){o(r,a),Fn.lineEnd=Vn,Fn.point=Bn}}function Gn(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function Yn(){return!0}function Xn(e,t,n,r,s){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Nn(n,r)){s.lineStart();for(var a=0;a<t;++a)s.point((n=e[a])[0],n[1]);s.lineEnd()}else{var o=new Wn(n,e,null,!0),i=new Wn(n,null,o,!1);o.o=i,l.push(o),c.push(i),i=new Wn(r,null,o=new Wn(r,e,null,!1),!0),o.o=i,l.push(o),c.push(i)}}}),c.sort(t),Zn(l),Zn(c),l.length){for(var a=0,o=n,i=c.length;a<i;++a)c[a].e=o=!o;for(var u,d,f=l[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;u=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,i=u.length;a<i;++a)s.point((d=u[a])[0],d[1]);else r(h.x,h.n.x,1,s);h=h.n}else{if(p)for(a=(u=h.p.z).length-1;0<=a;--a)s.point((d=u[a])[0],d[1]);else r(h.x,h.p.x,-1,s);h=h.p}u=(h=h.o).z,p=!p}while(!h.v);s.lineEnd()}}}function Zn(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function Wn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jn(v,x,b,_){return function(r,i){var s,a=x(i),t=r.invert(_[0],_[1]),n={point:o,lineStart:l,lineEnd:c,polygonStart:function(){n.point=g,n.lineStart=y,n.lineEnd=m,s=[],u=[]},polygonEnd:function(){n.point=o,n.lineStart=l,n.lineEnd=c,s=D.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],o=0,i=0;Ln.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],f=d[0],h=d[1]/2+Me/4,p=Math.sin(h),g=Math.cos(h),y=1;;){y===u&&(y=0);var m=(e=c[y])[0],v=e[1]/2+Me/4,x=Math.sin(v),b=Math.cos(v),_=m-f,w=0<=_?1:-1,k=w*_,M=Me<k,T=p*x;if(Ln.add(Math.atan2(T*w*Math.sin(k),g*b+T*Math.cos(k))),o+=M?_+w*Te:_,M^n<=f^n<=m){var A=Pn(On(d),On(e));En(A);var S=Pn(a,A);En(S);var L=(M^0<=_?-1:1)*Pe(S[2]);(L<r||r===L&&(A[0]||A[1]))&&(i+=M^0<=_?1:-1)}if(!y++)break;f=m,p=x,g=b,d=e}}return(o<-we||o<we&&Ln<-we)^1&i}(t,u);s.length?(p||(i.polygonStart(),p=!0),Xn(s,Kn,e,b,i)):e&&(p||(i.polygonStart(),p=!0),i.lineStart(),b(null,null,1,i),i.lineEnd()),p&&(i.polygonEnd(),p=!1),s=u=null},sphere:function(){i.polygonStart(),i.lineStart(),b(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function o(e,t){var n=r(e,t);v(e=n[0],t=n[1])&&i.point(e,t)}function e(e,t){var n=r(e,t);a.point(n[0],n[1])}function l(){n.point=e,a.lineStart()}function c(){n.point=o,a.lineEnd()}var u,d,f=$n(),h=x(f),p=!1;function g(e,t){d.push([e,t]);var n=r(e,t);h.point(n[0],n[1])}function y(){h.lineStart(),d=[]}function m(){g(d[0][0],d[0][1]),h.lineEnd();var e,t=h.clean(),n=f.buffer(),r=n.length;if(d.pop(),u.push(d),d=null,r)if(1&t){var a,o=-1;if(0<(r=(e=n[0]).length-1)){for(p||(i.polygonStart(),p=!0),i.lineStart();++o<r;)i.point((a=e[o])[0],a[1]);i.lineEnd()}}else 1<r&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Qn))}return n}}function Qn(e){return 1<e.length}function $n(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:z,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function Kn(e,t){return((e=e.x)[0]<0?e[1]-Se-we:Se-e[1])-((t=t.x)[0]<0?t[1]-Se-we:Se-t[1])}var er=Jn(Yn,function(d){var f,h=NaN,p=NaN,g=NaN;return{lineStart:function(){d.lineStart(),f=1},point:function(e,t){var n,r,a,o,i,s,l,c=0<e?Me:-Me,u=P(e-h);P(u-Me)<we?(d.point(h,p=0<(p+t)/2?Se:-Se),d.point(g,p),d.lineEnd(),d.lineStart(),d.point(c,p),d.point(e,p),f=0):g!==c&&Me<=u&&(P(h-g)<we&&(h-=g*we),P(e-c)<we&&(e-=c*we),n=h,r=p,a=e,o=t,l=Math.sin(n-a),p=P(l)>we?Math.atan((Math.sin(r)*(s=Math.cos(o))*Math.sin(a)-Math.sin(o)*(i=Math.cos(r))*Math.sin(n))/(i*s*l)):(r+o)/2,d.point(g,p),d.lineEnd(),d.lineStart(),d.point(c,p),f=0),d.point(h=e,p=t),g=c},lineEnd:function(){d.lineEnd(),h=p=NaN},clean:function(){return 2-f}}},function(e,t,n,r){var a;if(null==e)a=n*Se,r.point(-Me,a),r.point(0,a),r.point(Me,a),r.point(Me,0),r.point(Me,-a),r.point(0,-a),r.point(-Me,-a),r.point(-Me,0),r.point(-Me,a);else if(P(e[0]-t[0])>we){var o=e[0]<t[0]?Me:-Me;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(t[0],t[1])},[-Me,-Me/2]);function tr(u,d,f,h){return function(e){var t,n=e.a,r=e.b,a=n.x,o=n.y,i=0,s=1,l=r.x-a,c=r.y-o;if(t=u-a,l||!(0<t)){if(t/=l,l<0){if(t<i)return;t<s&&(s=t)}else if(0<l){if(s<t)return;i<t&&(i=t)}if(t=f-a,l||!(t<0)){if(t/=l,l<0){if(s<t)return;i<t&&(i=t)}else if(0<l){if(t<i)return;t<s&&(s=t)}if(t=d-o,c||!(0<t)){if(t/=c,c<0){if(t<i)return;t<s&&(s=t)}else if(0<c){if(s<t)return;i<t&&(i=t)}if(t=h-o,c||!(t<0)){if(t/=c,c<0){if(s<t)return;i<t&&(i=t)}else if(0<c){if(t<i)return;t<s&&(s=t)}return 0<i&&(e.a={x:a+i*l,y:o+i*c}),s<1&&(e.b={x:a+s*l,y:o+s*c}),e}}}}}}var nr=1e9;function rr(b,_,w,k){return function(a){var r,u,o,i,s,l,c,d,f,h,p,g=a,e=$n(),y=tr(b,_,w,k),t={point:n,lineStart:function(){t.point=x,u&&u.push(o=[]);h=!0,f=!1,c=d=NaN},lineEnd:function(){r&&(x(i,s),l&&f&&e.rejoin(),r.push(e.buffer()));t.point=n,f&&a.lineEnd()},polygonStart:function(){a=e,r=[],u=[],p=!0},polygonEnd:function(){a=g,r=D.merge(r);var e=function(e){for(var t=0,n=u.length,r=e[1],a=0;a<n;++a)for(var o,i=1,s=u[a],l=s.length,c=s[0];i<l;++i)o=s[i],c[1]<=r?o[1]>r&&0<Oe(c,o,e)&&++t:o[1]<=r&&Oe(c,o,e)<0&&--t,c=o;return 0!==t}([b,k]),t=p&&e,n=r.length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),m(null,null,1,a),a.lineEnd()),n&&Xn(r,T,e,m,a),a.polygonEnd()),r=u=o=null}};function m(e,t,n,r){var a=0,o=0;if(null==e||(a=M(e,n))!==(o=M(t,n))||A(e,t)<0^0<n)for(;r.point(0===a||3===a?b:w,1<a?k:_),(a=(a+n+4)%4)!==o;);else r.point(t[0],t[1])}function v(e,t){return b<=e&&e<=w&&_<=t&&t<=k}function n(e,t){v(e,t)&&a.point(e,t)}function x(e,t){var n=v(e=Math.max(-nr,Math.min(nr,e)),t=Math.max(-nr,Math.min(nr,t)));if(u&&o.push([e,t]),h)i=e,s=t,h=!1,(l=n)&&(a.lineStart(),a.point(e,t));else if(n&&f)a.point(e,t);else{var r={a:{x:c,y:d},b:{x:e,y:t}};y(r)?(f||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),p=!1):n&&(a.lineStart(),a.point(e,t),p=!1)}c=e,d=t,f=n}return t};function M(e,t){return P(e[0]-b)<we?0<t?0:3:P(e[0]-w)<we?0<t?2:1:P(e[1]-_)<we?0<t?1:0:0<t?3:2}function T(e,t){return A(e.x,t.x)}function A(e,t){var n=M(e,1),r=M(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function ar(e){var t=0,n=Me/3,r=Lr(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Me/180,n=e[1]*Me/180):[t/Me*180,n/Me*180]},a}function or(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),o=Math.sqrt(a)/r;function i(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}return i.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,Pe((a-(e*e+n*n)*r*r)/(2*r))]},i}D.geo.clipExtent=function(){var t,n,r,a,o,i,s={stream:function(e){return o&&(o.valid=!1),(o=i(e)).valid=!0,o},extent:function(e){return arguments.length?(i=rr(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),o&&(o.valid=!1,o=null),s):[[t,n],[r,a]]}};return s.extent([[0,0],[960,500]])},(D.geo.conicEqualArea=function(){return ar(or)}).raw=or,D.geo.albers=function(){return D.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},D.geo.albersUsa=function(){var r,a,o,i,s=D.geo.albers(),l=D.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=D.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){r=[e,t]}};function d(e){var t=e[0],n=e[1];return r=null,a(t,n),r||(o(t,n),r)||i(t,n),r}return d.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(.12<=a&&a<.234&&-.425<=r&&r<-.214?l:.166<=a&&a<.234&&-.214<=r&&r<-.115?c:s).invert(e)},d.stream=function(e){var n=s.stream(e),r=l.stream(e),a=c.stream(e);return{point:function(e,t){n.point(e,t),r.point(e,t),a.point(e,t)},sphere:function(){n.sphere(),r.sphere(),a.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),a.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),a.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),a.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),a.polygonEnd()}}},d.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),c.precision(e),d):s.precision()},d.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),c.scale(e),d.translate(s.translate())):s.scale()},d.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),n=+e[0],r=+e[1];return a=s.translate(e).clipExtent([[n-.455*t,r-.238*t],[n+.455*t,r+.238*t]]).stream(u).point,o=l.translate([n-.307*t,r+.201*t]).clipExtent([[n-.425*t+we,r+.12*t+we],[n-.214*t-we,r+.234*t-we]]).stream(u).point,i=c.translate([n-.205*t,r+.212*t]).clipExtent([[n-.214*t+we,r+.166*t+we],[n-.115*t-we,r+.234*t-we]]).stream(u).point,d},d.scale(1070)};var ir,sr,lr,cr,ur,dr,fr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){sr=0,fr.lineStart=hr},polygonEnd:function(){fr.lineStart=fr.lineEnd=fr.point=z,ir+=P(sr/2)}};function hr(){var n,r,a,o;function i(e,t){sr+=o*e-a*t,a=e,o=t}fr.point=function(e,t){fr.point=i,n=a=e,r=o=t},fr.lineEnd=function(){i(n,r)}}var pr={point:function(e,t){e<lr&&(lr=e);ur<e&&(ur=e);t<cr&&(cr=t);dr<t&&(dr=t)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function gr(){var n=yr(4.5),r=[],a={point:e,lineStart:function(){a.point=t},lineEnd:i,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=i,a.point=e},pointRadius:function(e){return n=yr(e),a},result:function(){if(r.length){var e=r.join("");return r=[],e}}};function e(e,t){r.push("M",e,",",t,n)}function t(e,t){r.push("M",e,",",t),a.point=o}function o(e,t){r.push("L",e,",",t)}function i(){a.point=e}function s(){r.push("Z")}return a}function yr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var mr,vr={point:xr,lineStart:br,lineEnd:_r,polygonStart:function(){vr.lineStart=wr},polygonEnd:function(){vr.point=xr,vr.lineStart=br,vr.lineEnd=_r}};function xr(e,t){xn+=e,bn+=t,++_n}function br(){var o,i;function n(e,t){var n=e-o,r=t-i,a=Math.sqrt(n*n+r*r);wn+=a*(o+e)/2,kn+=a*(i+t)/2,Mn+=a,xr(o=e,i=t)}vr.point=function(e,t){vr.point=n,xr(o=e,i=t)}}function _r(){vr.point=xr}function wr(){var n,r,o,i;function a(e,t){var n=e-o,r=t-i,a=Math.sqrt(n*n+r*r);wn+=a*(o+e)/2,kn+=a*(i+t)/2,Mn+=a,Tn+=(a=i*e-o*t)*(o+e),An+=a*(i+t),Sn+=3*a,xr(o=e,i=t)}vr.point=function(e,t){vr.point=a,xr(n=o=e,r=i=t)},vr.lineEnd=function(){a(n,r)}}function kr(n){var r=4.5,a={point:e,lineStart:function(){a.point=t},lineEnd:i,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=i,a.point=e},pointRadius:function(e){return r=e,a},result:z};function e(e,t){n.moveTo(e+r,t),n.arc(e,t,r,0,Te)}function t(e,t){n.moveTo(e,t),a.point=o}function o(e,t){n.lineTo(e,t)}function i(){a.point=e}function s(){n.closePath()}return a}function Mr(C){var z=.5,O=Math.cos(30*Le),_=16;function t(e){return(_?function(a){var n,r,o,i,s,l,c,u,d,f,h,p,g={point:e,lineStart:t,lineEnd:m,polygonStart:function(){a.polygonStart(),g.lineStart=v},polygonEnd:function(){a.polygonEnd(),g.lineStart=t}};function e(e,t){e=C(e,t),a.point(e[0],e[1])}function t(){u=NaN,g.point=y,a.lineStart()}function y(e,t){var n=On([e,t]),r=C(e,t);j(u,d,c,f,h,p,u=r[0],d=r[1],c=e,f=n[0],h=n[1],p=n[2],_,a),a.point(u,d)}function m(){g.point=e,a.lineEnd()}function v(){t(),g.point=x,g.lineEnd=b}function x(e,t){y(n=e,t),r=u,o=d,i=f,s=h,l=p,g.point=y}function b(){j(u,d,c,f,h,p,r,o,n,i,s,l,_,a),(g.lineEnd=m)()}return g}:function(n){return Ar(n,function(e,t){e=C(e,t),n.point(e[0],e[1])})})(e)}function j(e,t,n,r,a,o,i,s,l,c,u,d,f,h){var p=i-e,g=s-t,y=p*p+g*g;if(4*z<y&&f--){var m=r+c,v=a+u,x=o+d,b=Math.sqrt(m*m+v*v+x*x),_=Math.asin(x/=b),w=P(P(x)-1)<we||P(n-l)<we?(n+l)/2:Math.atan2(v,m),k=C(w,_),M=k[0],T=k[1],A=M-e,S=T-t,L=g*A-p*S;(z<L*L/y||.3<P((p*A+g*S)/y-.5)||r*c+a*u+o*d<O)&&(j(e,t,n,r,a,o,M,T,w,m/=b,v/=b,x,f,h),h.point(M,T),j(M,T,w,m,v,x,i,s,l,c,u,d,f,h))}}return t.precision=function(e){return arguments.length?(_=0<(z=e*e)&&16,t):Math.sqrt(z)},t}function Tr(e){this.stream=e}function Ar(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Sr(e){return Lr(function(){return e})()}function Lr(e){var n,t,r,a,o,i,s=Mr(function(e,t){return[(e=n(e,t))[0]*l+a,o-e[1]*l]}),l=150,c=480,u=250,d=0,f=0,h=0,p=0,g=0,y=er,m=E,v=null,x=null;function b(e){return[(e=r(e[0]*Le,e[1]*Le))[0]*l+a,o-e[1]*l]}function _(e){return(e=r.invert((e[0]-a)/l,(o-e[1])/l))&&[e[0]*Ce,e[1]*Ce]}function w(){r=Gn(t=jr(h,p,g),n);var e=n(d,f);return a=c-e[0]*l,o=u+e[1]*l,k()}function k(){return i&&(i.valid=!1,i=null),b}return b.stream=function(e){return i&&(i.valid=!1),(i=Cr(y(t,s(m(e))))).valid=!0,i},b.clipAngle=function(e){return arguments.length?(y=null==e?(v=e,er):function(a){var A=Math.cos(a),h=0<A,p=P(A)>we;return Jn(g,function(s){var l,c,u,d,f;return{lineStart:function(){d=u=!1,f=1},point:function(e,t){var n,r=[e,t],a=g(e,t),o=h?a?0:m(e,t):a?m(e+(e<0?Me:-Me),t):0;if(!l&&(d=u=a)&&s.lineStart(),a!==u&&(n=y(l,r),(Nn(l,n)||Nn(r,n))&&(r[0]+=we,r[1]+=we,a=g(r[0],r[1]))),a!==u)f=0,a?(s.lineStart(),n=y(r,l),s.point(n[0],n[1])):(n=y(l,r),s.point(n[0],n[1]),s.lineEnd()),l=n;else if(p&&l&&h^a){var i;o&c||!(i=y(r,l,!0))||(f=0,h?(s.lineStart(),s.point(i[0][0],i[0][1]),s.point(i[1][0],i[1][1]),s.lineEnd()):(s.point(i[1][0],i[1][1]),s.lineEnd(),s.lineStart(),s.point(i[0][0],i[0][1])))}!a||l&&Nn(l,r)||s.point(r[0],r[1]),l=r,u=a,c=o},lineEnd:function(){u&&s.lineEnd(),l=null},clean:function(){return f|(d&&u)<<1}}},Er(a,6*Le),h?[0,-a]:[-Me,a-Me]);function g(e,t){return Math.cos(e)*Math.cos(t)>A}function y(e,t,n){var r=[1,0,0],a=Pn(On(e),On(t)),o=jn(a,a),i=a[0],s=o-i*i;if(!s)return!n&&e;var l=A*o/s,c=-A*i/s,u=Pn(r,a),d=In(r,l);Dn(d,In(a,c));var f=u,h=jn(d,f),p=jn(f,f),g=h*h-p*(jn(d,d)-1);if(!(g<0)){var y=Math.sqrt(g),m=In(f,(-h-y)/p);if(Dn(m,d),m=Rn(m),!n)return m;var v,x=e[0],b=t[0],_=e[1],w=t[1];b<x&&(v=x,x=b,b=v);var k=b-x,M=P(k-Me)<we;if(!M&&w<_&&(v=_,_=w,w=v),M||k<we?M?0<_+w^m[1]<(P(m[0]-x)<we?_:w):_<=m[1]&&m[1]<=w:Me<k^(x<=m[0]&&m[0]<=b)){var T=In(f,(-h+y)/p);return Dn(T,d),[m,Rn(T)]}}}function m(e,t){var n=h?a:Me-a,r=0;return e<-n?r|=1:n<e&&(r|=2),t<-n?r|=4:n<t&&(r|=8),r}}((v=+e)*Le),k()):v},b.clipExtent=function(e){return arguments.length?(m=(x=e)?rr(e[0][0],e[0][1],e[1][0],e[1][1]):E,k()):x},b.scale=function(e){return arguments.length?(l=+e,w()):l},b.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],w()):[c,u]},b.center=function(e){return arguments.length?(d=e[0]%360*Le,f=e[1]%360*Le,w()):[d*Ce,f*Ce]},b.rotate=function(e){return arguments.length?(h=e[0]%360*Le,p=e[1]%360*Le,g=2<e.length?e[2]%360*Le:0,w()):[h*Ce,p*Ce,g*Ce]},D.rebind(b,s,"precision"),function(){return n=e.apply(this,arguments),b.invert=n.invert&&_,w()}}function Cr(n){return Ar(n,function(e,t){n.point(e*Le,t*Le)})}function zr(e,t){return[e,t]}function Or(e,t){return[Me<e?e-Te:e<-Me?e+Te:e,t]}function jr(e,t,n){return e?t||n?Gn(Dr(e),Ir(t,n)):Dr(e):t||n?Ir(t,n):Or}function Pr(n){return function(e,t){return[Me<(e+=n)?e-Te:e<-Me?e+Te:e,t]}}function Dr(e){var t=Pr(e);return t.invert=Pr(-e),t}function Ir(e,t){var s=Math.cos(e),l=Math.sin(e),c=Math.cos(t),u=Math.sin(t);function n(e,t){var n=Math.cos(t),r=Math.cos(e)*n,a=Math.sin(e)*n,o=Math.sin(t),i=o*s+r*l;return[Math.atan2(a*c-i*u,r*s-o*l),Pe(i*c+a*u)]}return n.invert=function(e,t){var n=Math.cos(t),r=Math.cos(e)*n,a=Math.sin(e)*n,o=Math.sin(t),i=o*c-a*u;return[Math.atan2(a*c+o*u,r*s+i*l),Pe(i*s-r*l)]},n}function Er(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,n,r){var a=n*l;null!=e?(e=Rr(c,e),t=Rr(c,t),(0<n?e<t:t<e)&&(e+=n*Te)):(e=s+n*Te,t=s-.5*a);for(var o,i=e;0<n?t<i:i<t;i-=a)r.point((o=Rn([c,-u*Math.cos(i),-u*Math.sin(i)]))[0],o[1])}}function Rr(e,t){var n=On(t);n[0]-=e,En(n);var r=je(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-we)%(2*Math.PI)}function Nr(e,t,n){var r=D.range(e,t-we,n).concat(t);return function(t){return r.map(function(e){return[t,e]})}}function Fr(e,t,n){var r=D.range(e,t-we,n).concat(t);return function(t){return r.map(function(e){return[e,t]})}}function Br(e){return e.source}function qr(e){return e.target}D.geo.path=function(){var r,t,a,n,o,i=4.5;function s(e){return e&&("function"==typeof i&&n.pointRadius(+i.apply(this,arguments)),o&&o.valid||(o=a(n)),D.geo.stream(e,o)),n.result()}function l(){return o=null,s}return s.area=function(e){return ir=0,D.geo.stream(e,a(fr)),ir},s.centroid=function(e){return xn=bn=_n=wn=kn=Mn=Tn=An=Sn=0,D.geo.stream(e,a(vr)),Sn?[Tn/Sn,An/Sn]:Mn?[wn/Mn,kn/Mn]:_n?[xn/_n,bn/_n]:[NaN,NaN]},s.bounds=function(e){return ur=dr=-(lr=cr=1/0),D.geo.stream(e,a(pr)),[[lr,cr],[ur,dr]]},s.projection=function(e){return arguments.length?(a=(r=e)?e.stream||(n=e,t=Mr(function(e,t){return n([e*Ce,t*Ce])}),function(e){return Cr(t(e))}):E,l()):r;var n,t},s.context=function(e){return arguments.length?(n=null==(t=e)?new gr:new kr(e),"function"!=typeof i&&n.pointRadius(i),l()):t},s.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(n.pointRadius(+e),+e),s):i},s.projection(D.geo.albersUsa()).context(null)},D.geo.transform=function(r){return{stream:function(e){var t=new Tr(e);for(var n in r)t[n]=r[n];return t}}},Tr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},D.geo.projection=Sr,D.geo.projectionMutator=Lr,(D.geo.equirectangular=function(){return Sr(zr)}).raw=zr.invert=zr,D.geo.rotation=function(t){function e(e){return(e=t(e[0]*Le,e[1]*Le))[0]*=Ce,e[1]*=Ce,e}return t=jr(t[0]%360*Le,t[1]*Le,2<t.length?t[2]*Le:0),e.invert=function(e){return(e=t.invert(e[0]*Le,e[1]*Le))[0]*=Ce,e[1]*=Ce,e},e},Or.invert=zr,D.geo.circle=function(){var t,a,o=[0,0],n=6;function r(){var e="function"==typeof o?o.apply(this,arguments):o,n=jr(-e[0]*Le,-e[1]*Le,0).invert,r=[];return a(null,null,1,{point:function(e,t){r.push(e=n(e,t)),e[0]*=Ce,e[1]*=Ce}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(e){return arguments.length?(o=e,r):o},r.angle=function(e){return arguments.length?(a=Er((t=+e)*Le,n*Le),r):t},r.precision=function(e){return arguments.length?(a=Er(t*Le,(n=+e)*Le),r):n},r.angle(90)},D.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Le,a=e[1]*Le,o=t[1]*Le,i=Math.sin(r),s=Math.cos(r),l=Math.sin(a),c=Math.cos(a),u=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*i)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},D.geo.graticule=function(){var t,n,r,a,o,i,s,l,c,u,d,f,h=10,p=h,g=90,y=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:e()}}function e(){return D.range(Math.ceil(a/g)*g,r,g).map(d).concat(D.range(Math.ceil(l/y)*y,s,y).map(f)).concat(D.range(Math.ceil(n/h)*h,t,h).filter(function(e){return P(e%g)>we}).map(c)).concat(D.range(Math.ceil(i/p)*p,o,p).filter(function(e){return P(e%y)>we}).map(u))}return v.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},v.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(s).slice(1),d(r).reverse().slice(1),f(l).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.majorExtent(e).minorExtent(e):v.minorExtent()},v.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],r<a&&(e=a,a=r,r=e),s<l&&(e=l,l=s,s=e),v.precision(m)):[[a,l],[r,s]]},v.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],i=+e[0][1],o=+e[1][1],t<n&&(e=n,n=t,t=e),o<i&&(e=i,i=o,o=e),v.precision(m)):[[n,i],[t,o]]},v.step=function(e){return arguments.length?v.majorStep(e).minorStep(e):v.minorStep()},v.majorStep=function(e){return arguments.length?(g=+e[0],y=+e[1],v):[g,y]},v.minorStep=function(e){return arguments.length?(h=+e[0],p=+e[1],v):[h,p]},v.precision=function(e){return arguments.length?(m=+e,c=Nr(i,o,90),u=Fr(n,t,m),d=Nr(l,s,90),f=Fr(a,r,m),v):m},v.majorExtent([[-180,-90+we],[180,90-we]]).minorExtent([[-180,-80-we],[180,80+we]])},D.geo.greatArc=function(){var t,n,r=Br,a=qr;function o(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||a.apply(this,arguments)]}}return o.distance=function(){return D.geo.distance(t||r.apply(this,arguments),n||a.apply(this,arguments))},o.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,o):r},o.target=function(e){return arguments.length?(n="function"==typeof(a=e)?null:e,o):a},o.precision=function(){return arguments.length?o:0},o},D.geo.interpolate=function(e,t){return n=e[0]*Le,r=e[1]*Le,a=t[0]*Le,o=t[1]*Le,i=Math.cos(r),s=Math.sin(r),l=Math.cos(o),c=Math.sin(o),u=i*Math.cos(n),d=i*Math.sin(n),f=l*Math.cos(a),h=l*Math.sin(a),p=2*Math.asin(Math.sqrt(Ie(o-r)+i*l*Ie(a-n))),g=1/Math.sin(p),(y=p?function(e){var t=Math.sin(e*=p)*g,n=Math.sin(p-e)*g,r=n*u+t*f,a=n*d+t*h,o=n*s+t*c;return[Math.atan2(a,r)*Ce,Math.atan2(o,Math.sqrt(r*r+a*a))*Ce]}:function(){return[n*Ce,r*Ce]}).distance=p,y;var n,r,a,o,i,s,l,c,u,d,f,h,p,g,y},D.geo.length=function(e){return mr=0,D.geo.stream(e,Hr),mr};var Hr={sphere:z,point:z,lineStart:function(){var i,s,l;function n(e,t){var n=Math.sin(t*=Le),r=Math.cos(t),a=P((e*=Le)-i),o=Math.cos(a);mr+=Math.atan2(Math.sqrt((a=r*Math.sin(a))*a+(a=l*n-s*r*o)*a),s*n+l*r*o),i=e,s=n,l=r}Hr.point=function(e,t){i=e*Le,s=Math.sin(t*=Le),l=Math.cos(t),Hr.point=n},Hr.lineEnd=function(){Hr.point=Hr.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Vr(o,i){function e(e,t){var n=Math.cos(e),r=Math.cos(t),a=o(n*r);return[a*r*Math.sin(e),a*Math.sin(t)]}return e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),r=i(n),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,n*o),Math.asin(n&&t*a/n)]},e}var Ur=Vr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(D.geo.azimuthalEqualArea=function(){return Sr(Ur)}).raw=Ur;var Gr=Vr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},E);function Yr(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Me/4+e/2)},a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),o=n*Math.pow(r(e),a)/a;if(!a)return Wr;function i(e,t){0<o?t<-Se+we&&(t=-Se+we):Se-we<t&&(t=Se-we);var n=o/Math.pow(r(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}return i.invert=function(e,t){var n=o-t,r=ze(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Se]},i}function Xr(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(P(r)<we)return zr;function o(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}return o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-ze(r)*Math.sqrt(e*e+n*n)]},o}(D.geo.azimuthalEquidistant=function(){return Sr(Gr)}).raw=Gr,(D.geo.conicConformal=function(){return ar(Yr)}).raw=Yr,(D.geo.conicEquidistant=function(){return ar(Xr)}).raw=Xr;var Zr=Vr(function(e){return 1/e},Math.atan);function Wr(e,t){return[e,Math.log(Math.tan(Me/4+t/2))]}function Jr(e){var a,o=Sr(e),i=o.scale,s=o.translate,l=o.clipExtent;return o.scale=function(){var e=i.apply(o,arguments);return e===o?a?o.clipExtent(null):o:e},o.translate=function(){var e=s.apply(o,arguments);return e===o?a?o.clipExtent(null):o:e},o.clipExtent=function(e){var t=l.apply(o,arguments);if(t===o){if(a=null==e){var n=Me*i(),r=s();l([[r[0]-n,r[1]-n],[r[0]+n,r[1]+n]])}}else a&&(t=null);return t},o.clipExtent(null)}(D.geo.gnomonic=function(){return Sr(Zr)}).raw=Zr,Wr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Se]},(D.geo.mercator=function(){return Jr(Wr)}).raw=Wr;var Qr=Vr(function(){return 1},Math.asin);(D.geo.orthographic=function(){return Sr(Qr)}).raw=Qr;var $r=Vr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function Kr(e,t){return[Math.log(Math.tan(Me/4+t/2)),-e]}function ea(e){return e[0]}function ta(e){return e[1]}function na(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;1<r&&Oe(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function ra(e,t){return e[0]-t[0]||e[1]-t[1]}(D.geo.stereographic=function(){return Sr($r)}).raw=$r,Kr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Se]},(D.geo.transverseMercator=function(){var e=Jr(Kr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=Kr,D.geom={},D.geom.hull=function(e){var f=ea,h=ta;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t,n=gt(f),r=gt(h),a=e.length,o=[],i=[];for(t=0;t<a;t++)o.push([+n.call(this,e[t],t),+r.call(this,e[t],t),t]);for(o.sort(ra),t=0;t<a;t++)i.push([o[t][0],-o[t][1]]);var s=na(o),l=na(i),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(t=s.length-1;0<=t;--t)d.push(e[o[s[t]][2]]);for(t=+c;t<l.length-u;++t)d.push(e[o[l[t]][2]]);return d}return t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(h=e,t):h},t},D.geom.polygon=function(e){return q(e,aa),e};var aa=D.geom.polygon.prototype=[];function oa(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ia(e,t,n,r){var a=e[0],o=n[0],i=t[0]-a,s=r[0]-o,l=e[1],c=n[1],u=t[1]-l,d=r[1]-c,f=(s*(l-c)-d*(a-o))/(d*i-s*u);return[a+f*i,l+f*u]}function sa(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}aa.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},aa.centroid=function(e){var t,n,r=-1,a=this.length,o=0,i=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,i+=(t[1]+s[1])*n;return[o*e,i*e]},aa.clip=function(e){for(var t,n,r,a,o,i,s=sa(e),l=-1,c=this.length-sa(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,a=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)oa(i=t[n],u,a)?(oa(o,u,a)||e.push(ia(o,i,u,a)),e.push(i)):oa(o,u,a)&&e.push(ia(o,i,u,a)),o=i;s&&e.push(e[0]),u=a}return e};var la,ca,ua,da,fa,ha=[],pa=[];function ga(){Pa(this),this.edge=this.site=this.circle=null}function ya(e){var t=ha.pop()||new ga;return t.site=e,t}function ma(e){Aa(e),ua.remove(e),ha.push(e),Pa(e)}function va(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},o=e.P,i=e.N,s=[e];ma(e);for(var l=o;l.circle&&P(n-l.circle.x)<we&&P(r-l.circle.cy)<we;)o=l.P,s.unshift(l),ma(l),l=o;s.unshift(l),Aa(l);for(var c=i;c.circle&&P(n-c.circle.x)<we&&P(r-c.circle.cy)<we;)i=c.N,s.push(c),ma(c),c=i;s.push(c),Aa(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],za(c.edge,l.site,c.site,a);l=s[0],(c=s[d-1]).edge=Ca(l.site,c.site,null,a),Ta(l),Ta(c)}function xa(e){for(var t,n,r,a,o=e.x,i=e.y,s=ua._;s;)if(r=ba(s,i)-o,we<r)s=s.L;else{if(a=o-_a(s,i),!(we<a)){-we<r?(t=s.P,n=s):-we<a?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=ya(e);if(ua.insert(t,l),t||n){if(t===n)return Aa(t),n=ya(t.site),ua.insert(l,n),l.edge=n.edge=Ca(t.site,l.site),Ta(t),void Ta(n);if(n){Aa(t),Aa(n);var c=t.site,u=c.x,d=c.y,f=e.x-u,h=e.y-d,p=n.site,g=p.x-u,y=p.y-d,m=2*(f*y-h*g),v=f*f+h*h,x=g*g+y*y,b={x:(y*v-h*x)/m+u,y:(f*x-g*v)/m+d};za(n.edge,c,p,b),l.edge=Ca(c,e,null,b),n.edge=Ca(e,p,null,b),Ta(t),Ta(n)}else l.edge=Ca(t.site,l.site)}}function ba(e,t){var n=e.site,r=n.x,a=n.y,o=a-t;if(!o)return r;var i=e.P;if(!i)return-1/0;var s=(n=i.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-r,d=1/o-1/c,f=u/c;return d?(-f+Math.sqrt(f*f-2*d*(u*u/(-2*c)-l+c/2+a-o/2)))/d+r:(r+s)/2}function _a(e,t){var n=e.N;if(n)return ba(n,t);var r=e.site;return r.y===t?r.x:1/0}function wa(e){this.site=e,this.edges=[]}function ka(e,t){return t.angle-e.angle}function Ma(){Pa(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ta(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,o=n.site;if(r!==o){var i=a.x,s=a.y,l=r.x-i,c=r.y-s,u=o.x-i,d=2*(l*(y=o.y-s)-c*u);if(!(-ke<=d)){var f=l*l+c*c,h=u*u+y*y,p=(y*f-c*h)/d,g=(l*h-u*f)/d,y=g+s,m=pa.pop()||new Ma;m.arc=e,m.site=a,m.x=p+i,m.y=y+Math.sqrt(p*p+g*g),m.cy=y,e.circle=m;for(var v=null,x=fa._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){v=x.P;break}x=x.L}else{if(!x.R){v=x;break}x=x.R}fa.insert(v,m),v||(da=m)}}}}function Aa(e){var t=e.circle;t&&(t.P||(da=t.N),fa.remove(t),pa.push(t),Pa(t),e.circle=null)}function Sa(e,t){var n=e.b;if(n)return!0;var r,a,o=e.a,i=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,f=u.x,h=u.y,p=d.x,g=d.y,y=(f+p)/2,m=(h+g)/2;if(g===h){if(y<i||s<=y)return;if(p<f){if(o){if(o.y>=c)return}else o={x:y,y:l};n={x:y,y:c}}else{if(o){if(o.y<l)return}else o={x:y,y:c};n={x:y,y:l}}}else if(a=m-(r=(f-p)/(g-h))*y,r<-1||1<r)if(p<f){if(o){if(o.y>=c)return}else o={x:(l-a)/r,y:l};n={x:(c-a)/r,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-a)/r,y:c};n={x:(l-a)/r,y:l}}else if(h<g){if(o){if(o.x>=s)return}else o={x:i,y:r*i+a};n={x:s,y:r*s+a}}else{if(o){if(o.x<i)return}else o={x:s,y:r*s+a};n={x:i,y:r*i+a}}return e.a=o,e.b=n,!0}function La(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ca(e,t,n,r){var a=new La(e,t);return la.push(a),n&&za(a,e,t,n),r&&za(a,t,e,r),ca[e.i].edges.push(new Oa(a,e,t)),ca[t.i].edges.push(new Oa(a,t,e)),a}function za(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Oa(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function ja(){this._=null}function Pa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Da(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ia(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ea(e){for(;e.L;)e=e.L;return e}function Ra(e,t){var n,r,a,o=e.sort(Na).pop();for(la=[],ca=new Array(e.length),ua=new ja,fa=new ja;;)if(a=da,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))o.x===n&&o.y===r||(ca[o.i]=new wa(o),xa(o),n=o.x,r=o.y),o=e.pop();else{if(!a)break;va(a.arc)}t&&(function(e){for(var t,n=la,r=tr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(!Sa(t=n[a],e)||!r(t)||P(t.a.x-t.b.x)<we&&P(t.a.y-t.b.y)<we)&&(t.a=t.b=null,n.splice(a,1))}(t),function(e){for(var t,n,r,a,o,i,s,l,c,u,d=e[0][0],f=e[1][0],h=e[0][1],p=e[1][1],g=ca,y=g.length;y--;)if((o=g[y])&&o.prepare())for(l=(s=o.edges).length,i=0;i<l;)r=(u=s[i].end()).x,a=u.y,t=(c=s[++i%l].start()).x,n=c.y,(P(r-t)>we||P(a-n)>we)&&(s.splice(i,0,new Oa((m=o.site,v=u,x=P(r-d)<we&&we<p-a?{x:d,y:P(t-d)<we?n:p}:P(a-p)<we&&we<f-r?{x:P(n-p)<we?t:f,y:p}:P(r-f)<we&&we<a-h?{x:f,y:P(t-f)<we?n:h}:P(a-h)<we&&we<r-d?{x:P(n-h)<we?t:d,y:h}:null,b=void 0,b=new La(m,null),b.a=v,b.b=x,la.push(b),b),o.site,null)),++l);var m,v,x,b}(t));var i={cells:ca,edges:la};return ua=fa=la=ca=null,i}function Na(e,t){return t.y-e.y||t.x-e.x}wa.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(ka),t.length},Oa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ja.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Ea(this._),t.P=null,(t.N=e).P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Da(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ia(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ia(this,n),n=(e=n).U),n.C=!1,r.C=!0,Da(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,o=e.L,i=e.R;if(n=o?i?Ea(i):o:i,a?a.L===e?a.L=n:a.R=n:this._=n,o&&i?(r=n.C,n.C=e.C,((n.L=o).U=n)!==i?(a=n.U,n.U=e.U,e=n.R,a.L=e,(n.R=i).U=n):(n.U=a,e=(a=n).R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Da(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ia(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Da(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,Ia(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Da(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Ia(this,a),e=this._;break}t.C=!0,a=(e=a).U}while(!e.C);e&&(e.C=!1)}}},D.geom.voronoi=function(e){var t=ea,n=ta,r=t,a=n,u=Fa;if(e)return o(e);function o(a){var o=new Array(a.length),i=u[0][0],s=u[0][1],l=u[1][0],c=u[1][1];return Ra(d(a),u).cells.forEach(function(e,t){var n=e.edges,r=e.site;(o[t]=n.length?n.map(function(e){var t=e.start();return[t.x,t.y]}):r.x>=i&&r.x<=l&&r.y>=s&&r.y<=c?[[i,c],[l,c],[l,s],[i,s]]:[]).point=a[t]}),o}function d(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/we)*we,y:Math.round(a(e,t)/we)*we,i:t}})}return o.links=function(t){return Ra(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(f){var h=[];return Ra(d(f)).cells.forEach(function(e,t){for(var n,r,a,o,i=e.site,s=e.edges.sort(ka),l=-1,c=s.length,u=s[c-1].edge,d=u.l===i?u.r:u.l;++l<c;)u,n=d,d=(u=s[l].edge).l===i?u.r:u.l,t<n.i&&t<d.i&&(a=n,o=d,((r=i).x-o.x)*(a.y-r.y)-(r.x-a.x)*(o.y-r.y)<0)&&h.push([f[t],f[n.i],f[d.i]])}),h},o.x=function(e){return arguments.length?(r=gt(t=e),o):t},o.y=function(e){return arguments.length?(a=gt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(u=null==e?Fa:e,o):u===Fa?null:u},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):u===Fa?null:u&&u[1]},o};var Fa=[[-1e6,-1e6],[1e6,1e6]];function Ba(e){return e.x}function qa(e){return e.y}function Ha(e,t){e=D.rgb(e),t=D.rgb(t);var n=e.r,r=e.g,a=e.b,o=t.r-n,i=t.g-r,s=t.b-a;return function(e){return"#"+lt(Math.round(n+o*e))+lt(Math.round(r+i*e))+lt(Math.round(a+s*e))}}function Va(e,t){var n,r={},a={};for(n in e)n in t?r[n]=Za(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function Ua(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Ga(e,r){var t,n,a,o=Ya.lastIndex=Xa.lastIndex=0,i=-1,s=[],l=[];for(e+="",r+="";(t=Ya.exec(e))&&(n=Xa.exec(r));)(a=n.index)>o&&(a=r.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(t=t[0])===(n=n[0])?s[i]?s[i]+=n:s[++i]=n:(s[++i]=null,l.push({i:i,x:Ua(t,n)})),o=Xa.lastIndex;return o<r.length&&(a=r.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}D.geom.delaunay=function(e){return D.geom.voronoi().triangles(e)},D.geom.quadtree=function(e,v,x,b,_){var w,k=ea,T=ta;if(w=arguments.length)return k=Ba,T=qa,3===w&&(_=x,b=v,x=v=0),t(e);function t(e){var t,n,r,a,o,i,s,l,c,u=gt(k),d=gt(T);if(null!=v)i=v,s=x,l=b,c=_;else if(l=c=-(i=s=1/0),n=[],r=[],o=e.length,w)for(a=0;a<o;++a)(t=e[a]).x<i&&(i=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(a=0;a<o;++a){var f=+u(t=e[a],a),h=+d(t,a);f<i&&(i=f),h<s&&(s=h),l<f&&(l=f),c<h&&(c=h),n.push(f),r.push(h)}var p=l-i,g=c-s;function y(e,t,n,r,a,o,i,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(P(l-n)+P(c-r)<.01)m(e,t,n,r,a,o,i,s);else{var u=e.point;e.x=e.y=e.point=null,m(e,u,l,c,a,o,i,s),m(e,t,n,r,a,o,i,s)}else e.x=n,e.y=r,e.point=t}else m(e,t,n,r,a,o,i,s)}function m(e,t,n,r,a,o,i,s){var l=.5*(a+i),c=.5*(o+s),u=l<=n,d=c<=r,f=d<<1|u;e.leaf=!1,u?a=l:i=l,d?o=c:s=c,y(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,a,o,i,s)}g<p?c=s+p:l=i+g;var M={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){y(M,e,+u(e,++a),+d(e,a),i,s,l,c)}};if(M.visit=function(e){!function e(t,n,r,a,o,i){if(!t(n,r,a,o,i)){var s=.5*(r+o),l=.5*(a+i),c=n.nodes;c[0]&&e(t,c[0],r,a,s,l),c[1]&&e(t,c[1],s,a,o,l),c[2]&&e(t,c[2],r,l,s,i),c[3]&&e(t,c[3],s,l,o,i)}}(e,M,i,s,l,c)},M.find=function(e){return t=M,y=e[0],m=e[1],k=1/0,function e(t,n,r,a,o){if(!(b<n||_<r||a<v||o<x)){if(i=t.point){var i,s=y-t.x,l=m-t.y,c=s*s+l*l;if(c<k){var u=Math.sqrt(k=c);v=y-u,x=m-u,b=y+u,_=m+u,w=i}}for(var d=t.nodes,f=.5*(n+a),h=.5*(r+o),p=(h<=m)<<1|f<=y,g=p+4;p<g;++p)if(t=d[3&p])switch(3&p){case 0:e(t,n,r,f,h);break;case 1:e(t,f,r,a,h);break;case 2:e(t,n,h,f,o);break;case 3:e(t,f,h,a,o)}}}(t,v=i,x=s,b=l,_=c),w;var t,y,m,v,x,b,_,w,k},a=-1,null==v){for(;++a<o;)y(M,e[a],n[a],r[a],i,s,l,c);--a}else e.forEach(M.add);return n=r=e=t=null,M}return t.x=function(e){return arguments.length?(k=e,t):k},t.y=function(e){return arguments.length?(T=e,t):T},t.extent=function(e){return arguments.length?(null==e?v=x=b=_=null:(v=+e[0][0],x=+e[0][1],b=+e[1][0],_=+e[1][1]),t):null==v?null:[[v,x],[b,_]]},t.size=function(e){return arguments.length?(null==e?v=x=b=_=null:(v=x=0,b=+e[0],_=+e[1]),t):null==v?null:[b-v,_-x]},t},D.interpolateRgb=Ha,D.interpolateObject=Va,D.interpolateNumber=Ua,D.interpolateString=Ga;var Ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xa=new RegExp(Ya.source,"g");function Za(e,t){for(var n,r=D.interpolators.length;0<=--r&&!(n=D.interpolators[r](e,t)););return n}function Wa(e,t){var n,r=[],a=[],o=e.length,i=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(Za(e[n],t[n]));for(;n<o;++n)a[n]=e[n];for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=r[n](e);return a}}D.interpolate=Za,D.interpolators=[function(e,t){var n=typeof t;return("string"===n?pt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Ha:Ga:t instanceof Be?Ha:Array.isArray(t)?Wa:"object"===n&&isNaN(t)?Va:Ua)(e,t)}],D.interpolateArray=Wa;var Ja=function(){return E},Qa=D.map({linear:Ja,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return to},cubic:function(){return no},sin:function(){return ao},exp:function(){return oo},circle:function(){return io},elastic:function(t,n){var r;arguments.length<2&&(n=.45);arguments.length?r=n/Te*Math.asin(1/t):(t=1,r=n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*Te/n)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return so}}),$a=D.map({in:E,out:Ka,"in-out":eo,"out-in":function(e){return eo(Ka(e))}});function Ka(t){return function(e){return 1-t(1-e)}}function eo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function to(e){return e*e}function no(e){return e*e*e}function ro(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function ao(e){return 1-Math.cos(e*Se)}function oo(e){return Math.pow(2,10*(e-1))}function io(e){return 1-Math.sqrt(1-e*e)}function so(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function lo(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function co(e){var t,n,r,a=[e.a,e.b],o=[e.c,e.d],i=fo(a),s=uo(a,o),l=fo(((t=o)[0]+=(r=-s)*(n=a)[0],t[1]+=r*n[1],t))||0;a[0]*o[1]<o[0]*a[1]&&(a[0]*=-1,a[1]*=-1,i*=-1,s*=-1),this.rotate=(i?Math.atan2(a[1],a[0]):Math.atan2(-o[0],o[1]))*Ce,this.translate=[e.e,e.f],this.scale=[i,l],this.skew=l?Math.atan2(s,l)*Ce:0}function uo(e,t){return e[0]*t[0]+e[1]*t[1]}function fo(e){var t=Math.sqrt(uo(e,e));return t&&(e[0]/=t,e[1]/=t),t}D.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,a=0<=n?e.slice(n+1):"in";return r=Qa.get(r)||Ja,a=$a.get(a)||E,t=a(r.apply(null,o.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},D.interpolateHcl=function(e,t){e=D.hcl(e),t=D.hcl(t);var n=e.h,r=e.c,a=e.l,o=t.h-n,i=t.c-r,s=t.l-a;isNaN(i)&&(i=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):180<o?o-=360:o<-180&&(o+=360);return function(e){return Ye(n+o*e,r+i*e,a+s*e)+""}},D.interpolateHsl=function(e,t){e=D.hsl(e),t=D.hsl(t);var n=e.h,r=e.s,a=e.l,o=t.h-n,i=t.s-r,s=t.l-a;isNaN(i)&&(i=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):180<o?o-=360:o<-180&&(o+=360);return function(e){return Ve(n+o*e,r+i*e,a+s*e)+""}},D.interpolateLab=function(e,t){e=D.lab(e),t=D.lab(t);var n=e.l,r=e.a,a=e.b,o=t.l-n,i=t.a-r,s=t.b-a;return function(e){return Ke(n+o*e,r+i*e,a+s*e)+""}},D.interpolateRound=lo,D.transform=function(e){var n=x.createElementNS(D.ns.prefix.svg,"g");return(D.transform=function(e){if(null!=e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new co(t?t.matrix:ho)})(e)},co.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ho={a:1,b:0,c:0,d:1,e:0,f:0};function po(e){return e.length?e.pop()+",":""}function go(e,t){var n,r,a,o,i,s,l,c,u=[],d=[];return e=D.transform(e),t=D.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:Ua(e[0],t[0])},{i:a-2,x:Ua(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,u,d),n=e.rotate,r=t.rotate,a=u,o=d,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),o.push({i:a.push(po(a)+"rotate(",null,")")-2,x:Ua(n,r)})):r&&a.push(po(a)+"rotate("+r+")"),i=e.skew,s=t.skew,l=u,c=d,i!==s?c.push({i:l.push(po(l)+"skewX(",null,")")-2,x:Ua(i,s)}):s&&l.push(po(l)+"skewX("+s+")"),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push(po(n)+"scale(",null,",",null,")");r.push({i:a-4,x:Ua(e[0],t[0])},{i:a-2,x:Ua(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(po(n)+"scale("+t+")")}(e.scale,t.scale,u,d),e=t=null,function(e){for(var t,n=-1,r=d.length;++n<r;)u[(t=d[n]).i]=t.x(e);return u.join("")}}function yo(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function mo(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function vo(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=xo(e),r=xo(t),a=n.pop(),o=r.pop(),i=null;for(;a===o;)i=a,a=n.pop(),o=r.pop();return i}(t,n),a=[t];t!==r;)t=t.parent,a.push(t);for(var o=a.length;n!==r;)a.splice(o,0,n),n=n.parent;return a}function xo(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function bo(e){e.fixed|=2}function _o(e){e.fixed&=-7}function wo(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ko(e){e.fixed&=-5}D.interpolateTransform=go,D.layout={},D.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(vo(e[n]));return t}},D.layout.chord=function(){var y,m,v,x,b,_,w,t={},k=0;function e(){var e,t,n,r,a,o={},i=[],s=D.range(x),l=[];for(y=[],m=[],e=0,r=-1;++r<x;){for(t=0,a=-1;++a<x;)t+=v[r][a];i.push(t),l.push(D.range(x)),e+=t}for(b&&s.sort(function(e,t){return b(i[e],i[t])}),_&&l.forEach(function(e,n){e.sort(function(e,t){return _(v[n][e],v[n][t])})}),e=(Te-k*x)/e,t=0,r=-1;++r<x;){for(n=t,a=-1;++a<x;){var c=s[r],u=l[c][a],d=v[c][u],f=t,h=t+=d*e;o[c+"-"+u]={index:c,subindex:u,startAngle:f,endAngle:h,value:d}}m[c]={index:c,startAngle:n,endAngle:t,value:i[c]},t+=k}for(r=-1;++r<x;)for(a=r-1;++a<x;){var p=o[r+"-"+a],g=o[a+"-"+r];(p.value||g.value)&&y.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}w&&M()}function M(){y.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(x=(v=e)&&v.length,y=m=null,t):v},t.padding=function(e){return arguments.length?(k=e,y=m=null,t):k},t.sortGroups=function(e){return arguments.length?(b=e,y=m=null,t):b},t.sortSubgroups=function(e){return arguments.length?(_=e,y=null,t):_},t.sortChords=function(e){return arguments.length?(w=e,y&&M(),t):w},t.chords=function(){return y||e(),y},t.groups=function(){return m||e(),m},t},D.layout.force=function(){var d,e,f,h,p,g,a={},y=D.dispatch("start","tick","end"),m=[1,1],v=.9,o=Mo,i=To,x=-30,u=Ao,b=.1,_=.64,w=[],k=[];function M(c){return function(e,t,n,r){if(e.point!==c){var a=e.cx-c.x,o=e.cy-c.y,i=r-t,s=a*a+o*o;if(i*i/_<s){if(s<u){var l=e.charge/s;c.px-=a*l,c.py-=o*l}return!0}if(e.point&&s&&s<u){l=e.pointCharge/s;c.px-=a*l,c.py-=o*l}}return!e.charge}}function t(e){e.px=D.event.x,e.py=D.event.y,a.resume()}return a.tick=function(){if((f*=.99)<.005)return d=null,y.end({type:"end",alpha:f=0}),!0;var e,t,n,r,a,o,i,s,l,c=w.length,u=k.length;for(t=0;t<u;++t)r=(n=k[t]).source,(o=(s=(a=n.target).x-r.x)*s+(l=a.y-r.y)*l)&&(s*=o=f*p[t]*((o=Math.sqrt(o))-h[t])/o,l*=o,a.x-=s*(i=r.weight+a.weight?r.weight/(r.weight+a.weight):.5),a.y-=l*i,r.x+=s*(i=1-i),r.y+=l*i);if((i=f*b)&&(s=m[0]/2,l=m[1]/2,t=-1,i))for(;++t<c;)(n=w[t]).x+=(s-n.x)*i,n.y+=(l-n.y)*i;if(x)for(!function e(t,n,r){var a=0,o=0;t.charge=0;if(!t.leaf)for(var i,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(i=s[c])&&(e(i,n,r),t.charge+=i.charge,a+=i.charge*i.cx,o+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*r[t.point.index];t.charge+=t.pointCharge=u,a+=u*t.point.x,o+=u*t.point.y}t.cx=a/t.charge;t.cy=o/t.charge}(e=D.geom.quadtree(w),f,g),t=-1;++t<c;)(n=w[t]).fixed||e.visit(M(n));for(t=-1;++t<c;)(n=w[t]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*v,n.y-=(n.py-(n.py=n.y))*v);y.tick({type:"tick",alpha:f})},a.nodes=function(e){return arguments.length?(w=e,a):w},a.links=function(e){return arguments.length?(k=e,a):k},a.size=function(e){return arguments.length?(m=e,a):m},a.linkDistance=function(e){return arguments.length?(o="function"==typeof e?e:+e,a):o},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(i="function"==typeof e?e:+e,a):i},a.friction=function(e){return arguments.length?(v=+e,a):v},a.charge=function(e){return arguments.length?(x="function"==typeof e?e:+e,a):x},a.chargeDistance=function(e){return arguments.length?(u=e*e,a):Math.sqrt(u)},a.gravity=function(e){return arguments.length?(b=+e,a):b},a.theta=function(e){return arguments.length?(_=e*e,a):Math.sqrt(_)},a.alpha=function(e){return arguments.length?(e=+e,f?0<e?f=e:(d.c=null,d.t=NaN,d=null,y.end({type:"end",alpha:f=0})):0<e&&(y.start({type:"start",alpha:f=e}),d=kt(a.tick)),a):f},a.start=function(){var s,l,e,c=w.length,u=k.length,t=m[0],n=m[1];for(s=0;s<c;++s)(e=w[s]).index=s,e.weight=0;for(s=0;s<u;++s)"number"==typeof(e=k[s]).source&&(e.source=w[e.source]),"number"==typeof e.target&&(e.target=w[e.target]),++e.source.weight,++e.target.weight;for(s=0;s<c;++s)e=w[s],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(h=[],"function"==typeof o)for(s=0;s<u;++s)h[s]=+o.call(this,k[s],s);else for(s=0;s<u;++s)h[s]=o;if(p=[],"function"==typeof i)for(s=0;s<u;++s)p[s]=+i.call(this,k[s],s);else for(s=0;s<u;++s)p[s]=i;if(g=[],"function"==typeof x)for(s=0;s<c;++s)g[s]=+x.call(this,w[s],s);else for(s=0;s<c;++s)g[s]=x;function r(e,t){if(!l){for(l=new Array(c),o=0;o<c;++o)l[o]=[];for(o=0;o<u;++o){var n=k[o];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var r,a=l[s],o=-1,i=a.length;++o<i;)if(!isNaN(r=a[o][e]))return r;return Math.random()*t}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(e||(e=D.behavior.drag().origin(E).on("dragstart.force",bo).on("drag.force",t).on("dragend.force",_o)),!arguments.length)return e;this.on("mouseover.force",wo).on("mouseout.force",ko).call(e)},D.rebind(a,y,"on")};var Mo=20,To=1,Ao=1/0;function So(e,t){return D.rebind(e,t,"sort","children","value"),(e.nodes=e).links=Po,e}function Lo(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(a=e.children)&&(r=a.length))for(var r,a;0<=--r;)n.push(a[r])}function Co(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(a=o.length))for(var a,o,i=-1;++i<a;)n.push(o[i]);for(;null!=(e=r.pop());)t(e)}function zo(e){return e.children}function Oo(e){return e.value}function jo(e,t){return t.value-e.value}function Po(e){return D.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}D.layout.hierarchy=function(){var s=jo,l=zo,c=Oo;function u(e){var t,n=[e],r=[];for(e.depth=0;null!=(t=n.pop());)if(r.push(t),(o=l.call(u,t,t.depth))&&(a=o.length)){for(var a,o,i;0<=--a;)n.push(i=o[a]),i.parent=t,i.depth=t.depth+1;c&&(t.value=0),t.children=o}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return Co(e,function(e){var t,n;s&&(t=e.children)&&t.sort(s),c&&(n=e.parent)&&(n.value+=e.value)}),r}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(Lo(e,function(e){e.children&&(e.value=0)}),Co(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},D.layout.partition=function(){var r=D.layout.hierarchy(),a=[1,1];function t(e,t){var n=r.call(this,e,t);return function e(t,n,r,a){var o=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,o&&(i=o.length)){var i,s,l,c=-1;for(r=t.value?r/t.value:0;++c<i;)e(s=o[c],n,l=s.value*r,a),n+=l}}(n[0],0,a[0],a[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,o=-1;++o<a;)r=Math.max(r,e(n[o]));return 1+r}(n[0])),n}return t.size=function(e){return arguments.length?(a=e,t):a},So(t,r)},D.layout.pie=function(){var f=Number,h=Do,p=0,g=Te,y=0;function m(n){var t,e=n.length,r=n.map(function(e,t){return+f.call(m,e,t)}),a=+("function"==typeof p?p.apply(this,arguments):p),o=("function"==typeof g?g.apply(this,arguments):g)-a,i=Math.min(Math.abs(o)/e,+("function"==typeof y?y.apply(this,arguments):y)),s=i*(o<0?-1:1),l=D.sum(r),c=l?(o-e*s)/l:0,u=D.range(e),d=[];return null!=h&&u.sort(h===Do?function(e,t){return r[t]-r[e]}:function(e,t){return h(n[e],n[t])}),u.forEach(function(e){d[e]={data:n[e],value:t=r[e],startAngle:a,endAngle:a+=t*c+s,padAngle:i}}),d}return m.value=function(e){return arguments.length?(f=e,m):f},m.sort=function(e){return arguments.length?(h=e,m):h},m.startAngle=function(e){return arguments.length?(p=e,m):p},m.endAngle=function(e){return arguments.length?(g=e,m):g},m.padAngle=function(e){return arguments.length?(y=e,m):y},m};var Do={};function Io(e){return e.x}function Eo(e){return e.y}function Ro(e,t,n){e.y0=t,e.y=n}D.layout.stack=function(){var d=E,f=Bo,h=qo,p=Ro,g=Io,y=Eo;function m(e,t){if(!(o=e.length))return e;var n=e.map(function(e,t){return d.call(m,e,t)}),r=n.map(function(e){return e.map(function(e,t){return[g.call(m,e,t),y.call(m,e,t)]})}),a=f.call(m,r,t);n=D.permute(n,a),r=D.permute(r,a);var o,i,s,l,c=h.call(m,r,t),u=n[0].length;for(s=0;s<u;++s)for(p.call(m,n[0][s],l=c[s],r[0][s][1]),i=1;i<o;++i)p.call(m,n[i][s],l+=r[i-1][s][1],r[i][s][1]);return e}return m.values=function(e){return arguments.length?(d=e,m):d},m.order=function(e){return arguments.length?(f="function"==typeof e?e:No.get(e)||Bo,m):f},m.offset=function(e){return arguments.length?(h="function"==typeof e?e:Fo.get(e)||qo,m):h},m.x=function(e){return arguments.length?(g=e,m):g},m.y=function(e){return arguments.length?(y=e,m):y},m.out=function(e){return arguments.length?(p=e,m):p},m};var No=D.map({"inside-out":function(e){var t,n,r=e.length,a=e.map(Ho),o=e.map(Vo),i=D.range(r).sort(function(e,t){return a[e]-a[t]}),s=0,l=0,c=[],u=[];for(t=0;t<r;++t)n=i[t],s<l?(s+=o[n],c.push(n)):(l+=o[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return D.range(e.length).reverse()},default:Bo}),Fo=D.map({silhouette:function(e){var t,n,r,a=e.length,o=e[0].length,i=[],s=0,l=[];for(n=0;n<o;++n){for(r=t=0;t<a;t++)r+=e[t][n][1];s<r&&(s=r),i.push(r)}for(n=0;n<o;++n)l[n]=(s-i[n])/2;return l},wiggle:function(e){var t,n,r,a,o,i,s,l,c,u=e.length,d=e[0],f=d.length,h=[];for(h[0]=l=c=0,n=1;n<f;++n){for(a=t=0;t<u;++t)a+=e[t][n][1];for(o=t=0,s=d[n][0]-d[n-1][0];t<u;++t){for(r=0,i=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)i+=(e[r][n][1]-e[r][n-1][1])/s;o+=i*e[t][n][1]}h[n]=l-=a?o/a*s:0,l<c&&(c=l)}for(n=0;n<f;++n)h[n]-=c;return h},expand:function(e){var t,n,r,a=e.length,o=e[0].length,i=1/a,s=[];for(n=0;n<o;++n){for(r=t=0;t<a;t++)r+=e[t][n][1];if(r)for(t=0;t<a;t++)e[t][n][1]/=r;else for(t=0;t<a;t++)e[t][n][1]=i}for(n=0;n<o;++n)s[n]=0;return s},zero:qo});function Bo(e){return D.range(e.length)}function qo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Ho(e){for(var t,n=1,r=0,a=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function Vo(e){return e.reduce(Uo,0)}function Uo(e,t){return e+t[1]}function Go(e,t){return Yo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Yo(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,o=[];++n<=t;)o[n]=a*n+r;return o}function Xo(e){return[D.min(e),D.max(e)]}function Zo(e,t){return e.value-t.value}function Wo(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function Jo(e,t){(e._pack_next=t)._pack_prev=e}function Qo(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return n*n+r*r<.999*a*a}function $o(e){if((t=e.children)&&(l=t.length)){var t,n,r,a,o,i,s,l,c=1/0,u=-1/0,d=1/0,f=-1/0;if(t.forEach(Ko),(n=t[0]).x=-n.r,n.y=0,x(n),1<l&&((r=t[1]).x=r.r,r.y=0,x(r),2<l))for(ti(n,r,a=t[2]),x(a),Wo(n,a),Wo(n._pack_prev=a,r),r=n._pack_next,o=3;o<l;o++){ti(n,r,a=t[o]);var h=0,p=1,g=1;for(i=r._pack_next;i!==r;i=i._pack_next,p++)if(Qo(i,a)){h=1;break}if(1==h)for(s=n._pack_prev;s!==i._pack_prev&&!Qo(s,a);s=s._pack_prev,g++);h?(p<g||p==g&&r.r<n.r?Jo(n,r=i):Jo(n=s,r),o--):(Wo(n,a),x(r=a))}var y=(c+u)/2,m=(d+f)/2,v=0;for(o=0;o<l;o++)(a=t[o]).x-=y,a.y-=m,v=Math.max(v,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=v,t.forEach(ei)}function x(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),f=Math.max(e.y+e.r,f)}}function Ko(e){e._pack_next=e._pack_prev=e}function ei(e){delete e._pack_next,delete e._pack_prev}function ti(e,t,n){var r=e.r+n.r,a=t.x-e.x,o=t.y-e.y;if(r&&(a||o)){var i=t.r+n.r,s=a*a+o*o,l=.5+((r*=r)-(i*=i))/(2*s),c=Math.sqrt(Math.max(0,2*i*(r+s)-(r-=s)*r-i*i))/(2*s);n.x=e.x+l*a+c*o,n.y=e.y+l*o-c*a}else n.x=e.x+r,n.y=e.y}function ni(e,t){return e.parent==t.parent?1:2}function ri(e){var t=e.children;return t.length?t[0]:e.t}function ai(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function oi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ii(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function si(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:a,dy:o}}function li(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ci(e){return e.rangeExtent?e.rangeExtent():li(e.range())}function ui(e,t,n,r){var a=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(a(e))}}function di(e,t){var n,r=0,a=e.length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function fi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:hi}D.layout.histogram=function(){var d=!0,f=Number,h=Xo,p=Go;function n(e,t){for(var n,r,a=[],o=e.map(f,this),i=h.call(this,o,t),s=p.call(this,i,o,t),l=(t=-1,o.length),c=s.length-1,u=d?1:1/l;++t<c;)(n=a[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=o[t])>=i[0]&&r<=i[1]&&((n=a[D.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return a}return n.value=function(e){return arguments.length?(f=e,n):f},n.range=function(e){return arguments.length?(h=gt(e),n):h},n.bins=function(t){return arguments.length?(p="number"==typeof t?function(e){return Yo(e,t)}:gt(t),n):p},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},D.layout.pack=function(){var l,c=D.layout.hierarchy().sort(Zo),u=0,d=[1,1];function t(e,t){var n=c.call(this,e,t),r=n[0],a=d[0],o=d[1],i=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(r.x=r.y=0,Co(r,function(e){e.r=+i(e.value)}),Co(r,$o),u){var s=u*(l?1:Math.max(2*r.r/a,2*r.r/o))/2;Co(r,function(e){e.r+=s}),Co(r,$o),Co(r,function(e){e.r-=s})}return function e(t,n,r,a){var o=t.children;t.x=n+=a*t.x;t.y=r+=a*t.y;t.r*=a;if(o)for(var i=-1,s=o.length;++i<s;)e(o[i],n,r,a)}(r,a/2,o/2,l?1:1/Math.max(2*r.r/a,2*r.r/o)),n}return t.size=function(e){return arguments.length?(d=e,t):d},t.radius=function(e){return arguments.length?(l=null==e||"function"==typeof e?e:+e,t):l},t.padding=function(e){return arguments.length?(u=+e,t):u},So(t,c)},D.layout.tree=function(){var d=D.layout.hierarchy().sort(null).value(null),g=ni,f=[1,1],h=null;function t(e,t){var n=d.call(this,e,t),r=n[0],a=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var a,o=t.children,i=0,s=o.length;i<s;++i)r.push((o[i]=a={_:o[i],parent:t,children:(a=o[i].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=a);return n.children[0]}(r);if(Co(a,p),a.parent.m=-a.z,Lo(a,y),h)Lo(r,m);else{var o=r,i=r,s=r;Lo(r,function(e){e.x<o.x&&(o=e),e.x>i.x&&(i=e),e.depth>s.depth&&(s=e)});var l=g(o,i)/2-o.x,c=f[0]/(i.x+g(i,o)/2+l),u=f[1]/(s.depth||1);Lo(r,function(e){e.x=(e.x+l)*c,e.y=e.depth*u})}return n}function p(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){!function(e){var t,n=0,r=0,a=e.children,o=a.length;for(;0<=--o;)(t=a[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+g(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+g(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,o=e,i=t,s=a.parent.children[0],l=a.m,c=o.m,u=i.m,d=s.m;i=ai(i),a=ri(a),i&&a;)s=ri(s),(o=ai(o)).a=e,0<(r=i.z+u-a.z-l+g(i._,a._))&&(oi((h=e,p=n,(f=i).a.parent===h.parent?f.a:p),e,r),l+=r,c+=r),u+=i.m,l+=a.m,d+=s.m,c+=o.m;i&&!ai(o)&&(o.t=i,o.m+=u-c),a&&!ri(s)&&(s.t=a,s.m+=l-d,n=e)}var f,h,p;return n}(e,r,e.parent.A||n[0])}function y(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=f[0],e.y=e.depth*f[1]}return t.separation=function(e){return arguments.length?(g=e,t):g},t.size=function(e){return arguments.length?(h=null==(f=e)?m:null,t):h?null:f},t.nodeSize=function(e){return arguments.length?(h=null==(f=e)?null:m,t):h?f:null},So(t,d)},D.layout.cluster=function(){var u=D.layout.hierarchy().sort(null).value(null),d=ni,f=[1,1],h=!1;function t(e,t){var a,n=u.call(this,e,t),r=n[0],o=0;Co(r,function(e){var t,n,r=e.children;r&&r.length?(e.x=(n=r).reduce(function(e,t){return e+t.x},0)/n.length,e.y=(t=r,1+D.max(t,function(e){return e.y}))):(e.x=a?o+=d(e,a):0,e.y=0,a=e)});var i=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(r),s=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(r),l=i.x-d(i,s)/2,c=s.x+d(s,i)/2;return Co(r,h?function(e){e.x=(e.x-r.x)*f[0],e.y=(r.y-e.y)*f[1]}:function(e){e.x=(e.x-l)/(c-l)*f[0],e.y=(1-(r.y?e.y/r.y:1))*f[1]}),n}return t.separation=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(h=null==(f=e),t):h?null:f},t.nodeSize=function(e){return arguments.length?(h=null!=(f=e),t):h?f:null},So(t,u)},D.layout.treemap=function(){var r,a=D.layout.hierarchy(),u=Math.round,o=[1,1],i=null,d=ii,s=!1,f="squarify",l=.5*(1+Math.sqrt(5));function h(e,t){for(var n,r,a=-1,o=e.length;++a<o;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function p(e){var t=e.children;if(t&&t.length){var n,r,a,o=d(e),i=[],s=t.slice(),l=1/0,c="slice"===f?o.dx:"dice"===f?o.dy:"slice-dice"===f?1&e.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(h(s,o.dx*o.dy/e.value),i.area=0;0<(a=s.length);)i.push(n=s[a-1]),i.area+=n.area,"squarify"!==f||(r=g(i,c))<=l?(s.pop(),l=r):(i.area-=i.pop().area,y(i,c,o,!1),c=Math.min(o.dx,o.dy),i.length=i.area=0,l=1/0);i.length&&(y(i,c,o,!0),i.length=i.area=0),t.forEach(p)}}function c(e){var t=e.children;if(t&&t.length){var n,r=d(e),a=t.slice(),o=[];for(h(a,r.dx*r.dy/e.value),o.area=0;n=a.pop();)o.push(n),o.area+=n.area,null!=n.z&&(y(o,n.z?r.dx:r.dy,r,!a.length),o.length=o.area=0);t.forEach(c)}}function g(e,t){for(var n,r=e.area,a=0,o=1/0,i=-1,s=e.length;++i<s;)(n=e[i].area)&&(n<o&&(o=n),a<n&&(a=n));return t*=t,(r*=r)?Math.max(t*a*l/r,r/(t*o*l)):1/0}function y(e,t,n,r){var a,o=-1,i=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<i;)(a=e[o]).x=s,a.y=l,a.dy=c,s+=a.dx=Math.min(n.x+n.dx-s,c?u(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<i;)(a=e[o]).x=s,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?u(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function m(e){var t=r||a(e),n=t[0];return n.x=n.y=0,n.value?(n.dx=o[0],n.dy=o[1]):n.dx=n.dy=0,r&&a.revalue(n),h([n],n.dx*n.dy/n.value),(r?c:p)(n),s&&(r=t),t}return m.size=function(e){return arguments.length?(o=e,m):o},m.padding=function(n){if(!arguments.length)return i;function e(e){return si(e,n)}var t;return d=null==(i=n)?ii:"function"==(t=typeof n)?function(e){var t=n.call(m,e,e.depth);return null==t?ii(e):si(e,"number"==typeof t?[t,t,t,t]:t)}:("number"===t&&(n=[n,n,n,n]),e),m},m.round=function(e){return arguments.length?(u=e?Math.round:Number,m):u!=Number},m.sticky=function(e){return arguments.length?(s=e,r=null,m):s},m.ratio=function(e){return arguments.length?(l=e,m):l},m.mode=function(e){return arguments.length?(f=e+"",m):f},So(m,a)},D.random={normal:function(r,a){var e=arguments.length;return e<2&&(a=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+a*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=D.random.normal.apply(D,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=D.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},D.scale={};var hi={floor:E,ceil:E};function pi(n,e,t,r){var a=[],o=[],i=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++i<=s;)a.push(t(n[i-1],n[i])),o.push(r(e[i-1],e[i]));return function(e){var t=D.bisect(n,e,1,s)-1;return o[t](a[t](e))}}function gi(e,t){return D.rebind(e,t,"range","rangeRound","interpolate","clamp")}function yi(e,t){return di(e,fi(mi(e,t)[2])),di(e,fi(mi(e,t)[2])),e}function mi(e,t){null==t&&(t=10);var n=li(e),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*a;return o<=.15?a*=10:o<=.35?a*=5:o<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function vi(e,t){return D.range.apply(D,mi(e,t))}function xi(e,t,n){var r,a,o,i=mi(e,t);if(n){var s=Ct.exec(n);if(s.shift(),"s"===s[8]){var l=D.formatPrefix(Math.max(P(i[0]),P(i[1])));return s[7]||(s[7]="."+_i(l.scale(i[2]))),s[8]="f",n=D.format(s.join("")),function(e){return n(l.scale(e))+l.symbol}}s[7]||(s[7]="."+(r=s[8],o=_i((a=i)[2]),r in bi?Math.abs(o-_i(Math.max(P(a[0]),P(a[1]))))+ +("e"!==r):o-2*("%"===r))),n=s.join("")}else n=",."+_i(i[2])+"f";return D.format(n)}D.scale.linear=function(){return function e(n,r,a,o){var i,s;function t(){var e=2<Math.min(n.length,r.length)?pi:ui,t=o?mo:yo;return i=e(n,r,t,a),s=e(r,n,t,Za),l}function l(e){return i(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(lo)};l.clamp=function(e){return arguments.length?(o=e,t()):o};l.interpolate=function(e){return arguments.length?(a=e,t()):a};l.ticks=function(e){return vi(n,e)};l.tickFormat=function(e,t){return xi(n,e,t)};l.nice=function(e){return yi(n,e),t()};l.copy=function(){return e(n,r,a,o)};return t()}([0,1],[0,1],Za,!1)};var bi={s:1,g:1,p:1,r:1,e:1};function _i(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}D.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function f(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(d(e))}a.invert=function(e){return f(t.invert(e))};a.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),a):u};a.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),a):l};a.nice=function(){var e=di(u.map(d),c?Math:ki);return t.domain(e),u=e.map(f),a};a.ticks=function(){var e=li(u),t=[],n=e[0],r=e[1],a=Math.floor(d(n)),o=Math.ceil(d(r)),i=l%1?2:l;if(isFinite(o-a)){if(c){for(;a<o;a++)for(var s=1;s<i;s++)t.push(f(a)*s);t.push(f(a))}else for(t.push(f(a));a++<o;)for(var s=i-1;0<s;s--)t.push(f(a)*s);for(a=0;t[a]<n;a++);for(o=t.length;t[o-1]>r;o--);t=t.slice(a,o)}return t};a.tickFormat=function(e,n){if(!arguments.length)return wi;arguments.length<2?n=wi:"function"!=typeof n&&(n=D.format(n));var r=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/f(Math.round(d(e)));return t*l<l-.5&&(t*=l),t<=r?n(e):""}};a.copy=function(){return e(t.copy(),l,c,u)};return gi(a,t)}(D.scale.linear().domain([0,1]),10,!0,[1,10])};var wi=D.format(".0e"),ki={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Mi(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}D.scale.pow=function(){return function e(t,n,r){var a=Mi(n),o=Mi(1/n);function i(e){return t(a(e))}i.invert=function(e){return o(t.invert(e))};i.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),i):r};i.ticks=function(e){return vi(r,e)};i.tickFormat=function(e,t){return xi(r,e,t)};i.nice=function(e){return i.domain(yi(r,e))};i.exponent=function(e){return arguments.length?(a=Mi(n=e),o=Mi(1/n),t.domain(r.map(a)),i):n};i.copy=function(){return e(t.copy(),n,r)};return gi(i,t)}(D.scale.linear(),1,[0,1])},D.scale.sqrt=function(){return D.scale.pow().exponent(.5)},D.scale.ordinal=function(){return function e(s,l){var a,c,u;function d(e){return c[((a.get(e)||("range"===l.t?a.set(e,s.push(e)):NaN))-1)%c.length]}function f(t,n){return D.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],a=new v;for(var t,n=-1,r=e.length;++n<r;)a.has(t=e[n])||a.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=f(n+a*t/2,a),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=f(n+Math.round(a*t/2+(r-n-(s.length-1+t)*a)/2),a),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[r-0],o=e[1-r],i=(o-a)/(s.length-t+2*n);return c=f(a+i*n,i),r&&c.reverse(),u=i*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[r-0],o=e[1-r],i=Math.floor((o-a)/(s.length-t+2*n));return c=f(a+Math.round((o-a-(s.length-t)*i)/2),i),r&&c.reverse(),u=Math.round(i*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return li(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},D.scale.category10=function(){return D.scale.ordinal().range(Ti)},D.scale.category20=function(){return D.scale.ordinal().range(Ai)},D.scale.category20b=function(){return D.scale.ordinal().range(Si)},D.scale.category20c=function(){return D.scale.ordinal().range(Li)};var Ti=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(it),Ai=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(it),Si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(it),Li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(it);function Ci(){return 0}D.scale.quantile=function(){return function e(n,r){var a;function t(){var e=0,t=r.length;for(a=[];++e<t;)a[e-1]=D.quantile(n,e/t);return o}function o(e){if(!isNaN(e=+e))return r[D.bisect(a,e)]}o.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(l),t()):n};o.range=function(e){return arguments.length?(r=e,t()):r};o.quantiles=function(){return a};o.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]};o.copy=function(){return e(n,r)};return t()}([],[])},D.scale.quantize=function(){return function e(t,n,r){var a,o;function i(e){return r[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),o=r.length-1,i}i.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};i.range=function(e){return arguments.length?(r=e,s()):r};i.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]};i.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},D.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[D.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},D.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return vi(n,e)};t.tickFormat=function(e,t){return xi(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},D.svg={},D.svg.arc=function(){var N=Oi,F=ji,B=Ci,q=zi,H=Pi,V=Di,U=Ii;function t(){var e=Math.max(0,+N.apply(this,arguments)),t=Math.max(0,+F.apply(this,arguments)),n=H.apply(this,arguments)-Se,r=V.apply(this,arguments)-Se,a=Math.abs(r-n),o=r<n?0:1;if(t<e&&(i=t,t=e,e=i),Ae<=a)return G(t,o)+(e?G(e,1-o):"")+"Z";var i,s,l,c,u,d,f,h,p,g,y,m,v=0,x=0,b=[];if((c=(+U.apply(this,arguments)||0)/2)&&(l=q===zi?Math.sqrt(e*e+t*t):+q.apply(this,arguments),o||(x*=-1),t&&(x=Pe(l/t*Math.sin(c))),e&&(v=Pe(l/e*Math.sin(c)))),t){u=t*Math.cos(n+x),d=t*Math.sin(n+x),f=t*Math.cos(r-x),h=t*Math.sin(r-x);var _=Math.abs(r-n-2*x)<=Me?0:1;if(x&&Ei(u,d,f,h)===o^_){var w=(n+r)/2;u=t*Math.cos(w),d=t*Math.sin(w),f=h=null}}else u=d=0;if(e){p=e*Math.cos(r-v),g=e*Math.sin(r-v),y=e*Math.cos(n+v),m=e*Math.sin(n+v);var k=Math.abs(n-r+2*v)<=Me?0:1;if(v&&Ei(p,g,y,m)===1-o^k){var M=(n+r)/2;p=e*Math.cos(M),g=e*Math.sin(M),y=m=null}}else p=g=0;if(we<a&&.001<(i=Math.min(Math.abs(t-e)/2,+B.apply(this,arguments)))){s=e<t^o?0:1;var T=i,A=i;if(a<Me){var S=null==y?[p,g]:null==f?[u,d]:ia([u,d],[y,m],[f,h],[p,g]),L=u-S[0],C=d-S[1],z=f-S[0],O=h-S[1],j=1/Math.sin(Math.acos((L*z+C*O)/(Math.sqrt(L*L+C*C)*Math.sqrt(z*z+O*O)))/2),P=Math.sqrt(S[0]*S[0]+S[1]*S[1]);A=Math.min(i,(e-P)/(j-1)),T=Math.min(i,(t-P)/(j+1))}if(null!=f){var D=Ri(null==y?[p,g]:[y,m],[u,d],t,T,o),I=Ri([f,h],[p,g],t,T,o);i===T?b.push("M",D[0],"A",T,",",T," 0 0,",s," ",D[1],"A",t,",",t," 0 ",1-o^Ei(D[1][0],D[1][1],I[1][0],I[1][1]),",",o," ",I[1],"A",T,",",T," 0 0,",s," ",I[0]):b.push("M",D[0],"A",T,",",T," 0 1,",s," ",I[0])}else b.push("M",u,",",d);if(null!=y){var E=Ri([u,d],[y,m],e,-A,o),R=Ri([p,g],null==f?[u,d]:[f,h],e,-A,o);i===A?b.push("L",R[0],"A",A,",",A," 0 0,",s," ",R[1],"A",e,",",e," 0 ",o^Ei(R[1][0],R[1][1],E[1][0],E[1][1]),",",1-o," ",E[1],"A",A,",",A," 0 0,",s," ",E[0]):b.push("L",R[0],"A",A,",",A," 0 0,",s," ",E[0])}else b.push("L",p,",",g)}else b.push("M",u,",",d),null!=f&&b.push("A",t,",",t," 0 ",_,",",o," ",f,",",h),b.push("L",p,",",g),null!=y&&b.push("A",e,",",e," 0 ",k,",",1-o," ",y,",",m);return b.push("Z"),b.join("")}function G(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(N=gt(e),t):N},t.outerRadius=function(e){return arguments.length?(F=gt(e),t):F},t.cornerRadius=function(e){return arguments.length?(B=gt(e),t):B},t.padRadius=function(e){return arguments.length?(q=e==zi?zi:gt(e),t):q},t.startAngle=function(e){return arguments.length?(H=gt(e),t):H},t.endAngle=function(e){return arguments.length?(V=gt(e),t):V},t.padAngle=function(e){return arguments.length?(U=gt(e),t):U},t.centroid=function(){var e=(+N.apply(this,arguments)+ +F.apply(this,arguments))/2,t=(+H.apply(this,arguments)+ +V.apply(this,arguments))/2-Se;return[Math.cos(t)*e,Math.sin(t)*e]},t};var zi="auto";function Oi(e){return e.innerRadius}function ji(e){return e.outerRadius}function Pi(e){return e.startAngle}function Di(e){return e.endAngle}function Ii(e){return e&&e.padAngle}function Ei(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Ri(e,t,n,r,a){var o=e[0]-t[0],i=e[1]-t[1],s=(a?r:-r)/Math.sqrt(o*o+i*i),l=s*i,c=-s*o,u=e[0]+l,d=e[1]+c,f=t[0]+l,h=t[1]+c,p=(u+f)/2,g=(d+h)/2,y=f-u,m=h-d,v=y*y+m*m,x=n-r,b=u*h-f*d,_=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*v-b*b)),w=(b*m-y*_)/v,k=(-b*y-m*_)/v,M=(b*m+y*_)/v,T=(-b*y+m*_)/v,A=w-p,S=k-g,L=M-p,C=T-g;return L*L+C*C<A*A+S*S&&(w=M,k=T),[[w-l,k-c],[w*n/x,k*n/x]]}function Ni(c){var u=ea,d=ta,f=Yn,h=Bi,t=h.key,p=.7;function n(e){var t,n=[],r=[],a=-1,o=e.length,i=gt(u),s=gt(d);function l(){n.push("M",h(c(r),p))}for(;++a<o;)f.call(this,t=e[a],a)?r.push([+i.call(this,t,a),+s.call(this,t,a)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(f=e,n):f},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?h=e:(h=Fi.get(e)||Bi).key,n):t},n.tension=function(e){return arguments.length?(p=e,n):p},n}D.svg.line=function(){return Ni(E)};var Fi=D.map({linear:Bi,"linear-closed":qi,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&a.push("H",r[0]);return a.join("")},"step-before":Hi,"step-after":Vi,basis:Yi,"basis-open":function(e){if(e.length<4)return Bi(e);var t,n=[],r=-1,a=e.length,o=[0],i=[0];for(;++r<3;)t=e[r],o.push(t[0]),i.push(t[1]);n.push(Xi(Ji,o)+","+Xi(Ji,i)),--r;for(;++r<a;)t=e[r],o.shift(),o.push(t[0]),i.shift(),i.push(t[1]),Qi(n,o,i);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,o=a+4,i=[],s=[];for(;++r<4;)n=e[r%a],i.push(n[0]),s.push(n[1]);t=[Xi(Ji,i),",",Xi(Ji,s)],--r;for(;++r<o;)n=e[r%a],i.shift(),i.push(n[0]),s.shift(),s.push(n[1]),Qi(t,i,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,o=e[0][0],i=e[0][1],s=e[n][0]-o,l=e[n][1]-i,c=-1;++c<=n;)r=e[c],a=c/n,r[0]=t*r[0]+(1-t)*(o+a*s),r[1]=t*r[1]+(1-t)*(i+a*l);return Yi(e)},cardinal:function(e,t){return e.length<3?Bi(e):e[0]+Ui(e,Gi(e,t))},"cardinal-open":function(e,t){return e.length<4?Bi(e):e[1]+Ui(e.slice(1,-1),Gi(e,t))},"cardinal-closed":function(e,t){return e.length<3?qi(e):e[0]+Ui((e.push(e[0]),e),Gi([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Bi(e):e[0]+Ui(e,function(e){var t,n,r,a,o=[],i=function(e){var t=0,n=e.length-1,r=[],a=e[0],o=e[1],i=r[0]=$i(a,o);for(;++t<n;)r[t]=(i+(i=$i(a=o,o=e[t+1])))/2;return r[t]=i,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=$i(e[s],e[s+1]),P(t)<we?i[s]=i[s+1]=0:(n=i[s]/t,r=i[s+1]/t,9<(a=n*n+r*r)&&(a=3*t/Math.sqrt(a),i[s]=a*n,i[s+1]=a*r));s=-1;for(;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+i[s]*i[s])),o.push([a||0,i[s]*a||0]);return o}(e))}});function Bi(e){return 1<e.length?e.join("L"):e+"Z"}function qi(e){return e.join("L")+"Z"}function Hi(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function Vi(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function Ui(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Bi(e);var n=e.length!=t.length,r="",a=e[0],o=e[1],i=t[0],s=i,l=1;if(n&&(r+="Q"+(o[0]-2*i[0]/3)+","+(o[1]-2*i[1]/3)+","+o[0]+","+o[1],a=e[1],l=2),1<t.length){s=t[1],o=e[l],l++,r+="C"+(a[0]+i[0])+","+(a[1]+i[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<t.length;c++,l++)o=e[l],s=t[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Gi(e,t){for(var n,r=[],a=(1-t)/2,o=e[0],i=e[1],s=1,l=e.length;++s<l;)n=o,o=i,i=e[s],r.push([a*(i[0]-n[0]),a*(i[1]-n[1])]);return r}function Yi(e){if(e.length<3)return Bi(e);var t=1,n=e.length,r=e[0],a=r[0],o=r[1],i=[a,a,a,(r=e[1])[0]],s=[o,o,o,r[1]],l=[a,",",o,"L",Xi(Ji,i),",",Xi(Ji,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],i.shift(),i.push(r[0]),s.shift(),s.push(r[1]),Qi(l,i,s);return e.pop(),l.push("L",r),l.join("")}function Xi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Fi.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Zi=[0,2/3,1/3,0],Wi=[0,1/3,2/3,0],Ji=[0,1/6,2/3,1/6];function Qi(e,t,n){e.push("C",Xi(Zi,t),",",Xi(Zi,n),",",Xi(Wi,t),",",Xi(Wi,n),",",Xi(Ji,t),",",Xi(Ji,n))}function $i(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ki(e){for(var t,n,r,a=-1,o=e.length;++a<o;)n=(t=e[a])[0],r=t[1]-Se,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function es(p){var g=ea,y=ea,m=0,v=ta,x=Yn,b=Bi,t=b.key,_=b,w="L",k=.7;function n(e){var t,n,r,a=[],o=[],i=[],s=-1,l=e.length,c=gt(g),u=gt(m),d=g===y?function(){return n}:gt(y),f=m===v?function(){return r}:gt(v);function h(){a.push("M",b(p(i),k),w,_(p(o.reverse()),k),"Z")}for(;++s<l;)x.call(this,t=e[s],s)?(o.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),i.push([+d.call(this,t,s),+f.call(this,t,s)])):o.length&&(h(),o=[],i=[]);return o.length&&h(),a.length?a.join(""):null}return n.x=function(e){return arguments.length?(g=y=e,n):y},n.x0=function(e){return arguments.length?(g=e,n):g},n.x1=function(e){return arguments.length?(y=e,n):y},n.y=function(e){return arguments.length?(m=v=e,n):v},n.y0=function(e){return arguments.length?(m=e,n):m},n.y1=function(e){return arguments.length?(v=e,n):v},n.defined=function(e){return arguments.length?(x=e,n):x},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?b=e:(b=Fi.get(e)||Bi).key,_=b.reverse||b,w=b.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(k=e,n):k},n}function ts(e){return e.radius}function ns(e){return[e.x,e.y]}function rs(){return 64}function as(){return"circle"}function os(e){var t=Math.sqrt(e/Me);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}D.svg.line.radial=function(){var e=Ni(Ki);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(Hi.reverse=Vi).reverse=Hi,D.svg.area=function(){return es(E)},D.svg.area.radial=function(){var e=es(Ki);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},D.svg.chord=function(){var i=Br,s=qr,l=ts,c=Pi,u=Di;function t(e,t){var n,r,a=d(this,i,e,t),o=d(this,s,e,t);return"M"+a.p0+f(a.r,a.p1,a.a1-a.a0)+(r=o,(n=a).a0==r.a0&&n.a1==r.a1?h(a.r,a.p1,a.r,a.p0):h(a.r,a.p1,o.r,o.p0)+f(o.r,o.p1,o.a1-o.a0)+h(o.r,o.p1,a.r,a.p0))+"Z"}function d(e,t,n,r){var a=t.call(e,n,r),o=l.call(e,a,r),i=c.call(e,a,r)-Se,s=u.call(e,a,r)-Se;return{r:o,a0:i,a1:s,p0:[o*Math.cos(i),o*Math.sin(i)],p1:[o*Math.cos(s),o*Math.sin(s)]}}function f(e,t,n){return"A"+e+","+e+" 0 "+ +(Me<n)+",1 "+t}function h(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(l=gt(e),t):l},t.source=function(e){return arguments.length?(i=gt(e),t):i},t.target=function(e){return arguments.length?(s=gt(e),t):s},t.startAngle=function(e){return arguments.length?(c=gt(e),t):c},t.endAngle=function(e){return arguments.length?(u=gt(e),t):u},t},D.svg.diagonal=function(){var i=Br,s=qr,l=ns;function t(e,t){var n=i.call(this,e,t),r=s.call(this,e,t),a=(n.y+r.y)/2,o=[n,{x:n.x,y:a},{x:r.x,y:a},r];return"M"+(o=o.map(l))[0]+"C"+o[1]+" "+o[2]+" "+o[3]}return t.source=function(e){return arguments.length?(i=gt(e),t):i},t.target=function(e){return arguments.length?(s=gt(e),t):s},t.projection=function(e){return arguments.length?(l=e,t):l},t},D.svg.diagonal.radial=function(){var e=D.svg.diagonal(),t=ns,n=e.projection;return e.projection=function(e){return arguments.length?n((r=t=e,function(){var e=r.apply(this,arguments),t=e[0],n=e[1]-Se;return[t*Math.cos(n),t*Math.sin(n)]})):t;var r},e},D.svg.symbol=function(){var n=as,r=rs;function t(e,t){return(is.get(n.call(this,e,t))||os)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=gt(e),t):n},t.size=function(e){return arguments.length?(r=gt(e),t):r},t};var is=D.map({circle:os,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ls)),n=t*ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});D.svg.symbolTypes=is.keys();var ss=Math.sqrt(3),ls=Math.tan(30*Le);Y.transition=function(e){for(var t,n,r=fs||++gs,a=vs(e),o=[],i=hs||{time:Date.now(),ease:ro,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&xs(n,u,a,r,i),t.push(n)}return ds(o,a,r)},Y.interrupt=function(e){return this.each(null==e?cs:us(vs(e)))};var cs=us(vs());function us(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ds(e,t,n){return q(e,ps),e.namespace=t,e.id=n,e}var fs,hs,ps=[],gs=0;function ys(e,r,a,o){var i=e.id,s=e.namespace;return ce(e,"function"==typeof a?function(e,t,n){e[s][i].tween.set(r,o(a.call(e,e.__data__,t,n)))}:(a=o(a),function(e){e[s][i].tween.set(r,a)}))}function ms(e){return null==e&&(e=""),function(){this.textContent=e}}function vs(e){return null==e?"__transition__":"__transition_"+e+"__"}function xs(o,i,a,s,e){var l,c,u,d,f,h=o[a]||(o[a]={active:0,count:0}),p=h[s];function n(e){var t=h.active,n=h[t];for(var r in n&&(n.timer.c=null,n.timer.t=NaN,--h.count,delete h[t],n.event&&n.event.interrupt.call(o,o.__data__,n.index)),h)if(+r<s){var a=h[r];a.timer.c=null,a.timer.t=NaN,--h.count,delete h[r]}c.c=g,kt(function(){return c.c&&g(e||1)&&(c.c=null,c.t=NaN),1},0,l),h.active=s,p.event&&p.event.start.call(o,o.__data__,i),f=[],p.tween.forEach(function(e,t){(t=t.call(o,o.__data__,i))&&f.push(t)}),d=p.ease,u=p.duration}function g(e){for(var t=e/u,n=d(t),r=f.length;0<r;)f[--r].call(o,n);if(1<=t)return p.event&&p.event.end.call(o,o.__data__,i),--h.count?delete h[s]:delete o[a],1}p||(l=e.time,c=kt(function(e){var t=p.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),p=h[s]={tween:new v,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:i},e=null,++h.count)}ps.call=Y.call,ps.empty=Y.empty,ps.node=Y.node,ps.size=Y.size,D.transition=function(e,t){return e&&e.transition?fs?e.transition(t):e:D.selection().transition(e)},(D.transition.prototype=ps).select=function(e){var t,n,r,a=this.id,o=this.namespace,i=[];e=X(e);for(var s=-1,l=this.length;++s<l;){i.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),xs(n,u,o,a,r[o][a]),t.push(n)):t.push(null)}return ds(i,o,a)},ps.selectAll=function(e){var t,n,r,a,o,i=this.id,s=this.namespace,l=[];e=Z(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,h=d.length;++f<h;)if(r=d[f]){o=r[s][i],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(a=n[p])&&xs(a,p,s,i,o),t.push(a)}return ds(l,s,i)},ps.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=le(e));for(var a=0,o=this.length;a<o;a++){r.push(t=[]);for(var i,s=0,l=(i=this[a]).length;s<l;s++)(n=i[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return ds(r,this.namespace,this.id)},ps.tween=function(t,n){var r=this.id,a=this.namespace;return arguments.length<2?this.node()[a][r].tween.get(t):ce(this,null==n?function(e){e[a][r].tween.remove(t)}:function(e){e[a][r].tween.set(t,n)})},ps.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?go:Za,a=D.ns.qualify(e);function o(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}return ys(this,"attr."+e,t,a.local?function(n){return null==n?i:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(n){return null==n?o:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=r(e,n),function(e){this.setAttribute(a,t(e))})})})},ps.attrTween=function(e,r){var a=D.ns.qualify(e);return this.tween("attr."+e,a.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}})},ps.style=function(r,e,a){var t=arguments.length;if(t<3){if("string"!=typeof r){for(a in t<2&&(e=""),r)this.style(a,r[a],e);return this}a=""}function o(){this.style.removeProperty(r)}return ys(this,"style."+r,e,function(n){return null==n?o:(n+="",function(){var t,e=I(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=Za(e,n),function(e){this.style.setProperty(r,t(e),a)})})})},ps.styleTween=function(r,a,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(e,t){var n=a.call(this,e,t,I(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),o)}})},ps.text=function(e){return ys(this,"text",e,ms)},ps.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},ps.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=D.ease.apply(D,arguments)),ce(this,function(e){e[r][n].ease=t}))},ps.delay=function(r){var a=this.id,o=this.namespace;return arguments.length<1?this.node()[o][a].delay:ce(this,"function"==typeof r?function(e,t,n){e[o][a].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[o][a].delay=r}))},ps.duration=function(r){var a=this.id,o=this.namespace;return arguments.length<1?this.node()[o][a].duration:ce(this,"function"==typeof r?function(e,t,n){e[o][a].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[o][a].duration=r}))},ps.each=function(r,n){var a=this.id,o=this.namespace;if(arguments.length<2){var e=hs,t=fs;try{fs=a,ce(this,function(e,t,n){hs=e[o][a],r.call(e,e.__data__,t,n)})}finally{hs=e,fs=t}}else ce(this,function(e){var t=e[o][a];(t.event||(t.event=D.dispatch("start","end","interrupt"))).on(r,n)});return this},ps.transition=function(){for(var e,t,n,r=this.id,a=++gs,o=this.namespace,i=[],s=0,l=this.length;s<l;s++){i.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&xs(t,u,o,a,{time:(n=t[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return ds(i,o,a)},D.svg.axis=function(){var A,S=D.scale.linear(),L=bs,C=6,z=6,O=3,j=[10],P=null;function n(e){e.each(function(){var e,t=D.select(this),n=this.__chart__||S,r=this.__chart__=S.copy(),a=null==P?r.ticks?r.ticks.apply(r,j):r.domain():P,o=null==A?r.tickFormat?r.tickFormat.apply(r,j):E:A,i=t.selectAll(".tick").data(a,r),s=i.enter().insert("g",".domain").attr("class","tick").style("opacity",we),l=D.transition(i.exit()).style("opacity",we).remove(),c=D.transition(i.order()).style("opacity",1),u=Math.max(C,0)+O,d=ci(r),f=t.selectAll(".domain").data([0]),h=(f.enter().append("path").attr("class","domain"),D.transition(f));s.append("line"),s.append("text");var p,g,y,m,v=s.select("line"),x=c.select("line"),b=i.select("text").text(o),_=s.select("text"),w=c.select("text"),k="top"===L||"left"===L?-1:1;if("bottom"===L||"top"===L?(e=ws,p="x",y="y",g="x2",m="y2",b.attr("dy",k<0?"0em":".71em").style("text-anchor","middle"),h.attr("d","M"+d[0]+","+k*z+"V0H"+d[1]+"V"+k*z)):(e=ks,p="y",y="x",g="y2",m="x2",b.attr("dy",".32em").style("text-anchor",k<0?"end":"start"),h.attr("d","M"+k*z+","+d[0]+"H0V"+d[1]+"H"+k*z)),v.attr(m,k*C),_.attr(y,k*u),x.attr(g,0).attr(m,k*C),w.attr(p,0).attr(y,k*u),r.rangeBand){var M=r,T=M.rangeBand()/2;n=r=function(e){return M(e)+T}}else n.rangeBand?n=r:l.call(e,r,n);s.call(e,n,r),c.call(e,r,r)})}return n.scale=function(e){return arguments.length?(S=e,n):S},n.orient=function(e){return arguments.length?(L=e in _s?e+"":bs,n):L},n.ticks=function(){return arguments.length?(j=f(arguments),n):j},n.tickValues=function(e){return arguments.length?(P=e,n):P},n.tickFormat=function(e){return arguments.length?(A=e,n):A},n.tickSize=function(e){var t=arguments.length;return t?(C=+e,z=+arguments[t-1],n):C},n.innerTickSize=function(e){return arguments.length?(C=+e,n):C},n.outerTickSize=function(e){return arguments.length?(z=+e,n):z},n.tickPadding=function(e){return arguments.length?(O=+e,n):O},n.tickSubdivide=function(){return arguments.length&&n},n};var bs="bottom",_s={top:1,right:1,bottom:1,left:1};function ws(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function ks(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}D.svg.brush=function(){var v,x,b=F(S,"brushstart","brush","brushend"),_=null,w=null,k=[0,0],M=[0,0],T=!0,A=!0,i=Ts[0];function S(e){e.each(function(){var e=D.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(i,E);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ms[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",S.empty()?"none":null);var r,a=D.transition(e),o=D.transition(t);_&&(r=ci(_),o.attr("x",r[0]).attr("width",r[1]-r[0]),C(a)),w&&(r=ci(w),o.attr("y",r[0]).attr("height",r[1]-r[0]),z(a)),L(a)})}function L(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+k[+/e$/.test(e)]+","+M[+/^s/.test(e)]+")"})}function C(e){e.select(".extent").attr("x",k[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function z(e){e.select(".extent").attr("y",M[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",M[1]-M[0])}function s(){var d,n,r=this,e=D.select(D.event.target),a=b.of(r,arguments),o=D.select(r),t=e.datum(),i=!/^(n|s)$/.test(t)&&_,s=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),l=ve(r),h=D.mouse(r),c=D.select(I(r)).on("keydown.brush",function(){32==D.event.keyCode&&(f||(d=null,h[0]-=k[1],h[1]-=M[1],f=2),R())}).on("keyup.brush",function(){32==D.event.keyCode&&2==f&&(h[0]+=k[1],h[1]+=M[1],f=0,R())});if(D.event.changedTouches?c.on("touchmove.brush",g).on("touchend.brush",m):c.on("mousemove.brush",g).on("mouseup.brush",m),o.interrupt().selectAll("*").interrupt(),f)h[0]=k[0]-h[0],h[1]=M[0]-h[1];else if(t){var u=+/w$/.test(t),p=+/^n/.test(t);n=[k[1-u]-h[0],M[1-p]-h[1]],h[0]=k[u],h[1]=M[p]}else D.event.altKey&&(d=h.slice());function g(){var e=D.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),f||(D.event.altKey?(d||(d=[(k[0]+k[1])/2,(M[0]+M[1])/2]),h[0]=k[+(e[0]<d[0])],h[1]=M[+(e[1]<d[1])]):d=null),i&&y(e,_,0)&&(C(o),t=!0),s&&y(e,w,1)&&(z(o),t=!0),t&&(L(o),a({type:"brush",mode:f?"move":"resize"}))}function y(e,t,n){var r,a,o=ci(t),i=o[0],s=o[1],l=h[n],c=n?M:k,u=c[1]-c[0];if(f&&(i-=l,s-=u+l),r=(n?A:T)?Math.max(i,Math.min(s,e[n])):e[n],f?a=(r+=l)+u:(d&&(l=Math.max(i,Math.min(s,2*d[n]-r))),l<r?(a=r,r=l):a=l),c[0]!=r||c[1]!=a)return n?x=null:v=null,c[0]=r,c[1]=a,!0}function m(){g(),o.style("pointer-events","all").selectAll(".resize").style("display",S.empty()?"none":null),D.select("body").style("cursor",null),c.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),a({type:"brushend"})}o.style("pointer-events","none").selectAll(".resize").style("display",null),D.select("body").style("cursor",e.style("cursor")),a({type:"brushstart"}),g()}return S.event=function(e){e.each(function(){var r=b.of(this,arguments),a={x:k,y:M,i:v,j:x},e=this.__chart__||a;this.__chart__=a,fs?D.select(this).transition().each("start.brush",function(){v=e.i,x=e.j,k=e.x,M=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=Wa(k,a.x),n=Wa(M,a.y);return v=x=null,function(e){k=a.x=t(e),M=a.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=a.i,x=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},S.x=function(e){return arguments.length?(i=Ts[!(_=e)<<1|!w],S):_},S.y=function(e){return arguments.length?(i=Ts[!_<<1|!(w=e)],S):w},S.clamp=function(e){return arguments.length?(_&&w?(T=!!e[0],A=!!e[1]):_?T=!!e:w&&(A=!!e),S):_&&w?[T,A]:_?T:w?A:null},S.extent=function(e){var t,n,r,a,o;return arguments.length?(_&&(t=e[0],n=e[1],w&&(t=t[0],n=n[0]),v=[t,n],_.invert&&(t=_(t),n=_(n)),n<t&&(o=t,t=n,n=o),t==k[0]&&n==k[1]||(k=[t,n])),w&&(r=e[0],a=e[1],_&&(r=r[1],a=a[1]),x=[r,a],w.invert&&(r=w(r),a=w(a)),a<r&&(o=r,r=a,a=o),r==M[0]&&a==M[1]||(M=[r,a])),S):(_&&(v?(t=v[0],n=v[1]):(t=k[0],n=k[1],_.invert&&(t=_.invert(t),n=_.invert(n)),n<t&&(o=t,t=n,n=o))),w&&(x?(r=x[0],a=x[1]):(r=M[0],a=M[1],w.invert&&(r=w.invert(r),a=w.invert(a)),a<r&&(o=r,r=a,a=o))),_&&w?[[t,r],[n,a]]:_?[t,n]:w&&[r,a])},S.clear=function(){return S.empty()||(k=[0,0],M=[0,0],v=x=null),S},S.empty=function(){return!!_&&k[0]==k[1]||!!w&&M[0]==M[1]},D.rebind(S,b,"on")};var Ms={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ts=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],As=jt.format=sn.timeFormat,Ss=As.utc,Ls=Ss("%Y-%m-%dT%H:%M:%S.%LZ");function Cs(e){return e.toISOString()}function zs(t,a,e){function i(e){return t(e)}function s(e,t){var n=(e[1]-e[0])/t,r=D.bisect(js,n);return r==js.length?[a.year,mi(e.map(function(e){return e/31536e6}),t)[2]]:r?a[n/js[r-1]<js[r]/n?r-1:r]:[Is,mi(e,t)[2]]}return i.invert=function(e){return Os(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Os)},i.nice=function(t,n){var e=i.domain(),r=li(e),a=null==t?s(r,10):"number"==typeof t&&s(r,t);function o(e){return!isNaN(e)&&!t.range(e,Os(+e+1),n).length}return a&&(t=a[0],n=a[1]),i.domain(di(e,1<n?{floor:function(e){for(;o(e=t.floor(e));)e=Os(e-1);return e},ceil:function(e){for(;o(e=t.ceil(e));)e=Os(+e+1);return e}}:t))},i.ticks=function(e,t){var n=li(i.domain()),r=null==e?s(n,10):"number"==typeof e?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Os(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return e},i.copy=function(){return zs(t.copy(),a,e)},gi(i,t)}function Os(e){return new Date(e)}As.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Cs:Ls,Cs.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Cs.toString=Ls.toString,jt.second=Et(function(e){return new Pt(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),jt.seconds=jt.second.range,jt.seconds.utc=jt.second.utc.range,jt.minute=Et(function(e){return new Pt(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),jt.minutes=jt.minute.range,jt.minutes.utc=jt.minute.utc.range,jt.hour=Et(function(e){var t=e.getTimezoneOffset()/60;return new Pt(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),jt.hours=jt.hour.range,jt.hours.utc=jt.hour.utc.range,jt.month=Et(function(e){return(e=jt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),jt.months=jt.month.range,jt.months.utc=jt.month.utc.range;var js=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ps=[[jt.second,1],[jt.second,5],[jt.second,15],[jt.second,30],[jt.minute,1],[jt.minute,5],[jt.minute,15],[jt.minute,30],[jt.hour,1],[jt.hour,3],[jt.hour,6],[jt.hour,12],[jt.day,1],[jt.day,2],[jt.week,1],[jt.month,1],[jt.month,3],[jt.year,1]],Ds=As.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Yn]]),Is={range:function(e,t,n){return D.range(Math.ceil(e/n)*n,+t,n).map(Os)},floor:E,ceil:E};Ps.year=jt.year,jt.scale=function(){return zs(D.scale.linear(),Ps,Ds)};var Es=Ps.map(function(e){return[e[0].utc,e[1]]}),Rs=Ss.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Yn]]);function Ns(e){return JSON.parse(e.responseText)}function Fs(e){var t=x.createRange();return t.selectNode(x.body),t.createContextualFragment(e.responseText)}Es.year=jt.year.utc,jt.scale.utc=function(){return zs(D.scale.linear(),Es,Rs)},D.text=yt(function(e){return e.responseText}),D.json=function(e,t){return mt(e,"application/json",Ns,t)},D.html=function(e,t){return mt(e,"text/html",Fs,t)},D.xml=yt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=D,define(D)):"object"==typeof module&&module.exports?module.exports=D:this.d3=D}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition"],t):t(e.venn=e.venn||{},e.d3,e.d3)}(this,function(e,O,t){"use strict";var k=1e-10;function f(t,e){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var a=z(e[n],e[r]),o=0;o<a.length;++o){var i=a[o];i.parentIndex=[n,r],t.push(i)}return t}(t),a=r.filter(function(e){return function(e,t){for(var n=0;n<t.length;++n)if(T(e,t[n])>t[n].radius+k)return!1;return!0}(e,t)}),o=0,i=0,s=[];if(1<a.length){var l=A(a);for(n=0;n<a.length;++n){var c=a[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}a.sort(function(e,t){return t.angle-e.angle});var u=a[a.length-1];for(n=0;n<a.length;++n){var d=a[n];i+=(u.x+d.x)*(d.y-u.y);for(var f={x:(d.x+u.x)/2,y:(d.y+u.y)/2},h=null,p=0;p<d.parentIndex.length;++p)if(-1<u.parentIndex.indexOf(d.parentIndex[p])){var g=t[d.parentIndex[p]],y=Math.atan2(d.x-g.x,d.y-g.y),m=Math.atan2(u.x-g.x,u.y-g.y),v=m-y;v<0&&(v+=2*Math.PI);var x=m-v/2,b=T(f,{x:g.x+g.radius*Math.sin(x),y:g.y+g.radius*Math.cos(x)});(null===h||h.width>b)&&(h={circle:g,width:b,p1:d,p2:u})}null!==h&&(s.push(h),o+=M(h.circle.radius,h.width),u=d)}}else{var _=t[0];for(n=1;n<t.length;++n)t[n].radius<_.radius&&(_=t[n]);var w=!1;for(n=0;n<t.length;++n)if(T(t[n],_)>Math.abs(_.radius-t[n].radius)){w=!0;break}w?o=i=0:(o=_.radius*_.radius*Math.PI,s.push({circle:_,p1:{x:_.x,y:_.y+_.radius},p2:{x:_.x-k,y:_.y+_.radius},width:2*_.radius}))}return i/=2,e&&(e.area=o+i,e.arcArea=o,e.polygonArea=i,e.arcs=s,e.innerPoints=a,e.intersectionPoints=r),o+i}function M(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function T(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function l(e,t,n){if(e+t<=n)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return M(e,e-(n*n-t*t+e*e)/(2*n))+M(t,r)}function z(e,t){var n=T(e,t),r=e.radius,a=t.radius;if(r+a<=n||n<=Math.abs(r-a))return[];var o=(r*r-a*a+n*n)/(2*n),i=Math.sqrt(r*r-o*o),s=e.x+o*(t.x-e.x)/n,l=e.y+o*(t.y-e.y)/n,c=-(t.y-e.y)*(i/n),u=-(t.x-e.x)*(i/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function A(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function S(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function L(e,t){return S(e).map(function(){return S(t)})}function g(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function C(e){return Math.sqrt(g(e,e))}function j(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function P(e,t,n,r,a){for(var o=0;o<e.length;++o)e[o]=t*n[o]+r*a[o]}function h(e,t,n){var r,a=(n=n||{}).maxIterations||200*t.length,o=n.nonZeroDelta||1.05,i=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,h=t.length,p=new Array(h+1);p[0]=t,p[0].fx=e(t);for(var g=p[0].id=0;g<h;++g){var y=t.slice();y[g]=y[g]?y[g]*o:i,p[g+1]=y,p[g+1].fx=e(y),p[g+1].id=g+1}function m(e){for(var t=0;t<e.length;t++)p[h][t]=e[t];p[h].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},x=t.slice(),b=t.slice(),_=t.slice(),w=t.slice(),k=0;k<a;++k){if(p.sort(v),n.history){var M=p.map(function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t});M.sort(function(e,t){return e.id-t.id}),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:M})}for(g=r=0;g<h;++g)r=Math.max(r,Math.abs(p[0][g]-p[1][g]));if(Math.abs(p[0].fx-p[h].fx)<s&&r<l)break;for(g=0;g<h;++g){for(var T=x[g]=0;T<h;++T)x[g]+=p[T][g];x[g]/=h}var A=p[h];if(P(b,1+c,x,-c,A),b.fx=e(b),b.fx<p[0].fx)P(w,1+u,x,-u,A),w.fx=e(w),w.fx<b.fx?m(w):m(b);else if(b.fx>=p[h-1].fx){var S=!1;if(b.fx>A.fx?(P(_,1+d,x,-d,A),_.fx=e(_),_.fx<A.fx?m(_):S=!0):(P(_,1-d*c,x,d*c,A),_.fx=e(_),_.fx<b.fx?m(_):S=!0),S){if(1<=f)break;for(g=1;g<p.length;++g)P(p[g],1-f,p[0],f,p[g]),p[g].fx=e(p[g])}}else m(b)}return p.sort(v),{fx:p[0].fx,x:p[0]}}function p(a,o,i,s,l,c,u){var d=i.fx,f=g(i.fxprime,o),h=d,e=d,p=f,t=0;function n(e,t,n){for(var r=0;r<16;++r)if(l=(e+t)/2,P(s.x,1,i.x,l,o),h=s.fx=a(s.x,s.fxprime),p=g(s.fxprime,o),d+c*l*f<h||n<=h)t=l;else{if(Math.abs(p)<=-u*f)return l;0<=p*(t-e)&&(t=e),e=l,n=h}return 0}l=l||1,c=c||1e-6,u=u||.1;for(var r=0;r<10;++r){if(P(s.x,1,i.x,l,o),h=s.fx=a(s.x,s.fxprime),p=g(s.fxprime,o),d+c*l*f<h||r&&e<=h)return n(t,l,e);if(Math.abs(p)<=-u*f)return l;if(0<=p)return n(l,t,h);e=h,t=l,l*=2}return l}function D(e,t,n){var r,a,o,i={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},l=t.slice(),c=1;o=(n=n||{}).maxIterations||20*t.length,i.fx=e(i.x,i.fxprime),j(r=i.fxprime.slice(),i.fxprime,-1);for(var u=0;u<o;++u){if(c=p(e,r,i,s,c),n.history&&n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),alpha:c}),c){P(l,1,s.fxprime,-1,i.fxprime);var d=g(i.fxprime,i.fxprime);P(r,Math.max(0,g(l,s.fxprime)/d),r,-1,s.fxprime),a=i,i=s,s=a}else j(r,i.fxprime,-1);if(C(i.fxprime)<=1e-5)break}return n.history&&n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),alpha:c}),i}function o(a,e){(e=e||{}).maxIterations=e.maxIterations||500;var t,o=(e.initialLayout||c)(a=function(e){e=e.slice();var t,n,r,a,o=[],i={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?o.push(s.sets[0]):2==s.sets.length&&(r=s.sets[0],a=s.sets[1],i[[r,a]]=!0,i[[a,r]]=!0)}for(o.sort(function(e,t){return t<e}),t=0;t<o.length;++t)for(r=o[t],n=t+1;n<o.length;++n)a=o[n],[r,a]in i||e.push({sets:[r,a],size:0});return e}(a)),n=[],i=[];for(t in o)o.hasOwnProperty(t)&&(n.push(o[t].x),n.push(o[t].y),i.push(t));for(var r=h(function(e){1;for(var t={},n=0;n<i.length;++n){var r=i[n];t[r]={x:e[2*n],y:e[2*n+1],radius:o[r].radius}}return R(t,a)},n,e).x,s=0;s<i.length;++s)t=i[s],o[t].x=r[2*s],o[t].y=r[2*s+1];return o}var I=1e-10;function E(t,n,r){return Math.min(t,n)*Math.min(t,n)*Math.PI<=r+I?Math.abs(t-n):function(e,t,n,r){var a=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,i=e(t),s=e(n),l=n-t;if(0<i*s)throw"Initial bisect points must have opposite signs";if(0===i)return t;if(0===s)return n;for(var c=0;c<a;++c){var u=t+(l/=2),d=e(u);if(0<=d*i&&(t=u),Math.abs(l)<o||0===d)return u}return t+l}(function(e){return l(t,n,e)-r},0,t+n)}function c(e,t){var n=a(e);if(8<=e.length){var r=function(e,t){var n,r=(t=t||{}).restarts||10,a=[],o={};for(n=0;n<e.length;++n){var i=e[n];1==i.sets.length&&(o[i.sets[0]]=a.length,a.push(i))}var s=(d=e,f=a,h=o,p=L(f.length,f.length),g=L(f.length,f.length),d.filter(function(e){return 2==e.sets.length}).map(function(e){var t=h[e.sets[0]],n=h[e.sets[1]],r=E(Math.sqrt(f[t].size/Math.PI),Math.sqrt(f[n].size/Math.PI),e.size);p[t][n]=p[n][t]=r;var a=0;e.size+1e-10>=Math.min(f[t].size,f[n].size)?a=1:e.size<=1e-10&&(a=-1),g[t][n]=g[n][t]=a}),{distances:p,constraints:g}),l=s.distances,c=s.constraints,u=C(l.map(C))/l.length;var d,f,h,p,g;l=l.map(function(e){return e.map(function(e){return e/u})});var y,m,v=function(e,t){return function(e,t,n,r){var a,o=0;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<n.length;++a)for(var i=e[2*a],s=e[2*a+1],l=a+1;l<n.length;++l){var c=e[2*l],u=e[2*l+1],d=n[a][l],f=r[a][l],h=(c-i)*(c-i)+(u-s)*(u-s),p=Math.sqrt(h),g=h-d*d;0<f&&p<=d||f<0&&d<=p||(o+=2*g*g,t[2*a]+=4*g*(i-c),t[2*a+1]+=4*g*(s-u),t[2*l]+=4*g*(c-i),t[2*l+1]+=4*g*(u-s))}return o}(e,t,l,c)};for(n=0;n<r;++n){var x=S(2*l.length).map(Math.random);m=D(v,x,t),(!y||m.fx<y.fx)&&(y=m)}var b=y.x,_={};for(n=0;n<a.length;++n){var w=a[n];_[w.sets[0]]={x:b[2*n]*u,y:b[2*n+1]*u,radius:Math.sqrt(w.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)j(t.history[n].x,u);return _}(e,t);R(r,e)+1e-8<R(n,e)&&(n=r)}return n}function a(e){for(var t,n={},r={},a=0;a<e.length;++a){var o=e[a];1==o.sets.length&&(t=o.sets[0],n[t]={x:1e10,y:1e10,rowid:n.length,size:o.size,radius:Math.sqrt(o.size/Math.PI)},r[t]=[])}for(e=e.filter(function(e){return 2==e.sets.length}),a=0;a<e.length;++a){var i=e[a],s=i.hasOwnProperty("weight")?i.weight:1,l=i.sets[0],c=i.sets[1];i.size+I>=Math.min(n[l].size,n[c].size)&&(s=0),r[l].push({set:c,size:i.size,weight:s}),r[c].push({set:l,size:i.size,weight:s})}var u=[];for(t in r)if(r.hasOwnProperty(t)){var d=0;for(a=0;a<r[t].length;++a)d+=r[t][a].size*r[t][a].weight;u.push({set:t,size:d})}function f(e,t){return t.size-e.size}u.sort(f);var h={};function p(e){return e.set in h}function g(e,t){n[t].x=e.x,n[t].y=e.y,h[t]=!0}for(g({x:0,y:0},u[0].set),a=1;a<u.length;++a){var y=u[a].set,m=r[y].filter(p);if(t=n[y],m.sort(f),0===m.length)throw"ERROR: missing pairwise overlap information";for(var v=[],x=0;x<m.length;++x){var b=n[m[x].set],_=E(t.radius,b.radius,m[x].size);v.push({x:b.x+_,y:b.y}),v.push({x:b.x-_,y:b.y}),v.push({y:b.y+_,x:b.x}),v.push({y:b.y-_,x:b.x});for(var w=x+1;w<m.length;++w)for(var k=n[m[w].set],M=E(t.radius,k.radius,m[w].size),T=z({x:b.x,y:b.y,radius:_},{x:k.x,y:k.y,radius:M}),A=0;A<T.length;++A)v.push(T[A])}var S=1e50,L=v[0];for(x=0;x<v.length;++x){n[y].x=v[x].x,n[y].y=v[x].y;var C=R(n,e);C<S&&(S=C,L=v[x])}g(L,y)}return n}function R(t,e){var n=0;for(var r=0;r<e.length;++r){var a,o=e[r];if(1!=o.sets.length){if(2==o.sets.length){var i=t[o.sets[0]],s=t[o.sets[1]];a=l(i.radius,s.radius,T(i,s))}else a=f(o.sets.map(function(e){return t[e]}));n+=(o.hasOwnProperty("weight")?o.weight:1)*(a-o.size)*(a-o.size)}}return n}function y(e,t,n){var r;if(null===n?e.sort(function(e,t){return t.radius-e.radius}):e.sort(n),0<e.length){var a=e[0].x,o=e[0].y;for(r=0;r<e.length;++r)e[r].x-=a,e[r].y-=o}if(1<e.length){var i,s,l=Math.atan2(e[1].x,e[1].y)-t,c=Math.cos(l),u=Math.sin(l);for(r=0;r<e.length;++r)i=e[r].x,s=e[r].y,e[r].x=c*i-u*s,e[r].y=u*i+c*s}if(2<e.length){for(var d=Math.atan2(e[2].x,e[2].y)-t;d<0;)d+=2*Math.PI;for(;d>2*Math.PI;)d-=2*Math.PI;if(d>Math.PI){var f=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){var h=(e[r].x+f*e[r].y)/(1+f*f);e[r].x=2*h-e[r].x,e[r].y=2*h*f-e[r].y}}}}function m(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}e.map(function(e){e.parent=e});for(var n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r){var a=e[n].radius+e[r].radius;T(e[n],e[r])+1e-10<a&&(o=e[r],i=e[n],s=void 0,s=t(o),l=t(i),s.parent=l)}var o,i,s,l,c,u={};for(n=0;n<e.length;++n)(c=t(e[n]).parent.setid)in u||(u[c]=[]),u[c].push(e[n]);e.map(function(e){delete e.parent});var d=[];for(c in u)u.hasOwnProperty(c)&&d.push(u[c]);return d}function v(e){var t=function(t){return{max:Math.max.apply(null,e.map(function(e){return e[t]+e.radius})),min:Math.min.apply(null,e.map(function(e){return e[t]-e.radius}))}};return{xRange:t("x"),yRange:t("y")}}function N(e,t,n){null===t&&(t=Math.PI/2);var r,a,l=[];for(a in e)if(e.hasOwnProperty(a)){var o=e[a];l.push({x:o.x,y:o.y,radius:o.radius,setid:a})}var i=m(l);for(r=0;r<i.length;++r){y(i[r],t,n);var s=v(i[r]);i[r].size=(s.xRange.max-s.xRange.min)*(s.yRange.max-s.yRange.min),i[r].bounds=s}i.sort(function(e,t){return t.size-e.size});var c=(l=i[0]).bounds,u=(c.xRange.max-c.xRange.min)/50;function d(e,t,n){if(e){var r,a,o,i=e.bounds;t?r=c.xRange.max-i.xRange.min+u:(r=c.xRange.max-i.xRange.max,(o=(i.xRange.max-i.xRange.min)/2-(c.xRange.max-c.xRange.min)/2)<0&&(r+=o)),n?a=c.yRange.max-i.yRange.min+u:(a=c.yRange.max-i.yRange.max,(o=(i.yRange.max-i.yRange.min)/2-(c.yRange.max-c.yRange.min)/2)<0&&(a+=o));for(var s=0;s<e.length;++s)e[s].x+=r,e[s].y+=a,l.push(e[s])}}for(var f=1;f<i.length;)d(i[f],!0,!1),d(i[f+1],!1,!0),d(i[f+2],!0,!0),f+=3,c=v(l);var h={};for(r=0;r<l.length;++r)h[l[r].setid]=l[r];return h}function F(e,t,n,r){var a=[],o=[];for(var i in e)e.hasOwnProperty(i)&&(o.push(i),a.push(e[i]));t-=2*r,n-=2*r;var s=v(a),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var u=t/(l.max-l.min),d=n/(c.max-c.min),f=Math.min(d,u),h=(t-(l.max-l.min)*f)/2,p=(n-(c.max-c.min)*f)/2,g={},y=0;y<a.length;++y){var m=a[y];g[o[y]]={radius:f*m.radius,x:r+h+(m.x-l.min)*f,y:r+p+(m.y-c.min)*f}}return g}function B(p,g){return function(){for(var e,t=O.select(this),n=t.datum(),r=p[n.sets[0]].radius||50,a=g(n)||"",o=a.split(/\s+/).reverse(),i=(a.length+o.length)/3,s=o.pop(),l=[s],c=0,u=t.text(null).append("tspan").text(s);s=o.pop();)l.push(s),e=l.join(" "),u.text(e),e.length>i&&u.node().getComputedTextLength()>r&&(l.pop(),u.text(l.join(" ")),l=[s],u=t.append("tspan").text(s),c++);var d=.35-1.1*c/2,f=t.attr("x"),h=t.attr("y");t.selectAll("tspan").attr("x",f).attr("y",h).attr("dy",function(e,t){return d+1.1*t+"em"})}}function x(e,t,n){var r,a,o=t[0].radius-T(t[0],e);for(r=1;r<t.length;++r)(a=t[r].radius-T(t[r],e))<=o&&(o=a);for(r=0;r<n.length;++r)(a=T(n[r],e)-n[r].radius)<=o&&(o=a);return o}function b(t,n){var e,r=[];for(e=0;e<t.length;++e){var a=t[e];r.push({x:a.x,y:a.y}),r.push({x:a.x+a.radius/2,y:a.y}),r.push({x:a.x-a.radius/2,y:a.y}),r.push({x:a.x,y:a.y+a.radius/2}),r.push({x:a.x,y:a.y-a.radius/2})}var o=r[0],i=x(r[0],t,n);for(e=1;e<r.length;++e){var s=x(r[e],t,n);i<=s&&(o=r[e],i=s)}var l=h(function(e){return-1*x({x:e[0],y:e[1]},t,n)},[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(e=0;e<t.length;++e)if(T(c,t[e])>t[e].radius){u=!1;break}for(e=0;e<n.length;++e)if(T(c,n[e])<n[e].radius){u=!1;break}if(!u)if(1==t.length)c={x:t[0].x,y:t[0].y};else{var d={};f(t,d),c=0===d.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==d.arcs.length?{x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:n.length?b(t,[]):A(d.arcs.map(function(e){return e.p1}))}return c}function _(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var a=0;a<n.length;a++)for(var o=e[n[a]],i=a+1;i<n.length;++i){var s=e[n[i]],l=T(o,s);l+s.radius<=o.radius+1e-10?t[n[i]].push(n[a]):l+o.radius<=s.radius+1e-10&&t[n[a]].push(n[i])}return t}function q(e,t){for(var n={},r=_(e),a=0;a<t.length;++a){for(var o=t[a].sets,i={},s={},l=0;l<o.length;++l){i[o[l]]=!0;for(var c=r[o[l]],u=0;u<c.length;++u)s[c[u]]=!0}var d=[],f=[];for(var h in e)h in i?d.push(e[h]):h in s||f.push(e[h]);var p=b(d,f);(n[o]=p).disjoint&&0<t[a].size&&console.log("WARNING: area "+o+" not represented on screen")}return n}function u(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function H(e){var t=e.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function V(e){var t={};f(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return u(r.x,r.y,r.radius)}for(var a=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var i=n[o],s=i.circle.radius,l=i.width>s;a.push("\nA",s,s,0,l?1:0,1,i.p1.x,i.p1.y)}return a.join(" ")}e.intersectionArea=f,e.circleCircleIntersection=z,e.circleOverlap=l,e.circleArea=M,e.distance=T,e.venn=o,e.greedyLayout=a,e.scaleSolution=F,e.normalizeSolution=N,e.bestInitialLayout=c,e.lossFunction=R,e.disjointCluster=m,e.distanceFromIntersectArea=E,e.VennDiagram=function(){var x=600,b=350,_=15,w=1e3,k=Math.PI/2,M=!0,T=!0,A=!0,S=null,L=null,n={},r=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],a=0,C=function(e){if(e in n)return n[e];var t=n[e]=r[a];return r.length<=(a+=1)&&(a=0),t},z=o;function t(e){var t=e.datum(),n=z(t);M&&(n=N(n,k,L));var a=F(n,x,b,_),r=q(a,t),o={};function i(e){return e.sets in o?o[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}t.forEach(function(e){o[e.sets]=e.label}),e.selectAll("svg").data([a]).enter().append("svg");var s=e.select("svg").attr("width",x).attr("height",b),l={},c=!1;s.selectAll(".venn-area path").each(function(e){var t=O.select(this).attr("d");1==e.sets.length&&t&&(c=!0,l[e.sets[0]]=H(t))});var u=function(e){return function(r){return V(e.sets.map(function(e){var t=l[e],n=a[e];return t||(t={x:x/2,y:b/2,radius:1}),n||(n={x:x/2,y:b/2,radius:1}),{x:t.x*(1-r)+n.x*r,y:t.y*(1-r)+n.y*r,radius:t.radius*(1-r)+n.radius*r}}))}},d=s.selectAll(".venn-area").data(t,function(e){return e.sets}),f=d.enter().append("g").attr("class",function(e){return"venn-area venn-"+(1==e.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(e){return e.sets.join("_")}),h=f.append("path"),p=f.append("text").attr("class","label").text(function(e){return i(e)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",x/2).attr("y",b/2);A&&(h.style("fill-opacity","0").filter(function(e){return 1==e.sets.length}).style("fill",function(e){return C(e.sets)}).style("fill-opacity",".25"),p.style("fill",function(e){return 1==e.sets.length?C(e.sets):"#444"}));var g=e;c?(g=e.transition("venn").duration(w)).selectAll("path").attrTween("d",u):g.selectAll("path").attr("d",function(e){return V(e.sets.map(function(e){return a[e]}))});var y=g.selectAll("text").filter(function(e){return e.sets in r}).text(function(e){return i(e)}).attr("x",function(e){return Math.floor(r[e.sets].x)}).attr("y",function(e){return Math.floor(r[e.sets].y)});T&&(c?"on"in y?y.on("end",B(a,i)):y.each("end",B(a,i)):y.each(B(a,i)));var m=d.exit().transition("venn").duration(w).remove();m.selectAll("path").attrTween("d",u);var v=m.selectAll("text").attr("x",x/2).attr("y",b/2);return null!==S&&(p.style("font-size","0px"),y.style("font-size",S),v.style("font-size","0px")),{circles:a,textCentres:r,nodes:d,enter:f,update:g,exit:m}}return t.wrap=function(e){return arguments.length?(T=e,t):T},t.width=function(e){return arguments.length?(x=e,t):x},t.height=function(e){return arguments.length?(b=e,t):b},t.padding=function(e){return arguments.length?(_=e,t):_},t.colours=function(e){return arguments.length?(C=e,t):C},t.fontSize=function(e){return arguments.length?(S=e,t):S},t.duration=function(e){return arguments.length?(w=e,t):w},t.layoutFunction=function(e){return arguments.length?(z=e,t):z},t.normalize=function(e){return arguments.length?(M=e,t):M},t.styled=function(e){return arguments.length?(A=e,t):A},t.orientation=function(e){return arguments.length?(k=e,t):k},t.orientationOrder=function(e){return arguments.length?(L=e,t):L},t},e.wrapText=B,e.computeTextCentres=q,e.computeTextCentre=b,e.sortAreas=function(e,n){for(var t=_(e.selectAll("svg").datum()),r={},a=0;a<n.sets.length;++a){var o=n.sets[a];for(var i in t)for(var s=t[i],l=0;l<s.length;++l)if(s[l]==o){r[i]=!0;break}}function c(e){for(var t=0;t<e.length;++t)if(!(e[t]in r))return!1;return!0}e.selectAll("g").sort(function(e,t){return e.sets.length!=t.sets.length?e.sets.length-t.sets.length:e==n?c(t.sets)?-1:1:t==n?c(e.sets)?1:-1:t.size-e.size})},e.circlePath=u,e.circleFromPath=H,e.intersectionAreaPath=V,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}}(function(){return function o(i,s,l){function c(t,e){if(!s[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var a=s[t]={exports:{}};i[t][0].call(a.exports,function(e){return c(i[t][1][e]||e)},a,a.exports,o,i,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],2:[function(G,n,r){(function(V,U){var e,t;e=this,t=function(){"use strict";function c(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,a=void 0,s=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(a?a(h):v())};var e="undefined"!=typeof window?window:void 0,o=e||{},i=o.MutationObserver||o.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==V&&"[object process]"==={}.toString.call(V),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(h,1)}}var f=new Array(1e3);function h(){for(var e=0;e<r;e+=2){(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0}r=0}var p,g,y,m,v=void 0;function x(e,t){var n=arguments,r=this,a=new this.constructor(w);void 0===a[_]&&F(a);var o,i=r._state;return i?(o=n[i-1],s(function(){return R(i,a,o,r._result)})):P(r,a,e,t),a}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(w);return C(t,e),t}l?v=function(){return V.nextTick(h)}:i?(g=0,y=new i(h),m=document.createTextNode(""),y.observe(m,{characterData:!0}),v=function(){m.data=g=++g%2}):u?((p=new MessageChannel).port1.onmessage=h,v=function(){return p.port2.postMessage(0)}):v=void 0===e&&"function"==typeof G?function(){try{var e=G("vertx");return t=e.runOnLoop||e.runOnContext,function(){t(h)}}catch(e){return d()}}():d();var _=Math.random().toString(36).substring(16);function w(){}var k=void 0,M=1,T=2,A=new I;function S(e){try{return e.then}catch(e){return A.error=e,A}}function L(e,t,n){var r,a,o,i;t.constructor===e.constructor&&n===x&&t.constructor.resolve===b?(o=e,(i=t)._state===M?O(o,i._result):i._state===T?j(o,i._result):P(i,void 0,function(e){return C(o,e)},function(e){return j(o,e)})):n===A?j(e,A.error):void 0===n?O(e,t):c(n)?(r=t,a=n,s(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(a,r,function(e){n||(n=!0,r!==e?C(t,e):O(t,e))},function(e){n||(n=!0,j(t,e))},t._label);!n&&e&&(n=!0,j(t,e))},e)):O(e,t)}function C(e,t){var n;e===t?j(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?L(e,t,S(t)):O(e,t)}function z(e){e._onerror&&e._onerror(e._result),D(e)}function O(e,t){e._state===k&&(e._result=t,e._state=M,0!==e._subscribers.length&&s(D,e))}function j(e,t){e._state===k&&(e._state=T,e._result=t,s(z,e))}function P(e,t,n,r){var a=e._subscribers,o=a.length;e._onerror=null,a[o]=t,a[o+M]=n,a[o+T]=r,0===o&&e._state&&s(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,o=e._result,i=0;i<t.length;i+=3)r=t[i],a=t[i+n],r?R(n,r,a,o):a(o);e._subscribers.length=0}}function I(){this.error=null}var E=new I;function R(e,t,n,r){var a=c(n),o=void 0,i=void 0,s=void 0,l=void 0;if(a){if((o=function(e,t){try{return e(t)}catch(e){return E.error=e,E}}(n,r))===E?(l=!0,i=o.error,o=null):s=!0,t===o)return void j(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;t._state!==k||(a&&s?C(t,o):l?j(t,i):e===M?O(t,o):e===T&&j(t,o))}var N=0;function F(e){e[_]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}function B(e,t){this._instanceConstructor=e,this.promise=new e(w),this.promise[_]||F(this.promise),n(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}function q(e){this[_]=N++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(t,e){try{e(function(e){C(t,e)},function(e){j(t,e)})}catch(e){j(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function H(){var e=void 0;if(void 0!==U)e=U;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=q}return B.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===k&&n<e;n++)this._eachEntry(t[n],n)},B.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var a=S(t);if(a===x&&t._state!==k)this._settledAt(t._state,e,t._result);else if("function"!=typeof a)this._remaining--,this._result[e]=t;else if(n===q){var o=new n(w);L(o,t,a),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},B.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===k&&(this._remaining--,e===T?j(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},B.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(M,t,e)},function(e){return n._settledAt(T,t,e)})},q.all=function(e){return new B(this,e).promise},q.race=function(a){var o=this;return n(a)?new o(function(e,t){for(var n=a.length,r=0;r<n;r++)o.resolve(a[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=b,q.reject=function(e){var t=new this(w);return j(t,e),t},q._setScheduler=function(e){a=e},q._setAsap=function(e){s=e},q._asap=s,q.prototype={constructor:q,then:x,catch:function(e){return this.then(null,e)}},H(),q.polyfill=H,q.Promise=q},"object"==typeof r&&void 0!==n?n.exports=t():e.ES6Promise=t()}).call(this,G("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:336}],3:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var a,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(e){a=!1}function u(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var a,o,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]):(o=e._events=l(null),e._eventsCount=0),i){if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),!i.warned&&(a=u(e))&&0<a&&i.length>a){i.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+i.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=i.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else i=o[t]=n,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=o.call(f,r);return a.listener=n,r.wrapFn=a}function p(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}a?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(e){var t,n,r,a,o,i,s="error"===e;if(i=this._events)s=s&&null==i.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=i[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,a=g(e,r),o=0;o<r;++o)a[o].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var a=e.length,o=g(e,a),i=0;i<a;++i)o[i].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,a){if(t)e.call(n,r,a);else for(var o=e.length,i=g(e,o),s=0;s<o;++s)i[s].call(n,r,a)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,a,o){if(t)e.call(n,r,a,o);else for(var i=e.length,s=g(e,i),l=0;l<i;++l)s[l].call(n,r,a,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),o=1;o<r;o++)a[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var a=e.length,o=g(e,a),i=0;i<a;++i)o[i].apply(n,r)}(n,c,this,a)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return d(this,e,t,!1)},r.prototype.prependListener=function(e,t){return d(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,a,o,i;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,i||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var a,o=i(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],4:[function(e,t,n){"use strict";t.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(0===(e=+e)&&function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}(n))return!1}else if("number"!==t)return!1;return e-e<1}},{}],5:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,s=r+r,l=a+a,c=n*i,u=r*i,d=r*s,f=a*i,h=a*s,p=a*l,g=o*i,y=o*s,m=o*l;return e[0]=1-d-p,e[1]=u+m,e[2]=f-y,e[3]=0,e[4]=u-m,e[5]=1-c-p,e[6]=h+g,e[7]=0,e[8]=f+y,e[9]=h-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],6:[function(r,a,e){(function(e){"use strict";var t,n=r("is-browser");t="function"==typeof e.matchMedia?!e.matchMedia("(hover: none)").matches:n,a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":8}],7:[function(e,t,n){"use strict";var r=e("is-browser");t.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":8}],8:[function(e,t,n){t.exports=!0},{}],9:[function(e,t,n){var s={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,a=e.clientY||0,o=(i=t,i===window||i===document||i===document.body?s:i.getBoundingClientRect());var i;return n[0]=r-o.left,n[1]=a-o.top,n}},{}],10:[function(e,t,n){"use strict";var r=e("../src/lib"),a={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in a){var i=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(i,a[o])}},{"../src/lib":156}],11:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}}},{}],12:[function(e,t,n){"use strict";var r;(r=e("./core")).register([e("./bar"),e("./pie")]),t.exports=r,(r=e("./core")).register([e("./scattergeo"),e("./choropleth")]),t.exports=r},{"./bar":13,"./choropleth":14,"./core":15,"./pie":16,"./scattergeo":17}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":262}],14:[function(e,t,n){"use strict";t.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":276}],15:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":140}],16:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":287}],17:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":324}],18:[function(e,t,n){"use strict";var b=e("../../lib"),_=e("../../plots/cartesian/axes"),w=e("./common_defaults"),k=e("./attributes");t.exports=function(n,r,e,t,a){function o(e,t){return b.coerce(n,r,k,e,t)}t=t||{};var i=o("visible",!(a=a||{}).itemIsNotPlainObject),s=o("clicktoshow");if(!i&&!s)return r;w(n,r,e,o);for(var l=r.showarrow,c=["x","y"],u=[-10,-30],d={_fullLayout:e},f=0;f<2;f++){var h=c[f],p=_.coerceRef(n,r,d,h,"","paper");if(_.coercePosition(r,d,o,p,h,.5),l){var g="a"+h,y=_.coerceRef(n,r,d,g,"pixel");"pixel"!==y&&y!==p&&(y=r[g]="pixel");var m="pixel"===y?u[f]:.4;_.coercePosition(r,d,o,y,g,m)}o(h+"anchor"),o(h+"shift")}if(b.noneOrAll(n,r,["x","y"]),l&&b.noneOrAll(n,r,["ax","ay"]),s){var v=o("xclick"),x=o("yclick");r._xclick=void 0===v?r.x:_.cleanPosition(v,d,r.xref),r._yclick=void 0===x?r.y:_.cleanPosition(x,d,r.yref)}return r}},{"../../lib":156,"../../plots/cartesian/axes":199,"./attributes":20,"./common_defaults":23}],19:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],20:[function(e,t,n){"use strict";var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),o=e("../../plots/cartesian/constants");t.exports={_isLinkedToArray:"annotation",visible:{valType:"boolean",role:"info",dflt:!0,editType:"calcIfAutorange+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:a({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"style",editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",role:"style",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans more two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",role:"style",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",role:"style",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",role:"style",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,role:"style",editType:"calcIfAutorange+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the x component of the arrow tail about the arrow head.","If `axref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from right to left (left to right).","If `axref` is an axis, this is an absolute value on that axis,","like `x`, NOT a relative value."].join(" ")},ay:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the y component of the arrow tail about the arrow head.","If `ayref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from bottom to top (top to bottom).","If `ayref` is an axis, this is an absolute value on that axis,","like `y`, NOT a relative value."].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ax` is a relative offset in pixels ","from `x`. If set to an x axis id (e.g. *x* or *x2*), `ax` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ay` is a relative offset in pixels ","from `y`. If set to a y axis id (e.g. *y* or *y2*), `ay` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],role:"info",editType:"calc",description:["Sets the annotation's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where 0 (1) corresponds to the left (right) side."].join(" ")},x:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],role:"info",editType:"calc",description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where 0 (1) corresponds to the bottom (top)."].join(" ")},y:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,role:"style",editType:"calcIfAutorange+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,role:"style",editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",role:"info",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:a({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",role:"info",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",role:"info",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}},{"../../plots/cartesian/constants":204,"../../plots/font_attributes":226,"./arrow_paths":19}],21:[function(e,t,n){"use strict";var i=e("../../lib"),u=e("../../plots/cartesian/axes"),s=e("./draw").draw;function l(c){var e=c._fullLayout;i.filterVisible(e.annotations).forEach(function(e){var t,n,r,a,o=u.getFromId(c,e.xref),i=u.getFromId(c,e.yref),s=3*e.arrowsize*e.arrowwidth||0,l=3*e.startarrowsize*e.arrowwidth||0;o&&o.autorange&&(t=s+e.xshift,n=s-e.xshift,r=l+e.xshift,a=l-e.xshift,e.axref===e.xref?(u.expand(o,[o.r2c(e.x)],{ppadplus:t,ppadminus:n}),u.expand(o,[o.r2c(e.ax)],{ppadplus:Math.max(e._xpadplus,r),ppadminus:Math.max(e._xpadminus,a)})):(r=e.ax?r+e.ax:r,a=e.ax?a-e.ax:a,u.expand(o,[o.r2c(e.x)],{ppadplus:Math.max(e._xpadplus,t,r),ppadminus:Math.max(e._xpadminus,n,a)}))),i&&i.autorange&&(t=s-e.yshift,n=s+e.yshift,r=l-e.yshift,a=l+e.yshift,e.ayref===e.yref?(u.expand(i,[i.r2c(e.y)],{ppadplus:t,ppadminus:n}),u.expand(i,[i.r2c(e.ay)],{ppadplus:Math.max(e._ypadplus,r),ppadminus:Math.max(e._ypadminus,a)})):(r=e.ay?r+e.ay:r,a=e.ay?a-e.ay:a,u.expand(i,[i.r2c(e.y)],{ppadplus:Math.max(e._ypadplus,t,r),ppadminus:Math.max(e._ypadminus,n,a)})))})}t.exports=function(e){var t=e._fullLayout,n=i.filterVisible(t.annotations);if(n.length&&e._fullData.length){var r={};for(var a in n.forEach(function(e){r[e.xref]=1,r[e.yref]=1}),r){var o=u.getFromId(e,a);if(o&&o.autorange)return i.syncOrAsync([s,l],e)}}}},{"../../lib":156,"../../plots/cartesian/axes":199,"./draw":26}],22:[function(e,t,n){"use strict";var s=e("../../registry");function l(e,t){var n,r,a,o,i,s,l,c=e._fullLayout.annotations,u=[],d=[],f=[],h=(t||[]).length;for(n=0;n<c.length;n++)if(o=(a=c[n]).clicktoshow){for(r=0;r<h;r++)if(s=(i=t[r]).xaxis,l=i.yaxis,s._id===a.xref&&l._id===a.yref&&s.d2r(i.x)===p(a._xclick,s)&&l.d2r(i.y)===p(a._yclick,l)){(a.visible?"onout"===o?d:f:u).push(n);break}r===h&&a.visible&&"onout"===o&&d.push(n)}return{on:u,off:d,explicitOff:f}}function p(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){var n=l(e,t);return 0<n.on.length||0<n.explicitOff.length},onClick:function(e,t){var n,r=l(e,t),a=r.on,o=r.off.concat(r.explicitOff),i={};if(!a.length&&!o.length)return;for(n=0;n<a.length;n++)i["annotations["+a[n]+"].visible"]=!0;for(n=0;n<o.length;n++)i["annotations["+o[n]+"].visible"]=!1;return s.call("update",e,{},i)}}},{"../../registry":248}],23:[function(e,t,n){"use strict";var y=e("../../lib"),m=e("../color");t.exports=function(e,t,n,r){r("opacity");var a=r("bgcolor"),o=r("bordercolor"),i=m.opacity(o);r("borderpad");var s=r("borderwidth"),l=r("showarrow");if(r("text",l?" ":n._dfltTitle.annotation),r("textangle"),y.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),l){var c,u,d=r("arrowside");-1!==d.indexOf("end")&&(c=r("arrowhead"),u=r("arrowsize")),-1!==d.indexOf("start")&&(r("startarrowhead",c),r("startarrowsize",u)),r("arrowcolor",i?t.bordercolor:m.defaultLine),r("arrowwidth",2*(i&&s||1)),r("standoff"),r("startstandoff")}var f=r("hovertext"),h=n.hoverlabel||{};if(f){var p=r("hoverlabel.bgcolor",h.bgcolor||(m.opacity(a)?m.rgb(a):m.defaultLine)),g=r("hoverlabel.bordercolor",h.bordercolor||m.contrast(p));y.coerceFont(r,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||g})}r("captureevents",!!f)}},{"../../lib":156,"../color":35}],24:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),h=e("../../lib/to_log_range");t.exports=function(e,r,t,a){r=r||{};var o="log"===t&&"linear"===r.type,n="linear"===t&&"log"===r.type;if(o||n)for(var i,s,l=e._fullLayout.annotations,c=r._id.charAt(0),u=0;u<l.length;u++)i=l[u],s="annotations["+u+"].",i[c+"ref"]===r._id&&d(c),i["a"+c+"ref"]===r._id&&d("a"+c);function d(e){var t=i[e],n=null;n=o?h(t,r.range):Math.pow(10,t),f(n)||(n=null),a(s+e,n)}}},{"../../lib/to_log_range":179,"fast-isnumeric":4}],25:[function(e,t,n){"use strict";var r=e("../../plots/array_container_defaults"),a=e("./annotation_defaults");t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:a})}},{"../../plots/array_container_defaults":195,"./annotation_defaults":18}],26:[function(t,n,e){(function(e){"use strict";var s="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,ue=t("../../registry"),r=t("../../plots/plots"),de=t("../../lib"),a=t("../../plots/cartesian/axes"),fe=t("../color"),he=t("../drawing"),l=t("../fx"),pe=t("../../lib/svg_text_utils"),ge=t("../../lib/setcursor"),ye=t("../dragelement"),me=t("./draw_arrow_head");function o(e,t){var n=e._fullLayout.annotations[t]||{};i(e,n,t,!1,a.getFromId(e,n.xref),a.getFromId(e,n.yref))}function i(H,V,t,U,G,Y){var e,X,Z=H._fullLayout,W=H._fullLayout._size,J=H._context.edits;U?(e="annotation-"+U,X=U+".annotations["+t+"]"):(e="annotation",X="annotations["+t+"]"),Z._infolayer.selectAll("."+e+'[data-index="'+t+'"]').remove();var Q="clip"+Z._uid+"_ann"+t;if(V._input&&!1!==V.visible){var $={x:{},y:{}},K=+V.textangle||0,ee=Z._infolayer.append("g").classed(e,!0).attr("data-index",String(t)).style("opacity",V.opacity),te=ee.append("g").classed("annotation-text-g",!0),ne=J[V.showarrow?"annotationTail":"annotationPosition"],n=V.captureevents||J.annotationText||ne,re=te.append("g").style("pointer-events",n?"all":null).call(ge,"default").on("click",function(){H._dragging=!1;var e={index:t,annotation:V._input,fullAnnotation:V,event:s.event};U&&(e.subplotId=U),H.emit("plotly_clickannotation",e)});V.hovertext&&re.on("mouseover",function(){var e=V.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=H.getBoundingClientRect();l.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:V.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:H})}).on("mouseout",function(){l.loneUnhover(Z._hoverlayer.node())});var ae=V.borderwidth,r=V.borderpad,oe=ae+r,ie=re.append("rect").attr("class","bg").style("stroke-width",ae+"px").call(fe.stroke,V.bordercolor).call(fe.fill,V.bgcolor),se=V.width||V.height,le=Z._topclips.selectAll("#"+Q).data(se?[0]:[]);le.enter().append("clipPath").classed("annclip",!0).attr("id",Q).append("rect"),le.exit().remove();var a=V.font,ce=re.append("text").classed("annotation-text",!0).text(V.text);J.annotationText?ce.call(pe.makeEditable,{delegate:re,gd:H}).call(o).on("edit",function(e){V.text=e,this.call(o);var t={};t[X+".text"]=V.text,G&&G.autorange&&(t[G._name+".autorange"]=!0),Y&&Y.autorange&&(t[Y._name+".autorange"]=!0),ue.call("relayout",H,t)}):ce.call(o)}else s.selectAll("#"+Q).remove();function o(e){return e.call(he.font,a).attr({"text-anchor":{left:"start",right:"end"}[V.align]||"middle"}),pe.convertToTspans(e,H,i),e}function i(){var e=ce.selectAll("a");1===e.size()&&e.text()===ce.text()&&re.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ie.node());var t=re.select(".annotation-text-math-group"),n=!t.empty(),r=he.bBox((n?t:ce).node()),a=r.width,o=r.height,i=V.width||a,s=V.height||o,l=Math.round(i+2*oe),c=Math.round(s+2*oe);function u(e,t){return"auto"===t&&(t=e<1/3?"left":2/3<e?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}V._w=i,V._h=s;for(var d=!1,f=["x","y"],h=0;h<f.length;h++){var p,g,y,m,v,x=f[h],b=V[x+"ref"]||x,_=V["a"+x+"ref"],w={x:G,y:Y}[x],k=(K+("x"===x?0:-90))*Math.PI/180,M=l*Math.cos(k),T=c*Math.sin(k),A=Math.abs(M)+Math.abs(T),S=V[x+"anchor"],L=V[x+"shift"]*("x"===x?1:-1),C=$[x];if(w){var z=w.r2fraction(V[x]);if((H._dragging||!w.autorange)&&(z<0||1<z)&&(_===b?((z=w.r2fraction(V["a"+x]))<0||1<z)&&(d=!0):d=!0,d))continue;p=w._offset+w.r2p(V[x]),m=.5}else"x"===x?(y=V[x],p=W.l+W.w*y):(y=1-V[x],p=W.t+W.h*y),m=V.showarrow?.5:y;if(V.showarrow){C.head=p;var O=V["a"+x];v=M*u(.5,V.xanchor)-T*u(.5,V.yanchor),_===b?(C.tail=w._offset+w.r2p(O),g=v):(C.tail=p+O,g=v+O),C.text=C.tail+v;var j=Z["x"===x?"width":"height"];if("paper"===b&&(C.head=de.constrain(C.head,1,j-1)),"pixel"===_){var P=-Math.max(C.tail-3,C.text),D=Math.min(C.tail+3,C.text)-j;0<P?(C.tail+=P,C.text+=P):0<D&&(C.tail-=D,C.text-=D)}C.tail+=L,C.head+=L}else g=v=A*u(m,S),C.text=p+v;C.text+=L,v+=L,g+=L,V["_"+x+"padplus"]=A/2+g,V["_"+x+"padminus"]=A/2-g,V["_"+x+"size"]=A,V["_"+x+"shift"]=v}if(d)re.remove();else{var I=0,E=0;if("left"!==V.align&&(I=(i-a)*("center"===V.align?.5:1)),"top"!==V.valign&&(E=(s-o)*("middle"===V.valign?.5:1)),n)t.select("svg").attr({x:oe+I-1,y:oe+E}).call(he.setClipUrl,se?Q:null);else{var R=oe+E-r.top,N=oe+I-r.left;ce.call(pe.positionText,N,R).call(he.setClipUrl,se?Q:null)}le.select("rect").call(he.setRect,oe,oe,i,s),ie.call(he.setRect,ae/2,ae/2,l-ae,c-ae),re.call(he.setTranslate,Math.round($.x.text-l/2),Math.round($.y.text-c/2)),te.attr({transform:"rotate("+K+","+$.x.text+","+$.y.text+")"});var F,B,q=function(e,t){ee.selectAll(".annotation-arrow-g").remove();var n=$.x.head,r=$.y.head,a=$.x.tail+e,o=$.y.tail+t,i=$.x.text+e,s=$.y.text+t,l=de.rotationXYMatrix(K,i,s),c=de.apply2DTransform(l),u=de.apply2DTransform2(l),d=+ie.attr("width"),f=+ie.attr("height"),h=i-.5*d,p=h+d,g=s-.5*f,y=g+f,m=[[h,g,h,y],[h,y,p,y],[p,y,p,g],[p,g,h,g]].map(u);if(!m.reduce(function(e,t){return e^!!de.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)){m.forEach(function(e){var t=de.segmentsIntersect(a,o,n,r,e[0],e[1],e[2],e[3]);t&&(a=t.x,o=t.y)});var v=V.arrowwidth,x=V.arrowcolor,b=V.arrowside,_=ee.append("g").style({opacity:fe.opacity(x)}).classed("annotation-arrow-g",!0),w=_.append("path").attr("d","M"+a+","+o+"L"+n+","+r).style("stroke-width",v+"px").call(fe.stroke,fe.rgb(x));if(me(w,b,V),J.annotationPosition&&w.node().parentNode&&!U){var k=n,M=r;if(V.standoff){var T=Math.sqrt(Math.pow(n-a,2)+Math.pow(r-o,2));k+=V.standoff*(a-n)/T,M+=V.standoff*(o-r)/T}var A,S,L,C=_.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(a-k)+","+(o-M),transform:"translate("+k+","+M+")"}).style("stroke-width",v+6+"px").call(fe.stroke,"rgba(0,0,0,0)").call(fe.fill,"rgba(0,0,0,0)");ye.init({element:C.node(),gd:H,prepFn:function(){var e=he.getTranslate(re);S=e.x,L=e.y,A={},G&&G.autorange&&(A[G._name+".autorange"]=!0),Y&&Y.autorange&&(A[Y._name+".autorange"]=!0)},moveFn:function(e,t){var n=c(S,L),r=n[0]+e,a=n[1]+t;re.call(he.setTranslate,r,a),A[X+".x"]=G?G.p2r(G.r2p(V.x)+e):V.x+e/W.w,A[X+".y"]=Y?Y.p2r(Y.r2p(V.y)+t):V.y-t/W.h,V.axref===V.xref&&(A[X+".ax"]=G.p2r(G.r2p(V.ax)+e)),V.ayref===V.yref&&(A[X+".ay"]=Y.p2r(Y.r2p(V.ay)+t)),_.attr("transform","translate("+e+","+t+")"),te.attr({transform:"rotate("+K+","+r+","+a+")"})},doneFn:function(){ue.call("relayout",H,A);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(V.showarrow&&q(0,0),ne)ye.init({element:re.node(),gd:H,prepFn:function(){B=te.attr("transform"),F={}},moveFn:function(e,t){var n="pointer";if(V.showarrow)V.axref===V.xref?F[X+".ax"]=G.p2r(G.r2p(V.ax)+e):F[X+".ax"]=V.ax+e,V.ayref===V.yref?F[X+".ay"]=Y.p2r(Y.r2p(V.ay)+t):F[X+".ay"]=V.ay+t,q(e,t);else{if(U)return;if(G)F[X+".x"]=G.p2r(G.r2p(V.x)+e);else{var r=V._xsize/W.w,a=V.x+(V._xshift-V.xshift)/W.w-r/2;F[X+".x"]=ye.align(a+e/W.w,r,0,1,V.xanchor)}if(Y)F[X+".y"]=Y.p2r(Y.r2p(V.y)+t);else{var o=V._ysize/W.h,i=V.y-(V._yshift+V.yshift)/W.h-o/2;F[X+".y"]=ye.align(i-t/W.h,o,0,1,V.yanchor)}G&&Y||(n=ye.getCursor(G?.5:F[X+".x"],Y?.5:F[X+".y"],V.xanchor,V.yanchor))}te.attr({transform:"translate("+e+","+t+")"+B}),ge(re,n)},doneFn:function(){ge(re),ue.call("relayout",H,F);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}n.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&o(e,n);return r.previousPromises(e)},drawOne:o,drawRaw:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../../lib/setcursor":175,"../../lib/svg_text_utils":177,"../../plots/cartesian/axes":199,"../../plots/plots":240,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"../fx":77,"./draw_arrow_head":27}],27:[function(t,n,e){(function(e){"use strict";var z="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,O=t("../color"),j=t("./arrow_paths");n.exports=function(a,e,o){var t,n,r,i,s=a.node(),l=j[o.arrowhead||0],c=j[o.startarrowhead||0],u=(o.arrowwidth||1)*(o.arrowsize||1),d=(o.arrowwidth||1)*(o.startarrowsize||1),f=0<=e.indexOf("start"),h=0<=e.indexOf("end"),p=l.backoff*u+o.standoff,g=c.backoff*d+o.startstandoff;if("line"===s.nodeName){t={x:+a.attr("x1"),y:+a.attr("y1")},n={x:+a.attr("x2"),y:+a.attr("y2")};var y=t.x-n.x,m=t.y-n.y;if(i=(r=Math.atan2(m,y))+Math.PI,p&&g&&p+g>Math.sqrt(y*y+m*m))return void L();if(p){if(y*y+m*m<p*p)return void L();var v=p*Math.cos(r),x=p*Math.sin(r);n.x+=v,n.y+=x,a.attr({x2:n.x,y2:n.y})}if(g){if(y*y+m*m<g*g)return void L();var b=g*Math.cos(r),_=g*Math.sin(r);t.x-=b,t.y-=_,a.attr({x1:t.x,y1:t.y})}}else if("path"===s.nodeName){var w=s.getTotalLength(),k="";if(w<p+g)return void L();var M=s.getPointAtLength(0),T=s.getPointAtLength(.1);r=Math.atan2(M.y-T.y,M.x-T.x),t=s.getPointAtLength(Math.min(g,w)),k="0px,"+g+"px,";var A=s.getPointAtLength(w),S=s.getPointAtLength(w-.1);i=Math.atan2(A.y-S.y,A.x-S.x),n=s.getPointAtLength(Math.max(0,w-p)),k+=w-(k?g+p:p)+"px,"+w+"px",a.style("stroke-dasharray",k)}function L(){a.style("stroke-dasharray","0px,100px")}function C(e,t,n,r){e.path&&(e.noRotate&&(n=0),z.select(s.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:"translate("+t.x+","+t.y+")"+(n?"rotate("+180*n/Math.PI+")":"")+"scale("+r+")"}).style({fill:O.rgb(o.arrowcolor),"stroke-width":0}))}f&&C(c,t,r,d),h&&C(l,n,i,u)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../color":35,"./arrow_paths":19}],28:[function(e,t,n){"use strict";var r=e("./draw"),a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":209,"./attributes":20,"./calc_autorange":21,"./click":22,"./convert_coords":24,"./defaults":25,"./draw":26}],29:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll;t.exports=a({_isLinkedToArray:"annotation",visible:r.visible,x:{valType:"any",role:"info",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",role:"info",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",role:"info",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",role:"info",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",role:"info",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents},"calc","from-root")},{"../../plot_api/edit_types":184,"../annotations/attributes":20}],30:[function(e,t,n){"use strict";var o=e("../../lib"),i=e("../../plots/cartesian/axes");function r(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},o.extendFlat(e._xa,a),i.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},o.extendFlat(e._ya,a),i.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)r(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":156,"../../plots/cartesian/axes":199}],31:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),c=e("../annotations/common_defaults"),u=e("./attributes");function a(n,r,a,e,t){function o(e,t){return s.coerce(n,r,u,e,t)}function i(e){var t=e+"axis",n={_fullLayout:{}};return n._fullLayout[t]=a[t],l.coercePosition(r,n,o,e,e,.5)}return o("visible",!t.itemIsNotPlainObject)&&(c(n,r,e.fullLayout,o),i("x"),i("y"),i("z"),s.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",o("ax",-10),o("ay",-30),s.noneOrAll(n,r,["ax","ay"]))),r}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:a,fullLayout:n.fullLayout})}},{"../../lib":156,"../../plots/array_container_defaults":195,"../../plots/cartesian/axes":199,"../annotations/common_defaults":23,"./attributes":29}],32:[function(e,t,n){"use strict";var d=e("../annotations/draw").drawRaw,f=e("../../plots/gl3d/project"),h=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,a=0;a<r.length;a++){for(var o=r[a],i=!1,s=0;s<3;s++){var l=h[s],c=o[l],u=t[l+"axis"].r2fraction(c);if(u<0||1<u){i=!0;break}}i?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+a+'"]').remove():(o._pdata=f(e.glplot.cameraParams,[t.xaxis.r2l(o.x)*n[0],t.yaxis.r2l(o.y)*n[1],t.zaxis.r2l(o.z)*n[2]]),d(e.graphDiv,o,a,e.id,o._xa,o._ya))}}},{"../../plots/gl3d/project":237,"../annotations/draw":26}],33:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(!n)return;for(var r=n.attrRegex,a=Object.keys(e),o=0;o<a.length;o++){var i=a[o];r.test(i)&&(e[i].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,i))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":156,"../../registry":248,"./attributes":29,"./convert":30,"./defaults":31,"./draw":32}],34:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],35:[function(e,t,n){"use strict";var i=e("tinycolor2"),s=e("fast-isnumeric"),l=t.exports={},r=e("./attributes");l.defaults=r.defaults;var a=l.defaultLine=r.defaultLine;l.lightLine=r.lightLine;var c=l.background=r.background;function u(e){if(s(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),a="a"===t.charAt(3)&&4===r.length;if(!a&&3!==r.length)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;if(r[o]=Number(r[o]),!(0<=r[o]))return e;if(3===o)1<r[o]&&(r[o]=1);else if(1<=r[o])return e}var i=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return a?"rgba("+i+", "+r[3]+")":"rgb("+i+")"}l.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},l.rgb=function(e){return l.tinyRGB(i(e))},l.opacity=function(e){return e?i(e).getAlpha():0},l.addOpacity=function(e,t){var n=i(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},l.combine=function(e,t){var n=i(e).toRgb();if(1===n.a)return i(e).toRgbString();var r=i(t||c).toRgb(),a=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a},o={r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a};return i(o).toRgbString()},l.contrast=function(e,t,n){var r=i(e);return 1!==r.getAlpha()&&(r=i(l.combine(e,c))),(r.isDark()?t?r.lighten(t):c:n?r.darken(n):a).toString()},l.stroke=function(e,t){var n=i(t);e.style({stroke:l.tinyRGB(n),"stroke-opacity":n.getAlpha()})},l.fill=function(e,t){var n=i(t);e.style({fill:l.tinyRGB(n),"fill-opacity":n.getAlpha()})},l.clean=function(e){if(e&&"object"==typeof e){var t,n,r,a,o=Object.keys(e);for(t=0;t<o.length;t++)if(a=e[r=o[t]],"color"===r.substr(r.length-5))if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]=u(a[n]);else e[r]=u(a);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(a))for(n=0;n<a.length;n++)Array.isArray(a[n])&&(a[n][1]=u(a[n][1]));else if(Array.isArray(a)){var i=a[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(n=0;n<a.length;n++)l.clean(a[n])}else a&&"object"==typeof a&&l.clean(a)}}},{"./attributes":34,"fast-isnumeric":4,tinycolor2:337}],36:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),o=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll;t.exports=i({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],role:"style",dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",role:"style",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],role:"info",dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,role:"style",description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",dflt:1.02,min:-2,max:3,role:"style",description:["Sets the x position of the color bar (in plot fraction)."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"style",description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar."].join(" ")},xpad:{valType:"number",role:"style",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",role:"style",dflt:.5,min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction)."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],role:"style",dflt:"middle",description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar."].join(" ")},ypad:{valType:"number",role:"style",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",role:"style",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",role:"style",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:o({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({description:"Sets the color bar's tick label font"}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string",role:"info",description:"Sets the title of the color bar."},titlefont:a({description:"Sets this color bar's title font."}),titleside:{valType:"enumerated",values:["right","top","bottom"],role:"style",dflt:"top",description:["Determines the location of the colorbar title","with respect to the color bar."].join(" ")}},"colorbars","from-root")},{"../../lib/extend":148,"../../plot_api/edit_types":184,"../../plots/cartesian/layout_attributes":211,"../../plots/font_attributes":226}],37:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],38:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../plots/cartesian/tick_value_defaults"),c=e("../../plots/cartesian/tick_mark_defaults"),u=e("../../plots/cartesian/tick_label_defaults"),d=e("./attributes");t.exports=function(e,t,n){var r=t.colorbar={},a=e.colorbar||{};function o(e,t){return s.coerce(a,r,d,e,t)}o("thickness","fraction"===o("thicknessmode")?30/(n.width-n.margin.l-n.margin.r):30),o("len","fraction"===o("lenmode")?1:n.height-n.margin.t-n.margin.b),o("x"),o("xanchor"),o("xpad"),o("y"),o("yanchor"),o("ypad"),s.noneOrAll(a,r,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor"),l(a,r,o,"linear");var i={outerTicks:!1,font:n.font};u(a,r,o,"linear",i),c(a,r,o,"linear",i),o("title",n._dfltTitle.colorbar),s.coerceFont(o,"titlefont",n.font),o("titleside")}},{"../../lib":156,"../../plots/cartesian/tick_label_defaults":219,"../../plots/cartesian/tick_mark_defaults":220,"../../plots/cartesian/tick_value_defaults":221,"./attributes":36}],39:[function(n,r,e){(function(e){"use strict";var $="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,K=n("tinycolor2"),ee=n("../../plots/plots"),te=n("../../registry"),ne=n("../../plots/cartesian/axes"),re=n("../dragelement"),ae=n("../../lib"),oe=n("../../lib/extend").extendFlat,ie=n("../../lib/setcursor"),se=n("../drawing"),le=n("../color"),ce=n("../titles"),ue=n("../../lib/svg_text_utils"),de=n("../../constants/alignment").LINE_SPACING,fe=n("../../plots/cartesian/axis_defaults"),he=n("../../plots/cartesian/position_defaults"),pe=n("../../plots/cartesian/layout_attributes"),t=n("./attributes"),ge=n("./constants").cn;r.exports=function(X,Z){var W={};function J(){var l=X._fullLayout,c=l._size;if("function"==typeof W.fillcolor||"function"==typeof W.line.color){var e,t,u=$.extent(("function"==typeof W.fillcolor?W.fillcolor:W.line.color).domain()),d=[],f=[],h="function"==typeof W.line.color?W.line.color:function(){return W.line.color},p="function"==typeof W.fillcolor?W.fillcolor:function(){return W.fillcolor},n=W.levels.end+W.levels.size/100,r=W.levels.size,a=1.001*u[0]-.001*u[1],o=1.001*u[1]-.001*u[0];for(t=0;t<1e5&&(e=W.levels.start+t*r,!(0<r?n<=e:e<=n));t++)a<e&&e<o&&d.push(e);if("function"==typeof W.fillcolor)if(W.filllevels)for(n=W.filllevels.end+W.filllevels.size/100,r=W.filllevels.size,t=0;t<1e5&&(e=W.filllevels.start+t*r,!(0<r?n<=e:e<=n));t++)e>u[0]&&e<u[1]&&f.push(e);else(f=d.map(function(e){return e-W.levels.size/2})).push(f[f.length-1]+W.levels.size);else W.fillcolor&&"string"==typeof W.fillcolor&&(f=[0]);W.levels.size<0&&(d.reverse(),f.reverse());var i,s=l.height-l.margin.t-l.margin.b,g=l.width-l.margin.l-l.margin.r,y=Math.round(W.thickness*("fraction"===W.thicknessmode?g:1)),m=y/c.w,v=Math.round(W.len*("fraction"===W.lenmode?s:1)),x=v/c.h,b=W.xpad/c.w,_=(W.borderwidth+W.outlinewidth)/2,w=W.ypad/c.h,k=Math.round(W.x*c.w+W.xpad),M=W.x-m*({middle:.5,right:1}[W.xanchor]||0),T=W.y+x*(({top:-.5,bottom:.5}[W.yanchor]||0)-.5),A=Math.round(c.h*(1-T)),S=A-v,L={type:"linear",range:u,tickmode:W.tickmode,nticks:W.nticks,tick0:W.tick0,dtick:W.dtick,tickvals:W.tickvals,ticktext:W.ticktext,ticks:W.ticks,ticklen:W.ticklen,tickwidth:W.tickwidth,tickcolor:W.tickcolor,showticklabels:W.showticklabels,tickfont:W.tickfont,tickangle:W.tickangle,tickformat:W.tickformat,exponentformat:W.exponentformat,separatethousands:W.separatethousands,showexponent:W.showexponent,showtickprefix:W.showtickprefix,tickprefix:W.tickprefix,showticksuffix:W.showticksuffix,ticksuffix:W.ticksuffix,title:W.title,titlefont:W.titlefont,showline:!0,anchor:"free",position:1},C={type:"linear",_id:"y"+Z},z={letter:"y",font:l.font,noHover:!0,calendar:l.calendar};if(fe(L,C,G,z,l),he(L,C,G,z),C.position=W.x+b+m,J.axis=C,-1!==["top","bottom"].indexOf(W.titleside)&&(C.titleside=W.titleside,C.titlex=W.x+b,C.titley=T+("top"===W.titleside?x-w:w)),W.line.color&&"auto"===W.tickmode){C.tickmode="linear",C.tick0=W.levels.start;var O=W.levels.size,j=ae.constrain((A-S)/50,4,15)+1,P=(u[1]-u[0])/((W.nticks||j)*O);if(1<P){var D=Math.pow(10,Math.floor(Math.log(P)/Math.LN10));O*=D*ae.roundUp(P/D,[2,5,10]),(Math.abs(W.levels.start)/W.levels.size+1e-6)%1<2e-6&&(C.tick0=0)}C.dtick=O}C.domain=[T+w,T+x-w],C.setScale();var I=l._infolayer.selectAll("g."+Z).data([0]);I.enter().append("g").classed(Z,!0).classed(ge.colorbar,!0).each(function(){var e=$.select(this);e.append("rect").classed(ge.cbbg,!0),e.append("g").classed(ge.cbfills,!0),e.append("g").classed(ge.cblines,!0),e.append("g").classed(ge.cbaxis,!0).classed(ge.crisp,!0),e.append("g").classed(ge.cbtitleunshift,!0).append("g").classed(ge.cbtitle,!0),e.append("rect").classed(ge.cboutline,!0),e.select(".cbtitle").datum(0)}),I.attr("transform","translate("+Math.round(c.l)+","+Math.round(c.t)+")");var E=I.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(c.l)+",-"+Math.round(c.t)+")");C._axislayer=I.select(".cbaxis");var R=0;if(-1!==["top","bottom"].indexOf(W.titleside)){var N,F=c.l+(W.x+b)*c.w,B=C.titlefont.size;N="top"===W.titleside?(1-(T+x-w))*c.h+c.t+3+.75*B:(1-(T+w))*c.h+c.t-3-.25*B,Y(C._id+"title",{attributes:{x:F,y:N,"text-anchor":"start"}})}var q,H,V,U=ae.syncOrAsync([ee.previousPromises,function(){if(-1!==["top","bottom"].indexOf(W.titleside)){var e=I.select(".cbtitle"),t=e.select("text"),n=[-W.outlinewidth/2,W.outlinewidth/2],r=e.select(".h"+C._id+"title-math-group").node(),a=15.6;if(t.node()&&(a=parseInt(t.node().style.fontSize,10)*de),r?a<(R=se.bBox(r).height)&&(n[1]-=(R-a)/2):t.node()&&!t.classed(ge.jsPlaceholder)&&(R=se.bBox(t.node()).height),R){if(R+=5,"top"===W.titleside)C.domain[1]-=R/c.h,n[1]*=-1;else{C.domain[0]+=R/c.h;var o=ue.lineCount(t);n[1]+=(1-o)*a}e.attr("transform","translate("+n+")"),C.setScale()}}I.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(c.h*(1-C.domain[1]))+")"),C._axislayer.attr("transform","translate(0,"+Math.round(-c.t)+")");var i=I.select(".cbfills").selectAll("rect.cbfill").data(f);i.enter().append("rect").classed(ge.cbfill,!0).style("stroke","none"),i.exit().remove(),i.each(function(e,t){var n=[0===t?u[0]:(f[t]+f[t-1])/2,t===f.length-1?u[1]:(f[t]+f[t+1])/2].map(C.c2p).map(Math.round);t!==f.length-1&&(n[1]+=n[1]>n[0]?1:-1);var r=p(e).replace("e-",""),a=K(r).toHexString();$.select(this).attr({x:k,width:Math.max(y,2),y:$.min(n),height:Math.max($.max(n)-$.min(n),2),fill:a})});var s=I.select(".cblines").selectAll("path.cbline").data(W.line.color&&W.line.width?d:[]);return s.enter().append("path").classed(ge.cbline,!0),s.exit().remove(),s.each(function(e){$.select(this).attr("d","M"+k+","+(Math.round(C.c2p(e))+W.line.width/2%1)+"h"+y).call(se.lineGroupStyle,W.line.width,h(e),W.line.dash)}),C._axislayer.selectAll("g."+C._id+"tick,path").remove(),C._pos=k+y+(W.outlinewidth||0)/2-("outside"===W.ticks?1:0),C.side="right",ae.syncOrAsync([function(){return ne.doTicks(X,C,!0)},function(){if(-1===["top","bottom"].indexOf(W.titleside)){var e=C.titlefont.size,t=C._offset+C._length/2,n=c.l+(C.position||0)*c.w+("right"===C.side?10+e*(C.showticklabels?1:.5):-10-e*(C.showticklabels?.5:0));Y("h"+C._id+"title",{avoid:{selection:$.select(X).selectAll("g."+C._id+"tick"),side:W.titleside,offsetLeft:c.l,offsetTop:0,maxShift:l.width},attributes:{x:n,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},ee.previousPromises,function(){var e=y+W.outlinewidth/2+se.bBox(C._axislayer.node()).width;if((i=E.select("text")).node()&&!i.classed(ge.jsPlaceholder)){var t,n=E.select(".h"+C._id+"title-math-group").node();t=n&&-1!==["top","bottom"].indexOf(W.titleside)?se.bBox(n).width:se.bBox(E.node()).right-k-c.l,e=Math.max(e,t)}var r=2*W.xpad+e+W.borderwidth+W.outlinewidth/2,a=A-S;I.select(".cbbg").attr({x:k-W.xpad-(W.borderwidth+W.outlinewidth)/2,y:S-_,width:Math.max(r,2),height:Math.max(a+2*_,2)}).call(le.fill,W.bgcolor).call(le.stroke,W.bordercolor).style({"stroke-width":W.borderwidth}),I.selectAll(".cboutline").attr({x:k,y:S+W.ypad+("top"===W.titleside?R:0),width:Math.max(y,2),height:Math.max(a-2*W.ypad-R,2)}).call(le.stroke,W.outlinecolor).style({fill:"None","stroke-width":W.outlinewidth});var o=({center:.5,right:1}[W.xanchor]||0)*r;I.attr("transform","translate("+(c.l-o)+","+c.t+")"),ee.autoMargin(X,Z,{x:W.x,y:W.y,l:r*({right:1,center:.5}[W.xanchor]||0),r:r*({left:1,center:.5}[W.xanchor]||0),t:a*({bottom:1,middle:.5}[W.yanchor]||0),b:a*({top:1,middle:.5}[W.yanchor]||0)})}],X);if(U&&U.then&&(X._promises||[]).push(U),X._context.edits.colorbarPosition)re.init({element:I.node(),gd:X,prepFn:function(){q=I.attr("transform"),ie(I)},moveFn:function(e,t){I.attr("transform",q+" translate("+e+","+t+")"),H=re.align(M+e/c.w,m,0,1,W.xanchor),V=re.align(T-t/c.h,x,0,1,W.yanchor);var n=re.getCursor(H,V,W.xanchor,W.yanchor);ie(I,n)},doneFn:function(){ie(I),void 0!==H&&void 0!==V&&te.call("restyle",X,{"colorbar.x":H,"colorbar.y":V},Q().index)}});return U}function G(e,t){return ae.coerce(L,C,pe,e,t)}function Y(e,t){var n,r=Q();n=te.traceIs(r,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var a={propContainer:C,propName:n,traceIndex:r.index,placeholder:l._dfltTitle.colorbar,containerGroup:I.select(".cbtitle")},o="h"===e.charAt(0)?e.substr(1):"h"+e;I.selectAll("."+o+",."+o+"-math-group").remove(),ce.draw(X,e,oe(a,t||{}))}l._infolayer.selectAll("g."+Z).remove()}function Q(){var e,t,n=Z.substr(2);for(e=0;e<X._fullData.length;e++)if((t=X._fullData[e]).uid===n)return t}return Object.keys(t).forEach(function(e){W[e]=null}),W.fillcolor=null,W.line={color:null,width:null,dash:null},W.levels={start:null,end:null,size:null},W.filllevels=null,Object.keys(W).forEach(function(t){J[t]=function(e){return arguments.length?(W[t]=ae.isPlainObject(W[t])?ae.extendFlat(W[t],e):e,J):W[t]}}),J.options=function(t){return Object.keys(t).forEach(function(e){"function"==typeof J[e]&&J[e](t[e])}),J},J._opts=W,J}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../lib":156,"../../lib/extend":148,"../../lib/setcursor":175,"../../lib/svg_text_utils":177,"../../plots/cartesian/axes":199,"../../plots/cartesian/axis_defaults":201,"../../plots/cartesian/layout_attributes":211,"../../plots/cartesian/position_defaults":215,"../../plots/plots":240,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"../titles":128,"./attributes":36,"./constants":37,tinycolor2:337}],40:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":156}],41:[function(e,t,n){"use strict";t.exports={zauto:{valType:"boolean",role:"info",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0},description:["Determines the whether or not the color domain is computed","with respect to the input data."].join(" ")},zmin:{valType:"number",role:"info",dflt:null,editType:"plot",impliedEdits:{zauto:!1},description:"Sets the lower bound of color domain."},zmax:{valType:"number",role:"info",dflt:null,editType:"plot",impliedEdits:{zauto:!1},description:"Sets the upper bound of color domain."},colorscale:{valType:"colorscale",role:"style",editType:"calc",impliedEdits:{autocolorscale:!1},description:["Sets the colorscale.","The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)', [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in z space,","use zmin and zmax"].join(" ")},autocolorscale:{valType:"boolean",role:"style",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether or not the colorscale is picked using the sign of","the input z values."].join(" ")},reversescale:{valType:"boolean",role:"style",dflt:!1,editType:"calc",description:"Reverses the colorscale."},showscale:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."].join(" ")}}},{}],42:[function(e,t,n){"use strict";var h=e("../../lib"),p=e("./scales"),g=e("./flip_scale");t.exports=function(e,t,n,r){var a,o;n?(a=h.nestedProperty(e,n).get(),o=h.nestedProperty(e._input,n).get()):o=(a=e)._input;var i=r+"auto",s=r+"min",l=r+"max",c=a[i],u=a[s],d=a[l],f=a.colorscale;!1===c&&void 0!==u||(u=h.aggNums(Math.min,null,t)),!1===c&&void 0!==d||(d=h.aggNums(Math.max,null,t)),u===d&&(u-=.5,d+=.5),a[s]=u,a[l]=d,o[s]=u,o[l]=d,o[i]=!1!==c||void 0===u&&void 0===d,a.autocolorscale&&(f=u*d<0?p.RdBu:0<=u?p.Reds:p.Blues,o.colorscale=f,a.reversescale&&(f=g(f)),a.colorscale=f)}},{"../../lib":156,"./flip_scale":47,"./scales":54}],43:[function(e,t,n){"use strict";var a=e("./attributes"),o=e("../../lib/extend").extendFlat,i=e("./scales.js");t.exports=function(e,t,n){var r=e?e+".":"";return{color:{valType:"color",arrayOk:!0,role:"style",editType:t||"style",description:["Sets the",e,"color. It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to","`cmin` and `cmax` if set."].join(" ")},colorscale:o({},a.colorscale,{description:["Sets the colorscale and only has an effect","if `"+r+"color` is set to a numerical array.","The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)', [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use `"+r+"cmin` and `"+r+"cmax`.","Alternatively, `colorscale` may be a palette name string","of the following list:",Object.keys(i).join(", ")].join(" ")}),cauto:o({},a.zauto,{impliedEdits:{cmin:void 0,cmax:void 0},description:["Has an effect only if `"+r+"color` is set to a numerical array","and `cmin`, `cmax` are set by the user. In this case,","it controls whether the range of colors in `colorscale` is mapped to","the range of values in the `color` array (`cauto: true`), or the `cmin`/`cmax`","values (`cauto: false`).","Defaults to `false` when `cmin`, `cmax` are set by the user."].join(" ")}),cmax:o({},a.zmax,{editType:t||a.zmax.editType,impliedEdits:{cauto:!1},description:["Has an effect only if `"+r+"color` is set to a numerical array.","Sets the upper bound of the color domain.","Value should be associated to the `"+r+"color` array index,","and if set, `"+r+"cmin` must be set as well."].join(" ")}),cmin:o({},a.zmin,{editType:t||a.zmin.editType,impliedEdits:{cauto:!1},description:["Has an effect only if `"+r+"color` is set to a numerical array.","Sets the lower bound of the color domain.","Value should be associated to the `"+r+"color` array index,","and if set, `"+r+"cmax` must be set as well."].join(" ")}),autocolorscale:o({},a.autocolorscale,{description:["Has an effect only if `"+r+"color` is set to a numerical array.","Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by `"+r+"colorscale`.","In case `colorscale` is unspecified or `autocolorscale` is true, the default ","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" "),dflt:!1===n?n:a.autocolorscale.dflt}),reversescale:o({},a.reversescale,{description:["Has an effect only if `"+r+"color` is set to a numerical array.","Reverses the color mapping if true (`cmin` will correspond to the last color","in the array and `cmax` will correspond to the first color)."].join(" ")})}}},{"../../lib/extend":148,"./attributes":41,"./scales.js":54}],44:[function(e,t,n){"use strict";var r=e("./scales");t.exports=r.RdBu},{"./scales":54}],45:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),m=e("../../lib"),v=e("../colorbar/has_colorbar"),x=e("../colorbar/defaults"),b=e("./is_valid_scale"),_=e("./flip_scale");t.exports=function(e,t,n,r,a){var o,i=a.prefix,s=a.cLetter,l=i.slice(0,i.length-1),c=i?m.nestedProperty(e,l).get()||{}:e,u=i?m.nestedProperty(t,l).get()||{}:t,d=c[s+"min"],f=c[s+"max"],h=c.colorscale;r(i+s+"auto",!(y(d)&&y(f)&&d<f)),r(i+s+"min"),r(i+s+"max"),void 0!==h&&(o=!b(h)),r(i+"autocolorscale",o);var p,g=r(i+"colorscale");(r(i+"reversescale")&&(u.colorscale=_(g)),"marker.line."!==i)&&(i&&(p=v(c)),r(i+"showscale",p)&&x(c,u,n))}},{"../../lib":156,"../colorbar/defaults":38,"../colorbar/has_colorbar":40,"./flip_scale":47,"./is_valid_scale":51,"fast-isnumeric":4}],46:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=e.length,a=new Array(r),o=new Array(r),i=0;i<r;i++){var s=e[i];a[i]=t+s[0]*(n-t),o[i]=s[1]}return{domain:a,range:o}}},{}],47:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=new Array(n),a=n-1,o=0;0<=a;a--,o++)t=e[a],r[o]=[1-t[0],t[1]];return r}},{}],48:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./default_scale"),o=e("./is_valid_scale_array");t.exports=function(t,n){if(n||(n=a),!t)return n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}return"string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n}},{"./default_scale":44,"./is_valid_scale_array":52,"./scales":54}],49:[function(e,t,n){"use strict";var i=e("fast-isnumeric"),s=e("../../lib"),l=e("./is_valid_scale");t.exports=function(e,t){var n=t?s.nestedProperty(e,t).get()||{}:e,r=n.color,a=!1;if(s.isArrayOrTypedArray(r))for(var o=0;o<r.length;o++)if(i(r[o])){a=!0;break}return s.isPlainObject(n)&&(a||!0===n.showscale||i(n.cmin)&&i(n.cmax)||l(n.colorscale)||s.isPlainObject(n.colorbar))}},{"../../lib":156,"./is_valid_scale":51,"fast-isnumeric":4}],50:[function(e,t,n){"use strict";n.scales=e("./scales"),n.defaultScale=e("./default_scale"),n.attributes=e("./attributes"),n.handleDefaults=e("./defaults"),n.calc=e("./calc"),n.hasColorscale=e("./has_colorscale"),n.isValidScale=e("./is_valid_scale"),n.getScale=e("./get_scale"),n.flipScale=e("./flip_scale"),n.extractScale=e("./extract_scale"),n.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":41,"./calc":42,"./default_scale":44,"./defaults":45,"./extract_scale":46,"./flip_scale":47,"./get_scale":48,"./has_colorscale":49,"./is_valid_scale":51,"./make_color_scale_func":53,"./scales":54}],51:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./is_valid_scale_array");t.exports=function(e){return void 0!==r[e]||a(e)}},{"./is_valid_scale_array":52,"./scales":54}],52:[function(e,t,n){"use strict";var a=e("tinycolor2");t.exports=function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!a(r[1]).isValid())return!1;t=+r[0]}return!0}},{tinycolor2:337}],53:[function(t,n,e){(function(e){"use strict";var f="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,h=t("tinycolor2"),p=t("fast-isnumeric"),g=t("../color");function y(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return h(t).toRgbString()}n.exports=function(e,t){t=t||{};for(var n=e.domain,r=e.range,a=r.length,o=new Array(a),i=0;i<a;i++){var s=h(r[i]).toRgb();o[i]=[s.r,s.g,s.b,s.a]}var l,c=f.scale.linear().domain(n).range(o).clamp(!0),u=t.noNumericCheck,d=t.returnArray;return(l=u&&d?c:u?function(e){return y(c(e))}:d?function(e){return p(e)?c(e):h(e).isValid()?e:g.defaultLine}:function(e){return p(e)?y(c(e)):h(e).isValid()?e:g.defaultLine}).domain=c.domain,l.range=function(){return r},l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../color":35,"fast-isnumeric":4,tinycolor2:337}],54:[function(e,t,n){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],55:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){var o=(e-n)/(r-n),i=o+t/(r-n),s=(o+i)/2;return"left"===a||"bottom"===a?o:"center"===a||"middle"===a?s:"right"===a||"top"===a?i:o<2/3-s?o:4/3-s<i?i:s}},{}],56:[function(e,t,n){"use strict";var a=e("../../lib"),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:a.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:a.constrain(Math.floor(3*t),0,2),o[t][e]}},{"../../lib":156}],57:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),v=e("has-hover"),x=e("has-passive-events"),b=e("../../registry"),_=e("../../lib"),w=e("../../plots/cartesian/constants"),k=e("../../constants/interactions"),M=t.exports={};M.align=e("./align"),M.getCursor=e("./cursor");var a=e("./unhover");function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function A(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}M.unhover=a.wrapped,M.unhoverRaw=a.raw,M.init=function(i){var s,l,n,a,o,c,u,d,f=i.gd,h=1,p=k.DBLCLICKDELAY,r=i.element;f._mouseDownTime||(f._mouseDownTime=0),r.style.pointerEvents="all",r.onmousedown=e,x?(r._ontouchstart&&r.removeEventListener("touchstart",r._ontouchstart),r._ontouchstart=e,r.addEventListener("touchstart",e,{passive:!1})):r.ontouchstart=e;var g=i.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function e(e){e.preventDefault(),f._dragged=!1,f._dragging=!0;var t=A(e);s=t[0],l=t[1],u=e.target,d=2===(c=e).buttons||e.ctrlKey,(n=(new Date).getTime())-f._mouseDownTime<p?h+=1:(h=1,f._mouseDownTime=n),i.prepFn&&i.prepFn(e,s,l),v&&!d?(o=T()).style.cursor=window.getComputedStyle(r).cursor:v||(o=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(r).cursor),document.addEventListener("mousemove",y),document.addEventListener("mouseup",m),document.addEventListener("touchmove",y),document.addEventListener("touchend",m)}function y(e){e.preventDefault();var t=A(e),n=i.minDrag||w.MINDRAG,r=g(t[0]-s,t[1]-l,n),a=r[0],o=r[1];(a||o)&&(f._dragged=!0,M.unhover(f)),f._dragged&&i.moveFn&&!d&&i.moveFn(a,o)}function m(t){if(document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",m),t.preventDefault(),v?_.removeElement(o):a&&(o.documentElement.style.cursor=a,a=null),f._dragging){if(f._dragging=!1,(new Date).getTime()-f._mouseDownTime>p&&(h=Math.max(h-1,1)),f._dragged)i.doneFn&&i.doneFn(t);else if(i.clickFn&&i.clickFn(h,c),!d){var n;try{n=new MouseEvent("click",t)}catch(e){var r=A(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}u.dispatchEvent(n)}var e;(e=f)._dragging=!1,e._replotPending&&b.call("plot",e),f._dragged=!1}else f._dragged=!1}},M.coverSlip=T},{"../../constants/interactions":136,"../../lib":156,"../../plots/cartesian/constants":204,"../../registry":248,"./align":55,"./cursor":56,"./unhover":58,"has-hover":6,"has-passive-events":7,"mouse-event-offset":9}],58:[function(e,t,n){"use strict";var a=e("../../lib/events"),r=e("../../lib/throttle"),o=e("../../lib/get_graph_div"),i=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=o(e))._fullLayout&&r.clear(e._fullLayout._uid+i.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;t||(t={}),t.target&&!1===a.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/events":147,"../../lib/get_graph_div":154,"../../lib/throttle":178,"../fx/constants":72}],59:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",role:"style",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")}},{}],60:[function(O,j,e){(function(e){"use strict";var p="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,i=O("fast-isnumeric"),s=O("tinycolor2"),m=O("../../registry"),v=O("../color"),o=O("../colorscale"),x=O("../../lib"),g=O("../../lib/svg_text_utils"),n=O("../../constants/xmlns_namespaces"),d=O("../../constants/alignment").LINE_SPACING,b=O("../../constants/interactions").DESELECTDIM,_=O("../../traces/scatter/subtypes"),w=O("../../traces/scatter/make_bubble_size_func"),k=j.exports={};k.font=function(e,t,n,r){x.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(v.fill,r)},k.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},k.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},k.setRect=function(e,t,n,r,a){e.call(k.setPosition,t,n).call(k.setSize,r,a)},k.translatePoint=function(e,t,n,r){var a=n.c2p(e.x),o=r.c2p(e.y);return!!(i(a)&&i(o)&&t.node())&&("text"===t.node().nodeName?t.attr("x",a).attr("y",o):t.attr("transform","translate("+a+","+o+")"),!0)},k.translatePoints=function(e,n,r){e.each(function(e){var t=p.select(this);k.translatePoint(e,t,n,r)})},k.hideOutsideRangePoint=function(e,t,n,r,a,o){t.attr("display",n.isPtWithinRange(e,a)&&r.isPtWithinRange(e,o)?null:"none")},k.hideOutsideRangePoints=function(a,e,o){if(e._hasClipOnAxisFalse){o=o||".point,.textpoint";var i=e.xaxis,s=e.yaxis;a.each(function(e){var t=e[0].trace,n=t.xcalendar,r=t.ycalendar;a.selectAll(o).each(function(e){k.hideOutsideRangePoint(e,p.select(this),i,s,n,r)})})}},k.crispRound=function(e,t,n){return t&&i(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},k.singleLineStyle=function(e,t,n,r,a){t.style("fill","none");var o=(((e||[])[0]||{}).trace||{}).line||{},i=n||o.width||0,s=a||o.dash||"";v.stroke(t,r||o.color),k.dashLine(t,s,i)},k.lineGroupStyle=function(e,a,o,i){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{},n=a||t.width||0,r=i||t.dash||"";p.select(this).call(v.stroke,o||t.color).call(k.dashLine,r,n)})},k.dashLine=function(e,t,n){n=+n||0,t=k.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},k.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},k.singleFillStyle=function(e){var t=(((p.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(v.fill,t)},k.fillGroupStyle=function(n){n.style("stroke-width",0).each(function(e){var t=p.select(this);try{t.call(v.fill,e[0].trace.fillcolor)}catch(e){x.error(e,n),t.remove()}})};var r=O("./symbol_defs");k.symbolNames=[],k.symbolFuncs=[],k.symbolNeedLines={},k.symbolNoDot={},k.symbolNoFill={},k.symbolList=[],Object.keys(r).forEach(function(e){var t=r[e];k.symbolList=k.symbolList.concat([t.n,e,t.n+100,e+"-open"]),k.symbolNames[t.n]=e,k.symbolFuncs[t.n]=t.f,t.needLine&&(k.symbolNeedLines[t.n]=!0),t.noDot?k.symbolNoDot[t.n]=!0:k.symbolList=k.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"]),t.noFill&&(k.symbolNoFill[t.n]=!0)});var a=k.symbolNames.length,l="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function M(e,t){var n=e%100;return k.symbolFuncs[n](t)+(200<=e?l:"")}k.symbolNumber=function(e){if("string"==typeof e){var t=0;0<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=k.symbolNames.indexOf(e))&&(e+=t)}return a<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var c={x1:1,x2:0,y1:0,y2:0},u={x1:0,x2:0,y1:1,y2:0};k.gradient=function(e,t,r,a,o,i){var n=t._fullLayout._defs.select(".gradients").selectAll("#"+r).data([a+o+i],x.identity);n.exit().remove(),n.enter().append("radial"===a?"radialGradient":"linearGradient").each(function(){var e=p.select(this);"horizontal"===a?e.attr(c):"vertical"===a&&e.attr(u),e.attr("id",r);var t=s(o),n=s(i);e.append("stop").attr({offset:"0%","stop-color":v.tinyRGB(n),"stop-opacity":n.getAlpha()}),e.append("stop").attr({offset:"100%","stop-color":v.tinyRGB(t),"stop-opacity":t.getAlpha()})}),e.style({fill:"url(#"+r+")","fill-opacity":null})},k.initGradients=function(e){var t=e._fullLayout._defs.selectAll(".gradients").data([0]);t.enter().append("g").classed("gradients",!0),t.selectAll("linearGradient,radialGradient").remove()},k.singlePointStyle=function(e,t,n,r,a,o){var i=n.marker;!function(e,t,r,n,a,o,i,s){if(m.traceIs(r,"symbols")){var l=w(r);t.attr("d",function(e){var t;t="various"===e.ms||"various"===o.size?3:_.isBubble(r)?l(e.ms):(o.size||6)/2,e.mrc=t;var n=k.symbolNumber(e.mx||o.symbol)||0;return e.om=100<=n%200,M(n,t)})}t.style("opacity",function(e){return(e.mo+1||o.opacity+1)-1});var c,u,d,f=!1;if(e.so?(d=i.outlierwidth,u=i.outliercolor,c=o.outliercolor):(d=(e.mlw+1||i.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,u="mlc"in e?e.mlcc=a(e.mlc):x.isArrayOrTypedArray(i.color)?v.defaultLine:i.color,x.isArrayOrTypedArray(o.color)&&(c=v.defaultLine,f=!0),c="mc"in e?e.mcc=n(e.mc):o.color||"rgba(0,0,0,0)"),e.om)t.call(v.stroke,c).style({"stroke-width":(d||1)+"px",fill:"none"});else{t.style("stroke-width",d+"px");var h=o.gradient,p=e.mgt;if(p?f=!0:p=h&&h.type,p&&"none"!==p){var g=e.mgc;g?f=!0:g=h.color;var y="g"+s._fullLayout._uid+"-"+r.uid;f&&(y+="-"+e.i),t.call(k.gradient,s,y,p,c,g)}else t.call(v.fill,c);d&&t.call(v.stroke,u)}}(e,t,n,r,a,i,i.line,o)},k.pointStyle=function(e,t,n){if(e.size()){var r=t.marker,a=k.tryColorscale(r,""),o=k.tryColorscale(r,"line");e.each(function(e){k.singlePointStyle(e,p.select(this),t,a,o,n)})}},k.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},o=n.marker||{},i=r.marker||{},s=a.opacity,l=o.opacity,c=i.opacity,u=void 0!==l,d=void 0!==c;t.opacityFn=function(e){var t=e.mo,n=void 0!==t;if(n||u||d){if(!e.selected)return d?c:b*(n?t:s);if(u)return l}};var f=o.color,h=i.color;(f||h)&&(t.colorFn=function(e){if(e.selected){if(f)return f}else if(h)return h});var p=o.size,g=i.size,y=void 0!==p,m=void 0!==g;return(y||m)&&(t.sizeFn=function(e){var t=e.mrc;return e.selected?y?p/2:t:m?g/2:t}),t},k.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var a=k.makeSelectedPointStyleFns(t),o=t.marker||{};e.each(function(e){var t=p.select(this),n=a.opacityFn(e);void 0!==n&&t.style("opacity",n)}),a.colorFn&&e.each(function(e){var t=p.select(this),n=a.colorFn(e);n&&v.fill(t,n)}),m.traceIs(t,"symbols")&&a.sizeFn&&e.each(function(e){var t=p.select(this),n=e.mx||o.symbol||0,r=a.sizeFn(e);t.attr("d",M(k.symbolNumber(n),r)),e.mrc2=r})}},k.tryColorscale=function(e,t){var n=t?x.nestedProperty(e,t).get():e,r=n.colorscale,a=n.color;return r&&x.isArrayOrTypedArray(a)?o.makeColorScaleFunc(o.extractScale(r,n.cmin,n.cmax)):x.identity};var f={start:1,end:-1,middle:0,bottom:1,top:-1};function h(e,t,n,r){var a=p.select(e.node().parentNode),o=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",i=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,l=(g.lineCount(e)-1)*d+1,c=f[i]*s,u=.75*n+f[o]*s+(f[o]-1)*l*n/2;e.attr("text-anchor",i),a.attr("transform","translate("+c+","+u+")")}function y(e,t){var n=e.ts||t.textfont.size;return i(n)&&0<n?n:0}k.textPointStyle=function(e,o,i){e.each(function(e){var t=p.select(this),n=x.extractOption(e,o,"tx","text");if(n){var r=e.tp||o.textposition,a=y(e,o);t.call(k.font,e.tf||o.textfont.family,a,e.tc||o.textfont.color).text(n).call(g.convertToTspans,i).call(h,r,a,e.mrc)}else t.remove()})},k.selectedTextStyle=function(e,l){if(e.size()&&l.selectedpoints){var c=l.selected||{},u=l.unselected||{};e.each(function(e){var t,n=p.select(this),r=e.tc||l.textfont.color,a=e.tp||l.textposition,o=y(e,l),i=(c.textfont||{}).color,s=(u.textfont||{}).color;e.selected?i&&(t=i):s?t=s:i||(t=v.addOpacity(r,b)),t&&v.fill(n,t),h(n,a,o,e.mrc2||e.mrc)})}};var T=.5;function A(e,t,n,r){var a=e[0]-t[0],o=e[1]-t[1],i=n[0]-t[0],s=n[1]-t[1],l=Math.pow(a*a+o*o,T/2),c=Math.pow(i*i+s*s,T/2),u=(c*c*a-l*l*i)*r,d=(c*c*o-l*l*s)*r,f=3*c*(l+c),h=3*l*(l+c);return[[p.round(t[0]+(f&&u/f),2),p.round(t[1]+(f&&d/f),2)],[p.round(t[0]-(h&&u/h),2),p.round(t[1]-(h&&d/h),2)]]}k.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],a=[];for(n=1;n<e.length-1;n++)a.push(A(e[n-1],e[n],e[n+1],t));for(r+="Q"+a[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n];return r+="Q"+a[e.length-3][1]+" "+e[e.length-1]},k.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],a=e.length-1,o=[A(e[a],e[0],e[1],t)];for(n=1;n<a;n++)o.push(A(e[n-1],e[n],e[n+1],t));for(o.push(A(e[a-1],e[a],e[0],t)),n=1;n<=a;n++)r+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return r+="C"+o[a][1]+" "+o[0][0]+" "+e[0]+"Z"};var t={hv:function(e,t){return"H"+p.round(t[0],2)+"V"+p.round(t[1],2)},vh:function(e,t){return"V"+p.round(t[1],2)+"H"+p.round(t[0],2)},hvh:function(e,t){return"H"+p.round((e[0]+t[0])/2,2)+"V"+p.round(t[1],2)+"H"+p.round(t[0],2)},vhv:function(e,t){return"V"+p.round((e[1]+t[1])/2,2)+"H"+p.round(t[0],2)+"V"+p.round(t[1],2)}},S=function(e,t){return"L"+p.round(t[0],2)+","+p.round(t[1],2)};k.steps=function(e){var r=t[e]||S;return function(e){for(var t="M"+p.round(e[0][0],2)+","+p.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},k.makeTester=function(){var e=p.select("body").selectAll("#js-plotly-tester").data([0]);e.enter().append("svg").attr("id","js-plotly-tester").attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var t=e.selectAll(".js-reference-point").data([0]);t.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),k.tester=e,k.testref=t},k.savedBBoxes={};var L=0;function C(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}k.bBox=function(e,t,n){var r,a,o;if(n||(n=C(e)),n){if(r=k.savedBBoxes[n])return x.extendFlat({},r)}else if(1===e.childNodes.length){var i=e.childNodes[0];if(n=C(i)){var s=+i.getAttribute("x")||0,l=+i.getAttribute("y")||0,c=i.getAttribute("transform");if(!c){var u=k.bBox(i,!1,n);return s&&(u.left+=s,u.right+=s),l&&(u.top+=l,u.bottom+=l),u}if(n+="~"+s+"~"+l+"~"+c,r=k.savedBBoxes[n])return x.extendFlat({},r)}}t?a=e:(o=k.tester.node(),a=e.cloneNode(!0),o.appendChild(a)),p.select(a).attr("transform",null).call(g.positionText,0,0);var d=a.getBoundingClientRect(),f=k.testref.node().getBoundingClientRect();t||o.removeChild(a);var h={height:d.height,width:d.width,left:d.left-f.left,top:d.top-f.top,right:d.right-f.left,bottom:d.bottom-f.top};return 1e4<=L&&(k.savedBBoxes={},L=0),n&&(k.savedBBoxes[n]=h),L++,x.extendFlat({},h)},k.setClipUrl=function(e,t){if(t){var n="#"+t,r=p.select("base");r.size()&&r.attr("href")&&(n=window.location.href.split("#")[0]+n),e.attr("clip-path","url("+n+")")}else e.attr("clip-path",null)},k.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||0,y:+t[1]||0}},k.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||0,n=n||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=" translate("+t+", "+n+")").trim(),e[a]("transform",o),o},k.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||1,y:+t[1]||1}},k.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[r]("transform")||"";return t=t||1,n=n||1,o=o.replace(/(\bscale\(.*?\);?)/,"").trim(),o=(o+=" scale("+t+", "+n+")").trim(),e[a]("transform",o),o},k.setPointGroupScale=function(e,t,n){var r,a,o;return n=n||1,a=1===(t=t||1)&&1===n?"":" scale("+t+","+n+")",o=/\s*sc.*/,e.each(function(){r=(this.getAttribute("transform")||"").replace(o,""),r=(r+=a).trim(),this.setAttribute("transform",r)}),a};var z=/translate\([^)]*\)\s*$/;k.setTextPointsScale=function(e,i,s){e.each(function(){var e,t=p.select(this),n=t.select("text");if(n.node()){var r=parseFloat(n.attr("x")||0),a=parseFloat(n.attr("y")||0),o=(t.attr("transform")||"").match(z);e=1===i&&1===s?[]:["translate("+r+","+a+")","scale("+i+","+s+")","translate("+-r+","+-a+")"],o&&e.push(o),t.attr("transform",e.join(" "))}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../constants/interactions":136,"../../constants/xmlns_namespaces":139,"../../lib":156,"../../lib/svg_text_utils":177,"../../registry":248,"../../traces/scatter/make_bubble_size_func":311,"../../traces/scatter/subtypes":316,"../color":35,"../colorscale":50,"./symbol_defs":61,"fast-isnumeric":4,tinycolor2:337}],61:[function(e,t,n){(function(e){"use strict";var u="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null;t.exports={circle:{n:0,f:function(e){var t=u.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=u.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=u.round(.4*e,2),n=u.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=u.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,a="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+n+r+a+r+a+o+a+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+t+","+u.round(e/2,2)+"H"+t+"L0,-"+u.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+u.round(e/2,2)+"H"+t+"L0,"+u.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M"+u.round(e/2,2)+",-"+t+"V"+t+"L-"+u.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=u.round(2*e/Math.sqrt(3),2);return"M-"+u.round(e/2,2)+",-"+t+"V"+t+"L"+u.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=u.round(.6*e,2),n=u.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=u.round(.6*e,2),n=u.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=u.round(.6*e,2),n=u.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=u.round(.6*e,2),n=u.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=u.round(.951*e,2),n=u.round(.588*e,2),r=u.round(-e,2),a=u.round(-.309*e,2);return"M"+t+","+a+"L"+n+","+u.round(.809*e,2)+"H-"+n+"L-"+t+","+a+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=u.round(e,2),n=u.round(e/2,2),r=u.round(e*Math.sqrt(3)/2,2);return"M"+r+",-"+n+"V"+n+"L0,"+t+"L-"+r+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=u.round(e,2),n=u.round(e/2,2),r=u.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+r+"H"+n+"L"+t+",0L"+n+",-"+r+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=u.round(.924*e,2),n=u.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=u.round(.225*t,2),r=u.round(.951*t,2),a=u.round(.363*t,2),o=u.round(.588*t,2),i=u.round(-t,2),s=u.round(-.309*t,2),l=u.round(.118*t,2),c=u.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+a+","+l+"L"+o+","+c+"L0,"+u.round(.382*t,2)+"L-"+o+","+c+"L-"+a+","+l+"L-"+r+","+s+"H-"+n+"L0,"+i+"Z"}},hexagram:{n:18,f:function(e){var t=u.round(.66*e,2),n=u.round(.38*e,2),r=u.round(.76*e,2);return"M-"+r+",0l-"+n+",-"+t+"h"+r+"l"+n+",-"+t+"l"+n+","+t+"h"+r+"l-"+n+","+t+"l"+n+","+t+"h-"+r+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+r+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=u.round(e*Math.sqrt(3)*.8,2),n=u.round(.8*e,2),r=u.round(1.6*e,2),a=u.round(4*e,2),o="A "+a+","+a+" 0 0 1 ";return"M-"+t+","+n+o+t+","+n+o+"0,-"+r+o+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=u.round(e*Math.sqrt(3)*.8,2),n=u.round(.8*e,2),r=u.round(1.6*e,2),a=u.round(4*e,2),o="A "+a+","+a+" 0 0 1 ";return"M"+t+",-"+n+o+"-"+t+",-"+n+o+"0,"+r+o+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=u.round(1.1*e,2),n=u.round(2*e,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+r+"-"+t+","+t+r+t+","+t+r+t+",-"+t+r+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=u.round(1.4*e,2),n=u.round(1.9*e,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+r+"0,"+t+r+t+",0"+r+"0,-"+t+r+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=u.round(.7*e,2),n=u.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=u.round(1.4*e,2),n=u.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=u.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=u.round(e,2),n=u.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=u.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=u.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=u.round(1.3*e,2),n=u.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=u.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=u.round(1.2*e,2),n=u.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=u.round(e/2,2),n=u.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),r=u.round(.8*e,2);return"M-"+t+","+r+"L0,0M"+t+","+r+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),r=u.round(.8*e,2);return"M-"+t+",-"+r+"L0,0M"+t+",-"+r+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),r=u.round(.8*e,2);return"M"+r+","+t+"L0,0M"+r+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=u.round(1.2*e,2),n=u.round(1.6*e,2),r=u.round(.8*e,2);return"M-"+r+","+t+"L0,0M-"+r+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=u.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=u.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=u.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=u.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],62:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],role:"info",editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the sqaure of the","underlying data.","If *array*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},copy_ystyle:{valType:"boolean",role:"style",editType:"plot"},copy_zstyle:{valType:"boolean",role:"style",editType:"style"},color:{valType:"color",role:"style",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,role:"style",editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,role:"style",editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",role:"style",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}}},{}],63:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),s=e("../../registry"),p=e("../../plots/cartesian/axes"),g=e("./compute_error");function l(e,t,n,r){var a=t["error_"+r]||{},o=[];if(a.visible&&-1!==["linear","log"].indexOf(n.type)){for(var i=g(a),s=0;s<e.length;s++){var l=e[s],c=l[r];if(h(n.c2l(c))){var u=i(c,s);if(h(u[0])&&h(u[1])){var d=l[r+"s"]=c-u[0],f=l[r+"h"]=c+u[1];o.push(d,f)}}}p.expand(n,o,{padded:!0})}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],a=r[0].trace;if(s.traceIs(a,"errorBarsOK")){var o=p.getFromId(e,a.xaxis),i=p.getFromId(e,a.yaxis);l(r,a,o,"x"),l(r,a,i,"y")}}}},{"../../plots/cartesian/axes":199,"../../registry":248,"./compute_error":64,"fast-isnumeric":4}],64:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var a=e.array||[];if(n)return function(e,t){var n=+a[t];return[n,n]};var o=e.arrayminus||[];return function(e,t){var n=+a[t],r=+o[t];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var r=s(t,e.value),i=s(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=r(e);return[t,t]}:function(e){return[i(e),r(e)]}}},{}],65:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../registry"),h=e("../../lib"),p=e("./attributes");t.exports=function(e,t,n,r){var a="error_"+r.axis,o=t[a]={},i=e[a]||{};function s(e,t){return h.coerce(i,o,p,e,t)}if(!1!==s("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var l=s("type","array"in i?"data":"percent"),c=!0;"sqrt"!==l&&(c=s("symmetric",!(("data"===l?"arrayminus":"valueminus")in i))),"data"===l?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):"percent"!==l&&"constant"!==l||(s("value"),c||s("valueminus"));var u="copy_"+r.inherit+"style";if(r.inherit)(t["error_"+r.inherit]||{}).visible&&s(u,!(i.color||d(i.thickness)||d(i.width)));r.inherit&&o[u]||(s("color",n),s("thickness"),s("width",f.traceIs(t,"gl3d")?0:4))}}},{"../../lib":156,"../../registry":248,"./attributes":62,"fast-isnumeric":4}],66:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,o=e("./attributes"),s=e("./calc"),i={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o)};delete i.error_x.copy_zstyle,delete i.error_y.copy_zstyle,delete i.error_y.copy_ystyle;var l={error_x:r.extendFlat({},o),error_y:r.extendFlat({},o),error_z:r.extendFlat({},o)};delete l.error_x.copy_ystyle,delete l.error_y.copy_ystyle,delete l.error_z.copy_ystyle,delete l.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:i,bar:i,histogram:i,scatter3d:a(l,"calc","nested"),scattergl:a(i,"calc","nested")}},supplyDefaults:e("./defaults"),calc:s,calcFromTrace:function(e,t){for(var n=e.x||[],r=e.y||[],a=n.length||r.length,o=new Array(a),i=0;i<a;i++)o[i]={x:n[i],y:r[i]};return o[0].trace=e,s({calcdata:[o],_fullLayout:t}),o},plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":156,"../../plot_api/edit_types":184,"./attributes":62,"./calc":63,"./defaults":65,"./plot":67,"./style":68}],67:[function(t,n,e){(function(e){"use strict";var g="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,y=t("fast-isnumeric"),i=t("../drawing"),s=t("../../traces/scatter/subtypes");n.exports=function(e,o,d){var f=o.xaxis,h=o.yaxis,p=d&&0<d.duration;e.each(function(e){var t,n=e[0].trace,l=n.error_x||{},c=n.error_y||{};n.ids&&(t=function(e){return e.id});var u=s.hasMarkers(n)&&0<n.marker.maxdisplayed;c.visible||l.visible||(e=[]);var r=g.select(this).selectAll("g.errorbar").data(e,t);if(r.exit().remove(),e.length){l.visible||r.selectAll("path.xerror").remove(),c.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1);var a=r.enter().append("g").classed("errorbar",!0);p&&a.style("opacity",0).transition().duration(d.duration).style("opacity",1),i.setClipUrl(r,o.layerClipId),r.each(function(e){var t=g.select(this),n=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),y(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),y(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,f,h);if(!u||e.vis){var r,a=t.select("path.yerror");if(c.visible&&y(n.x)&&y(n.yh)&&y(n.ys)){var o=c.width;r="M"+(n.x-o)+","+n.yh+"h"+2*o+"m-"+o+",0V"+n.ys,n.noYS||(r+="m-"+o+",0h"+2*o),!a.size()?a=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):p&&(a=a.transition().duration(d.duration).ease(d.easing)),a.attr("d",r)}else a.remove();var i=t.select("path.xerror");if(l.visible&&y(n.y)&&y(n.xh)&&y(n.xs)){var s=(l.copy_ystyle?c:l).width;r="M"+n.xh+","+(n.y-s)+"v"+2*s+"m0,-"+s+"H"+n.xs,n.noXS||(r+="m0,-"+s+"v"+2*s),!i.size()?i=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):p&&(i=i.transition().duration(d.duration).ease(d.easing)),i.attr("d",r)}else i.remove()}})}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../traces/scatter/subtypes":316,"../drawing":60,"fast-isnumeric":4}],68:[function(t,n,e){(function(e){"use strict";var o="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,i=t("../color");n.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},r=t.error_x||{},a=o.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),r.copy_ystyle&&(r=n),a.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(i.stroke,r.color)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../color":35}],69:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",role:"style",arrayOk:!0,editType:"none",description:["Sets the background color of the hover labels for this trace"].join(" ")},bordercolor:{valType:"color",role:"style",arrayOk:!0,editType:"none",description:["Sets the border color of the hover labels for this trace."].join(" ")},font:r({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),namelength:{valType:"integer",min:-1,arrayOk:!0,role:"style",editType:"none",description:["Sets the length (in number of characters) of the trace name in","the hover labels for this trace. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"calc"}}},{"../../plots/font_attributes":226}],70:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry");function u(e,t,n,r){r=r||l.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;function r(t){return function(e){return l.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var a=0;a<t.length;a++){var o=t[a],i=o[0].trace;if(!c.traceIs(i,"pie")){var s=c.traceIs(i,"2dMap")?u:l.fillArray;s(i.hoverinfo,o,"hi",r(i)),i.hoverlabel&&(s(i.hoverlabel.bgcolor,o,"hbg"),s(i.hoverlabel.bordercolor,o,"hbc"),s(i.hoverlabel.font.size,o,"hts"),s(i.hoverlabel.font.color,o,"htc"),s(i.hoverlabel.font.family,o,"htf"),s(i.hoverlabel.namelength,o,"hnl"))}}}},{"../../lib":156,"../../registry":248}],71:[function(e,t,n){"use strict";var o=e("../../registry"),i=e("./hover").hover;t.exports=function(e,t,n){var r=o.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&i(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":248,"./hover":75}],72:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],73:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./attributes"),i=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){i(n,r,function(e,t){return a.coerce(n,r,o,e,t)},t.hoverlabel)}},{"../../lib":156,"./attributes":69,"./hoverlabel_defaults":76}],74:[function(e,t,i){"use strict";var u=e("../../lib");i.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},i.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},i.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},i.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||i.quadrature(t,n):"x"===e?t:n},i.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var a=t(e[r]);a<=n.distance&&(n.index=r,n.distance=a)}return n},i.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},i.quadrature=function(r,a){return function(e){var t=r(e),n=a(e);return Math.sqrt(t*t+n*n)}},i.makeEventData=function(e,t,n){var r="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var o=t._indexToPoints[r];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=r;return t._module.eventData?a=t._module.eventData(a,e,t,n,r):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),i.appendArrayPointValue(a,t,r),a},i.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var o=r[a],i=d(o);if(void 0===e[i]){var s=f(u.nestedProperty(t,o).get(),n);void 0!==s&&(e[i]=s)}}},i.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var o=r[a],i=d(o);if(void 0===e[i]){for(var s=u.nestedProperty(t,o).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=f(s,n[c]);e[i]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function d(e){return n[e]||e}function f(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}},{"../../lib":156}],75:[function(n,e,r){(function(e){"use strict";var ye="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,me=n("fast-isnumeric"),j=n("tinycolor2"),ve=n("../../lib"),xe=n("../../lib/events"),z=n("../../lib/svg_text_utils"),be=n("../../lib/override_cursor"),P=n("../drawing"),_e=n("../color"),we=n("../dragelement"),ke=n("../../plots/cartesian/axes"),Me=n("../../registry"),Te=n("./helpers"),m=n("./constants"),O=m.YANGLE,t=Math.PI*O/180,Ae=1/Math.sin(t),u=Math.cos(t),d=Math.sin(t),D=m.HOVERARROWSIZE,I=m.HOVERTEXTPAD;function Se(i,e,x){var b=e.hovermode,_=e.rotateLabels,w=e.bgColor,t=e.container,n=e.outerContainer,s=e.commonLabelOpts||{},k=e.fontFamily||m.HOVERFONT,M=e.fontSize||m.HOVERFONTSIZE,l=i[0],c=l.xa,u=l.ya,d="y"===b?"yLabel":"xLabel",T=l[d],f=(String(T)||"").split(" ")[0],r=n.node().getBoundingClientRect(),A=r.top,S=r.width,L=r.height,C=void 0!==T&&l.distance<=e.hoverdistance&&("x"===b||"y"===b);if(C){var a,o,h=!0;for(a=0;a<i.length;a++){h&&void 0===i[a].zLabel&&(h=!1),o=i[a].hoverinfo||i[a].trace.hoverinfo;var p=Array.isArray(o)?o:o.split("+");if(-1===p.indexOf("all")&&-1===p.indexOf(b)){C=!1;break}}h&&(C=!1)}var g=t.selectAll("g.axistext").data(C?[0]:[]);g.enter().append("g").classed("axistext",!0),g.exit().remove(),g.each(function(){var e=ye.select(this),t=e.selectAll("path").data([0]),n=e.selectAll("text").data([0]);t.enter().append("path").style({"stroke-width":"1px"}),t.style({fill:s.bgcolor||_e.defaultLine,stroke:s.bordercolor||_e.background}),n.enter().append("text").attr("data-notex",1),n.text(T).call(P.font,s.font.family||k,s.font.size||M,s.font.color||_e.background).call(z.positionText,0,0).call(z.convertToTspans,x),e.attr("transform","");var r=n.node().getBoundingClientRect();if("x"===b){n.attr("text-anchor","middle").call(z.positionText,0,"top"===c.side?A-r.bottom-D-I:A-r.top+D+I);var a="top"===c.side?"-":"";t.attr("d","M0,0L"+D+","+a+D+"H"+(I+r.width/2)+"v"+a+(2*I+r.height)+"H-"+(I+r.width/2)+"V"+a+D+"H-"+D+"Z"),e.attr("transform","translate("+(c._offset+(l.x0+l.x1)/2)+","+(u._offset+("top"===c.side?0:u._length))+")")}else{n.attr("text-anchor","right"===u.side?"start":"end").call(z.positionText,("right"===u.side?1:-1)*(I+D),A-r.top-r.height/2);var o="right"===u.side?"":"-";t.attr("d","M0,0L"+o+D+","+D+"V"+(I+r.height/2)+"h"+o+(2*I+r.width)+"V-"+(I+r.height/2)+"H"+o+D+"V-"+D+"Z"),e.attr("transform","translate("+(c._offset+("right"===u.side?c._length:0))+","+(u._offset+(l.y0+l.y1)/2)+")")}i=i.filter(function(e){return void 0!==e.zLabelVal||(e[d]||"").split(" ")[0]===f})});var y=t.selectAll("g.hovertext").data(i,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return y.enter().append("g").classed("hovertext",!0).each(function(){var e=ye.select(this);e.append("rect").call(_e.fill,_e.addOpacity(w,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(P.font,k,M)}),y.exit().remove(),y.each(function(e){var t=ye.select(this).attr("transform",""),n="",r="",a=_e.opacity(e.color)?e.color:_e.defaultLine,o=_e.combine(a,w),i=e.borderColor||_e.contrast(o);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){n=z.plainText(e.name||"");var s=Math.round(e.nameLength);-1<s&&n.length>s&&(n=3<s?n.substr(0,s-3)+"...":n.substr(0,s))}void 0!==e.extraText&&(r+=e.extraText),void 0!==e.zLabel?(void 0!==e.xLabel&&(r+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(r+="y: "+e.yLabel+"<br>"),r+=(r?"z: ":"")+e.zLabel):C&&e[b+"Label"]===T?r=e[("x"===b?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(r=e.yLabel):r=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(r+=(r?"<br>":"")+e.text),""===r&&(""===n&&t.remove(),r=n);var l=t.select("text.nums").call(P.font,e.fontFamily||k,e.fontSize||M,e.fontColor||i).text(r).attr("data-notex",1).call(z.positionText,0,0).call(z.convertToTspans,x),c=t.select("text.name"),u=0;n&&n!==r?(c.call(P.font,e.fontFamily||k,e.fontSize||M,o).text(n).attr("data-notex",1).call(z.positionText,0,0).call(z.convertToTspans,x),u=c.node().getBoundingClientRect().width+2*I):(c.remove(),t.select("rect").remove()),t.select("path").style({fill:o,stroke:i});var d,f,h=l.node().getBoundingClientRect(),p=e.xa._offset+(e.x0+e.x1)/2,g=e.ya._offset+(e.y0+e.y1)/2,y=Math.abs(e.x1-e.x0),m=Math.abs(e.y1-e.y0),v=h.width+D+I+u;e.ty0=A-h.top,e.bx=h.width+2*I,e.by=h.height+2*I,e.anchor="start",e.txwidth=h.width,e.tx2width=u,e.offset=0,_?(e.pos=p,d=g+m/2+v<=L,f=0<=g-m/2-v,"top"!==e.idealAlign&&d||!f?d?(g+=m/2,e.anchor="start"):e.anchor="middle":(g-=m/2,e.anchor="end")):(e.pos=g,d=p+y/2+v<=S,f=0<=p-y/2-v,"left"!==e.idealAlign&&d||!f?d?(p+=y/2,e.anchor="start"):e.anchor="middle":(p-=y/2,e.anchor="end")),l.attr("text-anchor",e.anchor),u&&c.attr("text-anchor",e.anchor),t.attr("transform","translate("+p+","+g+")"+(_?"rotate("+O+")":""))}),y}function Le(e,c){e.each(function(e){var t=ye.select(this);if(e.del)t.remove();else{var n="end"===e.anchor?-1:1,r=t.select("text.nums"),a={start:1,end:-1,middle:0}[e.anchor],o=a*(D+I),i=o+a*(e.txwidth+I),s=0,l=e.offset;"middle"===e.anchor&&(o-=e.tx2width/2,i+=e.txwidth/2+I),c&&(l*=-d,s=e.offset*u),t.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(l-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(n*D+s)+","+(D+l)+"v"+(e.by/2-D)+"h"+n*e.bx+"v-"+e.by+"H"+(n*D+s)+"V"+(l-D)+"Z"),r.call(z.positionText,o+s,l+e.ty0-e.by/2+I),e.tx2width&&(t.select("text.name").call(z.positionText,i+a*I+s,l+e.ty0-e.by/2+I),t.select("rect").call(P.setRect,i+(a-1)*e.tx2width/2+s,l-e.by/2-1,e.tx2width,e.by+2))}})}function Ce(a,e){var n=a.index,r=a.trace||{},o=a.cd[0],i=a.cd[n]||{},s=Array.isArray(n)?function(e,t){return ve.castOption(o,n,e)||ve.extractOption({},r,"",t)}:function(e,t){return ve.extractOption(i,r,e,t)};function t(e,t,n){var r=s(t,n);r&&(a[e]=r)}if(t("hoverinfo","hi","hoverinfo"),t("color","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),a.posref="y"===e?a.xa._offset+(a.x0+a.x1)/2:a.ya._offset+(a.y0+a.y1)/2,a.x0=ve.constrain(a.x0,0,a.xa._length),a.x1=ve.constrain(a.x1,0,a.xa._length),a.y0=ve.constrain(a.y0,0,a.ya._length),a.y1=ve.constrain(a.y1,0,a.ya._length),void 0!==a.xLabelVal&&(a.xLabel="xLabel"in a?a.xLabel:ke.hoverLabelText(a.xa,a.xLabelVal),a.xVal=a.xa.c2d(a.xLabelVal)),void 0!==a.yLabelVal&&(a.yLabel="yLabel"in a?a.yLabel:ke.hoverLabelText(a.ya,a.yLabelVal),a.yVal=a.ya.c2d(a.yLabelVal)),void 0!==a.zLabelVal&&void 0===a.zLabel&&(a.zLabel=String(a.zLabelVal)),!(isNaN(a.xerr)||"log"===a.xa.type&&a.xerr<=0)){var l=ke.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;void 0!==a.xerrneg?a.xLabel+=" +"+l+" / -"+ke.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text:a.xLabel+=" ± "+l,"x"===e&&(a.distance+=1)}if(!(isNaN(a.yerr)||"log"===a.ya.type&&a.yerr<=0)){var c=ke.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;void 0!==a.yerrneg?a.yLabel+=" +"+c+" / -"+ke.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text:a.yLabel+=" ± "+c,"y"===e&&(a.distance+=1)}var u=a.hoverinfo||a.trace.hoverinfo;return"all"!==u&&(-1===(u=Array.isArray(u)?u:u.split("+")).indexOf("x")&&(a.xLabel=void 0),-1===u.indexOf("y")&&(a.yLabel=void 0),-1===u.indexOf("z")&&(a.zLabel=void 0),-1===u.indexOf("text")&&(a.text=void 0),-1===u.indexOf("name")&&(a.name=void 0)),a}function ze(e,t){var n,r,a=t.container,o=t.fullLayout,i=t.event,s=!!e.hLinePoint,l=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),l||s){var c=_e.combine(o.plot_bgcolor,o.paper_bgcolor);if(s){var u,d,f=e.hLinePoint;n=f&&f.xa,"cursor"===(r=f&&f.ya).spikesnap?(u=i.pointerX,d=i.pointerY):(u=n._offset+f.x,d=r._offset+f.y);var h,p,g=j.readability(f.color,c)<1.5?_e.contrast(c):f.color,y=r.spikemode,m=r.spikethickness,v=r.spikecolor||g,x=r._boundingBox,b=(x.left+x.right)/2<u?x.right:x.left;-1===y.indexOf("toaxis")&&-1===y.indexOf("across")||(-1!==y.indexOf("toaxis")&&(h=b,p=u),-1!==y.indexOf("across")&&(h=r._counterSpan[0],p=r._counterSpan[1]),a.insert("line",":first-child").attr({x1:h,x2:p,y1:d,y2:d,"stroke-width":m,stroke:v,"stroke-dasharray":P.dashStyle(r.spikedash,m)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:h,x2:p,y1:d,y2:d,"stroke-width":m+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==y.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:b+("right"!==r.side?m:-m),cy:d,r:m,fill:v}).classed("spikeline",!0)}if(l){var _,w,k=e.vLinePoint;n=k&&k.xa,r=k&&k.ya,"cursor"===n.spikesnap?(_=i.pointerX,w=i.pointerY):(_=n._offset+k.x,w=r._offset+k.y);var M,T,A=j.readability(k.color,c)<1.5?_e.contrast(c):k.color,S=n.spikemode,L=n.spikethickness,C=n.spikecolor||A,z=n._boundingBox,O=(z.top+z.bottom)/2<w?z.bottom:z.top;-1===S.indexOf("toaxis")&&-1===S.indexOf("across")||(-1!==S.indexOf("toaxis")&&(M=O,T=w),-1!==S.indexOf("across")&&(M=n._counterSpan[0],T=n._counterSpan[1]),a.insert("line",":first-child").attr({x1:_,x2:_,y1:M,y2:T,"stroke-width":L,stroke:C,"stroke-dasharray":P.dashStyle(n.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:_,x2:_,y1:M,y2:T,"stroke-width":L+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==S.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:_,cy:O-("top"!==n.side?L:-L),r:L,fill:C}).classed("spikeline",!0)}}}function Oe(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}r.hover=function(e,t,n,r){e=ve.getGraphDiv(e),ve.throttle(e._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,function(){!function(e,t,n,r){n||(n="xy");var a=Array.isArray(n)?n:[n],o=e._fullLayout,i=o._plots||[],s=i[n],l=o._has("cartesian");if(s){var c=s.overlays.map(function(e){return e.id});a=a.concat(c)}for(var u=a.length,d=new Array(u),f=new Array(u),h=!1,p=0;p<u;p++){var g=a[p],y=i[g];if(y)h=!0,d[p]=ke.getFromId(e,y.xaxis._id),f[p]=ke.getFromId(e,y.yaxis._id);else{var m=o[g]._subplot;d[p]=m.xaxis,f[p]=m.yaxis}}var v=t.hovermode||o.hovermode;v&&!h&&(v="closest");if(-1===["x","y","closest"].indexOf(v)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return we.unhoverRaw(e,t);var x,b,_,w,k,M,T,A,S,L,C,z,O,j=-1===o.hoverdistance?1/0:o.hoverdistance,P=-1===o.spikedistance?1/0:o.spikedistance,D=[],I=[],E={hLinePoint:null,vLinePoint:null};if(Array.isArray(t))for(v="array",_=0;_<t.length;_++)"skip"!==(k=e.calcdata[t[_].curveNumber||0])[0].trace.hoverinfo&&I.push(k);else{for(w=0;w<e.calcdata.length;w++)k=e.calcdata[w],"skip"!==(M=k[0].trace).hoverinfo&&-1!==a.indexOf(Te.getSubplot(M))&&I.push(k);var R,N,F=!t.target;if(F)R="xpx"in t?t.xpx:d[0]._length/2,t.pointerX=R+d[0]._offset,N="ypx"in t?t.ypx:f[0]._length/2,t.pointerY=N+f[0]._offset;else{if(!1===xe.triggerHandler(e,"plotly_beforehover",t))return;var B=t.target.getBoundingClientRect();if(R=t.clientX-B.left,N=t.clientY-B.top,R<0||R>B.width||N<0||N>B.height)return we.unhoverRaw(e,t);t.pointerX=t.offsetX,t.pointerY=t.offsetY}if(x="xval"in t?Te.flat(a,t.xval):Te.p2c(d,R),b="yval"in t?Te.flat(a,t.yval):Te.p2c(f,N),!me(x[0])||!me(b[0]))return ve.warn("Fx.hover failed",t,e),we.unhoverRaw(e,t)}var q=1/0;for(w=0;w<I.length;w++)if((k=I[w])&&k[0]&&k[0].trace&&!0===k[0].trace.visible&&(M=k[0].trace,-1===["carpet","contourcarpet"].indexOf(M._module.name))){if(T=Te.getSubplot(M),A=a.indexOf(T),S=v,z={cd:k,trace:M,xa:d[A],ya:f[A],maxHoverDistance:j,maxSpikeDistance:P,index:!1,distance:Math.min(q,j),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:_e.defaultLine,name:M.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[T]&&(z.subplot=o[T]._subplot),O=D.length,"array"===S){var H=t[w];"pointNumber"in H?(z.index=H.pointNumber,S="closest"):(S="","xval"in H&&(L=H.xval,S="x"),"yval"in H&&(C=H.yval,S=S?"closest":"y"))}else L=x[A],C=b[A];if(0!==j)if(M._module&&M._module.hoverPoints){var V=M._module.hoverPoints(z,L,C,S,o._hoverlayer);if(V)for(var U,G=0;G<V.length;G++)U=V[G],me(U.x0)&&me(U.y0)&&D.push(Ce(U,v))}else ve.log("Unrecognized trace type in hover:",M);if("closest"===v&&D.length>O&&(D.splice(0,O),q=D[0].distance),l&&0!==P&&0===D.length){z.distance=P,z.index=!1;var Y=M._module.hoverPoints(z,L,C,"closest",o._hoverlayer);if(Y&&(Y=Y.filter(function(e){return e.spikeDistance<=P})),Y&&Y.length){var X,Z=Y.filter(function(e){return e.xa.showspikes});if(Z.length){var W=Z[0];me(W.x0)&&me(W.y0)&&(X=K(W),(!E.vLinePoint||E.vLinePoint.spikeDistance>X.spikeDistance)&&(E.vLinePoint=X))}var J=Y.filter(function(e){return e.ya.showspikes});if(J.length){var Q=J[0];me(Q.x0)&&me(Q.y0)&&(X=K(Q),(!E.hLinePoint||E.hLinePoint.spikeDistance>X.spikeDistance)&&(E.hLinePoint=X))}}}}function $(e,t){for(var n,r=null,a=1/0,o=0;o<e.length;o++)(n=e[o].spikeDistance)<a&&n<=t&&(r=e[o],a=n);return r}function K(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}var ee={fullLayout:o,container:o._hoverlayer,outerContainer:o._paperdiv,event:t},te=e._spikepoints,ne={vLinePoint:E.vLinePoint,hLinePoint:E.hLinePoint};if(e._spikepoints=ne,l&&0!==P&&0!==D.length){var re=D.filter(function(e){return e.ya.showspikes}),ae=$(re,P);E.hLinePoint=K(ae);var oe=D.filter(function(e){return e.xa.showspikes}),ie=$(oe,P);E.vLinePoint=K(ie)}if(0===D.length){var se=we.unhoverRaw(e,t);return!l||null===E.hLinePoint&&null===E.vLinePoint||Oe(te)&&ze(E,ee)}l&&Oe(te)&&ze(E,ee);D.sort(function(e,t){return e.distance-t.distance});var le=e._hoverdata,ce=[];for(_=0;_<D.length;_++){var ue=D[_];ce.push(Te.makeEventData(ue,ue.trace,ue.cd))}e._hoverdata=ce;var de="y"===v&&1<I.length,fe=_e.combine(o.plot_bgcolor||_e.background,o.paper_bgcolor),he={hovermode:v,rotateLabels:de,bgColor:fe,container:o._hoverlayer,outerContainer:o._paperdiv,commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance},pe=Se(D,he,e);if(function(e,r,a){var o,i,s,l,c,u,t,n=0,d=e.map(function(e,t){var n=e[r];return[{i:t,dp:0,pos:e.pos,posref:e.posref,size:e.by*("x"===n._id.charAt(0)?Ae:1)/2,pmin:0,pmax:"x"===n._id.charAt(0)?a.width:a.height}]}).sort(function(e,t){return e[0].posref-t[0].posref});function f(e){var t=e[0],n=e[e.length-1];if(i=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<i){for(c=e.length-1;0<=c;c--)e[c].dp+=i;o=!1}if(!(s<.01)){if(i<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;o=!1}if(o){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}for(;!o&&n<=e.length;){for(n++,o=!0,l=0;l<d.length-1;){var h=d[l],p=d[l+1],g=h[h.length-1],y=p[0];if(.01<(i=g.pos+g.dp+g.size-y.pos-y.dp+y.size)&&g.pmin===y.pmin&&g.pmax===y.pmax){for(c=p.length-1;0<=c;c--)p[c].dp+=i;for(h.push.apply(h,p),d.splice(l+1,1),t=0,c=h.length-1;0<=c;c--)t+=h[c].dp;for(s=t/h.length,c=h.length-1;0<=c;c--)h[c].dp-=s;o=!1}else l++}d.forEach(f)}for(l=d.length-1;0<=l;l--){var m=d[l];for(c=m.length-1;0<=c;c--){var v=m[c],x=e[v.i];x.offset=v.dp,x.del=v.del}}}(D,de?"xa":"ya",o),Le(pe,de),t.target&&t.target.tagName){var ge=Me.getComponentMethod("annotations","hasClickToShow")(e,ce);be(ye.select(t.target),ge?"pointer":"")}if(!t.target||r||!function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;0<=r;r--){var a=n[r],o=e._hoverdata[r];if(a.curveNumber!==o.curveNumber||String(a.pointNumber)!==String(o.pointNumber))return!0}return!1}(e,0,le))return;le&&e.emit("plotly_unhover",{event:t,points:le});e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:d,yaxes:f,xvals:x,yvals:b})}(e,t,n,r)})},r.loneHover=function(e,t){var n={color:e.color||_e.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},r=ye.select(t.container),a=t.outerContainer?ye.select(t.outerContainer):r,o={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||_e.background,container:r,outerContainer:a},i=Se([n],o,t.gd);return Le(i,o.rotateLabels),i.node()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../../lib/events":147,"../../lib/override_cursor":167,"../../lib/svg_text_utils":177,"../../plots/cartesian/axes":199,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"./constants":72,"./helpers":74,"fast-isnumeric":4,tinycolor2:337}],76:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t,n,r){n("hoverlabel.bgcolor",(r=r||{}).bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),a.coerceFont(n,"hoverlabel.font",r.font)}},{"../../lib":156}],77:[function(i,s,e){(function(e){"use strict";var n="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,r=i("../../lib"),t=i("../dragelement"),a=i("./helpers"),o=i("./layout_attributes");s.exports={moduleType:"component",name:"fx",constants:i("./constants"),schema:{layout:o},attributes:i("./attributes"),layoutAttributes:o,supplyLayoutGlobalDefaults:i("./layout_global_defaults"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(e,t,n){return r.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return r.castOption(t,e,"hoverinfo",function(e){return r.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:i("./hover").hover,unhover:t.unhover,loneHover:i("./hover").loneHover,loneUnhover:function(e){var t=r.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:i("./click")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../dragelement":57,"./attributes":69,"./calc":70,"./click":71,"./constants":72,"./defaults":73,"./helpers":74,"./hover":75,"./layout_attributes":78,"./layout_defaults":79,"./layout_global_defaults":80}],78:[function(e,t,n){"use strict";var r=e("./constants"),a=e("../../plots/font_attributes")({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,t.exports={dragmode:{valType:"enumerated",role:"info",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",role:"info",values:["x","y","closest",!1],editType:"modebar",description:"Determines the mode of hover interactions."},hoverdistance:{valType:"integer",min:-1,dflt:20,role:"info",editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:20,role:"info",editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",role:"style",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",role:"style",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:a,namelength:{valType:"integer",min:-1,dflt:15,role:"style",editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"}}},{"../../plots/font_attributes":226,"./constants":72}],79:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return l.coerce(n,r,c,e,t)}var a;t("dragmode"),r._has("cartesian")?(r._isHoriz=function(e){for(var t=!0,n=0;n<e.length;n++){var r=e[n];if("h"!==r.orientation){t=!1;break}}return t}(e),a=r._isHoriz?"y":"x"):a="closest",t("hovermode",a)&&(t("hoverdistance"),t("spikedistance"));var o=r._has("mapbox"),i=r._has("geo"),s=r._basePlotModules.length;"zoom"===r.dragmode&&((o||i)&&1===s||o&&i&&2===s)&&(r.dragmode="pan")}},{"../../lib":156,"./layout_attributes":78}],80:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./hoverlabel_defaults"),i=e("./layout_attributes");t.exports=function(n,r){o(n,r,function(e,t){return a.coerce(n,r,i,e,t)})}},{"../../lib":156,"./hoverlabel_defaults":76,"./layout_attributes":78}],81:[function(e,t,n){"use strict";var h=e("../../lib"),r=e("../../lib/regex").counter,a=e("../../plots/domain").attributes,o=e("../../plots/cartesian/constants").idRegex,p={rows:{valType:"integer",min:1,role:"info",editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",role:"info",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,role:"info",editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",role:"info",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,role:"info",editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,role:"info",editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:a({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",role:"info",editType:"ticks",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",role:"info",editType:"ticks",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function g(e,t,n,r,a){var o=t(e+"gap",n),i=t("domain."+e);t(e+"side");for(var s=new Array(r),l=i[0],c=(i[1]-l)/(r-o),u=c*(1-o),d=0;d<r;d++){var f=l+c*d;s[a?r-1-d:d]=[f,f+u]}return s}function O(e,n,t,r,a){var o,i=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(i[e]=t,r[t]=e):i[e]=""}if(Array.isArray(e))for(o=0;o<t;o++)s(o,e[o]);else for(s(0,a),o=1;o<t;o++)s(o,a+(o+1));return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(e,t){var n=e.grid;if(n){var r,a,o=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),i=Array.isArray(n.xaxes),s=Array.isArray(n.yaxes);o?(r=n.subplots.length,a=n.subplots[0].length):(s&&(r=n.yaxes.length),i&&(a=n.xaxes.length));var l=t.grid={},c=f("rows",r),u=f("columns",a);if(1<c*u){o||i||s||"independent"===f("pattern")&&(o=!0),l._hasSubplotGrid=o;var d="top to bottom"===f("roworder");l._domains={x:g("x",f,o?.2:.1,u),y:g("y",f,o?.3:.1,c,d)}}}function f(e,t){return h.coerce(n,l,p,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,a,o,i,s,l,c,u=e.grid,d=t._subplots,f=n._hasSubplotGrid,h=n.rows,p=n.columns,g="independent"===n.pattern,y=n._axisMap={};if(f){var m=u.subplots||[];l=n.subplots=new Array(h);var v=1;for(r=0;r<h;r++){var x=l[r]=new Array(p),b=m[r]||[];for(a=0;a<p;a++)if(g?(s=1===v?"xy":"x"+v+"y"+v,v++):s=b[a],x[a]="",-1!==d.cartesian.indexOf(s)){if(c=s.indexOf("y"),o=s.slice(0,c),i=s.slice(c),void 0!==y[o]&&y[o]!==a||void 0!==y[i]&&y[i]!==r)continue;x[a]=s,y[o]=a,y[i]=r}}}else n.xaxes=O(u.xaxes,d.xaxis,p,y,"x"),n.yaxes=O(u.yaxes,d.yaxis,h,y,"y");var _=n._anchors={},w="top to bottom"===n.roworder;for(var k in y){var M,T,A,S=k.charAt(0),L=n[S+"side"];if(L.length<8)_[k]="free";else if("x"===S){if("t"===L.charAt(0)===w?(M=0,T=1,A=h):(M=h-1,A=T=-1),f){var C=y[k];for(r=M;r!==A;r+=T)if((s=l[r][C])&&(c=s.indexOf("y"),s.slice(0,c)===k)){_[k]=s.slice(c);break}}else for(r=M;r!==A;r+=T)if(i=n.yaxes[r],-1!==d.cartesian.indexOf(k+i)){_[k]=i;break}}else if("l"===L.charAt(0)?(M=0,T=1,A=p):(M=p-1,A=T=-1),f){var z=y[k];for(r=M;r!==A;r+=T)if((s=l[z][r])&&(c=s.indexOf("y"),s.slice(c)===k)){_[k]=s.slice(0,c);break}}else for(r=M;r!==A;r+=T)if(o=n.xaxes[r],-1!==d.cartesian.indexOf(o+k)){_[k]=o;break}}}}}},{"../../lib":156,"../../lib/regex":171,"../../plots/cartesian/constants":204,"../../plots/domain":225}],82:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants");t.exports={_isLinkedToArray:"image",visible:{valType:"boolean",role:"info",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",role:"info",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width."].join(" ")},sizey:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",role:"info",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",role:"info",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",role:"info",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's x coordinate axis.","If set to a x axis id (e.g. *x* or *x2*), the `x` position","refers to an x data coordinate","If set to *paper*, the `x` position refers to the distance from","the left of plot in normalized coordinates","where *0* (*1*) corresponds to the left (right)."].join(" ")},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's y coordinate axis.","If set to a y axis id (e.g. *y* or *y2*), the `y` position","refers to a y data coordinate.","If set to *paper*, the `y` position refers to the distance from","the bottom of the plot in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")},editType:"arraydraw"}},{"../../plots/cartesian/constants":204}],83:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var a="log"===n&&"linear"===t.type,o="linear"===n&&"log"===t.type;if(a||o)for(var i,s,l=e._fullLayout.images,c=t._id.charAt(0),u=0;u<l.length;u++)if(s="images["+u+"].",(i=l[u])[c+"ref"]===t._id){var d=i[c],f=i["size"+c],h=null,p=null;if(a){h=m(d,t.range);var g=f/Math.pow(10,h)/2;p=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else p=(h=Math.pow(10,d))*(Math.pow(10,f/2)-Math.pow(10,-f/2));y(h)?y(p)||(p=null):p=h=null,r(s+c,h),r(s+"size"+c,p)}}},{"../../lib/to_log_range":179,"fast-isnumeric":4}],84:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),d=e("./attributes");function a(n,r,e){function t(e,t){return c.coerce(n,r,d,e,t)}if(!t("visible",!!t("source")))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var a={_fullLayout:e},o=["x","y"],i=0;i<2;i++){var s=o[i],l=u.coerceRef(n,r,a,s,"paper");u.coercePosition(r,a,t,l,s,0)}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:a})}},{"../../lib":156,"../../plots/array_container_defaults":195,"../../plots/cartesian/axes":199,"./attributes":82}],85:[function(t,n,e){(function(e){"use strict";var v="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,x=t("../drawing"),b=t("../../plots/cartesian/axes"),_=t("../../constants/xmlns_namespaces");n.exports=function(h){var e,t,p=h._fullLayout,n=[],r={},a=[];for(t=0;t<p.images.length;t++){var o=p.images[t];if(o.visible)if("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref){e=o.xref+o.yref;var i=p._plots[e];if(!i){a.push(o);continue}i.mainplot&&(e=i.mainplot.id),r[e]||(r[e]=[]),r[e].push(o)}else"above"===o.layer?n.push(o):a.push(o)}var g={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var a=v.select(this);if(!this.img||this.img.src!==r.source){a.attr("xmlns",_.svg);var e=new Promise(function(n){var e=new Image;function t(){a.remove(),n()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=t,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var t=e.toDataURL("image/png");a.attr("xlink:href",t),n()},a.on("error",t),e.src=r.source}.bind(this));h._promises.push(e)}}function l(e){var t=v.select(this),n=b.getFromId(h,e.xref),r=b.getFromId(h,e.yref),a=p._size,o=n?Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*a.w,i=r?Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*a.h,s=o*g[e.xanchor].offset,l=i*y[e.yanchor].offset,c=g[e.xanchor].sizing+y[e.yanchor].sizing,u=(n?n.r2p(e.x)+n._offset:e.x*a.w+a.l)+s,d=(r?r.r2p(e.y)+r._offset:a.h-e.y*a.h+a.t)+l;switch(e.sizing){case"fill":c+=" slice";break;case"stretch":c="none"}t.attr({x:u,y:d,width:o,height:i,preserveAspectRatio:c,opacity:e.opacity});var f=(n?n._id:"")+(r?r._id:"");t.call(x.setClipUrl,f?"clip"+p._uid+f:null)}var c=p._imageLowerLayer.selectAll("image").data(a),u=p._imageUpperLayer.selectAll("image").data(n);c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)});var d=Object.keys(p._plots);for(t=0;t<d.length;t++){e=d[t];var f=p._plots[e];if(f.imagelayer){var m=f.imagelayer.selectAll("image").data(r[e]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(e){s.bind(this)(e),l.bind(this)(e)})}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/xmlns_namespaces":139,"../../plots/cartesian/axes":199,"../drawing":60}],86:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":209,"./attributes":82,"./convert_coords":83,"./defaults":84,"./draw":85}],87:[function(e,t,n){"use strict";n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3}},{}],88:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes");t.exports={bgcolor:{valType:"color",role:"style",editType:"legend",description:"Sets the legend background color."},bordercolor:{valType:"color",dflt:a.defaultLine,role:"style",editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,role:"style",editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:r({editType:"legend",description:"Sets the font used to text the legend items."}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",role:"info",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],role:"style",editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,role:"style",editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:1.02,role:"style",editType:"legend",description:"Sets the x position (in normalized coordinates) of the legend."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,role:"style",editType:"legend",description:"Sets the y position (in normalized coordinates) of the legend."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",role:"info",editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend."].join(" ")},editType:"legend"}},{"../../plots/font_attributes":226,"../color/attributes":34}],89:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],90:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib"),m=e("./attributes"),v=e("../../plots/layout_attributes"),x=e("./helpers");t.exports=function(e,t,n){for(var r,a,o,i,s=e.legend||{},l={},c=0,u="normal",d=0;d<n.length;d++){var f=n[d];x.legendGetsTrace(f)&&(c++,g.traceIs(f,"pie")&&c++),(g.traceIs(f,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(f.fill))&&(u=x.isGrouped({traceorder:u})?"grouped+reversed":"reversed"),void 0!==f.legendgroup&&""!==f.legendgroup&&(u=x.isReversed({traceorder:u})?"reversed+grouped":"grouped")}function h(e,t){return y.coerce(s,l,m,e,t)}if(!1!==y.coerce(e,t,v,"showlegend",1<c)){if(t.legend=l,h("bgcolor",t.paper_bgcolor),h("bordercolor"),h("borderwidth"),y.coerceFont(h,"font",t.font),h("orientation"),"h"===l.orientation){var p=e.xaxis;p&&p.rangeslider&&p.rangeslider.visible?(r=0,o="left",a=1.1,i="bottom"):(r=0,o="left",a=-.1,i="top")}h("traceorder",u),x.isGrouped(t.legend)&&h("tracegroupgap"),h("x",r),h("xanchor",o),h("y",a),h("yanchor",i),y.noneOrAll(s,l,["x","y"])}}},{"../../lib":156,"../../plots/layout_attributes":238,"../../registry":248,"./attributes":88,"./helpers":94}],91:[function(r,a,e){(function(e){"use strict";var I="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,E=r("../../lib"),R=r("../../plots/plots"),N=r("../../registry"),F=r("../dragelement"),B=r("../drawing"),q=r("../color"),h=r("../../lib/svg_text_utils"),H=r("./handle_click"),V=r("./constants"),t=r("../../constants/interactions"),n=r("../../constants/alignment"),p=n.LINE_SPACING,U=n.FROM_TL,G=n.FROM_BR,Y=r("./get_legend_data"),X=r("./style"),_=r("./helpers"),Z=r("./anchor_utils"),W=t.DBLCLICKDELAY;function J(t,l){var c=t.data()[0][0],e=l._fullLayout,n=c.trace,r=N.traceIs(n,"pie"),u=n.index,a=r?c.label:n.name,o=t.selectAll("text.legendtext").data([0]);function d(e){h.convertToTspans(e,l,function(){!function(e,t){var n=e.data()[0][0];if(!n.trace.showlegend)return e.remove();var r,a,o=e.select("g[class*=math-group]"),i=o.node(),s=t._fullLayout.legend.font.size*p;if(i){var l=B.bBox(i);r=l.height,a=l.width,B.setTranslate(o,0,r/4)}else{var c=e.select(".legendtext"),u=h.lineCount(c),d=c.node();r=s*u,a=d?B.bBox(d).width:0;var f=s*(.3+(1-u)/2);h.positionText(c,40,f)}r=Math.max(r,16)+3,n.height=r,n.width=a}(t,l)})}o.enter().append("text").classed("legendtext",!0),o.attr("text-anchor","start").classed("user-select-none",!0).call(B.font,e.legend.font).text(a),l._context.edits.legendText&&!r?o.call(h.makeEditable,{gd:l}).call(d).on("edit",function(e){this.text(e).call(d);var t,n=e;this.text()||(e="    ");var r=c.trace._fullInput||{},a={};if(-1!==["ohlc","candlestick"].indexOf(r.type))a[(t=c.trace.transforms)[t.length-1].direction+".name"]=e;else if(N.hasTransform(r,"groupby")){var o=N.getTransformIndices(r,"groupby"),i=o[o.length-1],s=E.keyedContainer(r,"transforms["+i+"].styles","target","value.name");""===n?s.remove(c.trace._group):s.set(c.trace._group,e),a=s.constructUpdate()}else a.name=e;return N.call("restyle",l,a,u)}):d(o)}function Q(t,n){var e,r=1,a=t.selectAll("rect").data([0]);a.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(q.fill,"rgba(0,0,0,0)"),a.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<W?r+=1:(r=1,n._legendMouseDownTime=e)}),a.on("mouseup",function(){if(!n._dragged&&!n._editing){var e=n._fullLayout.legend;(new Date).getTime()-n._legendMouseDownTime>W&&(r=Math.max(r-1,1)),1===r?e._clickTimeout=setTimeout(function(){H(t,n,r)},W):2===r&&(e._clickTimeout&&clearTimeout(e._clickTimeout),n._legendMouseDownTime=0,H(t,n,r))}})}function $(r,e,t){var a=r._fullLayout,o=a.legend,i=o.borderwidth,n=_.isGrouped(o),s=0;if(o._width=0,o._height=0,_.isVertical(o))n&&e.each(function(e,t){B.setTranslate(this,0,t*o.tracegroupgap)}),t.each(function(e){var t=e[0],n=t.height,r=t.width;B.setTranslate(this,i,5+i+o._height+n/2),o._height+=n,o._width=Math.max(o._width,r)}),o._width+=45+2*i,o._height+=10+2*i,n&&(o._height+=(o._lgroupsLength-1)*o.tracegroupgap),s=40;else if(n){for(var l=[o._width],c=e.data(),u=0,d=c.length;u<d;u++){var f=c[u].map(function(e){return e[0].width}),h=40+Math.max.apply(null,f);o._width+=o.tracegroupgap+h,l.push(o._width)}e.each(function(e,t){B.setTranslate(this,l[t],0)}),e.each(function(){var e=I.select(this).selectAll("g.traces"),n=0;e.each(function(e){var t=e[0].height;B.setTranslate(this,0,5+i+n+t/2),n+=t}),o._height=Math.max(o._height,n)}),o._height+=10+2*i,o._width+=2*i}else{var p,g=0,y=0,m=0,v=0,x=0,b=o.tracegroupgap||5;t.each(function(e){m=Math.max(40+e[0].width,m),x+=40+e[0].width+b}),p=a.width-(a.margin.r+a.margin.l)>i+x-b,t.each(function(e){var t=e[0],n=p?40+e[0].width:m;i+v+b+n>a.width-(a.margin.r+a.margin.l)&&(v=0,g+=y,o._height=o._height+y,y=0),B.setTranslate(this,i+v,5+i+t.height/2+g),o._width+=b+n,o._height=Math.max(o._height,t.height),v+=b+n,y=Math.max(t.height,y)}),o._width+=2*i,o._height+=10+2*i}o._width=Math.ceil(o._width),o._height=Math.ceil(o._height),t.each(function(e){var t=e[0],n=I.select(this).select(".legendtoggle");B.setRect(n,0,-t.height/2,(r._context.edits.legendText?0:o._width)+s,t.height)})}function K(e){var t=e._fullLayout.legend,n="left";Z.isRightAnchor(t)?n="right":Z.isCenterAnchor(t)&&(n="center");var r="top";Z.isBottomAnchor(t)?r="bottom":Z.isMiddleAnchor(t)&&(r="middle"),R.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*U[n],r:t._width*G[n],b:t._height*G[r],t:t._height*U[r]})}a.exports=function(r){var a=r._fullLayout,e="legend"+a._uid;if(a._infolayer&&r.calcdata){r._legendMouseDownTime||(r._legendMouseDownTime=0);var o=a.legend,t=a.showlegend&&Y(r.calcdata,o),n=a.hiddenlabels||[];if(!a.showlegend||!t.length)return a._infolayer.selectAll(".legend").remove(),a._topdefs.select("#"+e).remove(),void R.autoMargin(r,"legend");var i=a._infolayer.selectAll("g.legend").data([0]);i.enter().append("g").attr({class:"legend","pointer-events":"all"});var s=a._topdefs.selectAll("#"+e).data([0]);s.enter().append("clipPath").attr("id",e).append("rect");var l=i.selectAll("rect.bg").data([0]);l.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),l.call(q.stroke,o.bordercolor).call(q.fill,o.bgcolor).style("stroke-width",o.borderwidth+"px");var c=i.selectAll("g.scrollbox").data([0]);c.enter().append("g").attr("class","scrollbox");var u=i.selectAll("rect.scrollbar").data([0]);u.enter().append("rect").attr({class:"scrollbar",rx:20,ry:3,width:0,height:0}).call(q.fill,"#808BA4");var d=c.selectAll("g.groups").data(t);d.enter().append("g").attr("class","groups"),d.exit().remove();var f=d.selectAll("g.traces").data(E.identity);f.enter().append("g").attr("class","traces"),f.exit().remove(),f.call(X,r).style("opacity",function(e){var t=e[0].trace;return N.traceIs(t,"pie")?-1!==n.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){I.select(this).call(J,r).call(Q,r)}),0!==i.enter().size()&&($(r,d,f),K(r));var h=a.width,p=a.height;$(r,d,f),o._height>p?function(e){var t=e._fullLayout.legend,n="left";Z.isRightAnchor(t)?n="right":Z.isCenterAnchor(t)&&(n="center");R.autoMargin(e,"legend",{x:t.x,y:.5,l:t._width*U[n],r:t._width*G[n],b:0,t:0})}(r):K(r);var g=a._size,y=g.l+g.w*o.x,m=g.t+g.h*(1-o.y);Z.isRightAnchor(o)?y-=o._width:Z.isCenterAnchor(o)&&(y-=o._width/2),Z.isBottomAnchor(o)?m-=o._height:Z.isMiddleAnchor(o)&&(m-=o._height/2);var v=o._width,x=g.w;x<v?(y=g.l,v=x):(h<y+v&&(y=h-v),y<0&&(y=0),v=Math.min(h-y,o._width));var b,_,w,k,M=o._height,T=g.h;if(T<M?(m=g.t,M=T):(p<m+M&&(m=p-M),m<0&&(m=0),M=Math.min(p-m,o._height)),B.setTranslate(i,y,m),u.on(".drag",null),i.on("wheel",null),o._height<=M||r._context.staticPlot)l.attr({width:v-o.borderwidth,height:M-o.borderwidth,x:o.borderwidth/2,y:o.borderwidth/2}),B.setTranslate(c,0,0),s.select("rect").attr({width:v-2*o.borderwidth,height:M-2*o.borderwidth,x:o.borderwidth,y:o.borderwidth}),B.setClipUrl(c,e),B.setRect(u,0,0,0,0),delete o._scrollY;else{var A,S,L=Math.max(V.scrollBarMinHeight,M*M/o._height),C=M-L-2*V.scrollBarMargin,z=o._height-M,O=C/z,j=Math.min(o._scrollY||0,z);l.attr({width:v-2*o.borderwidth+V.scrollBarWidth+V.scrollBarMargin,height:M-o.borderwidth,x:o.borderwidth/2,y:o.borderwidth/2}),s.select("rect").attr({width:v-2*o.borderwidth+V.scrollBarWidth+V.scrollBarMargin,height:M-2*o.borderwidth,x:o.borderwidth,y:o.borderwidth+j}),B.setClipUrl(c,e),D(j,L,O),i.on("wheel",function(){D(j=E.constrain(o._scrollY+I.event.deltaY/C*z,0,z),L,O),0!==j&&j!==z&&I.event.preventDefault()});var P=I.behavior.drag().on("dragstart",function(){A=I.event.sourceEvent.clientY,S=j}).on("drag",function(){var e=I.event.sourceEvent;2===e.buttons||e.ctrlKey||D(j=E.constrain((e.clientY-A)/O+S,0,z),L,O)});u.call(P)}if(r._context.edits.legendPosition)i.classed("cursor-move",!0),F.init({element:i.node(),gd:r,prepFn:function(){var e=B.getTranslate(i);w=e.x,k=e.y},moveFn:function(e,t){var n=w+e,r=k+t;B.setTranslate(i,n,r),b=F.align(n,0,g.l,g.l+g.w,o.xanchor),_=F.align(r,0,g.t+g.h,g.t,o.yanchor)},doneFn:function(){void 0!==b&&void 0!==_&&N.call("relayout",r,{"legend.x":b,"legend.y":_})},clickFn:function(e,t){var n=a._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&(1===e?i._clickTimeout=setTimeout(function(){H(n,r,e)},W):2===e&&(i._clickTimeout&&clearTimeout(i._clickTimeout),H(n,r,e)))}})}function D(e,t,n){o._scrollY=r._fullLayout.legend._scrollY=e,B.setTranslate(c,0,-e),B.setRect(u,v,V.scrollBarMargin+e*n,V.scrollBarWidth,t),s.select("rect").attr({y:o.borderwidth+e})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../constants/interactions":136,"../../lib":156,"../../lib/svg_text_utils":177,"../../plots/plots":240,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"./anchor_utils":87,"./constants":89,"./get_legend_data":92,"./handle_click":93,"./helpers":94,"./style":96}],92:[function(e,t,n){"use strict";var v=e("../../registry"),x=e("./helpers");t.exports=function(e,r){var t,n,a={},o=[],i=!1,s={},l=0;function c(e,t){if(""!==e&&x.isGrouped(r))-1===o.indexOf(e)?(o.push(e),i=!0,a[e]=[[t]]):a[e].push([t]);else{var n="~~i"+l;o.push(n),a[n]=[[t]],l++}}for(t=0;t<e.length;t++){var u=e[t],d=u[0],f=d.trace,h=f.legendgroup;if(x.legendGetsTrace(f)&&f.showlegend)if(v.traceIs(f,"pie"))for(s[h]||(s[h]={}),n=0;n<u.length;n++){var p=u[n].label;s[h][p]||(c(h,{label:p,color:u[n].color,i:u[n].i,trace:f}),s[h][p]=!0)}else c(h,d)}if(!o.length)return[];var g,y,m=o.length;if(i&&x.isGrouped(r))for(y=new Array(m),t=0;t<m;t++)g=a[o[t]],y[t]=x.isReversed(r)?g.reverse():g;else{for(y=[new Array(m)],t=0;t<m;t++)g=a[o[t]][0],y[0][x.isReversed(r)?m-t-1:t]=g;m=1}return r._lgroupsLength=m,y}},{"../../registry":248,"./helpers":94}],93:[function(e,t,n){"use strict";var z=e("../../lib"),O=e("../../registry"),j=!0;t.exports=function(e,t,n){if(!t._dragged&&!t._editing){var r,a,o,i,s,l=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],c=e.data()[0][0],u=t._fullData,d=c.trace,f=d.legendgroup,h={},p=[],g=[],y=[];if(1===n&&j&&t.data&&t._context.showTips&&z.notifier(z._(t,"Double-click on legend to isolate one trace"),"long"),j=!1,O.traceIs(d,"pie")){var m=c.label,v=l.indexOf(m);1===n?-1===v?l.push(m):l.splice(v,1):2===n&&(l=[],t.calcdata[0].forEach(function(e){m!==e.label&&l.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===l.length&&-1===v&&(l=[])),O.call("relayout",t,"hiddenlabels",l)}else{var x,b=f&&f.length,_=[];if(b)for(r=0;r<u.length;r++)(x=u[r]).visible&&x.legendgroup===f&&_.push(r);if(1===n){var w;switch(d.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(b)for(r=0;r<u.length;r++)!1!==u[r].visible&&u[r].legendgroup===f&&C(u[r],w);else C(d,w)}else if(2===n){var k,M,T=!0;for(r=0;r<u.length;r++)if(!(u[r]===d)&&!(k=b&&u[r].legendgroup===f)&&!0===u[r].visible&&!O.traceIs(u[r],"notLegendIsolatable")){T=!1;break}for(r=0;r<u.length;r++)if(!1!==u[r].visible&&!O.traceIs(u[r],"notLegendIsolatable"))switch(d.visible){case"legendonly":C(u[r],!0);break;case!0:M=!!T||"legendonly",k=u[r]===d||b&&u[r].legendgroup===f,C(u[r],!!k||M)}}for(r=0;r<g.length;r++)if(o=g[r]){var A=o.constructUpdate(),S=Object.keys(A);for(a=0;a<S.length;a++)i=S[a],(h[i]=h[i]||[])[y[r]]=A[i]}for(s=Object.keys(h),r=0;r<s.length;r++)for(i=s[r],a=0;a<p.length;a++)h[i].hasOwnProperty(a)||(h[i][a]=void 0);O.call("restyle",t,h,p)}}function L(e,t,n){var r=p.indexOf(e),a=h[t];return a||(a=h[t]=[]),-1===p.indexOf(e)&&(p.push(e),r=p.length-1),a[r]=n,r}function C(e,t){var n=e._fullInput;if(O.hasTransform(n,"groupby")){var r=g[n.index];if(!r){var a=O.getTransformIndices(n,"groupby"),o=a[a.length-1];r=z.keyedContainer(n,"transforms["+o+"].styles","target","value.visible"),g[n.index]=r}var i=r.get(e._group);void 0===i&&(i=!0),!1!==i&&r.set(e._group,t),y[n.index]=L(n.index,"visible",!1!==n.visible)}else{var s=!1!==n.visible&&t;L(n.index,"visible",s)}}}},{"../../lib":156,"../../registry":248}],94:[function(e,t,n){"use strict";n.legendGetsTrace=function(e){return e.visible&&void 0!==e.showlegend},n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],95:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":88,"./defaults":90,"./draw":91,"./style":96}],96:[function(t,n,e){(function(e){"use strict";var y="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,r=t("../../registry"),m=t("../../lib"),v=t("../drawing"),i=t("../color"),x=t("../../traces/scatter/subtypes"),a=t("../../traces/pie/style_one");n.exports=function(e,g){e.each(function(e){var t=y.select(this).selectAll("g.layers").data([0]);t.enter().append("g").classed("layers",!0),t.style("opacity",e[0].trace.opacity),t.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),t.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var n=t.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var t=e[0].trace,a=t.marker||{},o=a.line||{},n=y.select(this).select("g.legendpoints").selectAll("path.legendbar").data(r.traceIs(t,"bar")?[e]:[]);n.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(e){var t=y.select(this),n=e[0],r=(n.mlw+1||o.width+1)-1;t.style("stroke-width",r+"px").call(i.fill,n.mc||a.color),r&&t.call(i.stroke,n.mlc||o.color)})}).each(function(e){var n=e[0].trace,t=y.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.traceIs(n,"box-violin")&&n.visible?[e]:[]);t.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),t.exit().remove(),t.each(function(){var e=n.line.width,t=y.select(this);t.style("stroke-width",e+"px").call(i.fill,n.fillcolor),e&&t.call(i.stroke,n.line.color)})}).each(function(e){var t=e[0].trace,n=y.select(this).select("g.legendpoints").selectAll("path.legendpie").data(r.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(a,e[0],t)}).each(function(e){var t=e[0].trace,n=t.visible&&t.fill&&"none"!==t.fill,r=x.hasLines(t),a=t.contours;a&&"constraint"===a.type&&(r=a.showlines,n="="!==a._operation);var o=y.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);o.enter().append("path").classed("js-fill",!0),o.exit().remove(),o.attr("d","M5,0h30v6h-30z").call(v.fillGroupStyle);var i=y.select(this).select(".legendlines").selectAll("path").data(r?[e]:[]);i.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),i.exit().remove(),i.call(v.lineGroupStyle)}).each(function(e){var t,n,r=e[0],o=r.trace,a=x.hasMarkers(o),i=x.hasText(o),s=x.hasLines(o);function l(e,t,n){var r=m.nestedProperty(o,e).get(),a=Array.isArray(r)&&t?t(r):r;if(n){if(a<n[0])return n[0];if(a>n[1])return n[1]}return a}function c(e){return e[0]}if(a||i||s){var u={},d={};a&&(u.mc=l("marker.color",c),u.mo=l("marker.opacity",m.mean,[.2,1]),u.ms=l("marker.size",m.mean,[2,16]),u.mlc=l("marker.line.color",c),u.mlw=l("marker.line.width",m.mean,[0,5]),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),s&&(d.line={width:l("line.width",c,[0,10])}),i&&(u.tx="Aa",u.tp=l("textposition",c),u.ts=10,u.tc=l("textfont.color",c),u.tf=l("textfont.family",c)),t=[m.minExtend(r,u)],n=m.minExtend(o,d)}var f=y.select(this).select("g.legendpoints"),h=f.selectAll("path.scatterpts").data(a?t:[]);h.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),h.exit().remove(),h.call(v.pointStyle,n,g),a&&(t[0].mrc=3);var p=f.selectAll("g.pointtext").data(i?t:[]);p.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),p.exit().remove(),p.selectAll("text").call(v.textPointStyle,n,g)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../../registry":248,"../../traces/pie/style_one":292,"../../traces/scatter/subtypes":316,"../color":35,"../drawing":60}],97:[function(e,t,n){"use strict";var b=e("../../registry"),r=e("../../plots/plots"),v=e("../../plots/cartesian/axis_ids"),_=e("../../lib"),a=e("../../../build/ploticon"),o=_._,i=t.exports={};function s(e,t){var n,r,a=t.currentTarget,o=a.getAttribute("data-attr"),i=a.getAttribute("data-val")||!0,s=e._fullLayout,l={},c=v.list(e,null,!0),u="on";if("zoom"===o){var d,f="in"===i?.5:2,h=(1+f)/2,p=(1-f)/2;for(r=0;r<c.length;r++)if(!(n=c[r]).fixedrange)if(d=n._name,"auto"===i)l[d+".autorange"]=!0;else if("reset"===i){if(void 0===n._rangeInitial)l[d+".autorange"]=!0;else{var g=n._rangeInitial.slice();l[d+".range[0]"]=g[0],l[d+".range[1]"]=g[1]}void 0!==n._showSpikeInitial&&(l[d+".showspikes"]=n._showSpikeInitial,"on"!==u||n._showSpikeInitial||(u="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],m=[h*y[0]+p*y[1],h*y[1]+p*y[0]];l[d+".range[0]"]=n.l2r(m[0]),l[d+".range[1]"]=n.l2r(m[1])}s._cartesianSpikesEnabled=u}else{if("hovermode"!==o||"x"!==i&&"y"!==i){if("hovermode"===o&&"closest"===i){for(r=0;r<c.length;r++)n=c[r],"on"!==u||n.showspikes||(u="off");s._cartesianSpikesEnabled=u}}else i=s._isHoriz?"y":"x",a.setAttribute("data-val",i);l[o]=i}b.call("relayout",e,l)}function l(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=e._fullLayout._subplots.gl3d,i={},s=r.split("."),l=0;l<o.length;l++)i[o[l]+"."+s[1]]=a;var c="pan"===a?a:"zoom";i.dragmode=c,b.call("relayout",e,i)}function c(e,t){for(var n=t.currentTarget.getAttribute("data-attr"),r=e._fullLayout,a=r._subplots.gl3d,o={},i=0;i<a.length;i++){var s=a[i],l=s+".camera",c=r[s]._scene;"resetDefault"===n?o[l]=null:"resetLastSave"===n&&(o[l]=_.extendDeep({},c.cameraInitial))}b.call("relayout",e,o)}function u(e,t){var n=t.currentTarget,r=n._previousVal||!1,a=e.layout,o=e._fullLayout,i=o._subplots.gl3d,s=["xaxis","yaxis","zaxis"],l=["showspikes","spikesides","spikethickness","spikecolor"],c={},u={},d={};if(r)d=_.extendDeep(a,r),n._previousVal=null;else{d={"allaxes.showspikes":!1};for(var f=0;f<i.length;f++){var h=i[f],p=o[h],g=c[h]={};g.hovermode=p.hovermode,d[h+".hovermode"]=!1;for(var y=0;y<3;y++){var m=s[y];u=g[m]={};for(var v=0;v<l.length;v++){var x=l[v];u[x]=p[m][x]}}}n._previousVal=_.extendDeep({},c)}b.call("relayout",e,d)}function d(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=e._fullLayout,i=o._subplots.geo,s=0;s<i.length;s++){var l=i[s],c=o[l];if("zoom"===r){var u=c.projection.scale,d="in"===a?2*u:.5*u;b.call("relayout",e,l+".projection.scale",d)}else"reset"===r&&h(e,"geo")}}function f(e){var t,n=e._fullLayout;t=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var r=!e._fullLayout.hovermode&&t;b.call("relayout",e,"hovermode",r)}function h(e,t){for(var n=e._fullLayout,r=n._subplots[t],a={},o=0;o<r.length;o++)for(var i=r[o],s=n[i]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];a[i+"."+u]=s[u]}b.call("relayout",e,a)}i.toImage={name:"toImage",title:function(e){return o(e,"Download plot as a png")},icon:a.camera,click:function(t){var e="png";_.notifier(o(t,"Taking snapshot - this may take a few seconds"),"long"),_.isIE()&&(_.notifier(o(t,"IE only supports svg.  Changing format to svg."),"long"),e="svg"),b.call("downloadImage",t,{format:e}).then(function(e){_.notifier(o(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){_.notifier(o(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},i.sendDataToCloud={name:"sendDataToCloud",title:function(e){return o(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){r.sendDataToCloud(e)}},i.zoom2d={name:"zoom2d",title:function(e){return o(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:s},i.pan2d={name:"pan2d",title:function(e){return o(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:s},i.select2d={name:"select2d",title:function(e){return o(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:s},i.lasso2d={name:"lasso2d",title:function(e){return o(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:s},i.zoomIn2d={name:"zoomIn2d",title:function(e){return o(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:s},i.zoomOut2d={name:"zoomOut2d",title:function(e){return o(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:s},i.autoScale2d={name:"autoScale2d",title:function(e){return o(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:s},i.resetScale2d={name:"resetScale2d",title:function(e){return o(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:s},i.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return o(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:s},i.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return o(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:s},i.zoom3d={name:"zoom3d",title:function(e){return o(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:l},i.pan3d={name:"pan3d",title:function(e){return o(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:l},i.orbitRotation={name:"orbitRotation",title:function(e){return o(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:l},i.tableRotation={name:"tableRotation",title:function(e){return o(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:l},i.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return o(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:c},i.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return o(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:c},i.hoverClosest3d={name:"hoverClosest3d",title:function(e){return o(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:u},i.zoomInGeo={name:"zoomInGeo",title:function(e){return o(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:d},i.zoomOutGeo={name:"zoomOutGeo",title:function(e){return o(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:d},i.resetGeo={name:"resetGeo",title:function(e){return o(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:d},i.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return o(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:f},i.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return o(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:f},i.hoverClosestPie={name:"hoverClosestPie",title:function(e){return o(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:f},i.toggleHover={name:"toggleHover",title:function(e){return o(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){f(e),u(e,t)}},i.resetViews={name:"resetViews",title:function(e){return o(e,"Reset views")},icon:a.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),s(e,t),n.setAttribute("data-attr","resetLastSave"),c(e,t),h(e,"geo"),h(e,"mapbox")}},i.toggleSpikelines={name:"toggleSpikelines",title:function(e){return o(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled="on"===t._cartesianSpikesEnabled?"off":"on";var n=function(e){for(var t,n,r=e._fullLayout,a=v.list(e,null,!0),o={},i=0;i<a.length;i++)t=a[i],n=t._name,o[n+".showspikes"]="on"===r._cartesianSpikesEnabled||t._showSpikeInitial;return o}(e);b.call("relayout",e,n)}},i.resetViewMapbox={name:"resetViewMapbox",title:function(e){return o(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){h(e,"mapbox")}}},{"../../../build/ploticon":11,"../../lib":156,"../../plots/cartesian/axis_ids":202,"../../plots/plots":240,"../../registry":248}],98:[function(e,t,n){"use strict";n.manage=e("./manage")},{"./manage":99}],99:[function(e,t,n){"use strict";var b=e("../../plots/cartesian/axis_ids"),_=e("../../traces/scatter/subtypes"),w=e("../../registry"),i=e("./modebar"),k=e("./buttons");t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,o=n.modeBarButtons;a=Array.isArray(o)&&o.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===k[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=k[a]}}return e}(o):function(e,a,t){var n=e._fullLayout,r=e._fullData,o=n._has("cartesian"),i=n._has("gl3d"),s=n._has("geo"),l=n._has("pie"),c=n._has("gl2d"),u=n._has("ternary"),d=n._has("mapbox"),f=n._has("polar"),h=function(e){for(var t=b.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(n),p=[];function g(e){if(e.length){for(var t=[],n=0;n<e.length;n++){var r=e[n];-1===a.indexOf(r)&&t.push(k[r])}p.push(t)}}g(["toImage","sendDataToCloud"]);var y=[],m=[],v=[],x=[];1<(o||c||l||u)+s+i+d+f?(m=["toggleHover"],v=["resetViews"]):s?(y=["zoomInGeo","zoomOutGeo"],m=["hoverClosestGeo"],v=["resetGeo"]):i?(m=["hoverClosest3d"],v=["resetCameraDefault3d","resetCameraLastSave3d"]):d?(m=["toggleHover"],v=["resetViewMapbox"]):m=c?["hoverClosestGl2d"]:l?["hoverClosestPie"]:["toggleHover"];o&&(m=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);!o&&!c||h||(y=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==v[0]&&(v=["resetScale2d"]));i?x=["zoom3d","pan3d","orbitRotation","tableRotation"]:(o||c)&&!h||u?x=["zoom2d","pan2d"]:d||s?x=["pan2d"]:f&&(x=["zoom2d"]);(function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(w.traceIs(r,"scatter-like")?(_.hasMarkers(r)||_.hasText(r))&&(t=!0):w.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t})(r)&&x.push("select2d","lasso2d");return g(x),g(y.concat(v)),g(m),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(p,t)}(e,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),r?r.update(e,a):t._modeBar=i(e,a)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":202,"../../registry":248,"../../traces/scatter/subtypes":316,"./buttons":97,"./modebar":100}],100:[function(n,r,e){(function(e){"use strict";var l="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,c=n("../../lib"),o=n("../../../build/ploticon");function a(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var t=a.prototype;t.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context;"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var r=!this.hasButtons(t),a=this.hasLogo!==n.displaylogo;(r||a)&&(this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},t.updateButtons=function(e){var a=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var r=a.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==a.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");a.buttonsNames.push(t);var n=a.createButton(e);a.buttonElements.push(n),r.appendChild(n)}),a.element.appendChild(r)})},t.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},t.createButton=function(t){var n=this,e=document.createElement("a");e.setAttribute("rel","tooltip"),e.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),(r||0===r)&&e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr);var a=t.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),e.setAttribute("data-val",a)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");return e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&l.select(e).classed("active",!0),e.appendChild(this.createIcon(t.icon||o.question,t.name)),e.setAttribute("data-gravity",t.gravity||"n"),e},t.createIcon=function(e,t){var n=e.ascent-e.descent,r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg"),o=document.createElementNS(r,"path");a.setAttribute("height","1em"),a.setAttribute("width",e.width/n+"em"),a.setAttribute("viewBox",[0,0,e.width,n].join(" "));var i="toggleSpikelines"===t?"matrix(1.5 0 0 -1.5 0 "+e.ascent+")":"matrix(1 0 0 -1 0 "+e.ascent+")";return o.setAttribute("d",e.path),o.setAttribute("transform",i),a.appendChild(o),a},t.updateActiveButton=function(e){var i=this.graphInfo._fullLayout,s=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),a=l.select(e);if(r)n===s&&a.classed("active",!a.classed("active"));else{var o=null===n?n:c.nestedProperty(i,n).get();a.classed("active",o===t)}})},t.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},t.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title",c._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(o.plotlylogo)),e.appendChild(t),e},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){c.removeElement(this.container.querySelector(".modebar"))},r.exports=function(e,t){var n=e._fullLayout,r=new a({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&l.select(r.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../build/ploticon":11,"../../lib":156}],101:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),o=e("../../lib/extend").extendFlat,i=e("./button_attributes");i=o(i,{_isLinkedToArray:"button",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),t.exports={visible:{valType:"boolean",role:"info",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:i,x:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",role:"info",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:r({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:a.lightLine,role:"style",editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",role:"style",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:a.defaultLine,role:"style",editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,role:"style",editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"}},{"../../lib/extend":148,"../../plots/font_attributes":226,"../color/attributes":34,"./button_attributes":102}],102:[function(e,t,n){"use strict";t.exports={step:{valType:"enumerated",role:"info",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",role:"info",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",role:"info",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot"}},{}],103:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],104:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color"),f=e("./attributes"),h=e("./button_attributes"),p=e("./constants");t.exports=function(e,t,n,r,a){var o=e.rangeselector||{},i=t.rangeselector={};function s(e,t){return u.coerce(o,i,f,e,t)}if(s("visible",0<function(e,t,n){var r,a,o=e.buttons||[],i=t.buttons=[];function s(e,t){return u.coerce(r,a,h,e,t)}for(var l=0;l<o.length;l++)if(r=o[l],a={},u.isPlainObject(r)){var c=s("step");"all"!==c&&(!n||"gregorian"===n||"month"!==c&&"year"!==c?s("stepmode"):a.stepmode="backward",s("count")),s("label"),a._index=l,i.push(a)}return i}(o,i,a).length)){var l=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),a=0,o=0;o<r.length;o++){var i=n[r[o]].domain;i&&(a=Math.max(i[1],a))}return[t.domain[0],a+p.yPad]}(t,n,r);s("x",l[0]),s("y",l[1]),u.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),u.coerceFont(s,"font",n.font);var c=s("bgcolor");s("activecolor",d.contrast(c,p.lightAmount,p.darkAmount)),s("bordercolor"),s("borderwidth")}}},{"../../lib":156,"../color":35,"./attributes":101,"./button_attributes":102,"./constants":103}],105:[function(r,a,e){(function(e){"use strict";var h="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,i=r("../../registry"),p=r("../../plots/plots"),s=r("../color"),g=r("../drawing"),y=r("../../lib/svg_text_utils"),l=r("../../plots/cartesian/axis_ids"),m=r("../legend/anchor_utils"),t=r("../../constants/alignment"),v=t.LINE_SPACING,x=t.FROM_TL,b=t.FROM_BR,_=r("./constants"),c=r("./get_update_object");function n(e){return e._id}function u(e,t,n){var r,a,o=e.selectAll("rect").data([0]);o.enter().append("rect").classed("selector-rect",!0),o.attr("shape-rendering","crispEdges"),o.attr({rx:_.rx,ry:_.ry}),o.call(s.stroke,t.bordercolor).call(s.fill,(r=t,a=n,a._isActive||a._isHovered?r.activecolor:r.bgcolor)).style("stroke-width",t.borderwidth+"px")}function d(e,t,n,r){var a,o=e.selectAll("text").data([0]);o.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),o.attr("text-anchor","middle"),o.call(g.font,t.font).text((a=n,a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0))).call(function(e){y.convertToTspans(e,r)})}a.exports=function(o){var e=o._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=l.list(e,"x",!0),n=[],r=0;r<t.length;r++){var a=t[r];a.rangeselector&&a.rangeselector.visible&&n.push(a)}return n}(o),n);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=h.select(this),r=e,a=r.rangeselector,n=t.selectAll("g.button").data(a.buttons);n.enter().append("g").classed("button",!0),n.exit().remove(),n.each(function(e){var t=h.select(this),n=c(r,e);e._isActive=function(e,t,n){{if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}}(r,e,n),t.call(u,a,e),t.call(d,a,e,o),t.on("click",function(){o._dragged||i.call("relayout",o,n)}),t.on("mouseover",function(){e._isHovered=!0,t.call(u,a,e)}),t.on("mouseout",function(){e._isHovered=!1,t.call(u,a,e)})}),function(e,t,s,n,r){var l=0,c=0,u=s.borderwidth;t.each(function(){var e=h.select(this),t=e.select(".selector-text"),n=s.font.size*v,r=Math.max(n*y.lineCount(t),16)+3;c=Math.max(c,r)}),t.each(function(){var e=h.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&g.bBox(n.node()).width,a=s.font.size*v,o=y.lineCount(n),i=Math.max(r+10,_.minButtonWidth);e.attr("transform","translate("+(u+l)+","+u+")"),t.attr({x:0,y:0,width:i,height:c}),y.positionText(n,i/2,c/2-(o-1)*a/2+3),l+=i+5});var a=e._fullLayout._size,o=a.l+a.w*s.x,i=a.t+a.h*(1-s.y),d="left";m.isRightAnchor(s)&&(o-=l,d="right");m.isCenterAnchor(s)&&(o-=l/2,d="center");var f="top";m.isBottomAnchor(s)&&(i-=c,f="bottom");m.isMiddleAnchor(s)&&(i-=c/2,f="middle");l=Math.ceil(l),c=Math.ceil(c),o=Math.round(o),i=Math.round(i),p.autoMargin(e,n+"-range-selector",{x:s.x,y:s.y,l:l*x[d],r:l*b[d],b:c*b[f],t:c*x[f]}),r.attr("transform","translate("+o+","+i+")")}(o,n,a,r._name,t)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../lib/svg_text_utils":177,"../../plots/cartesian/axis_ids":202,"../../plots/plots":240,"../../registry":248,"../color":35,"../drawing":60,"../legend/anchor_utils":87,"./constants":103,"./get_update_object":106}],106:[function(e,t,n){(function(e){"use strict";var c="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null;t.exports=function(e,t){var n=e._name,r={};if("all"===t.step)r[n+".autorange"]=!0;else{var a=function(e,t){var n,r=e.range,a=new Date(e.r2l(r[1])),o=t.step,i=t.count;switch(t.stepmode){case"backward":n=e.l2r(+c.time[o].utc.offset(a,-i));break;case"todate":var s=c.time[o].utc.offset(a,-i);n=e.l2r(+c.time[o].utc.ceil(s))}var l=r[1];return[n,l]}(e,t);r[n+".range[0]"]=a[0],r[n+".range[1]"]=a[1]}return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],107:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":101,"./defaults":104,"./draw":105}],108:[function(e,t,n){"use strict";var r=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:r.background,role:"style",editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:r.defaultLine,role:"style",editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the border color of the range slider."},autorange:{valType:"boolean",dflt:!0,role:"style",editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",role:"info",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,role:"style",editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"}},{"../color/attributes":34}],109:[function(e,t,n){"use strict";var o=e("../../plots/cartesian/axis_ids").list,i=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=o(e,"x",!0),n=0;n<t.length;n++){var r=t[n],a=r[s.name];a&&a.visible&&a.autorange&&r._min.length&&r._max.length&&(a._input.autorange=!0,a._input.range=a.range=i(r))}}},{"../../plots/cartesian/autorange":198,"../../plots/cartesian/axis_ids":202,"./constants":110}],110:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],111:[function(e,t,n){"use strict";var v=e("../../lib"),x=e("./attributes"),b=e("./oppaxis_attributes"),_=e("../../plots/cartesian/axis_ids");t.exports=function(e,t,n){if(e[n].rangeslider){v.isPlainObject(e[n].rangeslider)||(e[n].rangeslider={});var r=e[n].rangeslider,a=t[n],o=a.rangeslider={};if(y("visible")){y("bgcolor",t.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),a._rangesliderAutorange=y("autorange",!a.isValidRange(r.range)),y("range");var i=t._subplots;if(i)for(var s=i.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===_.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),l=v.simpleMap(s,_.id2name),c=0;c<l.length;c++){var u,d=l[c],f=r[d]||{},h=o[d]={},p=t[d];f.range&&p.isValidRange(f.range)&&(u="fixed");var g=m(f,h,"rangemode",u);"match"!==g&&m(f,h,"range",p.range.slice()),p._rangesliderAutorange="auto"===g}o._input=r}}function y(e,t){return v.coerce(r,o,x,e,t)}function m(e,t,n,r){return v.coerce(e,t,b,n,r)}}},{"../../lib":156,"../../plots/cartesian/axis_ids":202,"./attributes":108,"./oppaxis_attributes":114}],112:[function(t,n,e){(function(e){"use strict";var O="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,j=t("../../registry"),P=t("../../plots/plots"),D=t("../../lib"),l=t("../drawing"),h=t("../color"),I=t("../titles"),p=t("../../plots/cartesian"),E=t("../../plots/cartesian/axes"),R=t("../dragelement"),N=t("../../lib/setcursor"),F=t("./constants");function B(e,t,n,r){var a=e.selectAll("rect."+F.bgClassName).data([0]);a.enter().append("rect").classed(F.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var o=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,i=-r._offsetShift,s=l.crispRound(t,r.borderwidth);a.attr({width:r._width+o,height:r._height+o,transform:"translate("+i+","+i+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":s})}function q(e,t,n,r){var a=t._fullLayout._topdefs.selectAll("#"+r._clipId).data([0]);a.enter().append("clipPath").attr("id",r._clipId).append("rect").attr({x:0,y:0}),a.select("rect").attr({width:r._width,height:r._height})}function H(e,c,u,d){var f,t=E.getSubplots(c,u),h=c.calcdata,n=e.selectAll("g."+F.rangePlotClassName).data(t,D.identity);n.enter().append("g").attr("class",function(e){return F.rangePlotClassName+" "+e}).call(l.setClipUrl,d._clipId),n.order(),n.exit().remove(),n.each(function(e,t){var n=O.select(this),r=0===t,a=E.getFromId(c,e,"y"),o=a._name,i=d[o],s={data:[],layout:{xaxis:{type:u.type,domain:[0,1],range:d.range.slice(),calendar:u.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:c._context};s.layout[o]={type:a.type,domain:[0,1],range:"match"!==i.rangemode?i.range.slice():a.range.slice(),calendar:a.calendar},P.supplyDefaults(s);var l={id:e,plotgroup:n,xaxis:s._fullLayout.xaxis,yaxis:s._fullLayout[o]};r?f=l:(l.mainplot="xy",l.mainplotinfo=f),p.rangePlot(c,l,function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],o=a[0].trace;o.xaxis+o.yaxis===t&&n.push(a)}return n}(h,e))})}function V(e,t,n,r,a){var o=e.selectAll("rect."+F.maskMinClassName).data([0]);o.enter().append("rect").classed(F.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),o.attr("height",r._height).call(h.fill,F.maskColor);var i=e.selectAll("rect."+F.maskMaxClassName).data([0]);if(i.enter().append("rect").classed(F.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),i.attr("height",r._height).call(h.fill,F.maskColor),"match"!==a.rangemode){var s=e.selectAll("rect."+F.maskMinOppAxisClassName).data([0]);s.enter().append("rect").classed(F.maskMinOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),s.attr("width",r._width).call(h.fill,F.maskOppAxisColor);var l=e.selectAll("rect."+F.maskMaxOppAxisClassName).data([0]);l.enter().append("rect").classed(F.maskMaxOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),l.attr("width",r._width).style("border-top",F.maskOppBorder).call(h.fill,F.maskOppAxisColor)}}function U(e,t,n,r){if(!t._context.staticPlot){var a=e.selectAll("rect."+F.slideBoxClassName).data([0]);a.enter().append("rect").classed(F.slideBoxClassName,!0).attr("y",0).attr("cursor",F.slideBoxCursor).attr("shape-rendering","crispEdges"),a.attr({height:r._height,fill:F.slideBoxFill})}}function G(e,t,n,r){var a=e.selectAll("g."+F.grabberMinClassName).data([0]);a.enter().append("g").classed(F.grabberMinClassName,!0);var o=e.selectAll("g."+F.grabberMaxClassName).data([0]);o.enter().append("g").classed(F.grabberMaxClassName,!0);var i={x:0,width:F.handleWidth,rx:F.handleRadius,fill:h.background,stroke:h.defaultLine,"stroke-width":F.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(r._height/4),height:Math.round(r._height/2)},l=a.selectAll("rect."+F.handleMinClassName).data([0]);l.enter().append("rect").classed(F.handleMinClassName,!0).attr(i),l.attr(s);var c=o.selectAll("rect."+F.handleMaxClassName).data([0]);if(c.enter().append("rect").classed(F.handleMaxClassName,!0).attr(i),c.attr(s),!t._context.staticPlot){var u={width:F.grabAreaWidth,x:0,y:0,fill:F.grabAreaFill,cursor:F.grabAreaCursor},d=a.selectAll("rect."+F.grabAreaMinClassName).data([0]);d.enter().append("rect").classed(F.grabAreaMinClassName,!0).attr(u),d.attr("height",r._height);var f=o.selectAll("rect."+F.grabAreaMaxClassName).data([0]);f.enter().append("rect").classed(F.grabAreaMaxClassName,!0).attr(u),f.attr("height",r._height)}}n.exports=function(C){var z=C._fullLayout,e=function(e){var t=E.list({_fullLayout:e},"x",!0),n=F.name,r=[];if(e._has("gl2d"))return r;for(var a=0;a<t.length;a++){var o=t[a];o[n]&&o[n].visible&&r.push(o)}return r}(z);var t=z._infolayer.selectAll("g."+F.containerClassName).data(e,function(e){return e._name});t.enter().append("g").classed(F.containerClassName,!0).attr("pointer-events","all"),t.exit().each(function(e){var t=O.select(this),n=e[F.name];t.remove(),z._topdefs.select("#"+n._clipId).remove()}),t.exit().size()&&function(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var a=n[r];-1!==a.indexOf(F.name)&&P.autoMargin(e,a)}}(C),0!==e.length&&t.each(function(e){var t=O.select(this),n=e[F.name],r=z[E.id2name(e.anchor)],a=n[E.id2name(e.anchor)];if(n.range){var o=n.range,i=e.range;o[0]=e.l2r(Math.min(e.r2l(o[0]),e.r2l(i[0]))),o[1]=e.l2r(Math.max(e.r2l(o[1]),e.r2l(i[1]))),n._input.range=o.slice()}e.cleanRange("rangeslider.range");for(var s=z.margin,l=z._size,c=e.domain,u=(e._boundingBox||{}).height||0,d=1/0,f=E.getSubplots(C,e),h=0;h<f.length;h++){var p=E.getFromId(C,f[h].substr(f[h].indexOf("y")));d=Math.min(d,p.domain[0])}n._id=F.name+e._id,n._clipId=n._id+"-"+z._uid,n._width=l.w*(c[1]-c[0]),n._height=(z.height-s.b-s.t)*n.thickness,n._offsetShift=Math.floor(n.borderwidth/2);var g=Math.round(s.l+l.w*c[0]),y=Math.round(l.t+l.h*(1-d)+u+n._offsetShift+F.extraPad);t.attr("transform","translate("+g+","+y+")");var m,v,x,b,_,w,k,M=e.r2l(n.range[0]),T=e.r2l(n.range[1]),A=T-M;if(n.p2d=function(e){return e/n._width*A+M},n.d2p=function(e){return(e-M)/A*n._width},n._rl=[M,T],"match"!==a.rangemode){var S=r.r2l(a.range[0]),L=r.r2l(a.range[1])-S;n.d2pOppAxis=function(e){return(e-S)/L*n._height}}t.call(B,C,e,n).call(q,C,e,n).call(H,C,e,n).call(V,C,e,n,a).call(U,C,e,n).call(G,C,e,n),v=C,x=e,b=n,_=(m=t).select("rect."+F.slideBoxClassName).node(),w=m.select("rect."+F.grabAreaMinClassName).node(),k=m.select("rect."+F.grabAreaMaxClassName).node(),m.on("mousedown",function(){var e=O.event,i=e.target,s=e.clientX,l=s-m.node().getBoundingClientRect().left,c=b.d2p(x._rl[0]),u=b.d2p(x._rl[1]),d=R.coverSlip();function t(e){var t,n,r,a=+e.clientX-s;switch(i){case _:r="ew-resize",t=c+a,n=u+a;break;case w:r="col-resize",t=c+a,n=u;break;case k:r="col-resize",t=c,n=u+a;break;default:r="ew-resize",n=(t=l)+a}if(n<t){var o=n;n=t,t=o}b._pixelMin=t,b._pixelMax=n,N(O.select(d),r),function(e,t,n,r){function a(e){return n.l2r(D.constrain(e,r._rl[0],r._rl[1]))}var o=a(r.p2d(r._pixelMin)),i=a(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){j.call("relayout",t,n._name+".range",[o,i])})}(0,v,x,b)}d.addEventListener("mousemove",t),d.addEventListener("mouseup",function e(){d.removeEventListener("mousemove",t),d.removeEventListener("mouseup",e),D.removeElement(d)})}),function(e,t,n,r,a,o){var i=F.handleWidth/2;function s(e){return D.constrain(e,0,r._width)}function l(e){return D.constrain(e,0,r._height)}function c(e){return D.constrain(e,-i,r._width+i)}var u=s(r.d2p(n._rl[0])),d=s(r.d2p(n._rl[1]));if(e.select("rect."+F.slideBoxClassName).attr("x",u).attr("width",d-u),e.select("rect."+F.maskMinClassName).attr("width",u),e.select("rect."+F.maskMaxClassName).attr("x",d).attr("width",r._width-d),"match"!==o.rangemode){var f=r._height-l(r.d2pOppAxis(a._rl[1])),h=r._height-l(r.d2pOppAxis(a._rl[0]));e.select("rect."+F.maskMinOppAxisClassName).attr("x",u).attr("height",f).attr("width",d-u),e.select("rect."+F.maskMaxOppAxisClassName).attr("x",u).attr("y",h).attr("height",r._height-h).attr("width",d-u),e.select("rect."+F.slideBoxClassName).attr("y",f).attr("height",h-f)}var p=Math.round(c(u-i))-.5,g=Math.round(c(d-i))+.5;e.select("g."+F.grabberMinClassName).attr("transform","translate("+p+",0.5)"),e.select("g."+F.grabberMaxClassName).attr("transform","translate("+g+",0.5)")}(t,0,e,n,r,a),"bottom"===e.side&&I.draw(C,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:z._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:y+n._height+n._offsetShift+10+1.5*e.titlefont.size,"text-anchor":"middle"}}),P.autoMargin(C,n._id,{x:c[0],y:d,l:0,r:0,t:0,b:n._height+s.b+u,pad:F.extraPad+2*n._offsetShift})})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../../lib/setcursor":175,"../../plots/cartesian":210,"../../plots/cartesian/axes":199,"../../plots/plots":240,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"../titles":128,"./constants":110}],113:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),o=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:o})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":156,"./attributes":108,"./calc_autorange":109,"./defaults":111,"./draw":112,"./oppaxis_attributes":114}],114:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",role:"style",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",role:"style",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"}},{}],115:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,o=e("../drawing/attributes").dash,i=e("../../lib/extend").extendFlat;t.exports={_isLinkedToArray:"shape",visible:{valType:"boolean",role:"info",dflt:!0,editType:"calcIfAutorange+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],role:"info",editType:"calcIfAutorange+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","If *path*, draw a custom SVG path using `path`."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:i({},r.xref,{description:["Sets the shape's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the left (right) side.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),x0:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's starting x position.","See `type` for more info."].join(" ")},x1:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's end x position.","See `type` for more info."].join(" ")},yref:i({},r.yref,{description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")}),y0:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's starting y position.","See `type` for more info."].join(" ")},y1:{valType:"any",role:"info",editType:"calcIfAutorange+arraydraw",description:["Sets the shape's end y position.","See `type` for more info."].join(" ")},path:{valType:"string",role:"info",editType:"calcIfAutorange+arraydraw",description:["For `type` *path* - a valid SVG path but with the pixel values","replaced by data values. There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"info",editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:i({},a.color,{editType:"arraydraw"}),width:i({},a.width,{editType:"calcIfAutorange+arraydraw"}),dash:i({},o,{editType:"arraydraw"}),role:"info",editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"info",editType:"arraydraw",description:["Sets the color filling the shape's interior."].join(" ")},editType:"arraydraw"}},{"../../lib/extend":148,"../../traces/scatter/attributes":294,"../annotations/attributes":20,"../drawing/attributes":59}],116:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/cartesian/axes"),h=e("./constants"),p=e("./helpers");function u(e,t,n,r,a){var o="category"===e.type?e.r2c:e.d2c;if(void 0!==t)return[o(t),o(n)];if(r){var i,s,l,c,u=1/0,d=-1/0,f=r.match(h.segmentRE);for("date"===e.type&&(o=p.decodeDate(o)),i=0;i<f.length;i++)void 0!==(s=a[f[i].charAt(0)].drawn)&&(!(l=f[i].substr(1).match(h.paramRE))||l.length<s||((c=o(l[s]))<u&&(u=c),d<c&&(d=c)));return u<=d?[u,d]:void 0}}t.exports=function(e){var t=e._fullLayout,n=l.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var a,o,i=n[r],s=i.line.width/2;"paper"!==i.xref&&(o=u(a=c.getFromId(e,i.xref),i.x0,i.x1,i.path,h.paramIsX))&&c.expand(a,o,{ppad:s}),"paper"!==i.yref&&(o=u(a=c.getFromId(e,i.yref),i.y0,i.y1,i.path,h.paramIsY))&&c.expand(a,o,{ppad:s})}}},{"../../lib":156,"../../plots/cartesian/axes":199,"./constants":117,"./helpers":120}],117:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],118:[function(e,t,n){"use strict";var r=e("../../plots/array_container_defaults"),a=e("./shape_defaults");t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:a})}},{"../../plots/array_container_defaults":195,"./shape_defaults":122}],119:[function(e,t,n){"use strict";var V=e("../../registry"),k=e("../../lib"),U=e("../../plots/cartesian/axes"),l=e("../color"),c=e("../drawing"),G=e("../dragelement"),Y=e("../../lib/setcursor"),M=e("./constants"),X=e("./helpers");function r(o,i){o._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+i+'"]').remove();var e=(o.layout.shapes||[])[i],s=o._fullLayout.shapes[i];if(e&&!1!==s.visible)if("below"!==s.layer)n(o._fullLayout._shapeUpperLayer);else if("paper"===s.xref||"paper"===s.yref)n(o._fullLayout._shapeLowerLayer);else{var t=o._fullLayout._plots[s.xref+s.yref];if(t)n((t.mainplotinfo||t).shapelayer);else n(o._fullLayout._shapeLowerLayer)}function n(e){var t={"data-index":i,"fill-rule":"evenodd",d:Z(o,s)},n=s.line.width?s.line.color:"rgba(0,0,0,0)",r=e.append("path").attr(t).style("opacity",s.opacity).call(l.stroke,n).call(l.fill,s.fillcolor).call(c.dashLine,s.line.dash,s.line.width),a=(s.xref+s.yref).replace(/paper/g,"");r.call(c.setClipUrl,a?"clip"+o._fullLayout._uid+a:null),o._context.edits.shapePosition&&function(l,c,u,n){var d,a,o,i,s,f,h,p,g,y,m,v,x,b,_,w,k,M,T,A,S,L,C,z,O,j,P,D,I,E,R=10,N=10,r={element:c.node(),gd:l,prepFn:function(e){z=U.getFromId(l,u.xref),O=U.getFromId(l,u.yref),j=X.getDataToPixel(l,z),P=X.getDataToPixel(l,O,!0),D=X.getPixelToData(l,z),I=X.getPixelToData(l,O,!0);var t="shapes["+n+"]";"path"===u.type?(L=u.path,C=t+".path"):(a=j(u.x0),o=P(u.y0),i=j(u.x1),s=P(u.y1),f=t+".x0",h=t+".y0",p=t+".x1",g=t+".y1");a<i?(v=a,w=t+".x0",A="x0",x=i,k=t+".x1",S="x1"):(v=i,w=t+".x1",A="x1",x=a,k=t+".x0",S="x0");o<s?(y=o,b=t+".y0",M="y0",m=s,_=t+".y1",T="y1"):(y=s,b=t+".y1",M="y1",m=o,_=t+".y0",T="y0");d={},B(e),r.moveFn="move"===E?q:H},doneFn:function(){Y(c),V.call("relayout",l,d)}},F=r.element.getBoundingClientRect();function B(e){var t=F.right-F.left,n=F.bottom-F.top,r=e.clientX-F.left,a=e.clientY-F.top,o=R<t&&N<n&&!e.shiftKey?G.getCursor(r/t,1-a/n):"move";Y(c,o),E=o.split("-")[0]}function q(t,n){if("path"===u.type){var e=function(e){return D(j(e)+t)};z&&"date"===z.type&&(e=X.encodeDate(e));var r=function(e){return I(P(e)+n)};O&&"date"===O.type&&(r=X.encodeDate(r)),u.path=W(L,e,r),d[C]=u.path}else d[f]=u.x0=D(a+t),d[h]=u.y0=I(o+n),d[p]=u.x1=D(i+t),d[g]=u.y1=I(s+n);c.attr("d",Z(l,u))}function H(t,n){if("path"===u.type){var e=function(e){return D(j(e)+t)};z&&"date"===z.type&&(e=X.encodeDate(e));var r=function(e){return I(P(e)+n)};O&&"date"===O.type&&(r=X.encodeDate(r)),u.path=W(L,e,r),d[C]=u.path}else{var a=~E.indexOf("n")?y+n:y,o=~E.indexOf("s")?m+n:m,i=~E.indexOf("w")?v+t:v,s=~E.indexOf("e")?x+t:x;N<o-a&&(d[b]=u[M]=I(a),d[_]=u[T]=I(o)),R<s-i&&(d[w]=u[A]=D(i),d[k]=u[S]=D(s))}c.attr("d",Z(l,u))}G.init(r),c.node().onmousemove=B}(o,r,s,i)}}function Z(e,t){var n,r,a,o,i,s,l,c=t.type,u=U.getFromId(e,t.xref),d=U.getFromId(e,t.yref),f=e._fullLayout._size;if(u?(n=X.shapePositionToRange(u),r=function(e){return u._offset+u.r2p(n(e,!0))}):r=function(e){return f.l+f.w*e},d?(a=X.shapePositionToRange(d),o=function(e){return d._offset+d.r2p(a(e,!0))}):o=function(e){return f.t+f.h*(1-e)},"path"===c)return u&&"date"===u.type&&(r=X.decodeDate(r)),d&&"date"===d.type&&(o=X.decodeDate(o)),i=t.path,s=r,l=o,i.replace(M.segmentRE,function(e){var t=0,n=e.charAt(0),r=M.paramIsX[n],a=M.paramIsY[n],o=M.numParams[n],i=e.substr(1).replace(M.paramRE,function(e){return r[t]?e=s(e):a[t]&&(e=l(e)),o<++t&&(e="X"),e});return o<t&&(i=i.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+e)),n+i});var h=r(t.x0),p=r(t.x1),g=o(t.y0),y=o(t.y1);if("line"===c)return"M"+h+","+g+"L"+p+","+y;if("rect"===c)return"M"+h+","+g+"H"+p+"V"+y+"H"+h+"Z";var m=(h+p)/2,v=(g+y)/2,x=Math.abs(m-h),b=Math.abs(v-g),_="A"+x+","+b,w=m+x+","+v;return"M"+w+_+" 0 1,1 "+(m+","+(v-b))+_+" 0 0,1 "+w+"Z"}function W(e,i,s){return e.replace(M.segmentRE,function(e){var t=0,n=e.charAt(0),r=M.paramIsX[n],a=M.paramIsY[n],o=M.numParams[n];return n+e.substr(1).replace(M.paramRE,function(e){return o<=t||(r[t]?e=i(e):a[t]&&(e=s(e)),t++),e})})}t.exports={draw:function(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeSubplotLayers.selectAll("path").remove();for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible&&r(e,n)},drawOne:r}},{"../../lib":156,"../../lib/setcursor":175,"../../plots/cartesian/axes":199,"../../registry":248,"../color":35,"../dragelement":57,"../drawing":60,"./constants":117,"./helpers":120}],120:[function(e,t,i){"use strict";i.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},i.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},i.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},i.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},i.getDataToPixel=function(e,t,n){var r,a=e._fullLayout._size;if(t){var o=i.shapePositionToRange(t);r=function(e){return t._offset+t.r2p(o(e,!0))},"date"===t.type&&(r=i.decodeDate(r))}else r=n?function(e){return a.t+a.h*(1-e)}:function(e){return a.l+a.w*e};return r},i.getPixelToData=function(e,t,n){var r,a=e._fullLayout._size;if(t){var o=i.rangeToShapePosition(t);r=function(e){return o(t.p2r(e-t._offset))}}else r=n?function(e){return 1-(e-a.t)/a.h}:function(e){return(e-a.l)/a.w};return r}},{}],121:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":209,"./attributes":115,"./calc_autorange":116,"./defaults":118,"./draw":119}],122:[function(e,t,n){"use strict";var x=e("../../lib"),b=e("../../plots/cartesian/axes"),_=e("./attributes"),w=e("./helpers");t.exports=function(n,r,e,t,a){function o(e,t){return x.coerce(n,r,_,e,t)}if(t=t||{},!o("visible",!(a=a||{}).itemIsNotPlainObject))return r;o("layer"),o("opacity"),o("fillcolor"),o("line.color"),o("line.width"),o("line.dash");for(var i=o("type",n.path?"path":"rect"),s=["x","y"],l=0;l<2;l++){var c=s[l],u={_fullLayout:e},d=b.coerceRef(n,r,u,c,"","paper");if("path"!==i){var f,h,p;"paper"!==d?(f=b.getFromId(u,d),p=w.rangeToShapePosition(f),h=w.shapePositionToRange(f)):h=p=x.identity;var g=c+"0",y=c+"1",m=n[g],v=n[y];n[g]=h(n[g],!0),n[y]=h(n[y],!0),b.coercePosition(r,u,o,d,g,.25),b.coercePosition(r,u,o,d,y,.75),r[g]=p(r[g]),r[y]=p(r[y]),n[g]=m,n[y]=v}}return"path"===i?o("path"):x.noneOrAll(n,r,["x0","x1","y0","y1"]),r}},{"../../lib":156,"../../plots/cartesian/axes":199,"./attributes":115,"./helpers":120}],123:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),o=e("../../lib/extend").extendDeepAll,i=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("./constants"),c={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",role:"info",description:"Sets the text label to appear on the slider"},value:{valType:"string",role:"info",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}};t.exports=i({_isLinkedToArray:"slider",visible:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",role:"info",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],role:"info",dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,role:"style",description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the x position (in normalized coordinates) of the slider."},pad:o({},a,{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",role:"info",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:s.transition.easing.values,role:"info",dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",role:"info",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,role:"info",description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:r({description:"Sets the font of the current value label text."})},font:r({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",role:"style",dflt:l.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",role:"style",dflt:l.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:l.railBorderColor,role:"style",description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:l.railBorderWidth,role:"style",description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:l.tickLength,role:"style",description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:l.tickColor,role:"style",description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,role:"style",description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:l.minorTickLength,role:"style",description:"Sets the length in pixels of minor step tick marks"}},"arraydraw","from-root")},{"../../lib/extend":148,"../../plot_api/edit_types":184,"../../plots/animation_attributes":194,"../../plots/font_attributes":226,"../../plots/pad_attributes":239,"./constants":124}],124:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],125:[function(e,t,n){"use strict";var l=e("../../lib"),r=e("../../plots/array_container_defaults"),a=e("./attributes"),o=e("./constants").name,c=a.steps;function i(n,r,e){function t(e,t){return l.coerce(n,r,a,e,t)}t("visible",0<function(e,t){var n,r,a=e.steps||[],o=t.steps=[];function i(e,t){return l.coerce(n,r,c,e,t)}for(var s=0;s<a.length;s++)n=a[s],r={},i("method"),l.isPlainObject(n)&&("skip"===r.method||Array.isArray(n.args))&&(i("args"),i("label","step-"+s),i("value",r.label),i("execute"),o.push(r));return o}(n,r).length)&&(t("active"),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}t.exports=function(e,t){r(e,t,{name:o,handleItemDefaults:i})}},{"../../lib":156,"../../plots/array_container_defaults":195,"./attributes":123,"./constants":124}],126:[function(n,r,e){(function(e){"use strict";var f="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,h=n("../../plots/plots"),l=n("../color"),p=n("../drawing"),g=n("../../lib/svg_text_utils"),y=n("../legend/anchor_utils"),m=n("./constants"),t=n("../../constants/alignment"),u=t.LINE_SPACING,v=t.FROM_TL,x=t.FROM_BR;function s(e){return e._index}function c(e,a){var t=p.tester.selectAll("g."+m.labelGroupClass).data(a.steps);t.enter().append("g").classed(m.labelGroupClass,!0);var r=0,o=0;t.each(function(e){var t=_(f.select(this),{step:e},a).node();if(t){var n=p.bBox(t);o=Math.max(o,n.height),r=Math.max(r,n.width)}}),t.remove();var i=a._dims={};i.inputAreaWidth=Math.max(m.railWidth,m.gripHeight);var n=e._fullLayout._size;i.lx=n.l+n.w*a.x,i.ly=n.t+n.h*(1-a.y),"fraction"===a.lenmode?i.outerLength=Math.round(n.w*a.len):i.outerLength=a.len,i.inputAreaStart=0,i.inputAreaLength=Math.round(i.outerLength-a.pad.l-a.pad.r);var s=(i.inputAreaLength-2*m.stepInset)/(a.steps.length-1),l=r+m.labelPadding;if(i.labelStride=Math.max(1,Math.ceil(l/s)),i.labelHeight=o,i.currentValueMaxWidth=0,i.currentValueHeight=0,i.currentValueTotalHeight=0,i.currentValueMaxLines=1,a.currentvalue.visible){var c=p.tester.append("g");t.each(function(e){var t=b(c,a,e.label),n=t.node()&&p.bBox(t.node())||{width:0,height:0},r=g.lineCount(t);i.currentValueMaxWidth=Math.max(i.currentValueMaxWidth,Math.ceil(n.width)),i.currentValueHeight=Math.max(i.currentValueHeight,Math.ceil(n.height)),i.currentValueMaxLines=Math.max(i.currentValueMaxLines,r)}),i.currentValueTotalHeight=i.currentValueHeight+a.currentvalue.offset,c.remove()}i.height=i.currentValueTotalHeight+m.tickOffset+a.ticklen+m.labelOffset+i.labelHeight+a.pad.t+a.pad.b;var u="left";y.isRightAnchor(a)&&(i.lx-=i.outerLength,u="right"),y.isCenterAnchor(a)&&(i.lx-=i.outerLength/2,u="center");var d="top";y.isBottomAnchor(a)&&(i.ly-=i.height,d="bottom"),y.isMiddleAnchor(a)&&(i.ly-=i.height/2,d="middle"),i.outerLength=Math.ceil(i.outerLength),i.height=Math.ceil(i.height),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly),h.autoMargin(e,m.autoMarginIdRoot+a._index,{x:a.x,y:a.y,l:i.outerLength*v[u],r:i.outerLength*x[u],b:i.height*x[d],t:i.height*v[d]})}function b(e,t,n){if(t.currentvalue.visible){var r,a,o=e.selectAll("text").data([0]),i=t._dims;switch(t.currentvalue.xanchor){case"right":r=i.inputAreaLength-m.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":r=.5*i.inputAreaLength,a="middle";break;default:r=m.currentValueInset,a="left"}o.enter().append("text").classed(m.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":a,"data-notex":1});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)s+=n;else s+=t.steps[t.active].label;t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(p.font,t.currentvalue.font).text(s).call(g.convertToTspans,t._gd);var l=g.lineCount(o),c=(i.currentValueMaxLines+1-l)*t.currentvalue.font.size*u;return g.positionText(o,r,c),o}}function d(e,t,n){var r=e.selectAll("rect."+m.gripRectClass).data([0]);r.enter().append("rect").classed(m.gripRectClass,!0).call(o,t,e,n).style("pointer-events","all"),r.attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(l.stroke,n.bordercolor).call(l.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(e,t,n){var r=e.selectAll("text").data([0]);return r.enter().append("text").classed(m.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),r.call(p.font,n.font).text(t.step.label).call(g.convertToTspans,n._gd),r}function w(e,n){var t=e.selectAll("g."+m.labelsClass).data([0]),r=n._dims;t.enter().append("g").classed(m.labelsClass,!0);var a=t.selectAll("g."+m.labelGroupClass).data(r.labelSteps);a.enter().append("g").classed(m.labelGroupClass,!0),a.exit().remove(),a.each(function(e){var t=f.select(this);t.call(_,e,n),p.setTranslate(t,S(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*u+m.labelOffset+r.currentValueTotalHeight)})}function k(e,t,n,r,a){var o=Math.round(r*(n.steps.length-1));o!==n.active&&M(e,t,n,o,!0,a)}function M(t,n,e,r,a,o){var i=e.active;e._input.active=e.active=r;var s=e.steps[e.active];n.call(A,e,e.active/(e.steps.length-1),o),n.call(b,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:i}),s&&s.method&&a&&(n._nextMethod?(n._nextMethod.step=s,n._nextMethod.doCallback=a,n._nextMethod.doTransition=o):(n._nextMethod={step:s,doCallback:a,doTransition:o},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&h.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function o(e,r,a){var o=a.node(),i=f.select(r);function s(){return a.data()[0]}e.on("mousedown",function(){var e=s();r.emit("plotly_sliderstart",{slider:e});var t=a.select("."+m.gripRectClass);f.event.stopPropagation(),f.event.preventDefault(),t.call(l.fill,e.activebgcolor);var n=L(e,f.mouse(o)[0]);k(r,a,e,n,!0),e._dragging=!0,i.on("mousemove",function(){var e=s(),t=L(e,f.mouse(o)[0]);k(r,a,e,t,!1)}),i.on("mouseup",function(){var e=s();e._dragging=!1,t.call(l.fill,e.bgcolor),i.on("mouseup",null),i.on("mousemove",null),r.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function T(e,a){var t=e.selectAll("rect."+m.tickRectClass).data(a.steps),o=a._dims;t.enter().append("rect").classed(m.tickRectClass,!0),t.exit().remove(),t.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"}),t.each(function(e,t){var n=t%o.labelStride==0,r=f.select(this);r.attr({height:n?a.ticklen:a.minorticklen}).call(l.fill,a.tickcolor),p.setTranslate(r,S(a,t/(a.steps.length-1))-.5*a.tickwidth,(n?m.tickOffset:m.minorTickOffset)+o.currentValueTotalHeight)})}function A(e,t,n,r){var a=e.select("rect."+m.gripRectClass),o=S(t,n);if(!t._invokingCommand){var i=a;r&&0<t.transition.duration&&(i=i.transition().duration(t.transition.duration).ease(t.transition.easing)),i.attr("transform","translate("+(o-.5*m.gripWidth)+","+t._dims.currentValueTotalHeight+")")}}function S(e,t){var n=e._dims;return n.inputAreaStart+m.stepInset+(n.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function L(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*m.stepInset-2*n.inputAreaStart)))}function C(e,t,n){var r=e.selectAll("rect."+m.railTouchRectClass).data([0]),a=n._dims;r.enter().append("rect").classed(m.railTouchRectClass,!0).call(o,t,e,n).style("pointer-events","all"),r.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,m.tickOffset+n.ticklen+a.labelHeight)}).call(l.fill,n.bgcolor).attr("opacity",0),p.setTranslate(r,0,a.currentValueTotalHeight)}function z(e,t){var n=e.selectAll("rect."+m.railRectClass).data([0]),r=t._dims;n.enter().append("rect").classed(m.railRectClass,!0);var a=r.inputAreaLength-2*m.railInset;n.attr({width:a,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),p.setTranslate(n,m.railInset,.5*(r.inputAreaWidth-m.railWidth)+r.currentValueTotalHeight)}r.exports=function(r){var e=r._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],a=0;a<n.length;a++){var o=n[a];o.visible&&o.steps.length&&(o._gd=t,r.push(o))}return r}(e,r),n=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);if(n.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),n.exit().remove(),n.exit().size()&&function(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var a=n[r];-1!==a.indexOf(m.autoMarginIdRoot)&&h.autoMargin(e,a)}}(r),0!==t.length){var a=n.selectAll("g."+m.groupClassName).data(t,s);a.enter().append("g").classed(m.groupClassName,!0),a.exit().each(function(e){f.select(this).remove(),e._commandObserver.remove(),delete e._commandObserver,h.autoMargin(r,m.autoMarginIdRoot+e._index)});for(var o=0;o<t.length;o++){var i=t[o];c(r,i)}a.each(function(e){if(!(e.steps.length<2)){var n=f.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e.steps.length,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e.steps[r]})}(e),h.manageCommandObserver(r,e,e.steps,function(e){var t=n.data()[0];t.active!==e.index&&(t._dragging||M(r,n,t,e.index,!1,!0))}),function(e,t,n){n.active>=n.steps.length&&(n.active=0);t.call(b,n).call(z,n).call(w,n).call(T,n).call(C,e,n).call(d,e,n);var r=n._dims;p.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(A,n,n.active/(n.steps.length-1),!1),t.call(b,n)}(r,f.select(this),e)}})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../lib/svg_text_utils":177,"../../plots/plots":240,"../color":35,"../drawing":60,"../legend/anchor_utils":87,"./constants":124}],127:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":123,"./constants":124,"./defaults":125,"./draw":126}],128:[function(t,n,e){(function(e){"use strict";var A="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,S=t("fast-isnumeric"),L=t("../../plots/plots"),C=t("../../registry"),z=t("../../lib"),O=t("../drawing"),j=t("../color"),P=t("../../lib/svg_text_utils"),D=t("../../constants/interactions");n.exports={draw:function(n,e,t){var r,a=t.propContainer,o=t.propName,i=t.placeholder,s=t.traceIndex,f=t.avoid||{},l=t.attributes,c=t.transform,u=t.containerGroup,h=n._fullLayout,d=a.titlefont||{},p=d.family,g=d.size,y=d.color,m=1,v=!1,x=(a.title||"").trim();"title"===o?r="titleText":-1!==o.indexOf("axis")?r="axisTitleText":o.indexOf(!0)&&(r="colorbarTitleText");var b=n._context.edits[r];""===x?m=0:x.replace(I," % ")===i.replace(I," % ")&&(m=.2,v=!0,b||(x=""));var _=x||b;u||(u=h._infolayer.selectAll(".g-"+e).data([0])).enter().append("g").classed("g-"+e,!0);var w=u.selectAll("text").data(_?[0]:[]);if(w.enter().append("text"),w.text(x).attr("class",e),w.exit().remove(),!_)return u;function k(e){z.syncOrAsync([M,T],e)}function M(e){var t;return c?(t="",c.rotate&&(t+="rotate("+[c.rotate,l.x,l.y]+")"),c.offset&&(t+="translate(0, "+c.offset+")")):t=null,e.attr("transform",t),e.style({"font-family":p,"font-size":A.round(g,2)+"px",fill:j.rgb(y),opacity:m*j.opacity(y),"font-weight":L.fontWeight}).attr(l).call(P.convertToTspans,n),L.previousPromises(n)}function T(e){var t=A.select(e.node().parentNode);if(f&&f.selection&&f.side&&x){t.attr("transform",null);var n=0,r={left:"right",right:"left",top:"bottom",bottom:"top"}[f.side],a=-1!==["left","top"].indexOf(f.side)?-1:1,o=S(f.pad)?f.pad:2,i=O.bBox(t.node()),s={left:0,top:0,right:h.width,bottom:h.height},l=f.maxShift||(s[f.side]-i[f.side])*("left"===f.side||"top"===f.side?-1:1);if(l<0)n=l;else{var c=f.offsetLeft||0,u=f.offsetTop||0;i.left-=c,i.right-=c,i.top-=u,i.bottom-=u,f.selection.each(function(){var e=O.bBox(this);z.bBoxIntersect(i,e,o)&&(n=Math.max(n,a*(e[f.side]-i[r])+o))}),n=Math.min(l,n)}if(0<n||l<0){var d={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[f.side];t.attr("transform","translate("+d+")")}}}w.call(k),b&&(x?w.on(".opacity",null):(v=!(m=0),w.text(i).on("mouseover.opacity",function(){A.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){A.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),w.call(P.makeEditable,{gd:n}).on("edit",function(e){void 0!==s?C.call("restyle",n,o,e,s):C.call("relayout",n,o,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(e){this.text(e||" ").call(P.positionText,l.x,l.y)}));return w.classed("js-placeholder",v),u}};var I=/ [XY][0-9]* /}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/interactions":136,"../../lib":156,"../../lib/svg_text_utils":177,"../../plots/plots":240,"../../registry":248,"../color":35,"../drawing":60,"fast-isnumeric":4}],129:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),o=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},label:{valType:"string",role:"info",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}};t.exports=i({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",role:"info",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",role:"info",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",role:"info",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",role:"info",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",role:"info",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05,role:"style",description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",role:"info",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,role:"style",description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:o({},s,{description:"Sets the padding around the buttons or dropdown menu."}),font:r({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",role:"style",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:a.borderLine,role:"style",description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}},"arraydraw","from-root")},{"../../lib/extend":148,"../../plot_api/edit_types":184,"../../plots/font_attributes":226,"../../plots/pad_attributes":239,"../color/attributes":34}],130:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],131:[function(e,t,n){"use strict";var l=e("../../lib"),r=e("../../plots/array_container_defaults"),a=e("./attributes"),o=e("./constants").name,c=a.buttons;function i(n,r,e){function t(e,t){return l.coerce(n,r,a,e,t)}t("visible",0<function(e,t){var n,r,a=e.buttons||[],o=t.buttons=[];function i(e,t){return l.coerce(n,r,c,e,t)}for(var s=0;s<a.length;s++)n=a[s],r={},i("method"),l.isPlainObject(n)&&("skip"===r.method||Array.isArray(n.args))&&(i("args"),i("label"),i("execute"),r._index=s,o.push(r));return o}(n,r).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}t.exports=function(e,t){r(e,t,{name:o,handleItemDefaults:i})}},{"../../lib":156,"../../plots/array_container_defaults":195,"./attributes":129,"./constants":130}],132:[function(t,n,e){(function(e){"use strict";var y="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,m=t("../../plots/plots"),o=t("../color"),h=t("../drawing"),p=t("../../lib/svg_text_utils"),i=t("../legend/anchor_utils"),g=t("../../constants/alignment").LINE_SPACING,v=t("./constants"),u=t("./scrollbox");function d(e){return e._index}function f(e,t){return+e.attr(v.menuIndexAttrName)===t._index}function x(e,t,n,r,a,o,i,s){t._input.active=t.active=i,"buttons"===t.type?_(e,r,null,null,t):"dropdown"===t.type&&(a.attr(v.menuIndexAttrName,"-1"),b(e,r,a,o,t),s||_(e,r,a,o,t))}function b(e,t,n,r,a){var o=t.selectAll("g."+v.headerClassName).data([0]),i=a._dims;o.enter().append("g").classed(v.headerClassName,!0).style("pointer-events","all");var s=a.active,l=a.buttons[s]||v.blankHeaderOpts,c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},u={width:i.headerWidth,height:i.headerHeight};o.call(w,a,l,e).call(S,a,c,u);var d=t.selectAll("text."+v.headerArrowClassName).data([0]);d.enter().append("text").classed(v.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(h.font,a.font).text(v.arrowSymbol[a.direction]),d.attr({x:i.headerWidth-v.arrowOffsetX+a.pad.l,y:i.headerHeight/2+v.textOffsetY+a.pad.t}),o.on("click",function(){n.call(L),n.attr(v.menuIndexAttrName,f(n,a)?-1:String(a._index)),_(e,t,n,r,a)}),o.on("mouseover",function(){o.call(M)}),o.on("mouseout",function(){o.call(T,a)}),h.setTranslate(t,i.lx,i.ly)}function _(r,a,o,i,s){o||(o=a).attr("pointer-events","all");var e=-1!=+o.attr(v.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?v.dropdownButtonClassName:v.buttonClassName,l=o.selectAll("g."+t).data(e),n=l.enter().append("g").classed(t,!0),c=l.exit();"dropdown"===s.type?(n.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var u=0,d=0,f=s._dims,h=-1!==["up","down"].indexOf(s.direction);"dropdown"===s.type&&(h?d=f.headerHeight+v.gapButtonHeader:u=f.headerWidth+v.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(d=-v.gapButtonHeader+v.gapButton-f.openHeight),"dropdown"===s.type&&"left"===s.direction&&(u=-v.gapButtonHeader+v.gapButton-f.openWidth);var p={x:f.lx+u+s.pad.l,y:f.ly+d+s.pad.t,yPad:v.gapButton,xPad:v.gapButton,index:0},g={l:p.x+s.borderwidth,t:p.y+s.borderwidth};l.each(function(e,t){var n=y.select(this);n.call(w,s,e,r).call(S,s,p),n.on("click",function(){y.event.defaultPrevented||(x(r,s,0,a,o,i,t),e.execute&&m.executeAPICommand(r,e.method,e.args),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(M)}),n.on("mouseout",function(){n.call(T,s),l.call(k,s)})}),l.call(k,s),h?(g.w=Math.max(f.openWidth,f.headerWidth),g.h=p.y-g.t):(g.w=p.x-g.l,g.h=Math.max(f.openHeight,f.headerHeight)),g.direction=s.direction,i&&(l.size()?function(e,t,n,r,a,o){var i,s,l,c=a.direction,u="up"===c||"down"===c,d=a._dims,f=a.active;if(u)for(l=s=0;l<f;l++)s+=d.heights[l]+v.gapButton;else for(l=i=0;l<f;l++)i+=d.widths[l]+v.gapButton;r.enable(o,i,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1");r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,i,s,g):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()});n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(i))}function w(e,t,n,r){e.call(a,t).call(s,t,n,r)}function a(e,t){var n=e.selectAll("rect").data([0]);n.enter().append("rect").classed(v.itemRectClassName,!0).attr({rx:v.rx,ry:v.ry,"shape-rendering":"crispEdges"}),n.call(o.stroke,t.bordercolor).call(o.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function s(e,t,n,r){var a=e.selectAll("text").data([0]);a.enter().append("text").classed(v.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),a.call(h.font,t.font).text(n.label).call(p.convertToTspans,r)}function k(e,r){var a=r.active;e.each(function(e,t){var n=y.select(this);t===a&&r.showactive&&n.select("rect."+v.itemRectClassName).call(o.fill,v.activeColor)})}function M(e){e.select("rect."+v.itemRectClassName).call(o.fill,v.hoverColor)}function T(e,t){e.select("rect."+v.itemRectClassName).call(o.fill,t.bgcolor)}function A(c,u){var d=u._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=h.tester.selectAll("g."+v.dropdownButtonClassName).data(u.buttons);e.enter().append("g").classed(v.dropdownButtonClassName,!0);var f=-1!==["up","down"].indexOf(u.direction);e.each(function(e,t){var n=y.select(this);n.call(w,u,e,c);var r=n.select("."+v.itemTextClassName),a=r.node()&&h.bBox(r.node()).width,o=Math.max(a+v.textPadX,v.minWidth),i=u.font.size*g,s=p.lineCount(r),l=Math.max(i*s,v.minHeight)+v.textOffsetY;l=Math.ceil(l),o=Math.ceil(o),d.widths[t]=o,d.heights[t]=l,d.height1=Math.max(d.height1,l),d.width1=Math.max(d.width1,o),f?(d.totalWidth=Math.max(d.totalWidth,o),d.openWidth=d.totalWidth,d.totalHeight+=l+v.gapButton,d.openHeight+=l+v.gapButton):(d.totalWidth+=o+v.gapButton,d.openWidth+=o+v.gapButton,d.totalHeight=Math.max(d.totalHeight,l),d.openHeight=d.totalHeight)}),f?d.totalHeight-=v.gapButton:d.totalWidth-=v.gapButton,d.headerWidth=d.width1+v.arrowPadX,d.headerHeight=d.height1,"dropdown"===u.type&&(f?(d.width1+=v.arrowPadX,d.totalHeight=d.height1):d.totalWidth=d.width1,d.totalWidth+=v.arrowPadX),e.remove();var t=d.totalWidth+u.pad.l+u.pad.r,n=d.totalHeight+u.pad.t+u.pad.b,r=c._fullLayout._size;d.lx=r.l+r.w*u.x,d.ly=r.t+r.h*(1-u.y);var a="left";i.isRightAnchor(u)&&(d.lx-=t,a="right"),i.isCenterAnchor(u)&&(d.lx-=t/2,a="center");var o="top";i.isBottomAnchor(u)&&(d.ly-=n,o="bottom"),i.isMiddleAnchor(u)&&(d.ly-=n/2,o="middle"),d.totalWidth=Math.ceil(d.totalWidth),d.totalHeight=Math.ceil(d.totalHeight),d.lx=Math.round(d.lx),d.ly=Math.round(d.ly),m.autoMargin(c,v.autoMarginIdRoot+u._index,{x:u.x,y:u.y,l:t*({right:1,center:.5}[a]||0),r:t*({left:1,center:.5}[a]||0),b:n*({top:1,middle:.5}[o]||0),t:n*({bottom:1,middle:.5}[o]||0)})}function S(e,t,n,r){r=r||{};var a=e.select("."+v.itemRectClassName),o=e.select("."+v.itemTextClassName),i=t.borderwidth,s=n.index,l=t._dims;h.setTranslate(e,i+n.x,i+n.y);var c=-1!==["up","down"].indexOf(t.direction),u=r.height||(c?l.heights[s]:l.height1);a.attr({x:0,y:0,width:r.width||(c?l.width1:l.widths[s]),height:u});var d=t.font.size*g,f=(p.lineCount(o)-1)*d/2;p.positionText(o,v.textOffsetX,u/2-f+v.textOffsetY),c?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function L(e){e.selectAll("g."+v.dropdownButtonClassName).remove()}n.exports=function(a){var e=a._fullLayout,t=function(e){for(var t=e[v.name],n=[],r=0;r<t.length;r++){var a=t[r];a.visible&&n.push(a)}return n}(e),n=e._menulayer.selectAll("g."+v.containerClassName).data(0<t.length?[0]:[]);if(n.enter().append("g").classed(v.containerClassName,!0).style("cursor","pointer"),n.exit().remove(),n.exit().size()&&function(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var a=n[r];-1!==a.indexOf(v.autoMarginIdRoot)&&m.autoMargin(e,a)}}(a),0!==t.length){var r=n.selectAll("g."+v.headerGroupClassName).data(t,d);r.enter().append("g").classed(v.headerGroupClassName,!0);var o=n.selectAll("g."+v.dropdownButtonGroupClassName).data([0]);o.enter().append("g").classed(v.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var i=0;i<t.length;i++){var s=t[i];A(a,s)}var l="updatemenus"+e._uid,c=new u(a,o,l);r.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(L).attr(v.menuIndexAttrName,"-1")),r.exit().each(function(e){y.select(this).remove(),o.call(L).attr(v.menuIndexAttrName,"-1"),m.autoMargin(a,v.autoMarginIdRoot+e._index)}),r.each(function(t){var n=y.select(this),r="dropdown"===t.type?o:null;m.manageCommandObserver(a,t,t.buttons,function(e){x(a,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(b(a,n,o,c,t),f(o,t)&&_(a,n,o,c,t)):_(a,n,null,null,t)})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/alignment":135,"../../lib/svg_text_utils":177,"../../plots/plots":240,"../color":35,"../drawing":60,"../legend/anchor_utils":87,"./constants":130,"./scrollbox":134}],133:[function(e,t,n){arguments[4][127][0].apply(n,arguments)},{"./attributes":129,"./constants":130,"./defaults":131,"./draw":132,dup:127}],134:[function(t,n,e){(function(e){"use strict";n.exports=V;var B="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,q=t("../color"),H=t("../drawing"),i=t("../../lib");function V(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}V.barWidth=2,V.barLength=20,V.barRadius=2,V.barPad=1,V.barColor="#808BA4",V.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,a=r.width,o=r.height;this.position=e;var i,s,l,c,u=this.position.l,d=this.position.w,f=this.position.t,h=this.position.h,p=this.position.direction,g="down"===p,y="left"===p,m="up"===p,v=d,x=h;g||y||"right"===p||m||(this.position.direction="down",g=!0),g||m?(s=(i=u)+v,g?(l=f,x=(c=Math.min(l+x,o))-l):x=(c=f+x)-(l=Math.max(c-x,0))):(c=(l=f)+x,y?v=(s=u+v)-(i=Math.max(s-v,0)):(i=u,v=(s=Math.min(i+v,a))-i)),this._box={l:i,t:l,w:v,h:x};var b=v<d,_=V.barLength+2*V.barPad,w=V.barWidth+2*V.barPad,k=u,M=f+h;o<M+w&&(M=o-w);var T=this.container.selectAll("rect.scrollbar-horizontal").data(b?[0]:[]);T.exit().on(".drag",null).remove(),T.enter().append("rect").classed("scrollbar-horizontal",!0).call(q.fill,V.barColor),b?(this.hbar=T.attr({rx:V.barRadius,ry:V.barRadius,x:k,y:M,width:_,height:w}),this._hbarXMin=k+_/2,this._hbarTranslateMax=v-_):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var A=x<h,S=V.barWidth+2*V.barPad,L=V.barLength+2*V.barPad,C=u+d,z=f;a<C+S&&(C=a-S);var O=this.container.selectAll("rect.scrollbar-vertical").data(A?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-vertical",!0).call(q.fill,V.barColor),A?(this.vbar=O.attr({rx:V.barRadius,ry:V.barRadius,x:C,y:z,width:S,height:L}),this._vbarYMin=z+L/2,this._vbarTranslateMax=x-L):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,P=i-.5,D=A?s+S+.5:s+.5,I=l-.5,E=b?c+w+.5:c+.5,R=r._topdefs.selectAll("#"+j).data(b||A?[0]:[]);if(R.exit().remove(),R.enter().append("clipPath").attr("id",j).append("rect"),b||A?(this._clipRect=R.select("rect").attr({x:Math.floor(P),y:Math.floor(I),width:Math.ceil(D)-Math.floor(P),height:Math.ceil(E)-Math.floor(I)}),this.container.call(H.setClipUrl,j),this.bg.attr({x:u,y:f,width:d,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(H.setClipUrl,null),delete this._clipRect),b||A){var N=B.behavior.drag().on("dragstart",function(){B.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var F=B.behavior.drag().on("dragstart",function(){B.event.sourceEvent.preventDefault(),B.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));b&&this.hbar.on(".drag",null).call(F),A&&this.vbar.on(".drag",null).call(F)}this.setTranslate(t,n)},V.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(H.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},V.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=B.event.dx),this.vbar&&(t-=B.event.dy),this.setTranslate(e,t)},V.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=B.event.deltaY),this.vbar&&(t+=B.event.deltaY),this.setTranslate(e,t)},V.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,r=n+this._hbarTranslateMax;e=(i.constrain(B.event.x,n,r)-n)/(r-n)*(this.position.w-this._box.w)}if(this.vbar){var a=t+this._vbarYMin,o=a+this._vbarTranslateMax;t=(i.constrain(B.event.y,a,o)-a)/(o-a)*(this.position.h-this._box.h)}this.setTranslate(e,t)},V.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=i.constrain(e||0,0,n),t=i.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(H.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var a=e/n;this.hbar.call(H.setTranslate,e+a*this._hbarTranslateMax,t)}if(this.vbar){var o=t/r;this.vbar.call(H.setTranslate,e,t+o*this._vbarTranslateMax)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../color":35,"../drawing":60}],135:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],136:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],137:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"−"}},{}],138:[function(e,t,n){"use strict";t.exports={entityToUnicode:{mu:"μ","#956":"μ",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:" ","#160":" ",times:"×","#215":"×",plusmn:"±","#177":"±",deg:"°","#176":"°"}}},{}],139:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],140:[function(s,e,l){(function(e){"use strict";l.version="1.35.2",s("es6-promise").polyfill(),s("../build/plotcss"),s("./fonts/mathjax_config");for(var t=s("./registry"),n=l.register=t.register,r=s("./plot_api"),a=Object.keys(r),o=0;o<a.length;o++){var i=a[o];l[i]=r[i],n({moduleType:"apiMethod",name:i,fn:r[i]})}n(s("./traces/scatter")),n([s("./components/fx"),s("./components/legend"),s("./components/annotations"),s("./components/annotations3d"),s("./components/shapes"),s("./components/images"),s("./components/updatemenus"),s("./components/sliders"),s("./components/rangeslider"),s("./components/rangeselector"),s("./components/grid"),s("./components/errorbars")]),n([s("./locale-en"),s("./locale-en-us")]),l.Icons=s("../build/ploticon"),l.Plots=s("./plots/plots"),l.Fx=s("./components/fx"),l.Snapshot=s("./snapshot"),l.PlotSchema=s("./plot_api/plot_schema"),l.Queue=s("./lib/queue"),l.d3="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../build/plotcss":10,"../build/ploticon":11,"./components/annotations":28,"./components/annotations3d":33,"./components/errorbars":66,"./components/fx":77,"./components/grid":81,"./components/images":86,"./components/legend":95,"./components/rangeselector":107,"./components/rangeslider":113,"./components/shapes":121,"./components/sliders":127,"./components/updatemenus":133,"./fonts/mathjax_config":141,"./lib/queue":170,"./locale-en":182,"./locale-en-us":181,"./plot_api":186,"./plot_api/plot_schema":190,"./plots/plots":240,"./registry":248,"./snapshot":253,"./traces/scatter":306,"es6-promise":2}],141:[function(e,t,n){"use strict";"undefined"!=typeof MathJax?(n.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):n.MathJax=!1},{}],142:[function(e,t,n){"use strict";var r=Math.PI;n.deg2rad=function(e){return e/180*r},n.rad2deg=function(e){return e/r*180},n.wrap360=function(e){var t=e%360;return t<0?t+360:t},n.wrap180=function(e){return 180<Math.abs(e)&&(e-=360*Math.round(e/360)),e}},{}],143:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(o,"")),r(e)?Number(e):a}},{"../constants/numerical":137,"fast-isnumeric":4}],144:[function(e,t,g){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),l=e("../plots/attributes"),o=e("../components/colorscale/get_scale"),n=Object.keys(e("../components/colorscale/scales")),c=e("./nested_property"),i=e("./regex").counter,s=e("../constants/interactions").DESELECTDIM,u=e("./angles").wrap180,d=e("./is_array").isArrayOrTypedArray;g.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){d(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var a=String(n[r]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,t,n,r){!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,t,n,r){e%1||!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(e,t,n,r){if("string"!=typeof e){var a="number"==typeof e;!0!==r.strict&&a?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",n.join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){t.set(o(e,n))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):a(e)?t.set(u(+e)):t.set(n)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:[],coerceFunction:function(e,t,n){"string"==typeof e&&i(n).test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!i(n).test(e)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var a=e.split("+"),o=0;o<a.length;){var i=a[o];-1===r.flags.indexOf(i)||a.indexOf(i)<o?a.splice(o,1):o++}a.length?t.set(a.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(e,t,n,r){function a(e,t,n){var r,a={set:function(e){r=e}};return void 0===n&&(n=t.dflt),g.valObjectMeta[t.valType].coerceFunction(e,a,n,t),r}var o=2===r.dimensions;if(Array.isArray(e)){var i,s,l,c,u=r.items,d=[],f=Array.isArray(u),h=f?u.length:e.length;if(n=Array.isArray(n)?n:[],o)for(i=0;i<h;i++){d[i]=[];var p=Array.isArray(e[i])?e[i]:[];for(l=f?u[i].length:p.length,s=0;s<l;s++)void 0!==(c=a(p[s],f?u[i][s]:u,(n[i]||[])[s]))&&(d[i][s]=c)}else for(i=0;i<h;i++)void 0!==(c=a(e[i],f?u[i]:u,n[i]))&&(d[i]=c);t.set(d)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),a=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var o=0;o<e.length;o++)if(a){if(!Array.isArray(e[o])||!t.freeLength&&e[o].length!==n[o].length)return!1;for(var i=0;i<e[o].length;i++)if(!g.validate(e[o][i],r?n[o][i]:n))return!1}else if(!g.validate(e[o],r?n[o]:n))return!1;return!0}}},g.coerce=function(e,t,n,r,a){var o=c(n,r).get(),i=c(e,r),s=c(t,r),l=i.get();return void 0===a&&(a=o.dflt),o.arrayOk&&d(l)?(s.set(l),l):(g.valObjectMeta[o.valType].coerceFunction(l,s,a,o),s.get())},g.coerce2=function(e,t,n,r,a){var o=c(e,r),i=g.coerce(e,t,n,r,a),s=o.get();return null!=s&&i},g.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},g.coerceHoverinfo=function(e,t,n){var r,a=t._module.attributes,o=a.hoverinfo?{hoverinfo:a.hoverinfo}:l,i=o.hoverinfo;if(1===n._dataLength){var s="all"===i.dflt?i.flags.slice():i.dflt.split("+");s.splice(s.indexOf("name"),1),r=s.join("+")}return g.coerce(e,t,o,"hoverinfo",r)},g.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,r,a=e.marker.opacity;if(void 0!==a)d(a)||e.selected||e.unselected||(r=s*(n=a)),t("selected.marker.opacity",n),t("unselected.marker.opacity",r)}},g.validate=function(e,t){var n=g.valObjectMeta[t.valType];if(t.arrayOk&&d(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},a=r,o={set:function(e){a=e}};return n.coerceFunction(e,o,r,t),a!==r}},{"../components/colorscale/get_scale":48,"../components/colorscale/scales":54,"../constants/interactions":136,"../plots/attributes":196,"./angles":142,"./is_array":157,"./nested_property":164,"./regex":171,"fast-isnumeric":4,tinycolor2:337}],145:[function(n,e,j){(function(e){"use strict";var y,m,r="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,d=n("fast-isnumeric"),l=n("./loggers"),h=n("./mod"),t=n("../constants/numerical"),v=t.BADNUM,x=t.ONEDAY,b=t.ONEHOUR,_=t.ONEMIN,w=t.ONESEC,k=t.EPOCHJD,M=n("../registry"),p=r.time.format.utc,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,S=(new Date).getFullYear()-70;function L(e){return e&&M.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function i(e,t){return String(e+Math.pow(10,t)).substr(1)}j.dateTick0=function(e,t){return L(e)?t?M.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:M.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"},j.dfltRange=function(e){return L(e)?M.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},j.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},j.dateTime2ms=function(e,t){if(j.isJSDate(e))return e=Number(e)-e.getTimezoneOffset()*_,y<=e&&e<=m?e:v;if("string"!=typeof e&&"number"!=typeof e)return v;e=String(e);var n=L(t),r=e.charAt(0);!n||"G"!==r&&"g"!==r||(e=e.substr(1),t="");var a=n&&"chinese"===t.substr(0,7),o=e.match(a?A:T);if(!o)return v;var i=o[1],s=o[3]||"1",l=Number(o[5]||1),c=Number(o[7]||0),u=Number(o[9]||0),d=Number(o[11]||0);if(n){if(2===i.length)return v;var f;i=Number(i);try{var h=M.getComponentMethod("calendars","getCal")(t);if(a){var p="i"===s.charAt(s.length-1);s=parseInt(s,10),f=h.newDate(i,h.toMonthIndex(i,s,p),l)}else f=h.newDate(i,Number(s),l)}catch(e){return v}return f?(f.toJD()-k)*x+c*b+u*_+d*w:v}i=2===i.length?(Number(i)+2e3-S)%100+S:Number(i),s-=1;var g=new Date(Date.UTC(2e3,s,l,c,u));return g.setUTCFullYear(i),g.getUTCMonth()!==s?v:g.getUTCDate()!==l?v:g.getTime()+d*w},y=j.MIN_MS=j.dateTime2ms("-9999"),m=j.MAX_MS=j.dateTime2ms("9999-12-31 23:59:59.9999"),j.isDateTime=function(e,t){return j.dateTime2ms(e,t)!==v};var g=90*x,C=3*b,z=5*_;function O(e,t,n,r,a){if((t||n||r||a)&&(e+=" "+i(t,2)+":"+i(n,2),(r||a)&&(e+=":"+i(r,2),a))){for(var o=4;a%10==0;)o-=1,a/=10;e+="."+i(a,o)}return e}j.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(y<=e&&e<=m))return v;t||(t=0);var r,a,o,i,s,l,c=Math.floor(10*h(e+.05,1)),u=Math.round(e-c/10);if(L(n)){var d=Math.floor(u/x)+k,f=Math.floor(h(e,x));try{r=M.getComponentMethod("calendars","getCal")(n).fromJD(d).formatDate("yyyy-mm-dd")}catch(e){r=p("G%Y-%m-%d")(new Date(u))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;a=t<g?Math.floor(f/b):0,o=t<g?Math.floor(f%b/_):0,i=t<C?Math.floor(f%_/w):0,s=t<z?f%w*10+c:0}else l=new Date(u),r=p("%Y-%m-%d")(l),a=t<g?l.getUTCHours():0,o=t<g?l.getUTCMinutes():0,i=t<C?l.getUTCSeconds():0,s=t<z?10*l.getUTCMilliseconds()+c:0;return O(r,a,o,i,s)},j.ms2DateTimeLocal=function(e){if(!(y+x<=e&&e<=m-x))return v;var t=Math.floor(10*h(e+.05,1)),n=new Date(Math.round(e-t/10));return O(r.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+t)},j.cleanDate=function(e,t,n){if(j.isJSDate(e)||"number"==typeof e){if(L(n))return l.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=j.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!j.isDateTime(e,n))return l.error("unrecognized date",e),t;return e};var o=/%\d?f/g;function s(e,n,t,r){e=e.replace(o,function(e){var t=Math.min(+e.charAt(1)||6,6);return(n/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(n+.05));if(L(r))try{e=M.getComponentMethod("calendars","worldCalFmt")(e,n,r)}catch(e){return"Invalid"}return t(e)(a)}var c=[59,59.9,59.99,59.999,59.9999];j.formatDate=function(e,t,n,r,a,o){if(a=L(a)&&a,!t)if("y"===n)t=o.year;else if("m"===n)t=o.month;else{if("d"!==n)return function(e,t){var n=h(e+.05,x),r=i(Math.floor(n/b),2)+":"+i(h(Math.floor(n/_),60),2);if("M"!==t){d(t)||(t=0);var a=(100+Math.min(h(e/w,60),c[t])).toFixed(t).substr(1);0<t&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+a}return r}(e,n)+"\n"+s(o.dayMonthYear,e,r,a);t=o.dayMonth+"\n"+o.year}return s(t,e,r,a)};var u=3*x;j.incrementMonth=function(t,e,n){n=L(n)&&n;var r=h(t,x);if(t=Math.round(t-r),n)try{var a=Math.round(t/x)+k,o=M.getComponentMethod("calendars","getCal")(n),i=o.fromJD(a);return e%12?o.add(i,e,"m"):o.add(i,e/12,"y"),(i.toJD()-k)*x+r}catch(e){l.error("invalid ms "+t+" in calendar "+n)}var s=new Date(t+u);return s.setUTCMonth(s.getUTCMonth()+e)+r-u},j.findExactDates=function(e,t){for(var n,r,a=0,o=0,i=0,s=0,l=L(t)&&M.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],d(r)){if(!(r%x))if(l)try{1===(n=l.fromJD(r/x+k)).day()?1===n.month()?a++:o++:i++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:o++:i++}else s++;i+=o+=a;var u=e.length-s;return{exactYears:a/u,exactMonths:o/u,exactDays:i/u}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants/numerical":137,"../registry":248,"./loggers":161,"./mod":163,"fast-isnumeric":4}],146:[function(e,t,n){"use strict";t.exports=function(e,t){return Array.isArray(e)||(e=[]),e.length=t,e}},{}],147:[function(e,t,n){"use strict";var o=e("events").EventEmitter,r={init:function(n){if(n._ev instanceof o)return n;var r=new o,a=new o;return n._ev=r,n._internalEv=a,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=a.on.bind(a),n._internalOnce=a.once.bind(a),n._removeInternalListener=a.removeListener.bind(a),n._removeAllInternalListeners=a.removeAllListeners.bind(a),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),a.emit(e,t)},n},triggerHandler:function(e,t,n){var r,a;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var o=e._ev;if(!o)return r;var i=o._events[t];if(!i)return r;"function"==typeof i&&(i=[i]);for(var s=i.pop(),l=0;l<i.length;l++)i[l](n);return a=s(n),void 0!==r?r:a},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=r},{events:3}],148:[function(e,t,n){"use strict";var h=e("./is_plain_object.js"),p=Array.isArray;function g(e,t,n,r){var a,o,i,s,l,c,u=e[0],d=e.length;if(2===d&&p(u)&&p(e[1])&&0===u.length){if(function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],u))return u;u.splice(0,u.length)}for(var f=1;f<d;f++)for(o in a=e[f])i=u[o],s=a[o],r&&p(s)?u[o]=s:t&&s&&(h(s)||(l=p(s)))?(l?(l=!1,c=i&&p(i)?i:[]):c=i&&h(i)?i:{},u[o]=g([c,s],t,n,r)):(void 0!==s||n)&&(u[o]=s);return u}n.extendFlat=function(){return g(arguments,!1,!1,!1)},n.extendDeep=function(){return g(arguments,!0,!1,!1)},n.extendDeepAll=function(){return g(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return g(arguments,!0,!1,!0)}},{"./is_plain_object.js":158}],149:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,a=0;a<e.length;a++){var o=e[a];1!==t[o]&&(t[o]=1,n[r++]=o)}return n}},{}],150:[function(e,t,n){"use strict";function i(e){return!0===e.visible}function s(e){return!0===e[0].trace.visible}t.exports=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:i),r=[],a=0;a<e.length;a++){var o=e[a];n(o)&&r.push(o)}return r}},{}],151:[function(e,t,n){"use strict";var a=e("country-regex"),i=e("../lib"),o=Object.keys(a),s={"ISO-3":i.identity,"USA-states":i.identity,"country names":function(e){for(var t=0;t<o.length;t++){var n=o[t],r=new RegExp(a[n]);if(r.test(e.trim().toLowerCase()))return n}return i.log("Unrecognized country name: "+e+"."),!1}};n.locationToFeature=function(e,t,n){if(!t||"string"!=typeof t)return!1;var r=(0,s[e])(t);if(r){for(var a=0;a<n.length;a++){var o=n[a];if(o.id===r)return o}i.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":156,"country-regex":1}],152:[function(e,t,n){"use strict";var i=e("../constants/numerical").BADNUM;n.calcTraceToLineCoords=function(e){for(var t=e[0].trace.connectgaps,n=[],r=[],a=0;a<e.length;a++){var o=e[a].lonlat;o[0]!==i?r.push(o):!t&&0<r.length&&(n.push(r),r=[])}return 0<r.length&&n.push(r),n},n.makeLine=function(e){return 1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}},n.makePolygon=function(e){if(1===e.length)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=[e[n]];return{type:"MultiPolygon",coordinates:t}},n.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":137}],153:[function(e,t,n){"use strict";var c,u,d,f=e("./mod");function g(e,t,n,r,a,o,i,s){var l=n-e,c=a-e,u=i-a,d=r-t,f=o-t,h=s-o,p=l*h-u*d;if(0===p)return null;var g=(c*h-u*f)/p,y=(c*d-l*f)/p;return y<0||1<y||g<0||1<g?null:{x:e+l*g,y:t+d*g}}function y(e,t,n,r,a){var o=r*e+a*t;if(o<0)return r*r+a*a;if(n<o){var i=r-e,s=a-t;return i*i+s*s}var l=r*t-a*e;return l*l/n}n.segmentsIntersect=g,n.segmentDistance=function(e,t,n,r,a,o,i,s){if(g(e,t,n,r,a,o,i,s))return 0;var l=n-e,c=r-t,u=i-a,d=s-o,f=l*l+c*c,h=u*u+d*d,p=Math.min(y(l,c,f,a-e,o-t),y(l,c,f,i-e,s-t),y(u,d,h,e-a,t-o),y(u,d,h,n-a,r-o));return Math.sqrt(p)},n.getTextLocation=function(e,t,n,r){if(e===u&&r===d||(c={},u=e,d=r),c[n])return c[n];var a=e.getPointAtLength(f(n-r/2,t)),o=e.getPointAtLength(f(n+r/2,t)),i=Math.atan((o.y-a.y)/(o.x-a.x)),s=e.getPointAtLength(f(n,t)),l={x:(4*s.x+a.x+o.x)/6,y:(4*s.y+a.y+o.y)/6,theta:i};return c[n]=l},n.clearLocationCache=function(){u=null},n.getVisibleSegment=function(a,e,t){var o,i,s=e.left,l=e.right,c=e.top,u=e.bottom,n=0,d=a.getTotalLength(),r=d;function f(e){var t=a.getPointAtLength(e);0===e?o=t:e===d&&(i=t);var n=t.x<s?s-t.x:t.x>l?t.x-l:0,r=t.y<c?c-t.y:t.y>u?t.y-u:0;return Math.sqrt(n*n+r*r)}for(var h=f(n);h;){if(r<(n+=h+t))return;h=f(n)}for(h=f(r);h;){if((r-=h+t)<n)return;h=f(r)}return{min:n,max:r,len:r-n,total:d,isClosed:0===n&&r===d&&Math.abs(o.x-i.x)<.1&&Math.abs(o.y-i.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var a,o,i,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,h=s;d<c;){if(a=(f+h)/2,i=(o=e.getPointAtLength(a))[n]-t,Math.abs(i)<l)return o;0<u*i?h=a:f=a,d++}return o}},{"./mod":163}],154:[function(e,t,n){"use strict";t.exports=function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e}},{}],155:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],156:[function(M,T,e){(function(e){"use strict";var n="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,g=M("fast-isnumeric"),t=M("../constants/numerical"),r=t.FP_SAFE,a=t.BADNUM,c=T.exports={};c.nestedProperty=M("./nested_property"),c.keyedContainer=M("./keyed_container"),c.relativeAttr=M("./relative_attr"),c.isPlainObject=M("./is_plain_object"),c.mod=M("./mod"),c.toLogRange=M("./to_log_range"),c.relinkPrivateKeys=M("./relink_private"),c.ensureArray=M("./ensure_array");var o=M("./is_array");c.isTypedArray=o.isTypedArray,c.isArrayOrTypedArray=o.isArrayOrTypedArray;var i=M("./coerce");c.valObjectMeta=i.valObjectMeta,c.coerce=i.coerce,c.coerce2=i.coerce2,c.coerceFont=i.coerceFont,c.coerceHoverinfo=i.coerceHoverinfo,c.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,c.validate=i.validate;var s=M("./dates");c.dateTime2ms=s.dateTime2ms,c.isDateTime=s.isDateTime,c.ms2DateTime=s.ms2DateTime,c.ms2DateTimeLocal=s.ms2DateTimeLocal,c.cleanDate=s.cleanDate,c.isJSDate=s.isJSDate,c.formatDate=s.formatDate,c.incrementMonth=s.incrementMonth,c.dateTick0=s.dateTick0,c.dfltRange=s.dfltRange,c.findExactDates=s.findExactDates,c.MIN_MS=s.MIN_MS,c.MAX_MS=s.MAX_MS;var l=M("./search");c.findBin=l.findBin,c.sorterAsc=l.sorterAsc,c.sorterDes=l.sorterDes,c.distinctVals=l.distinctVals,c.roundUp=l.roundUp;var u=M("./stats");c.aggNums=u.aggNums,c.len=u.len,c.mean=u.mean,c.variance=u.variance,c.stdev=u.stdev,c.interp=u.interp;var d=M("./matrix");c.init2dArray=d.init2dArray,c.transposeRagged=d.transposeRagged,c.dot=d.dot,c.translationMatrix=d.translationMatrix,c.rotationMatrix=d.rotationMatrix,c.rotationXYMatrix=d.rotationXYMatrix,c.apply2DTransform=d.apply2DTransform,c.apply2DTransform2=d.apply2DTransform2;var f=M("./angles");c.deg2rad=f.deg2rad,c.rad2deg=f.rad2deg,c.wrap360=f.wrap360,c.wrap180=f.wrap180;var h=M("./geometry2d");c.segmentsIntersect=h.segmentsIntersect,c.segmentDistance=h.segmentDistance,c.getTextLocation=h.getTextLocation,c.clearLocationCache=h.clearLocationCache,c.getVisibleSegment=h.getVisibleSegment,c.findPointOnPath=h.findPointOnPath;var p=M("./extend");c.extendFlat=p.extendFlat,c.extendDeep=p.extendDeep,c.extendDeepAll=p.extendDeepAll,c.extendDeepNoArrays=p.extendDeepNoArrays;var y=M("./loggers");c.log=y.log,c.warn=y.warn,c.error=y.error;var m=M("./regex");c.counterRegex=m.counter;var v=M("./throttle");c.throttle=v.throttle,c.throttleDone=v.done,c.clearThrottle=v.clear,c.getGraphDiv=M("./get_graph_div"),c._=M("./localize"),c.notifier=M("./notifier"),c.filterUnique=M("./filter_unique"),c.filterVisible=M("./filter_visible"),c.pushUnique=M("./push_unique"),c.cleanNumber=M("./clean_number"),c.ensureNumber=function(e){return g(e)?(e=Number(e))<-r||r<e?a:g(e)?Number(e):a:a},c.noop=M("./noop"),c.identity=M("./identity"),c.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var a=0;a<t.length;a++){var o=t[a],i=c.nestedProperty(e,o.replace("?",n)),s=c.nestedProperty(e,o.replace("?",r)),l=i.get();i.set(s.get()),s.set(l)}},c.raiseToTop=function(e){e.parentNode.appendChild(e)},c.cancelTransition=function(e){return e.transition().duration(0)},c.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},c.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},c.simpleMap=function(e,t,n,r){for(var a=e.length,o=new Array(a),i=0;i<a;i++)o[i]=t(e[i],n,r);return o},c.randstr=function e(t,n,r){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var a,o,i=Math.log(Math.pow(2,n))/Math.log(r),s="";for(a=2;i===1/0;a*=2)i=Math.log(Math.pow(2,n/a))/Math.log(r)*a;var l=i-Math.floor(i);for(a=0;a<Math.floor(i);a++)s=Math.floor(Math.random()*r).toString(r)+s;l&&(o=Math.pow(r,l),s=Math.floor(Math.random()*o).toString(r)+s);var c=parseInt(s,r);return t&&-1<t.indexOf(s)||c!==1/0&&c>=Math.pow(2,n)?e(t,n,r):s},c.OptionControl=function(t,n){t||(t={}),n||(n="opt");var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+n]=t,r},c.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,a,o,i=e.length,s=2*i,l=2*t-1,c=new Array(l),u=new Array(i);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<i;n++){for(r=o=0;r<l;r++)(a=n+r+1-t)<-i?a-=s*Math.round(a/s):s<=a&&(a-=s*Math.floor(a/s)),a<0?a=-1-a:i<=a&&(a=s-1-a),o+=e[a]*c[r];u[n]=o}return u},c.syncOrAsync=function(e,t,n){var r;function a(){return c.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(a).then(void 0,c.promiseError);return n&&n(t)},c.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},c.noneOrAll=function(e,t,n){if(e){var r,a=!1,o=!0;for(r=0;r<n.length;r++)null!=e[n[r]]?a=!0:o=!1;if(a&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},c.mergeArray=function(e,t,n){if(c.isArrayOrTypedArray(e))for(var r=Math.min(e.length,t.length),a=0;a<r;a++)t[a][n]=e[a]},c.fillArray=function(e,t,n,r){if(r=r||c.identity,c.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][n]=r(e[a])},c.castOption=function(e,t,n,r){r=r||c.identity;var a=c.nestedProperty(e,n).get();return c.isArrayOrTypedArray(a)?Array.isArray(t)&&c.isArrayOrTypedArray(a[t[0]])?r(a[t[0]][t[1]]):r(a[t]):a},c.extractOption=function(e,t,n,r){if(n in e)return e[n];var a=c.nestedProperty(t,r).get();return Array.isArray(a)?void 0:a},c.tagSelected=function(e,t,n){var r,a,o,i=t.selectedpoints,s=t._indexToPoints;if(s)for(var l in r={},s)for(var c=s[l],u=0;u<c.length;u++)r[c[u]]=l;for(var d=0;d<i.length;d++){var f=i[d];if(g(o=f)&&0<=o&&o%1==0){var h=r?r[f]:f,p=n?n[h]:h;void 0!==(a=p)&&a<e.length&&(e[p].selected=1)}}},c.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var r=c.nestedProperty(e,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},c.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,a,o,i=Object.keys(e);for(r=0;r<i.length;r++)o=e[a=i[r]],"_"!==a.charAt(0)&&"function"!=typeof o&&("module"===a?n[a]=o:Array.isArray(o)?n[a]=o.slice(0,3):n[a]=o&&"object"==typeof o?c.minExtend(e[a],t[a]):o);for(i=Object.keys(t),r=0;r<i.length;r++)"object"==typeof(o=t[a=i[r]])&&a in n&&"object"==typeof n[a]||(n[a]=o);return n},c.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},c.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},c.isPlotDiv=function(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},c.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},c.addStyleRule=function(e,t){if(!c.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),c.styleSheet=n.sheet}var r=c.styleSheet;r.insertRule?r.insertRule(e+"{"+t+"}",0):r.addRule?r.addRule(e,t,0):c.warn("addStyleRule failed")},c.isIE=function(){return void 0!==window.navigator.msSaveBlob},c.isD3Selection=function(e){return e&&"function"==typeof e.classed},c.objectFromPath=function(e,t){for(var n,r=e.split("."),a=n={},o=0;o<r.length;o++){var i=r[o],s=null,l=r[o].match(/(.*)\[([0-9]+)\]/);l?(i=l[1],s=l[2],n=n[i]=[],o===r.length-1?n[s]=t:n[s]={},n=n[s]):(o===r.length-1?n[i]=t:n[i]={},n=n[i])}return a};var x=/^([^\[\.]+)\.(.+)?/,b=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;c.expandObjectPaths=function(e){var t,n,r,a,o,i,s;if("object"==typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(x))?(a=e[n],r=t[1],delete e[n],e[r]=c.extendDeepNoArrays(e[r]||{},c.objectFromPath(n,c.expandObjectPaths(a))[r])):(t=n.match(b))?(a=e[n],r=t[1],o=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(s=t[4],i=e[r][o]=e[r][o]||{},c.extendDeepNoArrays(i,c.objectFromPath(s,c.expandObjectPaths(a)))):e[r][o]=c.expandObjectPaths(a)):e[n]=c.expandObjectPaths(e[n]));return e},c.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,a=t.charAt(0),o=t.charAt(1),i=e.split("."),s=i[0],l=1<i.length?a+i[1]:"";if(o&&(1<i.length||4<s.length||n))for(;r.test(s);)s=s.replace(r,"$1"+o+"$2");return s+l};var _=/%{([^\s%{}]*)}/g,w=/^\w*$/;c.templateString=function(e,n){var r={};return e.replace(_,function(e,t){return w.test(t)?n[t]||"":(r[t]=r[t]||c.nestedProperty(n,t).get,r[t]()||"")})};c.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,a=0,o=0;o<n;o++){var i=e.charCodeAt(o)||0,s=t.charCodeAt(o)||0,l=48<=i&&i<=57,c=48<=s&&s<=57;if(l&&(r=10*r+i-48),c&&(a=10*a+s-48),!l||!c){if(r!==a)return r-a;if(i!==s)return i-s}}return a-r};var k=2e9;c.seedPseudoRandom=function(){k=2e9},c.pseudoRandom=function(){var e=k;return k=(69069*k+1)%4294967296,Math.abs(k-e)<429496729?c.pseudoRandom():k/4294967296}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants/numerical":137,"./angles":142,"./clean_number":143,"./coerce":144,"./dates":145,"./ensure_array":146,"./extend":148,"./filter_unique":149,"./filter_visible":150,"./geometry2d":153,"./get_graph_div":154,"./identity":155,"./is_array":157,"./is_plain_object":158,"./keyed_container":159,"./localize":160,"./loggers":161,"./matrix":162,"./mod":163,"./nested_property":164,"./noop":165,"./notifier":166,"./push_unique":169,"./regex":171,"./relative_attr":172,"./relink_private":173,"./search":174,"./stats":176,"./throttle":178,"./to_log_range":179,"fast-isnumeric":4}],157:[function(e,t,n){"use strict";var r="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},a="undefined"==typeof DataView?function(){}:DataView;n.isTypedArray=function(e){return r.isView(e)&&!(e instanceof a)},n.isArrayOrTypedArray=function(e){return Array.isArray(e)||n.isTypedArray(e)}},{}],158:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype}},{}],159:[function(e,t,n){"use strict";var h=e("./nested_property"),a=/^\w*$/;t.exports=function(e,o,i,s){var r,l;i=i||"name",s=s||"value";var c={};l=o&&o.length?h(e,o).get():e,o=o||"",l=l||[];var u={};for(r=0;r<l.length;r++)u[l[r][i]]=r;var d=a.test(s),f={set:function(e,t){var n=null===t?4:0,r=u[e];void 0===r?(n|=3,r=l.length,u[e]=r):t!==(d?l[r][s]:h(l[r],s).get())&&(n|=2);var a=l[r]=l[r]||{};return a[i]=e,d?a[s]=t:h(a,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,f},get:function(e){var t=u[e];return void 0===t?void 0:d?l[t][s]:h(l[t],s).get()},rename:function(e,t){var n=u[e];return void 0===n||(c[n]=1|c[n],u[t]=n,delete u[e],l[n][i]=t),f},remove:function(e){var t=u[e];if(void 0===t)return f;var n=l[t];if(2<Object.keys(n).length)return c[t]=2|c[t],f.set(e,null);if(d){for(r=t;r<l.length;r++)c[r]=3|c[r];for(r=t;r<l.length;r++)u[l[r][i]]--;l.splice(t,1),delete u[e]}else h(n,s).set(null),c[t]=6|c[t];return f},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),a=0;a<r.length;a++)t=r[a],e=o+"["+t+"]",l[t]?(1&c[t]&&(n[e+"."+i]=l[t][i]),2&c[t]&&(n[e+"."+s]=d?4&c[t]?null:l[t][s]:4&c[t]?null:h(l[t],s).get())):n[e]=null;return n}};return f}},{"./nested_property":164}],160:[function(e,t,n){"use strict";var c=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var a=e._context.locales,o=0;o<2;o++){var i=(a[n]||{}).dictionary;if(i){var s=i[t];if(s)return s}a=c.localeRegistry}var l=n.split("-")[0];if(l===n)break;n=l}return t}},{"../registry":248}],161:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config"),a=t.exports={};function o(e,t){if(e.apply)e.apply(e,t);else for(var n=0;n<t.length;n++)e(t[n])}a.log=function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},a.warn=function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},a.error=function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.error,e)}}},{"../plot_api/plot_config":189}],162:[function(e,t,i){"use strict";i.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},i.transposeRagged=function(e){var t,n,r=0,a=e.length;for(t=0;t<a;t++)r=Math.max(r,e[t].length);var o=new Array(r);for(t=0;t<r;t++)for(o[t]=new Array(a),n=0;n<a;n++)o[t][n]=e[n][t];return o},i.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n,r,a=e.length;if(e[0].length)for(n=new Array(a),r=0;r<a;r++)n[r]=i.dot(e[r],t);else if(t[0].length){var o=i.transposeRagged(t);for(n=new Array(o.length),r=0;r<o.length;r++)n[r]=i.dot(e,o[r])}else for(r=n=0;r<a;r++)n+=e[r]*t[r];return n},i.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},i.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},i.rotationXYMatrix=function(e,t,n){return i.dot(i.dot(i.translationMatrix(t,n),i.rotationMatrix(e)),i.translationMatrix(-t,-n))},i.apply2DTransform=function(n){return function(){var e=arguments;3===e.length&&(e=e[0]);var t=1===arguments.length?e[0]:[e[0],e[1]];return i.dot(n,[t[0],t[1],1]).slice(0,2)}},i.apply2DTransform2=function(e){var t=i.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],163:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e%t;return n<0?n+t:n}},{}],164:[function(e,t,n){"use strict";var s=e("fast-isnumeric"),d=e("./is_array").isArrayOrTypedArray,a=e("./is_plain_object"),o=e("../plot_api/container_array_match");t.exports=function(e,t){if(s(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,a,o=0,i=t.split(".");o<i.length;){if(n=String(i[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])i[o]=n[1];else{if(0!==o)throw"bad property string";i.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),a=0;a<r.length;a++)o++,i.splice(o,0,Number(r[a]))}o++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:i,obj:e}:{set:h(e,i,t),get:function i(s,l){return function(){var e,t,n,r,a,o=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],a=0;a<o.length;a++)n[a]=i(o[a],l.slice(r+1))(),n[a]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(o))return;if("object"!=typeof(o=o[e])||null===o)return}if("object"==typeof o&&null!==o&&null!==(n=o[l[r]]))return n}}(e,i),astr:t,parts:i,obj:e}};var i=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,l=/(^|\.)args\[/;function f(e,t){if(null!=(n=e)&&("object"!=typeof n||(d(n)?n.length:Object.keys(n).length))||a(e)&&"]"===t.charAt(t.length-1)||t.match(l)&&void 0!==e)return!1;var n;if(!d(e))return!0;if(t.match(i))return!0;var r=o(t);return r&&""===r.index}function h(s,l,c){return function(e){var t,n,r=s,a="",o=[[s,a]],i=f(e,c);for(n=0;n<l.length-1;n++){if("number"==typeof(t=l[n])&&!d(r))throw"array index but container is not an array";if(-1===t){if(i=!p(r,l.slice(n+1),e,c))break;return}if(!g(r,t,l[n+1],i))break;if("object"!=typeof(r=r[t])||null===r)throw"container is not an object";a=u(a,t),o.push([r,a])}i?(n===l.length-1&&delete r[l[n]],function(e){var t,n,r,a,o,i;for(t=e.length-1;0<=t;t--){if(r=e[t][0],a=e[t][1],i=!1,d(r))for(n=r.length-1;0<=n;n--)f(r[n],u(a,n))?i?r[n]=void 0:r.pop():i=!0;else if("object"==typeof r&&null!==r)for(o=Object.keys(r),i=!1,n=o.length-1;0<=n;n--)f(r[o[n]],u(a,o[n]))?delete r[o[n]]:i=!0;if(i)return}}(o)):r[l[n]]=e}}function u(e,t){var n=t;return s(t)?n="["+t+"]":e&&(n="."+t),e+n}function p(e,t,n,r){var a,o=d(n),i=!0,s=n,l=r.replace("-1",0),c=!o&&f(n,l),u=t[0];for(a=0;a<e.length;a++)l=r.replace("-1",a),o&&(c=f(s=n[a%n.length],l)),c&&(i=!1),g(e,a,u,c)&&h(e[a],t,r.replace("-1",a))(s);return i}function g(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"==typeof n?[]:{}}return!0}},{"../plot_api/container_array_match":183,"./is_array":157,"./is_plain_object":158,"fast-isnumeric":4}],165:[function(e,t,n){"use strict";t.exports=function(){}},{}],166:[function(t,n,e){(function(e){"use strict";var s="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,r=t("fast-isnumeric"),a=[];n.exports=function(e,t){if(-1===a.indexOf(e)){a.push(e);var o=1e3;r(t)?o=t:"long"===t&&(o=3e3);var n=s.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=s.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(i)});for(var n=t.append("p"),r=e.split(/<br\s*\/?>/g),a=0;a<r.length;a++)a&&n.append("br"),n.append("span").text(r[a]);t.transition().duration(700).style("opacity",1).transition().delay(o).call(i)})}function i(e){e.duration(700).style("opacity",0).each("end",function(e){var t=a.indexOf(e);-1!==t&&a.splice(t,1),s.select(this).remove()})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"fast-isnumeric":4}],167:[function(e,t,n){"use strict";var i=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),a=0;a<r.length;a++){var o=r[a];0===o.indexOf("cursor-")&&e.attr(s,o.substr(7)).classed(o,!1)}e.attr(s)||e.attr(s,"!!")}i(e,t)}else n&&(e.attr(s,null),"!!"===n?i(e):i(e,n))}},{"./setcursor":175}],168:[function(e,t,n){"use strict";var f=e("./matrix").dot,v=e("../constants/numerical").BADNUM,l=t.exports={};l.tester=function(e){if(Array.isArray(e[0][0]))return l.multitester(e);var t,h=e.slice(),p=h[0][0],g=p,y=h[0][1],m=y;for(h.push(h[0]),t=1;t<h.length;t++)p=Math.min(p,h[t][0]),g=Math.max(g,h[t][0]),y=Math.min(y,h[t][1]),m=Math.max(m,h[t][1]);var a,n=!1;5===h.length&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(n=!0,a=function(e){return e[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(n=!0,a=function(e){return e[1]===h[0][1]}));var r=!0,o=h[0];for(t=1;t<h.length;t++)if(o[0]!==h[t][0]||o[1]!==h[t][1]){r=!1;break}return{xmin:p,xmax:g,ymin:y,ymax:m,pts:h,contains:n?function(e,t){var n=e[0],r=e[1];return!(n===v||n<p||g<n||r===v||r<y||m<r||t&&a(e))}:function(e,t){var n=e[0],r=e[1];if(n===v||n<p||g<n||r===v||r<y||m<r)return!1;var a,o,i,s,l,c=h.length,u=h[0][0],d=h[0][1],f=0;for(a=1;a<c;a++)if(o=u,i=d,u=h[a][0],d=h[a][1],!(n<(s=Math.min(o,u))||n>Math.max(o,u)||r>Math.max(i,d)))if(r<Math.min(i,d))n!==s&&f++;else{if(r===(l=u===o?r:i+(n-o)*(d-i)/(u-o)))return 1!==a||!t;r<=l&&n!==s&&f++}return f%2==1},isRect:n,degenerate:r}},l.multitester=function(e){for(var a=[],t=e[0][0][0],n=t,r=e[0][0][1],o=r,i=0;i<e.length;i++){var s=l.tester(e[i]);s.subtract=e[i].subtract,a.push(s),t=Math.min(t,s.xmin),n=Math.max(n,s.xmax),r=Math.min(r,s.ymin),o=Math.max(o,s.ymax)}return{xmin:t,xmax:n,ymin:r,ymax:o,pts:[],contains:function(e,t){for(var n=!1,r=0;r<a.length;r++)a[r].contains(e,t)&&(n=!1===a[r].subtract);return n},isRect:!1,degenerate:!1}};var c=l.isSegmentBent=function(e,t,n,r){var a,o,i,s=e[t],l=[e[n][0]-s[0],e[n][1]-s[1]],c=f(l,l),u=Math.sqrt(c),d=[-l[1]/u,l[0]/u];for(a=t+1;a<n;a++)if(o=[e[a][0]-s[0],e[a][1]-s[1]],(i=f(o,l))<0||c<i||Math.abs(f(o,d))>r)return!0;return!1};l.filter=function(a,o){var i=[a[0]],s=0,l=0;function e(e){a.push(e);var t=i.length,n=s;i.splice(l+1);for(var r=n+1;r<a.length;r++)(r===a.length-1||c(a,n,r+1,o))&&(i.push(a[r]),i.length<t-2&&(s=r,l=i.length-1),n=r)}1<a.length&&e(a.pop());return{addPt:e,raw:a,filtered:i}}},{"../constants/numerical":137,"./matrix":162}],169:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){var n,r=t.toString();for(n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===r)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],170:[function(e,t,n){"use strict";var o=e("../lib"),s=e("../plot_api/plot_config");var r={add:function(e,t,n,r,a){var o,i;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},i=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(i,e.undoQueue.queue.length-i,o),e.undoQueue.index+=1):o=e.undoQueue.queue[i-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(a)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.undo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.redo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],a=0;a<t.length;a++)n=t[a],r[a]=n===e?n:"object"==typeof n?Array.isArray(n)?o.extendDeep([],n):o.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":156,"../plot_api/plot_config":189}],171:[function(e,t,n){"use strict";n.counter=function(e,t,n){var r=(t||"")+(n?"":"$");return"xy"===e?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+r)}},{}],172:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(a))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],173:[function(e,t,n){"use strict";var l=e("./is_array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var a=n[r],o=t[r];if(o!==a)if("_"===r.charAt(0)||"function"==typeof a){if(r in t)continue;t[r]=a}else if(l(a)&&l(o)&&c(a[0])){if("customdata"===r||"ids"===r)continue;for(var i=Math.min(a.length,o.length),s=0;s<i;s++)o[s]!==a[s]&&c(a[s])&&c(o[s])&&e(o[s],a[s])}else c(a)&&c(o)&&(e(o,a),Object.keys(o).length||delete t[r])}}},{"./is_array":157,"./is_plain_object":158}],174:[function(e,t,s){"use strict";var c=e("fast-isnumeric"),u=e("./loggers");function d(e,t){return e<t}function f(e,t){return e<=t}function h(e,t){return t<e}function p(e,t){return t<=e}s.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,a,o=0,i=t.length,s=0,l=1<i?(t[i-1]-t[0])/(i-1):1;for(a=0<=l?n?d:f:n?p:h,e+=1e-9*l*(n?-1:1)*(0<=l?1:-1);o<i&&s++<100;)a(t[r=Math.floor((o+i)/2)],e)?o=r+1:i=r;return 90<s&&u.log("Long binary search..."),o-1},s.sorterAsc=function(e,t){return e-t},s.sorterDes=function(e,t){return t-e},s.distinctVals=function(e){var t=e.slice();t.sort(s.sorterAsc);for(var n=t.length-1,r=t[n]-t[0]||1,a=r/(n||1)/1e4,o=[t[0]],i=0;i<n;i++)t[i+1]>t[i]+a&&(r=Math.min(r,t[i+1]-t[i]),o.push(t[i+1]));return{vals:o,minDiff:r}},s.roundUp=function(e,t,n){for(var r,a=0,o=t.length-1,i=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;a<o&&i++<100;)t[r=c((a+o)/2)]<=e?a=r+s:o=r-l;return t[a]}},{"./loggers":161,"fast-isnumeric":4}],175:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],176:[function(e,t,i){"use strict";var s=e("fast-isnumeric"),l=e("./is_array").isArrayOrTypedArray;i.aggNums=function(e,t,n,r){var a,o;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(o=new Array(r),a=0;a<r;a++)o[a]=i.aggNums(e,t,n[a]);n=o}for(a=0;a<r;a++)s(t)?s(n[a])&&(t=e(+t,+n[a])):t=n[a];return t},i.len=function(e){return i.aggNums(function(e){return e+1},0,e)},i.mean=function(e,t){return t||(t=i.len(e)),i.aggNums(function(e,t){return e+t},0,e)/t},i.variance=function(e,t,n){return t||(t=i.len(e)),s(n)||(n=i.mean(e,t)),i.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},i.stdev=function(e,t,n){return Math.sqrt(i.variance(e,t,n))},i.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./is_array":157,"fast-isnumeric":4}],177:[function(a,e,o){(function(e){"use strict";var w="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,k=a("../lib"),M=a("../constants/xmlns_namespaces"),t=a("../constants/string_mappings"),T=a("../constants/alignment").LINE_SPACING;function v(e,t){return e.node().getBoundingClientRect()[t]}var n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;o.convertToTspans=function(f,e,h){var p=f.text(),i=!f.attr("data-notex")&&"undefined"!=typeof MathJax&&p.match(n),g=w.select(f.node().parentNode);if(!g.empty()){var y=f.attr("class")?f.attr("class").split(" ")[0]:"text";return y+="-math",g.selectAll("svg."+y).remove(),g.selectAll("g."+y+"-group").remove(),f.style("display",null).attr({"data-unformatted":p,"data-math":"N"}),i?(e&&e._promises||[]).push(new Promise(function(u){f.style("display","none");var n,e,r,t,a,d=parseInt(f.node().style.fontSize,10),o={fontSize:d};n=i[2],e=o,r=function(e,t,n){g.selectAll("svg."+y).remove(),g.selectAll("g."+y+"-group").remove();var r=e&&e.select("svg");if(!r||!r.node())return m(),void u();var a=g.append("g").classed(y+"-group",!0).attr({"pointer-events":"none","data-unformatted":p,"data-math":"Y"});a.node().appendChild(r.node()),t&&t.node()&&r.node().insertBefore(t.node().cloneNode(!0),r.node().firstChild),r.attr({class:y,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var o=f.node().style.fill||"black";r.select("g").attr({fill:o,stroke:o});var i=v(r,"width"),s=v(r,"height"),l=+f.attr("x")-i*{start:0,middle:.5,end:1}[f.attr("text-anchor")||"start"],c=-(d||v(f,"height"))/4;"y"===y[0]?(a.attr({transform:"rotate("+[-90,+f.attr("x"),+f.attr("y")]+") translate("+[-i/2,c-s/2]+")"}),r.attr({x:+f.attr("x"),y:+f.attr("y")})):"l"===y[0]?r.attr({x:f.attr("x"),y:c-s/2}):"a"===y[0]?r.attr({x:0,y:c}):r.attr({x:l,y:+f.attr("y")+c-s/2}),h&&h.call(f,a),u(a)},t="math-output-"+k.randstr([],64),a=w.select("body").append("div").attr({id:t}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(n.replace(s,"\\lt ").replace(l,"\\gt ")),MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.node()],function(){var e=w.select("body").select("#MathJax_SVG_glyphs");if(a.select(".MathJax_SVG").empty()||!a.select("svg").node())k.log("There was an error in the tex syntax.",n),r();else{var t=a.select("svg").node().getBoundingClientRect();r(a.select(".MathJax_SVG"),e,t)}a.remove()})})):m(),f}function m(){g.empty()||(y=f.attr("class")+"-math",g.select("svg."+y).remove()),f.text("").style("white-space","pre"),function(r,n){n=(e=n,function(e,t){if(!e)return"";for(var n=0;n<t.length;n++){var r=t[n];e=e.replace(r.regExp,r.sub)}return e}(e,O)).replace(j," ");var e;var c,t=!1,u=[],a=-1;function o(){a++;var e=document.createElementNS(M.svg,"tspan");w.select(e).attr({class:"line",dy:a*T+"em"}),r.appendChild(e);var t=u;if(u=[{node:c=e}],1<t.length)for(var n=1;n<t.length;n++)i(t[n])}function i(e){var t,n=e.type,r={};if("a"===n){t="a";var a=e.target,o=e.href,i=e.popup;o&&(r={"xlink:xlink:show":"_blank"===a||"_"!==a.charAt(0)?"new":"replace",target:a,"xlink:xlink:href":o},i&&(r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+i+'");return false;'))}else t="tspan";e.style&&(r.style=e.style);var s=document.createElementNS(M.svg,t);if("sup"===n||"sub"===n){d(c,C),c.appendChild(s);var l=document.createElementNS(M.svg,"tspan");d(l,C),w.select(l).attr("dy",L[n]),r.dy=S[n],c.appendChild(s),c.appendChild(l)}else c.appendChild(s);w.select(s).attr(r),c=e.node=s,u.push(e)}function d(e,t){e.appendChild(document.createTextNode(t))}function s(e){if(1!==u.length){var t=u.pop();e!==t.type&&k.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),c=u[u.length-1].node}else k.log("Ignoring unexpected end tag </"+e+">.",n)}I.test(n)?o():u=[{node:c=r}];for(var l=n.split(P),f=0;f<l.length;f++){var h=l[f],p=h.match(D),g=p&&p[2].toLowerCase(),y=A[g];if("br"===g)o();else if(void 0===y)d(c,h);else if(p[1])s(g);else{var m=p[4],v={type:g},x=B(m,E);if(x?(x=x.replace(q,"$1 fill:"),y&&(x+=";"+y)):y&&(x=y),x&&(v.style=x),"a"===g){t=!0;var b=B(m,R);if(b){var _=document.createElement("a");_.href=b,-1!==z.indexOf(_.protocol)&&(v.href=encodeURI(b),v.target=B(m,N)||"_blank",v.popup=B(m,F))}}i(v)}}return t}(f.node(),p)&&f.style("pointer-events","all"),o.positionText(f),h&&h.call(f)}};var s=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;var A={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},S={sub:"0.3em",sup:"-0.6em"},L={sub:"-0.21em",sup:"0.42em"},C="​",z=["http:","https:","mailto:","",void 0,":"],r=new RegExp("</?("+Object.keys(A).join("|")+")( [^>]*)?/?>","g"),O=Object.keys(t.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:t.entityToUnicode[e]}}),j=/(\r\n?|\n)/g,P=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,I=/<br(\s+.*)?>/i,E=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,R=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,N=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function B(e,t){if(!e)return null;var n=e.match(t);return n&&(n[3]||n[4])}var q=/(^|;)\s*color:/;function f(e,t,n){var r,a,o,i=n.horizontalAlign,s=n.verticalAlign||"top",l=e.node().getBoundingClientRect(),c=t.node().getBoundingClientRect();return a="bottom"===s?function(){return l.bottom-r.height}:"middle"===s?function(){return l.top+(l.height-r.height)/2}:function(){return l.top},o="right"===i?function(){return l.right-r.width}:"center"===i?function(){return l.left+(l.width-r.width)/2}:function(){return l.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:a()-c.top+"px",left:o()-c.left+"px","z-index":1e3}),this}}o.plainText=function(e){return(e||"").replace(r," ")},o.lineCount=function(e){return e.selectAll("tspan.line").size()||1},o.positionText=function(e,a,o){return e.each(function(){var n=w.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",a),r=e("y",o);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})},o.makeEditable=function(i,s){var l=s.gd,e=s.delegate,c=w.dispatch("edit","input","cancel"),u=e||i;if(i.style({"pointer-events":e?"none":"all"}),1!==i.size())throw new Error("boo");function t(){var e,t,n,r;e=w.select(l).select(".svg-container"),t=e.append("div"),n=i.node().style,r=parseFloat(n.fontSize||12),t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:s.fill||n.fill||"black",opacity:1,"background-color":s.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(s.text||i.attr("data-unformatted")).call(f(i,e,s)).on("blur",function(){l._editing=!1,i.text(this.textContent).style({opacity:1});var e,t=w.select(this).attr("class");(e=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]")&&w.select(i.node().parentNode).select(e).style({opacity:0});var n=this.textContent;w.select(this).transition().duration(0).remove(),w.select(document).on("mouseup",null),c.edit.call(i,n)}).on("focus",function(){var e=this;l._editing=!0,w.select(document).on("mouseup",function(){if(w.event.target===e)return!1;document.activeElement===t.node()&&t.node().blur()})}).on("keyup",function(){27===w.event.which?(l._editing=!1,i.style({opacity:1}),w.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),c.cancel.call(i,this.textContent)):(c.input.call(i,this.textContent),w.select(this).call(f(i,e,s)))}).on("keydown",function(){13===w.event.which&&this.blur()}).call(d),i.style({opacity:0});var a,o=u.attr("class");(a=o?"."+o.split(" ")[0]+"-math-group":"[class*=-math-group]")&&w.select(i.node().parentNode).select(a).style({opacity:0})}function d(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}return s.immediate?t():u.on("click",t),w.rebind(i,c,"on")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants/alignment":135,"../constants/string_mappings":138,"../constants/xmlns_namespaces":139,"../lib":156}],178:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],a=Date.now();if(!r){for(var o in s)s[o].ts<a-6e4&&delete s[o];r=s[e]={ts:0,timer:null}}function i(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),a>r.ts+t?i():r.timer=setTimeout(function(){i(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],179:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},{"fast-isnumeric":4}],180:[function(e,t,n){"use strict";var r=t.exports={},a=e("../plots/geo/constants").locationmodeToLayer,o=e("topojson-client").feature;r.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(e,t){return e+t+".json"},r.getTopojsonFeatures=function(e,t){var n=a[e.locationmode],r=t.objects[n];return o(t,r).features}},{"../plots/geo/constants":228,"topojson-client":338}],181:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],182:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],183:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e){for(var t,n,r=l.layoutArrayContainers,a=l.layoutArrayRegexes,o=e.split("[")[0],i=0;i<a.length;i++)if((n=e.match(a[i]))&&0===n.index){t=n[0];break}if(t||(t=r[r.indexOf(o)]),!t)return!1;var s=e.substr(t.length);return s?!!(n=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":248}],184:[function(e,t,n){"use strict";var r=e("../lib"),i=r.extendFlat,s=r.isPlainObject,a={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`","to force it to be regenerated","*calcIfAutorange* does a full `Plotly.plot`, but only clears and redoes `gd.calcdata`","if there is at least one autoranged axis.","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.","*style* only calls `module.style` for all trace modules and redraws the legend.","*colorbars* only redraws colorbars."].join(" ")},o={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","margins","layoutstyle","modebar","camera","arraydraw"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`","to force it to be regenerated","*calcIfAutorange* does a full `Plotly.plot`, but only clears and redoes `gd.calcdata`","if there is at least one autoranged axis.","*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*margins* recomputes ticklabel automargins.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed."].join(" ")},l=a.flags.slice().concat(["clearCalc","fullReplot"]),c=o.flags.slice().concat("layoutReplot");function u(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function d(e,t,n){var r=i({},e);for(var a in r){var o=r[a];s(o)&&(r[a]=f(o,t,n,a))}return"from-root"===n&&(r.editType=t),r}function f(e,t,n,r){if(e.valType){var a=i({},e);if(a.editType=t,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)a.items[o]=f(e.items[o],t,"from-root")}return a}return d(e,t,"_"===r.charAt(0)?"nested":"from-root")}t.exports={traces:a,layout:o,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),a=0;a<r.length;a++)e[r[a]]=!0},overrideAll:d}},{"../lib":156}],185:[function(e,t,v){"use strict";var c=e("fast-isnumeric"),b=e("gl-mat4/fromQuat"),x=e("../registry"),_=e("../lib"),w=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),k=n.cleanId,u=n.getFromTrace,M=e("../components/color");function T(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=k(n,r))}function A(e){var t="middle",n="center";return-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right"),t+" "+n}function S(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}v.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&_.log("Clearing previous rejected promises from queue."),e._promises=[]},v.cleanLayout=function(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var r=(w.subplotsRegistry.cartesian||{}).attrRegex,a=(w.subplotsRegistry.gl3d||{}).attrRegex,o=Object.keys(e);for(t=0;t<o.length;t++){var i=o[t];if(r&&r.test(i)){var s=e[i];s.anchor&&"free"!==s.anchor&&(s.anchor=k(s.anchor)),s.overlaying&&(s.overlaying=k(s.overlaying)),s.type||(s.isdate?s.type="date":s.islog?s.type="log":!1===s.isdate&&!1===s.islog&&(s.type="linear")),"withzero"!==s.autorange&&"tozero"!==s.autorange||(s.autorange=!0,s.rangemode="tozero"),delete s.islog,delete s.isdate,delete s.categories,S(s,"domain")&&delete s.domain,void 0!==s.autotick&&(void 0===s.tickmode&&(s.tickmode=s.autotick?"auto":"linear"),delete s.autotick)}else if(a&&a.test(i)){var l=e[i],c=l.cameraposition;if(Array.isArray(c)&&4===c[0].length){var u=c[0],d=c[1],f=c[2],h=b([],u),p=[];for(n=0;n<3;++n)p[n]=d[n]+f*h[2+4*n];l.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:d[0],y:d[1],z:d[2]},up:{x:h[1],y:h[5],z:h[9]}},delete l.cameraposition}}}var g=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<g;t++){var y=e.annotations[t];_.isPlainObject(y)&&(y.ref&&("paper"===y.ref?(y.xref="paper",y.yref="paper"):"data"===y.ref&&(y.xref="x",y.yref="y"),delete y.ref),T(y,"xref"),T(y,"yref"))}var m=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<m;t++){var v=e.shapes[t];_.isPlainObject(v)&&(T(v,"xref"),T(v,"yref"))}var x=e.legend;return x&&(3<x.x?(x.x=1.02,x.xanchor="left"):x.x<-2&&(x.x=-.02,x.xanchor="right"),3<x.y?(x.y=1.02,x.yanchor="bottom"):x.y<-2&&(x.y=-.02,x.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),M.clean(e),e},v.cleanData=function(e,t){for(var n=[],r=e.concat(Array.isArray(t)?t:[]).filter(function(e){return"uid"in e}).map(function(e){return e.uid}),a=0;a<e.length;a++){var o,i=e[a];if(!("uid"in i)||-1!==n.indexOf(i.uid)){var s;for(o=0;o<100&&(s=_.randstr(r),-1!==n.indexOf(s));o++);i.uid=_.randstr(r),r.push(i.uid)}if(n.push(i.uid),"histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=M.defaults,c=i.error_y.color||(x.traceIs(i,"bar")?M.defaultLine:l[a%l.length]);i.error_y.color=M.addOpacity(M.rgb(c),M.opacity(c)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!x.traceIs(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",v.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&v.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=k(i.xaxis,"x")),i.yaxis&&(i.yaxis=k(i.yaxis,"y")),x.traceIs(i,"gl3d")&&i.scene&&(i.scene=w.subplotsRegistry.gl3d.cleanId(i.scene)),!x.traceIs(i,"pie")&&!x.traceIs(i,"bar"))if(Array.isArray(i.textposition))for(o=0;o<i.textposition.length;o++)i.textposition[o]=A(i.textposition[o]);else i.textposition&&(i.textposition=A(i.textposition));if(x.traceIs(i,"2dMap")&&("YIGnBu"===i.colorscale&&(i.colorscale="YlGnBu"),"YIOrRd"===i.colorscale&&(i.colorscale="YlOrRd")),x.traceIs(i,"markerColorscale")&&i.marker){var u=i.marker;"YIGnBu"===u.colorscale&&(u.colorscale="YlGnBu"),"YIOrRd"===u.colorscale&&(u.colorscale="YlOrRd")}if("surface"===i.type&&_.isPlainObject(i.contours)){var d=["x","y","z"];for(o=0;o<d.length;o++){var f=i.contours[d[o]];_.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(Array.isArray(i.transforms)){var h=i.transforms;for(o=0;o<h.length;o++){var p=h[o];if(_.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var g=p.styles,y=Object.keys(g);p.styles=[];for(var m=0;m<y.length;m++)p.styles.push({target:y[m],value:g[y[m]]})}}}}S(i,"line")&&delete i.line,"marker"in i&&(S(i.marker,"line")&&delete i.marker.line,S(i,"marker")&&delete i.marker),M.clean(i)}},v.swapXYData=function(e){var t;if(_.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);_.swapAttrs(e,["error_?.copy_ystyle"]),r&&_.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)"x"===a[t]?a[t]="y":"y"===a[t]&&(a[t]="x");e.hoverinfo=a.join("+")}},v.coerceTraceIndices=function(e,t){return c(t)?[t]:Array.isArray(t)&&t.length?t:e.data.map(function(e,t){return t})},v.manageArrayContainers=function(e,t,n){var r=e.obj,a=e.parts,o=a.length,i=a[o-1],s=c(i);if(s&&null===t){var l=a.slice(0,o-1).join(".");_.nestedProperty(r,l).get().splice(i,1)}else s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t)};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(r);if(0<t)return e.substr(0,t)}v.hasParent=function(e,t){for(var n=a(t);n;){if(n in e)return!0;n=a(n)}return!1};var d=["x","y","z"];v.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var a=e._fullData[r],o=0;o<3;o++){var i=u(e,a,d[o]);if(i&&"log"!==i.type){var s=i._name,l=i._id.substr(1);if("scene"===l.substr(0,5)){if(void 0!==n[l])continue;s=l+"."+s}var c=s+".type";void 0===n[s]&&void 0===n[c]&&_.nestedProperty(e.layout,c).set(null)}}},v.clearAxisAutomargins=function(e){for(var t=Object.keys(e._fullLayout._pushmargin),n=0;n<t.length;n++)-1!==t[n].indexOf("automargin")&&delete e._fullLayout._pushmargin[t[n]]}},{"../components/color":35,"../lib":156,"../plots/cartesian/axis_ids":202,"../plots/plots":240,"../registry":248,"fast-isnumeric":4,"gl-mat4/fromQuat":5}],186:[function(e,t,n){"use strict";var r=e("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download")},{"../snapshot/download":250,"./plot_api":188,"./to_image":192,"./validate":193}],187:[function(e,t,n){"use strict";var S=e("../lib/nested_property"),r=e("../lib/is_plain_object"),L=e("../lib/noop"),C=e("../lib/loggers"),z=e("../lib/search").sorterAsc,O=e("../registry");n.containerArrayMatch=e("./container_array_match");var j=n.isAddVal=function(e){return"add"===e||r(e)},P=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r){var a=t.astr,o=O.getComponentMethod(a,"supplyLayoutDefaults"),i=O.getComponentMethod(a,"draw"),s=O.getComponentMethod(a,"drawOne"),l=r.replot||r.recalc||o===L||i===L,c=e.layout,u=e._fullLayout;if(n[""]){1<Object.keys(n).length&&C.warn("Full array edits are incompatible with other edits",a);var d=n[""][""];if(P(d))t.set(null);else{if(!Array.isArray(d))return C.warn("Unrecognized full array edit value",a,d),!0;t.set(d)}return!l&&(o(c,u),i(e),!0)}var f,h,p,g,y,m,v,x=Object.keys(n).map(Number).sort(z),b=t.get(),_=b||[],w=S(u,a).get(),k=[],M=-1,T=_.length;for(f=0;f<x.length;f++)if(g=n[p=x[f]],y=Object.keys(g),m=g[""],v=j(m),p<0||p>_.length-(v?0:1))C.warn("index out of range",a,p);else if(void 0!==m)1<y.length&&C.warn("Insertion & removal are incompatible with edits to the same index.",a,p),P(m)?k.push(p):v?("add"===m&&(m={}),_.splice(p,0,m),w&&w.splice(p,0,{})):C.warn("Unrecognized full object edit value",a,p,m),-1===M&&(M=p);else for(h=0;h<y.length;h++)S(_[p],y[h]).set(g[y[h]]);for(f=k.length-1;0<=f;f--)_.splice(k[f],1),w&&w.splice(k[f],1);if(_.length?b||t.set(_):t.set(null),l)return!1;if(o(c,u),s!==L){var A;if(-1===M)A=x;else{for(T=Math.max(_.length,T),A=[],f=0;f<x.length&&!(M<=(p=x[f]));f++)A.push(p);for(f=M;f<T;f++)A.push(f)}for(f=0;f<A.length;f++)s(e,A[f])}else i(e);return!0}},{"../lib/is_plain_object":158,"../lib/loggers":161,"../lib/nested_property":164,"../lib/noop":165,"../lib/search":174,"../registry":248,"./container_array_match":183}],188:[function(r,e,I){(function(e){"use strict";var y="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,h=r("fast-isnumeric"),s=r("has-hover"),Q=r("../lib"),m=r("../lib/events"),k=r("../lib/queue"),$=r("../registry"),K=r("./plot_schema"),D=r("../plots/plots"),v=r("../plots/polar/legacy"),x=r("../plots/cartesian/graph_interact"),ee=r("../plots/cartesian/axes"),b=r("../components/drawing"),n=r("../components/color"),i=r("../constants/xmlns_namespaces"),_=r("../lib/svg_text_utils"),l=r("./plot_config"),te=r("./manage_arrays"),ne=r("./helpers"),w=r("./subroutines"),re=r("./edit_types"),ae=r("../plots/cartesian/constants"),t=r("../plots/cartesian/constraints"),M=t.enforce,T=t.clean,A=r("../plots/cartesian/autorange").doAutoRange,S=0;function c(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){Q.error(e)}}function u(e,t){c(e,n.combine(t,"white"))}function L(e,t){e._context||(e._context=Q.extendDeep({},l));var n,r,a,o=e._context;if(t){for(r=Object.keys(t),n=0;n<r.length;n++)"editable"!==(a=r[n])&&"edits"!==a&&a in o&&("setBackground"===a&&"opaque"===t[a]?o[a]=u:o[a]=t[a]);t.plot3dPixelRatio&&!o.plotGlPixelRatio&&(o.plotGlPixelRatio=o.plot3dPixelRatio);var i=t.editable;if(void 0!==i)for(o.editable=i,r=Object.keys(o.edits),n=0;n<r.length;n++)o.edits[r[n]]=i;if(t.edits)for(r=Object.keys(t.edits),n=0;n<r.length;n++)(a=r[n])in o.edits&&(o.edits[a]=t.edits[a])}o.staticPlot&&(o.editable=!1,o.edits={},o.autosizable=!1,o.scrollZoom=!1,o.doubleClick=!1,o.showTips=!1,o.showLink=!1,o.displayModeBar=!1),"hover"!==o.displayModeBar||s||(o.displayModeBar=!0),"transparent"!==o.setBackground&&"function"==typeof o.setBackground||(o.setBackground=c)}function p(e,t){var n,r,a=t+1,o=[];for(n=0;n<e.length;n++)(r=e[n])<0?o.push(a+r):o.push(r);return o}function f(e,t,n){var r,a;for(r=0;r<t.length;r++){if((a=t[r])!==parseInt(a,10))throw new Error("all values in "+n+" must be integers");if(a>=e.data.length||a<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(a,r+1)||0<=a&&-1<t.indexOf(-e.data.length+a)||a<0&&-1<t.indexOf(e.data.length+a))throw new Error("each index in "+n+" must be unique.")}}function g(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),f(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&f(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function d(e,t,n,r,a){!function(e,t,n,r){var a=Q.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!Q.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in f(e,n,"indices"),t){if(!Array.isArray(t[o])||t[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(a&&(!(o in r)||!Array.isArray(r[o])||r[o].length!==t[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var o=function(e,t,n,r){var a,o,i,s,l,c=Q.isPlainObject(r),u=[];for(var d in Array.isArray(n)||(n=[n]),n=p(n,e.data.length-1),t)for(var f=0;f<n.length;f++){if(a=e.data[n[f]],o=(i=Q.nestedProperty(a,d)).get(),s=t[d][f],!Q.isArrayOrTypedArray(s))throw new Error("attribute: "+d+" index: "+f+" must be an array");if(!Q.isArrayOrTypedArray(o))throw new Error("cannot extend missing or non-array attribute: "+d);if(o.constructor!==s.constructor)throw new Error("cannot extend array with an array of a different type: "+d);l=c?r[d][f]:r,h(l)||(l=-1),u.push({prop:i,target:o,insert:s,maxp:Math.floor(l)})}return u}(e,t,n,r),i={},s={},l=0;l<o.length;l++){var c=o[l].prop,u=o[l].maxp,d=a(o[l].target,o[l].insert,u);c.set(d[0]),Array.isArray(i[c.astr])||(i[c.astr]=[]),i[c.astr].push(d[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(o[l].target.length)}return{update:i,maxPoints:s}}function C(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function oe(e){return void 0===e?null:e}function z(a,o,i){var e,n,t=a._fullLayout,r=a._fullData,s=a.data,l=re.traceFlags(),c={},u={};function d(){return i.map(function(){})}function f(e){var t=ee.id2name(e);-1===n.indexOf(t)&&n.push(t)}function h(e){return"LAYOUT"+e+".autorange"}function p(e){return"LAYOUT"+e+".range"}function g(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){g(e,t,n)}):e in o||ne.hasParent(o,e)||(r="LAYOUT"===e.substr(0,6)?Q.nestedProperty(a.layout,e.replace("LAYOUT","")):Q.nestedProperty(s[i[n]],e),e in u||(u[e]=d()),void 0===u[e][n]&&(u[e][n]=oe(r.get())),void 0!==t&&r.set(t))}for(var y in o){if(ne.hasParent(o,y))throw new Error("cannot set "+y+"and a parent attribute simultaneously");var m,v,x,b,_,w,k=o[y];if(c[y]=k,"LAYOUT"!==y.substr(0,6)){for(u[y]=d(),e=0;e<i.length;e++)if(m=s[i[e]],v=r[i[e]],b=(x=Q.nestedProperty(m,y)).get(),void 0!==(_=Array.isArray(k)?k[e%k.length]:k)){if((w=K.getTraceValObject(v,x.parts))&&w.impliedEdits&&null!==_)for(var M in w.impliedEdits)g(Q.relativeAttr(y,M),w.impliedEdits[M],e);else if("colorbar.thicknessmode"===y&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&v.colorbar){var T=-1!==["top","bottom"].indexOf(v.colorbar.orient)?t.height-t.margin.t-t.margin.b:t.width-t.margin.l-t.margin.r;g("colorbar.thickness",v.colorbar.thickness*("fraction"===_?1/T:T),e)}else if("colorbar.lenmode"===y&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&v.colorbar){var A=-1!==["top","bottom"].indexOf(v.colorbar.orient)?t.width-t.margin.l-t.margin.r:t.height-t.margin.t-t.margin.b;g("colorbar.len",v.colorbar.len*("fraction"===_?1/A:A),e)}else"colorbar.tick0"!==y&&"colorbar.dtick"!==y||g("colorbar.tickmode","linear",e);if("type"===y&&"pie"===_!=("pie"===b)){var S="x",L="y";"bar"!==_&&"bar"!==b||"h"!==m.orientation||(S="y",L="x"),Q.swapAttrs(m,["?","?src"],"labels",S),Q.swapAttrs(m,["d?","?0"],"label",S),Q.swapAttrs(m,["?","?src"],"values",L),"pie"===b?(Q.nestedProperty(m,"marker.color").set(Q.nestedProperty(m,"marker.colors").get()),t._pielayer.selectAll("g.trace").remove()):$.traceIs(m,"cartesian")&&Q.nestedProperty(m,"marker.colors").set(Q.nestedProperty(m,"marker.color").get())}u[y][e]=oe(b);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(y)){if("orientation"===y){x.set(_);var C=m.x&&!m.y?"h":"v";if((x.get()||C)===v.orientation)continue}else"orientationaxes"===y&&(m.orientation={v:"h",h:"v"}[v.orientation]);ne.swapXYData(m),l.calc=l.clearAxisTypes=!0}else-1!==D.dataArrayContainers.indexOf(x.parts[0])?(ne.manageArrayContainers(x,_,u),l.calc=!0):(w?w.arrayOk&&(Q.isArrayOrTypedArray(_)||Q.isArrayOrTypedArray(b))?l.calc=!0:re.update(l,w):l.calc=!0,x.set(_))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(y)&&ee.swap(a,i),"orientationaxes"===y){var z=Q.nestedProperty(a.layout,"hovermode");"x"===z.get()?z.set("y"):"y"===z.get()&&z.set("x")}if(-1!==["orientation","type"].indexOf(y)){for(n=[],e=0;e<i.length;e++){var O=s[i[e]];$.traceIs(O,"cartesian")&&(f(O.xaxis||"x"),f(O.yaxis||"y"),"type"===y&&g(["autobinx","autobiny"],!0,e))}g(n.map(h),!0,0),g(n.map(p),[0,1],0)}}else x=Q.nestedProperty(a.layout,y.replace("LAYOUT","")),u[y]=[oe(x.get())],x.set(Array.isArray(k)?k[0]:k),l.calc=!0}var j=!1,P=ee.list(a);for(e=0;e<P.length;e++)if(P[e].autorange){j=!0;break}return(l.calc||l.calcIfAutorange&&j)&&(l.clearCalc=!0),(l.calc||l.plot||l.calcIfAutorange)&&(l.fullReplot=!0),{flags:l,undoit:u,redoit:c,traces:i,eventData:Q.extendDeepNoArrays([],[c,i])}}function O(e,r){var t,n,a,o=e.layout,i=e._fullLayout,s=Object.keys(r),l=ee.list(e),c={};for(n=0;n<s.length;n++)if(0===s[n].indexOf("allaxes")){for(a=0;a<l.length;a++){var u=l[a]._id.substr(1),d=-1!==u.indexOf("scene")?u+".":"",f=s[n].replace("allaxes",d+l[a]._name);r[f]||(r[f]=r[s[n]])}delete r[s[n]]}var h=re.layoutFlags(),p={},g={};function y(e,t){if(Array.isArray(e))e.forEach(function(e){y(e,t)});else if(!(e in r||ne.hasParent(r,e))){var n=Q.nestedProperty(o,e);e in g||(g[e]=oe(n.get())),void 0!==t&&n.set(t)}}var m,v={};function x(e){var t=ee.name2id(e.split(".")[0]);return v[t]=1,t}for(var b in r){if(ne.hasParent(r,b))throw new Error("cannot set "+b+"and a parent attribute simultaneously");for(var _=Q.nestedProperty(o,b),w=r[b],k=_.parts.length,M=k-1;0<M&&"string"!=typeof _.parts[k-1];)M--;var T=_.parts[M],A=_.parts[M-1]+"."+T,S=_.parts.slice(0,M).join("."),L=Q.nestedProperty(e.layout,S).get(),C=Q.nestedProperty(i,S).get(),z=_.get();if(void 0!==w){p[b]=w,g[b]="reverse"===T?w:oe(z);var O=K.getLayoutValObject(i,_.parts);if(O&&O.impliedEdits&&null!==w)for(var j in O.impliedEdits)y(Q.relativeAttr(b,j),O.impliedEdits[j]);if(-1!==["width","height"].indexOf(b)&&null===w)i[b]=e._initialAutoSize[b];else if(A.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))x(A),Q.nestedProperty(i,S+"._inputRange").set(null);else if(A.match(/^[xyz]axis[0-9]*\.autorange$/)){x(A),Q.nestedProperty(i,S+"._inputRange").set(null);var P=Q.nestedProperty(i,S).get();P._inputDomain&&(P._input.domain=P._inputDomain.slice())}else A.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&Q.nestedProperty(i,S+"._inputDomain").set(null);if("type"===T){var D=L,I="linear"===C.type&&"log"===w,E="log"===C.type&&"linear"===w;if(I||E){if(D&&D.range)if(C.autorange)I&&(D.range=D.range[1]>D.range[0]?[1,2]:[2,1]);else{var R=D.range[0],N=D.range[1];I?(R<=0&&N<=0&&y(S+".autorange",!0),R<=0?R=N/1e6:N<=0&&(N=R/1e6),y(S+".range[0]",Math.log(R)/Math.LN10),y(S+".range[1]",Math.log(N)/Math.LN10)):(y(S+".range[0]",Math.pow(10,R)),y(S+".range[1]",Math.pow(10,N)))}else y(S+".autorange",!0);Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[_.parts[0]]&&"radialaxis"===_.parts[1]&&delete i[_.parts[0]]._subplot.viewInitial["radialaxis.range"],$.getComponentMethod("annotations","convertCoords")(e,C,w,y),$.getComponentMethod("images","convertCoords")(e,C,w,y)}else y(S+".autorange",!0),y(S+".range",null);Q.nestedProperty(i,S+"._inputRange").set(null)}else if(T.match(ae.AX_NAME_PATTERN)){var F=Q.nestedProperty(i,b).get(),B=(w||{}).type;B&&"-"!==B||(B="linear"),$.getComponentMethod("annotations","convertCoords")(e,F,B,y),$.getComponentMethod("images","convertCoords")(e,F,B,y)}var q=te.containerArrayMatch(b);if(q){t=q.array,n=q.index;var H=q.property,V=(Q.nestedProperty(o,t)||[])[n]||{},U=V,G=O||{editType:"calc"},Y=-1!==G.editType.indexOf("calcIfAutorange");""===n?(Y?h.calc=!0:re.update(h,G),Y=!1):""===H&&(U=w,te.isAddVal(w)?g[b]=null:te.isRemoveVal(w)?U=g[b]=V:Q.warn("unrecognized full object value",r)),Y&&(se(e,U,"x")||se(e,U,"y"))?h.calc=!0:re.update(h,G),c[t]||(c[t]={});var X=c[t][n];X||(X=c[t][n]={}),X[H]=w,delete r[b]}else"reverse"===T?(L.range?L.range.reverse():(y(S+".autorange",!0),L.range=[1,0]),C.autorange?h.calc=!0:h.plot=!0):(i._has("scatter-like")&&i._has("regl")&&"dragmode"===b&&("lasso"===w||"select"===w)&&"lasso"!==z&&"select"!==z?h.plot=!0:O?re.update(h,O):h.calc=!0,_.set(w))}}for(t in c){te.applyContainerArrayChanges(e,Q.nestedProperty(o,t),c[t],h)||(h.plot=!0)}var Z=i._axisConstraintGroups||[];for(m in v)for(n=0;n<Z.length;n++){var W=Z[n];if(W[m])for(var J in h.calc=!0,W)v[J]||(ee.getFromId(e,J)._constraintShrinkable=!0)}return(ie(e)||r.height||r.width)&&(h.plot=!0),(h.plot||h.calc)&&(h.layoutReplot=!0),{flags:h,undoit:g,redoit:p,eventData:Q.extendDeep({},p)}}function ie(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&D.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function se(e,t,n){if(!Q.isPlainObject(t))return!1;var r=t[n+"ref"]||n,a=ee.getFromId(e,r);return a||r.charAt(0)!==n||(a=ee.getFromId(e,n)),(a||{}).autorange}function P(e,t,n,r){var a,o,i=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex,d=r.gd,f=r.autoranged;function h(){var e=a.editType;-1!==e.indexOf("calcIfAutorange")&&(f||void 0===f&&(se(d,t,"x")||se(d,t,"y")))?s.calc=!0:c&&-1!==e.indexOf("arraydraw")?Q.pushUnique(s.arrays[c],u):re.update(s,a)}function p(e){return"data_array"===e.valType||e.arrayOk}var g=t._fullInput,y=e._fullInput;for(o in g&&g!==t&&(t=g),y&&y!==e&&(e=y),e){if(s.calc)return;var m=e[o],v=t[o];if("_"!==o.charAt(0)&&"function"!=typeof m&&m!==v){if("tick0"===o||"dtick"===o){var x=t.tickmode;if("auto"===x||"array"===x||!x)continue}if(("range"!==o||!t.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==t.type)){var b=n.concat(o);if(a=i(b)){var _,w=a.valType,k=p(a),M=Array.isArray(m),T=Array.isArray(v);if(M&&T){var A="_input_"+o,S=e[A],L=t[A];if(Array.isArray(S)&&S===L)continue}if(void 0===v)k&&M?s.calc=!0:h();else if(a._isLinkedToArray){var C=[],z=!1;c||(s.arrays[o]=C);var O=Math.min(m.length,v.length),j=Math.max(m.length,v.length);if(O!==j){if("arraydraw"!==a.editType){h();continue}z=!0}for(_=0;_<O;_++)P(m[_],v[_],b.concat(_),Q.extendFlat({inArray:o,arrayIndex:_},r));if(z)for(_=O;_<j;_++)C.push(_)}else!w&&Q.isPlainObject(m)?P(m,v,b,r):k?M&&T?l&&(s.calc=!0):M!==T?s.calc=!0:h():M&&T&&m.length===v.length&&String(m)===String(v)||h()}}}}for(o in t)if(!(o in e||"_"===o.charAt(0)||"function"==typeof t[o])){if(p(a=i(n.concat(o)))&&Array.isArray(t[o]))return void(s.calc=!0);h()}}function j(e){var t=y.select(e),n=e._fullLayout;if(n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._glcanvas=null,n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var r=[];y.selectAll("defs").each(function(){this.id&&r.push(this.id.split("-")[1])}),n._uid=Q.randstr(r)}n._paperdiv.selectAll(".main-svg").attr(i.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var o=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=o.append("g").classed("imagelayer",!0),n._shapeUpperLayer=o.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}I.plot=function(c,e,t,n){var r;if(c=Q.getGraphDiv(c),m.init(c),Q.isPlainObject(e)){var a=e;e=a.data,t=a.layout,n=a.config,r=a.frames}if(!1===m.triggerHandler(c,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||Q.isPlotDiv(c)||Q.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",c),L(c,n),t||(t={}),y.select(c).classed("js-plotly-plot",!0),b.makeTester(),Array.isArray(c._promises)||(c._promises=[]);var o=0===(c.data||[]).length&&Array.isArray(e);if(Array.isArray(e)&&(ne.cleanData(e,c.data),o?c.data=e:c.data.push.apply(c.data,e),c.empty=!1),c.layout&&!o||(c.layout=ne.cleanLayout(t)),c._dragging&&!c._transitioning)return c._replotPending=!0,Promise.reject();c._replotPending=!1,D.supplyDefaults(c);var u=c._fullLayout,i=u._has("cartesian");if(!u._has("polar")&&e&&e[0]&&e[0].r)return Q.log("Legacy polar charts are deprecated!"),function(t,e,n){var r=y.select(t).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=r.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),e&&(t.data=e);n&&(t.layout=n);v.manager.fillLayout(t),a.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=v.manager.framework(t),t.framework({data:t.data,layout:t.layout},a.node()),t.framework.setUndoPoint();var o=t.framework.svg(),i=1,s=t._fullLayout.title;""!==s&&s||(i=0);var l=function(){this.call(_.convertToTspans,t)},c=o.select(".title-group text").call(l);if(t._context.edits.titleText){var u=Q._(t,"Click to enter Plot title");s&&s!==u||(i=.2,c.attr({"data-unformatted":u}).text(u).style({opacity:i}).on("mouseover.opacity",function(){y.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){y.select(this).transition().duration(1e3).style("opacity",0)}));var d=function(){this.call(_.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:e}}),this.text(e).call(l),this.call(d)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(l)})};c.call(d)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),D.addLinks(t),Promise.resolve()}(c,e,t);u._replotting=!0,o&&j(c),c.framework!==j&&(c.framework=j)(c),b.initGradients(c),o&&ee.saveShowSpikeInitial(c);var s=!c.calcdata||c.calcdata.length!==(c._fullData||[]).length;s&&D.doCalcdata(c);for(var l=0;l<c.calcdata.length;l++)c.calcdata[l][0].trace=c._fullData[l];var d=JSON.stringify(u._size);function f(){var e,t,n,r=c.calcdata;for($.getComponentMethod("legend","draw")(c),$.getComponentMethod("rangeselector","draw")(c),$.getComponentMethod("sliders","draw")(c),$.getComponentMethod("updatemenus","draw")(c),e=0;e<r.length;e++)!0===(n=(t=r[e])[0].trace).visible&&n._module.colorbar?n._module.colorbar(c,t):D.autoMargin(c,"cb"+n.uid);return D.doAutoMargin(c),D.previousPromises(c)}function h(){if(!c._transitioning){for(var e=ee.list(c,"",!0),t=0;t<e.length;t++){var n=e[t];T(c,n),A(n)}M(c),o&&ee.saveRangeInitial(c)}}var p=[D.previousPromises,function(){if(r)return I.addFrames(c,r)},function(){for(var e=u._basePlotModules,t=0;t<e.length;t++)e[t].drawFramework&&e[t].drawFramework(c);return!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),u._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),u._glcanvas&&u._glcanvas.attr("width",u.width).attr("height",u.height),Q.syncOrAsync([w.layoutStyles],c)},f,function(){if(JSON.stringify(u._size)!==d)return Q.syncOrAsync([f,w.layoutStyles],c)}];i&&p.push(function(){if(s){var e,t,n,r=u._subplots.cartesian,a=u._modules,o=[];for(n=0;n<a.length;n++)Q.pushUnique(o,a[n].setPositions);if(o.length)for(t=0;t<r.length;t++)for(e=u._plots[r[t]],n=0;n<o.length;n++)o[n](c,e);return $.getComponentMethod("errorbars","calc")(c),Q.syncOrAsync([$.getComponentMethod("shapes","calcAutorange"),$.getComponentMethod("annotations","calcAutorange"),h,$.getComponentMethod("rangeslider","calcAutorange")],c)}h()}),p.push(w.layoutStyles),i&&p.push(function(){return ee.doTicks(c,"redraw")}),p.push(function(){var e,t=c.calcdata,n=u._infolayer.selectAll("g.rangeslider-container");for(e=0;e<t.length;e++){var r=t[e][0].trace,a=!0===r.visible,o=r.uid;if(!a||!$.traceIs(r,"2dMap")){var i=".hm"+o+",.contour"+o+",#clip"+o;u._paper.selectAll(i).remove(),n.selectAll(i).remove()}a&&r._module.colorbar||u._infolayer.selectAll(".cb"+o).remove()}var s=u._basePlotModules;for(e=0;e<s.length;e++)s[e].plot(c);var l=u._paper.selectAll(".layer-subplot");return u._shapeSubplotLayers=l.selectAll(".shapelayer"),D.style(c),$.getComponentMethod("shapes","draw")(c),$.getComponentMethod("annotations","draw")(c),D.addLinks(c),u._replotting=!1,D.previousPromises(c)},function(){$.getComponentMethod("shapes","draw")(c),$.getComponentMethod("images","draw")(c),$.getComponentMethod("annotations","draw")(c),$.getComponentMethod("legend","draw")(c),$.getComponentMethod("rangeslider","draw")(c),$.getComponentMethod("rangeselector","draw")(c),$.getComponentMethod("sliders","draw")(c),$.getComponentMethod("updatemenus","draw")(c)},x,D.rehover,D.previousPromises);var g=Q.syncOrAsync(p,c);return g&&g.then||(g=Promise.resolve()),g.then(function(){return c.emit("plotly_afterplot"),c})},I.setPlotConfig=function(e){return Q.extendFlat(l,e)},I.redraw=function(e){if(e=Q.getGraphDiv(e),!Q.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return ne.cleanData(e.data,e.data),ne.cleanLayout(e.layout),e.calcdata=void 0,I.plot(e).then(function(){return e.emit("plotly_redraw"),e})},I.newPlot=function(e,t,n,r){return e=Q.getGraphDiv(e),D.cleanPlot([],{},e._fullData||{},e._fullLayout||{}),D.purge(e),I.plot(e,t,n,r)},I.extendTraces=function e(t,n,r,a){var o=d(t=Q.getGraphDiv(t),n,r,a,function(e,t,n){var r,a;if(Q.isTypedArray(e))if(n<0){var o=new e.constructor(0),i=C(e,t);n<0?(r=i,a=o):(r=o,a=i)}else if(r=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),a.set(e);else if(n<t.length){var s=t.length-n;r.set(t.subarray(s)),a.set(e),a.set(t.subarray(0,s),e.length)}else{var l=n-t.length,c=e.length-l;r.set(e.subarray(c)),r.set(t,l),a.set(e.subarray(0,c))}else r=e.concat(t),a=0<=n&&n<r.length?r.splice(0,r.length-n):[];return[r,a]}),i=I.redraw(t),s=[t,o.update,r,o.maxPoints];return k.add(t,I.prependTraces,s,e,arguments),i},I.prependTraces=function e(t,n,r,a){var o=d(t=Q.getGraphDiv(t),n,r,a,function(e,t,n){var r,a;if(Q.isTypedArray(e))if(n<=0){var o=new e.constructor(0),i=C(t,e);n<0?(r=i,a=o):(r=o,a=i)}else if(r=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),a.set(e);else if(n<t.length){var s=t.length-n;r.set(t.subarray(0,s)),a.set(t.subarray(s)),a.set(e,s)}else{var l=n-t.length;r.set(t),r.set(e.subarray(0,l),t.length),a.set(e.subarray(l))}else r=t.concat(e),a=0<=n&&n<r.length?r.splice(n,r.length):[];return[r,a]}),i=I.redraw(t),s=[t,o.update,r,o.maxPoints];return k.add(t,I.extendTraces,s,e,arguments),i},I.addTraces=function e(t,n,r){t=Q.getGraphDiv(t);var a,o,i=[],s=I.deleteTraces,l=e,c=[t,i],u=[t,n];for(function(e,t,n){var r,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(a=t[r])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,n,r),Array.isArray(n)||(n=[n]),n=n.map(function(e){return Q.extendFlat({},e)}),ne.cleanData(n,t.data),a=0;a<n.length;a++)t.data.push(n[a]);for(a=0;a<n.length;a++)i.push(-n.length+a);if(void 0===r)return o=I.redraw(t),k.add(t,s,c,l,u),o;Array.isArray(r)||(r=[r]);try{g(t,i,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return k.startSequence(t),k.add(t,s,c,l,u),o=I.moveTraces(t,i,r),k.stopSequence(t),o},I.deleteTraces=function e(t,n){t=Q.getGraphDiv(t);var r,a,o=[],i=I.addTraces,s=e,l=[t,o,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),f(t,n,"indices"),(n=p(n,t.data.length-1)).sort(Q.sorterDes),r=0;r<n.length;r+=1)a=t.data.splice(n[r],1)[0],o.push(a);var u=I.redraw(t);return k.add(t,i,l,s,c),u},I.moveTraces=function e(t,n,r){var a,o=[],i=[],s=e,l=e,c=[t=Q.getGraphDiv(t),r,n],u=[t,n,r];if(g(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],a=0;a<n.length;a++)r.push(-n.length+a);for(r=Array.isArray(r)?r:[r],n=p(n,t.data.length-1),r=p(r,t.data.length-1),a=0;a<t.data.length;a++)-1===n.indexOf(a)&&o.push(t.data[a]);for(a=0;a<n.length;a++)i.push({newIndex:r[a],trace:t.data[n[a]]});for(i.sort(function(e,t){return e.newIndex-t.newIndex}),a=0;a<i.length;a+=1)o.splice(i[a].newIndex,0,i[a].trace);t.data=o;var d=I.redraw(t);return k.add(t,s,c,l,u),d},I.restyle=function e(t,n,r,a){t=Q.getGraphDiv(t),ne.clearPromiseQueue(t);var o={};if("string"==typeof n)o[n]=r;else{if(!Q.isPlainObject(n))return Q.warn("Restyle fail.",n,r,a),Promise.reject();o=Q.extendFlat({},n),void 0===a&&(a=r)}Object.keys(o).length&&(t.changed=!0);var i=ne.coerceTraceIndices(t,a),s=z(t,o,i),l=s.flags;l.clearCalc&&(t.calcdata=void 0),l.clearAxisTypes&&ne.clearAxisTypes(t,i,{});var c=[];l.fullReplot?c.push(I.plot):(c.push(D.previousPromises),D.supplyDefaults(t),l.style&&c.push(w.doTraceStyle),l.colorbars&&c.push(w.doColorBars)),c.push(D.rehover),k.add(t,e,[t,s.undoit,s.traces],e,[t,s.redoit,s.traces]);var u=Q.syncOrAsync(c,t);return u&&u.then||(u=Promise.resolve()),u.then(function(){return t.emit("plotly_restyle",s.eventData),t})},I.relayout=function e(t,n,r){if(t=Q.getGraphDiv(t),ne.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var a={};if("string"==typeof n)a[n]=r;else{if(!Q.isPlainObject(n))return Q.warn("Relayout fail.",n,r),Promise.reject();a=Q.extendFlat({},n)}Object.keys(a).length&&(t.changed=!0);var o=O(t,a),i=o.flags;i.calc&&(t.calcdata=void 0),i.margins&&ne.clearAxisAutomargins(t);var s=[D.previousPromises];i.layoutReplot?s.push(w.layoutReplot):Object.keys(a).length&&(D.supplyDefaults(t),i.legend&&s.push(w.doLegend),i.layoutstyle&&s.push(w.layoutStyles),i.ticks&&s.push(w.doTicksRelayout),i.modebar&&s.push(w.doModeBar),i.camera&&s.push(w.doCamera)),s.push(D.rehover),k.add(t,e,[t,o.undoit],e,[t,o.redoit]);var l=Q.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then(function(){return t.emit("plotly_relayout",o.eventData),t})},I.update=function e(t,n,r,a){if(t=Q.getGraphDiv(t),ne.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);Q.isPlainObject(n)||(n={}),Q.isPlainObject(r)||(r={}),Object.keys(n).length&&(t.changed=!0),Object.keys(r).length&&(t.changed=!0);var o=ne.coerceTraceIndices(t,a),i=z(t,Q.extendFlat({},n),o),s=i.flags,l=O(t,Q.extendFlat({},r)),c=l.flags;(s.clearCalc||c.calc)&&(t.calcdata=void 0),s.clearAxisTypes&&ne.clearAxisTypes(t,o,r),c.margins&&ne.clearAxisAutomargins(t);var u=[];if(s.fullReplot&&c.layoutReplot){var d=t.data,f=t.layout;t.data=void 0,t.layout=void 0,u.push(function(){return I.plot(t,d,f)})}else s.fullReplot?u.push(I.plot):c.layoutReplot?u.push(w.layoutReplot):(u.push(D.previousPromises),D.supplyDefaults(t),s.style&&u.push(w.doTraceStyle),s.colorbars&&u.push(w.doColorBars),c.legend&&u.push(w.doLegend),c.layoutstyle&&u.push(w.layoutStyles),c.ticks&&u.push(w.doTicksRelayout),c.modebar&&u.push(w.doModeBar),c.camera&&u.push(w.doCamera));u.push(D.rehover),k.add(t,e,[t,i.undoit,l.undoit,i.traces],e,[t,i.redoit,l.redoit,i.traces]);var h=Q.syncOrAsync(u,t);return h&&h.then||(h=Promise.resolve(t)),h.then(function(){return t.emit("plotly_update",{data:i.eventData,layout:l.eventData}),t})},I.react=function(e,t,n,r){var a,o;var i=(e=Q.getGraphDiv(e))._fullData,s=e._fullLayout;if(Q.isPlotDiv(e)&&i&&s){if(Q.isPlainObject(t)){var l=t;t=l.data,n=l.layout,r=l.config,a=l.frames}var c=!1;if(r){var u=Q.extendDeep({},e._context);e._context=void 0,L(e,r),c=function e(t,n){var r;for(r in t){var a=t[r],o=n[r];if(a!==o)if(Q.isPlainObject(a)&&Q.isPlainObject(o)){if(e(a,o))return!0}else{if(!Array.isArray(a)||!Array.isArray(o))return!0;if(a.length!==o.length)return!0;for(var i=0;i<a.length;i++)if(a[i]!==o[i]){if(!Q.isPlainObject(a[i])||!Q.isPlainObject(o[i]))return!0;if(e(a[i],o[i]))return!0}}}}(u,e._context)}e.data=t||[],ne.cleanData(e.data,[]),e.layout=n||{},ne.cleanLayout(e.layout),D.supplyDefaults(e);var d=e._fullData,f=e._fullLayout,h=void 0===f.datarevision,p=function(e,t,n,r){if(t.length!==n.length)return{fullReplot:!0,clearCalc:!0};var a,o,i=re.traceFlags();i.arrays={};var s={getValObject:function(e){return K.getTraceValObject(o,e)},flags:i,immutable:r,gd:e};for(a=0;a<t.length;a++)o=n[a],s.autoranged=!!o.xaxis&&(ee.getFromId(e,o.xaxis).autorange||ee.getFromId(e,o.yaxis).autorange),P(t[a],o,[],s);(i.calc||i.plot||i.calcIfAutorange)&&(i.fullReplot=!0);return i}(e,i,d,h),g=function(e,t,n,r){var a=re.layoutFlags();a.arrays={},P(t,n,[],{getValObject:function(e){return K.getLayoutValObject(n,e)},flags:a,immutable:r,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0);return a}(e,s,f,h);ie(e)&&(g.layoutReplot=!0),(p.calc||g.calc)&&(e.calcdata=void 0),g.margins&&ne.clearAxisAutomargins(e);var y=[];if(a&&(e._transitionData={},D.createTransitionData(e),y.push(function(){return I.addFrames(e,a)})),p.fullReplot||g.layoutReplot||c)e._fullLayout._skipDefaults=!0,y.push(I.plot);else{for(var m in g.arrays){var v=g.arrays[m];if(v.length){var x=$.getComponentMethod(m,"drawOne");if(x!==Q.noop)for(var b=0;b<v.length;b++)x(e,v[b]);else{var _=$.getComponentMethod(m,"draw");if(_===Q.noop)throw new Error("cannot draw components: "+m);_(e)}}}y.push(D.previousPromises),p.style&&y.push(w.doTraceStyle),p.colorbars&&y.push(w.doColorBars),g.legend&&y.push(w.doLegend),g.layoutstyle&&y.push(w.layoutStyles),g.ticks&&y.push(w.doTicksRelayout),g.modebar&&y.push(w.doModeBar),g.camera&&y.push(w.doCamera)}y.push(D.rehover),(o=Q.syncOrAsync(y,e))&&o.then||(o=Promise.resolve(e))}else o=I.newPlot(e,t,n,r);return o.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},I.animate=function(h,p,g){if(h=Q.getGraphDiv(h),!Q.isPlotDiv(h))throw new Error("This element is not a Plotly plot: "+h+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var y=h._transitionData;y._frameQueue||(y._frameQueue=[]);var m=(g=D.supplyAnimationDefaults(g)).transition,v=g.frame;function x(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===y._frameWaitingCnt&&(y._frameWaitingCnt=0),new Promise(function(l,c){var e,t,n=0;function r(e){return Array.isArray(m)?n>=m.length?e.transitionOpts=m[n]:e.transitionOpts=m[0]:e.transitionOpts=m,n++,e}var a=[],o=null==p,i=Array.isArray(p);if(!o&&!i&&Q.isPlainObject(p))a.push({type:"object",data:r(Q.extendFlat({},p))});else if(o||-1!==["string","number"].indexOf(typeof p))for(e=0;e<y._frames.length;e++)(t=y._frames[e])&&(o||String(t.group)===String(p))&&a.push({type:"byname",name:String(t.name),data:r({name:t.name})});else if(i)for(e=0;e<p.length;e++){var s=p[e];-1!==["number","string"].indexOf(typeof s)?(s=String(s),a.push({type:"byname",name:s,data:r({name:s})})):Q.isPlainObject(s)&&a.push({type:"object",data:r(Q.extendFlat({},s))})}for(e=0;e<a.length;e++)if("byname"===(t=a[e]).type&&!y._frameHash[t.data.name])return Q.warn('animate failure: frame not found: "'+t.data.name+'"'),void c();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==y._frameQueue.length){for(;y._frameQueue.length;){var e=y._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}h.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&a.reverse();var u=h._fullLayout._currentFrame;if(u&&g.fromcurrent){var d=-1;for(e=0;e<a.length;e++)if("byname"===(t=a[e]).type&&t.name===u){d=e;break}if(0<d&&d<a.length-1){var f=[];for(e=0;e<a.length;e++)t=a[e],("byname"!==a[e].type||d<e)&&f.push(t);a=f}}0<a.length?function(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n;n="byname"===e[t].type?D.computeFrame(h,e[t].name):e[t].data;var r=(s=t,Array.isArray(v)?s>=v.length?v[0]:v[s]:v),a=(i=t,Array.isArray(m)?i>=m.length?m[0]:m[i]:m);a.duration=Math.min(a.duration,r.duration);var o={frame:n,name:e[t].name,frameOpts:r,transitionOpts:a};t===e.length-1&&(o.onComplete=x(l,2),o.onInterrupt=c),y._frameQueue.push(o)}var i,s;"immediate"===g.mode&&(y._lastFrameAt=-1/0),y._animationRaf||function(){h.emit("plotly_animating"),y._lastFrameAt=-1/0,y._timeToNext=0,y._runningTransitions=0,y._currentFrame=null;var e=function(){y._animationRaf=window.requestAnimationFrame(e),Date.now()-y._lastFrameAt>y._timeToNext&&function(){y._currentFrame&&y._currentFrame.onComplete&&y._currentFrame.onComplete();var e=y._currentFrame=y._frameQueue.shift();if(e){var t=e.name?e.name.toString():null;h._fullLayout._currentFrame=t,y._lastFrameAt=Date.now(),y._timeToNext=e.frameOpts.duration,D.transition(h,e.frame.data,e.frame.layout,ne.coerceTraceIndices(h,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),h.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else h.emit("plotly_animated"),window.cancelAnimationFrame(y._animationRaf),y._animationRaf=null}()};e()}()}}(a):(h.emit("plotly_animated"),l())})},I.addFrames=function(e,t,n){if(e=Q.getGraphDiv(e),null==t)return Promise.resolve();if(!Q.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,a,o,i,s=e._transitionData._frames,l=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var c=s.length+2*t.length,u=[],d={};for(r=t.length-1;0<=r;r--)if(Q.isPlainObject(t[r])){var f=t[r].name,h=(l[f]||d[f]||{}).name,p=t[r].name,g=l[h]||d[h];h&&p&&"number"==typeof p&&g&&S<5&&(S++,Q.warn('addFrames: overwriting frame "'+(l[h]||d[h]).name+'" with a frame whose name of type "number" also equates to "'+h+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===S&&Q.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),d[f]={name:f},u.push({frame:D.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:c+r})}u.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var y=[],m=[],v=s.length;for(r=u.length-1;0<=r;r--){if("number"==typeof(a=u[r].frame).name&&Q.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;l[a.name="frame "+e._transitionData._counter++];);if(l[a.name]){for(o=0;o<s.length&&(s[o]||{}).name!==a.name;o++);y.push({type:"replace",index:o,value:a}),m.unshift({type:"replace",index:o,value:s[o]})}else i=Math.max(0,Math.min(u[r].index,v)),y.push({type:"insert",index:i,value:a}),m.unshift({type:"delete",index:i}),v++}var x=D.modifyFrames,b=D.modifyFrames,_=[e,m],w=[e,y];return k&&k.add(e,x,_,b,w),D.modifyFrames(e,y)},I.deleteFrames=function(e,t){if(e=Q.getGraphDiv(e),!Q.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,a=e._transitionData._frames,o=[],i=[];if(!t)for(t=[],n=0;n<a.length;n++)t.push(n);for((t=t.slice(0)).sort(),n=t.length-1;0<=n;n--)r=t[n],o.push({type:"delete",index:r}),i.unshift({type:"insert",index:r,value:a[r]});var s=D.modifyFrames,l=D.modifyFrames,c=[e,i],u=[e,o];return k&&k.add(e,s,c,l,u),D.modifyFrames(e,o)},I.purge=function(e){var t=(e=Q.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return D.cleanPlot([],{},n,t),D.purge(e),m.purge(e),t._container&&t._container.remove(),delete e._context,e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/color":35,"../components/drawing":60,"../constants/xmlns_namespaces":139,"../lib":156,"../lib/events":147,"../lib/queue":170,"../lib/svg_text_utils":177,"../plots/cartesian/autorange":198,"../plots/cartesian/axes":199,"../plots/cartesian/constants":204,"../plots/cartesian/constraints":206,"../plots/cartesian/graph_interact":208,"../plots/plots":240,"../plots/polar/legacy":243,"../registry":248,"./edit_types":184,"./helpers":185,"./manage_arrays":187,"./plot_config":189,"./plot_schema":190,"./subroutines":191,"fast-isnumeric":4,"has-hover":6}],189:[function(e,t,n){"use strict";t.exports={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],190:[function(e,t,c){"use strict";var u=e("../registry"),d=e("../lib"),f=e("../plots/attributes"),h=e("../plots/layout_attributes"),n=e("../plots/frame_attributes"),r=e("../plots/animation_attributes"),p=e("../plots/polar/legacy/area_attributes"),g=e("../plots/polar/legacy/axis_attributes"),o=e("./edit_types"),l=d.extendFlat,y=d.extendDeepAll,i="_isSubplotObj",a="_isLinkedToArray",s="_deprecated",m=[i,a,"_arrayAttrRegexps",s];function v(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(x(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!d.isPlainObject(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!x(t[++n]))return!1}else if("info_array"===e.valType){var a=t[++n];if(!x(a))return!1;var o=e.items;if(Array.isArray(o)){if(a>=o.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var i=t[n];if(!x(i))return!1;e=o[a][i]}else e=o[a]}else e=o}}return e}function x(e){return e===Math.round(e)&&0<=e}function b(e){var t;return function(e){function r(e){return{valType:"string",role:"info",description:["Sets the source reference on plot.ly for ",e,"."].join(" "),editType:"none"}}c.crawl(e,function(e,t,n){c.isValObject(e)?"data_array"===e.valType?(e.role="data",n[t+"src"]=r(t)):!0===e.arrayOk&&(n[t+"src"]=r(t)):d.isPlainObject(e)&&(e.role="object")})}(e),t=e,c.crawl(t,function(e,t,n){if(e){var r=e[a];r&&(delete e[a],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}}),e}function _(e,t,n){var r=d.nestedProperty(e,n),a=y({},t.layoutAttributes);a[i]=!0,r.set(a)}function w(e,t,n){var r=d.nestedProperty(e,n);r.set(y(r.get()||{},t))}c.IS_SUBPLOT_OBJ=i,c.IS_LINKED_TO_ARRAY=a,c.DEPRECATED=s,c.UNDERSCORE_ATTRS=m,c.get=function(){var t={};u.allTypes.concat("area").forEach(function(e){t[e]=function(e){var t,n;"area"===e?(t={attributes:p},n={}):(t=u.modules[e]._module,n=t.basePlotModule);var r={type:null};y(r,f),y(r,t.attributes),n.attributes&&y(r,n.attributes);r.type=e;var a={meta:t.meta||{},attributes:b(r)};if(t.layoutAttributes){var o={};y(o,t.layoutAttributes),a.layoutAttributes=b(o)}return a}(e)});var e,a={};return Object.keys(u.transformsRegistry).forEach(function(e){var n,t,r;a[e]=(n=e,t=u.transformsRegistry[n],r=y({},t.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){w(r,t.schema.transforms[n][e],e)})}),{attributes:b(r)})}),{defs:{valObjects:d.valObjectMeta,metaKeys:m.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:t,layout:function(){var e,t,n={};for(e in y(n,h),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if("cartesian"===t.name)_(n,t,"xaxis"),_(n,t,"yaxis");else{var r="subplot"===t.attr?t.name:t.attr;_(n,t,r)}for(e in s=n,l(s,{radialaxis:g.radialaxis,angularaxis:g.angularaxis}),l(s,g.layout),n=s,u.componentsRegistry){var a=(t=u.componentsRegistry[e]).schema;if(a&&(a.subplots||a.layout)){var o=a.subplots;if(o&&o.xaxis&&!o.yaxis)for(var i in o.xaxis)delete n.yaxis[i]}else t.layoutAttributes&&w(n,t.layoutAttributes,t.name)}var s;return{layoutAttributes:b(n)}}(),transforms:a,frames:(e={frames:d.extendDeepAll({},n)},b(e),e.frames),animation:b(r)}},c.crawl=function(r,a,e,o){var i=e||0;o=o||"",Object.keys(r).forEach(function(e){var t=r[e];if(-1===m.indexOf(e)){var n=(o?o+".":"")+e;a(t,e,r,i,n),c.isValObject(t)||d.isPlainObject(t)&&"impliedEdits"!==e&&c.crawl(t,a,i+1,n)}})},c.isValObject=function(e){return e&&void 0!==e.valType},c.findArrayAttributes=function(i){var s=[],l=[];function e(e,t,n,r){if(l=l.slice(0,r).concat([t]),e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===l[r-1]&&("ticktext"===t||"tickvals"===t))){var a=l.join("."),o=d.nestedProperty(i,a).get();d.isArrayOrTypedArray(o)&&s.push(a)}}if(c.crawl(f,e),i._module&&i._module.attributes&&c.crawl(i._module.attributes,e),i.transforms)for(var t=i.transforms,n=0;n<t.length;n++){var r=t[n]._module;r&&(l=["transforms["+n+"]"],c.crawl(r.attributes,e,1))}return i._fullInput&&i._fullInput._module&&i._fullInput._module.attributes&&(c.crawl(i._fullInput._module.attributes,e),s=d.filterUnique(s)),s},c.getTraceValObject=function(e,t){var n,r,a=t[0],o=1;if("transforms"===a){if(!Array.isArray(e.transforms))return!1;var i=t[1];if(!x(i)||i>=e.transforms.length)return!1;r=(n=(u.transformsRegistry[e.transforms[i].type]||{}).attributes)&&n[t[2]],o=3}else if("area"===e.type)r=p[a];else{var s=e._module;if(s||(s=(u.modules[e.type||f.type.dflt]||{})._module),!s)return!1;if(!(r=(n=s.attributes)&&n[a])){var l=s.basePlotModule;l&&l.attributes&&(r=l.attributes[a])}r||(r=f[a])}return v(r,t,o)},c.getLayoutValObject=function(e,t){return v(function(e,t){var n,r,a,o,i=e._basePlotModules;if(i){var s;for(n=0;n<i.length;n++){if((a=i[n]).attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!s&&a.layoutAttributes&&(s=a.layoutAttributes)}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((o=c[n].layoutAttributes)&&t in o)return o[t];for(r in u.componentsRegistry)if(!(a=u.componentsRegistry[r]).schema&&t===a.name)return a.layoutAttributes;if(t in h)return h[t];if("radialaxis"===t||"angularaxis"===t)return g[t];return g.layout[t]||!1}(e,t[0]),t,1)}},{"../lib":156,"../plots/animation_attributes":194,"../plots/attributes":196,"../plots/frame_attributes":227,"../plots/layout_attributes":238,"../plots/polar/legacy/area_attributes":241,"../plots/polar/legacy/axis_attributes":242,"../registry":248,"./edit_types":184}],191:[function(r,e,f){(function(e){"use strict";var l="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,o=r("../registry"),i=r("../plots/plots"),t=r("../lib"),j=r("../components/color"),P=r("../components/drawing"),n=r("../components/titles"),c=r("../components/modebar"),u=r("../plots/cartesian/axes"),a=r("../plots/cartesian/graph_interact"),D=r("../plots/cartesian/constants"),d=r("../constants/alignment");function I(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function s(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var a=d.FROM_BL[t];return n.side===t?r.domain[a]===e.domain[a]:n.mirror&&r.domain[1-a]===e.domain[1-a]}function E(e,t,n,r){if(s(e,t,n))return n._lw;for(var a=0;a<r.length;a++){var o=r[a];if(o._mainAxis===n._mainAxis&&s(e,t,o))return o._lw}return 0}f.layoutStyles=function(e){return t.syncOrAsync([i.doAutoMargin,f.lsInner],e)},f.lsInner=function(e){var A,S=e._fullLayout,a=S._size,L=a.p,C=u.list(e),z=S._has("cartesian");function O(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-L-r:t._offset+t._length+L+r:a.t+a.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+L+r:t._offset-L-r:a.l+a.w*(e.position||0)+r%1}for(A=0;A<C.length;A++){var t=C[A];t.setScale();var n=t._anchorAxis;t._linepositions={},t._lw=P.crispRound(e,t.linewidth,1),t._mainLinePosition=O(t,n,t.side),t._mainMirrorPosition=t.mirror&&n?O(t,n,d.OPPOSITE_SIDE[t.side]):null}S._paperdiv.style({width:S.width+"px",height:S.height+"px"}).selectAll(".main-svg").call(P.setSize,S.width,S.height),e._context.setBackground(e,S.paper_bgcolor);var r=S._paper.selectAll("g.subplot"),i=[],s=[];r.each(function(e){var t=S._plots[e];if(t.mainplot)return t.bg&&t.bg.remove(),void(t.bg=void 0);var n=t.xaxis.domain,r=t.yaxis.domain,a=[];!function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r][0],o=n[r][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&o[0]<t[1]&&o[1]>t[0])return!0}return!1}(n,r,s)?(i.push(e),s.push([n,r])):a=[0];var o=t.plotgroup.selectAll(".bg").data(a);o.enter().append("rect").classed("bg",!0),o.exit().remove(),o.each(function(){t.bg=o;var e=t.plotgroup.node();e.insertBefore(this,e.childNodes[0])})});var o=S._bgLayer.selectAll(".bg").data(i);return o.enter().append("rect").classed("bg",!0),o.exit().remove(),o.each(function(e){S._plots[e].bg=l.select(this)}),r.each(function(a){var e=S._plots[a],t=e.xaxis,n=e.yaxis;e.bg&&z&&e.bg.call(P.setRect,t._offset-L,n._offset-L,t._length+2*L,n._length+2*L).call(j.fill,S.plot_bgcolor).style("stroke-width",0),e.clipId="clip"+S._uid+a+"plot";var r,o,i=S._clips.selectAll("#"+e.clipId).data([0]);for(i.enter().append("clipPath").attr({class:"plotclip",id:e.clipId}).append("rect"),i.selectAll("rect").attr({width:t._length,height:n._length}),P.setTranslate(e.plot,t._offset,n._offset),e._hasClipOnAxisFalse?(r=null,o=e.clipId):(r=e.clipId,o=null),P.setClipUrl(e.plot,r),A=0;A<D.traceLayerClasses.length;A++){var s=D.traceLayerClasses[A];"scatterlayer"!==s&&"barlayer"!==s&&e.plot.selectAll("g."+s).call(P.setClipUrl,o)}if(e.layerClipId=o,z){var l,c,u,d,f,h,p,g,y,m,v,x,b,_="M0,0";I(t,a)&&(f=E(t,"left",n,C),l=t._offset-(f?L+f:0),h=E(t,"right",n,C),c=t._offset+t._length+(h?L+h:0),u=O(t,n,"bottom"),d=O(t,n,"top"),(b=!t._anchorAxis||a!==t._mainSubplot)&&t.ticks&&"allticks"===t.mirror&&(t._linepositions[a]=[u,d]),_=T(t,k,function(e){return"M"+t._offset+","+e+"h"+t._length}),b&&t.showline&&("all"===t.mirror||"allticks"===t.mirror)&&(_+=k(u)+k(d)),e.xlines.style("stroke-width",t._lw+"px").call(j.stroke,t.showline?t.linecolor:"rgba(0,0,0,0)")),e.xlines.attr("d",_);var w="M0,0";I(n,a)&&(v=E(n,"bottom",t,C),p=n._offset+n._length+(v?L:0),x=E(n,"top",t,C),g=n._offset-(x?L:0),y=O(n,t,"left"),m=O(n,t,"right"),(b=!n._anchorAxis||a!==t._mainSubplot)&&n.ticks&&"allticks"===n.mirror&&(n._linepositions[a]=[y,m]),w=T(n,M,function(e){return"M"+e+","+n._offset+"v"+n._length}),b&&n.showline&&("all"===n.mirror||"allticks"===n.mirror)&&(w+=M(y)+M(m)),e.ylines.style("stroke-width",n._lw+"px").call(j.stroke,n.showline?n.linecolor:"rgba(0,0,0,0)")),e.ylines.attr("d",w)}function k(e){return"M"+l+","+e+"H"+c}function M(e){return"M"+e+","+g+"V"+p}function T(e,t,n){if(!e.showline||a!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var r=t(e._mainLinePosition);return e.mirror&&(r+=t(e._mainMirrorPosition)),r}}),u.makeClipPaths(e),f.drawMainTitle(e),c.manage(e),e._promises.length&&Promise.all(e._promises)},f.drawMainTitle=function(e){var t=e._fullLayout;n.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})},f.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t],r=(((n[0]||{}).trace||{})._module||{}).arraysToCalcdata;r&&r(n,n[0].trace)}return i.style(e),o.getComponentMethod("legend","draw")(e),i.previousPromises(e)},f.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t][0];if((n.t||{}).cb){var r=n.trace,a=n.t.cb;o.traceIs(r,"contour")&&a.line({width:!1!==r.contours.showlines?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?a._opts.line.color:r.line.color}),o.traceIs(r,"markerColorscale")?a.options(r.marker.colorbar)():a.options(r.colorbar)()}}return i.previousPromises(e)},f.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,o.call("plot",e,"",t)},f.doLegend=function(e){return o.getComponentMethod("legend","draw")(e),i.previousPromises(e)},f.doTicksRelayout=function(e){return u.doTicks(e,"redraw"),f.drawMainTitle(e),i.previousPromises(e)},f.doModeBar=function(e){var t=e._fullLayout;c.manage(e),a(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(t)}return i.previousPromises(e)},f.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]];a._scene.setCamera(a.camera)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/color":35,"../components/drawing":60,"../components/modebar":98,"../components/titles":128,"../constants/alignment":135,"../lib":156,"../plots/cartesian/axes":199,"../plots/cartesian/constants":204,"../plots/cartesian/graph_interact":208,"../plots/plots":240,"../registry":248}],192:[function(e,t,n){"use strict";var b=e("./plot_api"),_=e("../lib"),w=e("../snapshot/helpers"),k=e("../snapshot/tosvg"),M=e("../snapshot/svgtoimg"),T={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`"].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`"].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}},A=/^data:image\/\w+;base64,/;t.exports=function(e,n){var r,t,a;function o(e){return!(e in n)||_.validate(n[e],T[e])}if(n=n||{},_.isPlainObject(e)?(r=e.data||[],t=e.layout||{},a=e.config||{}):(e=_.getGraphDiv(e),r=_.extendDeep([],e.data),t=_.extendDeep({},e.layout),a=e._context),!o("width")||!o("height"))throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var i={};function s(e,t){return _.coerce(n,i,T,e,t)}var l=s("format"),c=s("width"),u=s("height"),d=s("scale"),f=s("setBackground"),h=s("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var g=_.extendFlat({},t);c&&(g.width=c),u&&(g.height=u);var y=_.extendFlat({},a,{staticPlot:!0,setBackground:f}),m=w.getRedrawFunc(p);function v(){return new Promise(function(e){setTimeout(e,w.getDelay(p._fullLayout))})}function x(){return new Promise(function(e,t){var n=k(p,l,d),r=p._fullLayout.width,a=p._fullLayout.height;if(b.purge(p),document.body.removeChild(p),"svg"===l)return e(h?n:"data:image/svg+xml,"+encodeURIComponent(n));var o=document.createElement("canvas");o.id=_.randstr(),M({format:l,width:r,height:a,scale:d,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(n,t){b.plot(p,r,g,y).then(m).then(v).then(x).then(function(e){var t;n((t=e,h?t.replace(A,""):t))}).catch(function(e){t(e)})})}},{"../lib":156,"../snapshot/helpers":252,"../snapshot/svgtoimg":254,"../snapshot/tosvg":256,"./plot_api":188}],193:[function(e,t,n){"use strict";var O=e("../lib"),_=e("../plots/plots"),w=e("./plot_schema"),k=e("./plot_config"),j=O.isPlainObject,P=Array.isArray,D=O.isArrayOrTypedArray;function I(e,t,n,r,a,o){o=o||[];for(var i,s,l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];if("transforms"!==u){var d=o.slice();d.push(u);var f=e[u],h=t[u],p=(i=n,void 0,s=N(u),i[s.keyMinusId]),g="info_array"===(p||{}).valType,y="colorscale"===(p||{}).valType,m=(p||{}).items;if(R(n,u))if(j(f)&&j(h))I(f,h,p,r,a,d);else if(g&&P(f)){f.length>h.length&&r.push(E("unused",a,d.concat(h.length)));var v,x,b,_,w,k=h.length,M=Array.isArray(m);if(M&&(k=Math.min(k,m.length)),2===p.dimensions)for(x=0;x<k;x++)if(P(f[x])){f[x].length>h[x].length&&r.push(E("unused",a,d.concat(x,h[x].length)));var T=h[x].length;for(v=0;v<(M?Math.min(T,m[x].length):T);v++)b=M?m[x][v]:m,_=f[x][v],w=h[x][v],O.validate(_,b)?w!==_&&w!==+_&&r.push(E("dynamic",a,d.concat(x,v),_,w)):r.push(E("value",a,d.concat(x,v),_))}else r.push(E("array",a,d.concat(x),f[x]));else for(x=0;x<k;x++)b=M?m[x]:m,_=f[x],w=h[x],O.validate(_,b)?w!==_&&w!==+_&&r.push(E("dynamic",a,d.concat(x),_,w)):r.push(E("value",a,d.concat(x),_))}else if(p.items&&!g&&P(f)){var A,S,L=m[Object.keys(m)[0]],C=[];for(A=0;A<h.length;A++){var z=h[A]._index||A;(S=d.slice()).push(z),j(f[z])&&j(h[A])&&(C.push(z),I(f[z],h[A],L,r,a,S))}for(A=0;A<f.length;A++)(S=d.slice()).push(A),j(f[A])?-1===C.indexOf(A)&&r.push(E("unused",a,S)):r.push(E("object",a,S,f[A]))}else!j(f)&&j(h)?r.push(E("object",a,d,f)):D(f)||!D(h)||g||y?u in t?O.validate(f,p)?"enumerated"===p.valType&&(p.coerceNumber&&f!==+h||f!==h)&&r.push(E("dynamic",a,d,f,h)):r.push(E("value",a,d,f)):r.push(E("unused",a,d,f)):r.push(E("array",a,d,f));else r.push(E("schema",a,d))}}return r}t.exports=function(e,t){var n,r,a=w.get(),o=[],i={_context:O.extendFlat({},k)};P(e)?(i.data=O.extendDeep([],e),n=e):(i.data=[],n=[],o.push(E("array","data"))),j(t)?(i.layout=O.extendDeep({},t),r=t):(i.layout={},r={},1<arguments.length&&o.push(E("object","layout"))),_.supplyDefaults(i);for(var s=i._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(j(u)){var f=s[c],h=f.type,p=a.traces[h].attributes;!(p.type={valType:"enumerated",values:[h]})===f.visible&&!1!==u.visible&&o.push(E("invisible",d)),I(u,f,p,o,d);var g=u.transforms,y=f.transforms;if(g){P(g)||o.push(E("array",d,["transforms"])),d.push("transforms");for(var m=0;m<g.length;m++){var v=["transforms",m],x=g[m].type;if(j(g[m])){var b=a.transforms[x]?a.transforms[x].attributes:{};b.type={valType:"enumerated",values:Object.keys(a.transforms)},I(g[m],y[m],b,o,d,v)}else o.push(E("object",d,v))}}}else o.push(E("object",d))}return I(r,i._fullLayout,function(e,t){for(var n=0;n<t.length;n++){var r=t[n].type,a=e.traces[r].layoutAttributes;a&&O.extendFlat(e.layout.layoutAttributes,a)}return e.layout.layoutAttributes}(a,s),o,"layout"),0===o.length?void 0:o};var c={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":a(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":a(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=j(n)?"container":"key";return a(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[a(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e){return"Trace "+e[1]+" got defaulted to be not visible"},value:function(e,t,n){return[a(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function a(e){return P(e)?"In data trace "+e[1]+", ":"In "+e+", "}function E(e,t,n,r,a){var o,i;n=n||"",P(t)?(o=t[0],i=t[1]):(o=t,i=null);var s=function(e){if(!P(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),l=c[e](t,s,r,a);return O.log(l),{code:e,container:o,trace:i,path:n,astr:s,msg:l}}function R(e,t){var n=N(t),r=n.keyMinusId,a=n.id;return!!(r in e&&e[r]._isSubplotObj&&a)||t in e}var r=O.counterRegex("([a-z]+)");function N(e){var t=e.match(r);return{keyMinusId:t&&t[1],id:t&&t[2]}}},{"../lib":156,"../plots/plots":240,"./plot_config":189,"./plot_schema":190}],194:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",role:"info",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",role:"info",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,role:"info",description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",role:"info",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",role:"info",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",role:"info",min:0,dflt:500,description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],role:"info",description:"The easing function used for the transition"}}}},{}],195:[function(e,t,n){"use strict";var f=e("../lib");t.exports=function(e,t,n){var r,a=n.name,o=t[a],i=f.isArrayOrTypedArray(e[a])?e[a]:[],s=t[a]=[];for(r=0;r<i.length;r++){var l=i[r],c={},u={};f.isPlainObject(l)||(u.itemIsNotPlainObject=!0,l={}),n.handleItemDefaults(l,c,t,n,u),c._input=l,c._index=r,s.push(c)}if(f.isArrayOrTypedArray(o)){var d=Math.min(o.length,s.length);for(r=0;r<d;r++)f.relinkPrivateKeys(s[r],o[r])}}},{"../lib":156}],196:[function(e,t,n){"use strict";var r=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",role:"info",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],role:"info",dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",role:"info",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",role:"info",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",role:"info",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",role:"info",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc",description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},selectedpoints:{valType:"any",role:"info",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",role:"info",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,role:"info",editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://plot.ly/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,role:"info",editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"}}},{"../components/fx/attributes":69}],197:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",role:"info",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",role:"info",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.xaxis2`, and so on."].join(" ")}}},{}],198:[function(e,t,n){"use strict";var L=e("fast-isnumeric"),v=e("../../lib"),C=e("../../constants/numerical").FP_SAFE;function a(e){var t,n,r,a,o,i,s,l,c=[],u=e._min[0].val,d=e._max[0].val,f=0,h=!1,p=x(e);for(t=1;t<e._min.length&&u===d;t++)u=Math.min(u,e._min[t].val);for(t=1;t<e._max.length&&u===d;t++)d=Math.max(d,e._max[t].val);if(e.range){var g=v.simpleMap(e.range,e.r2l);h=g[1]<g[0]}for("reversed"===e.autorange&&(h=!0,e.autorange=!0),t=0;t<e._min.length;t++)for(r=e._min[t],n=0;n<e._max.length;n++)l=(a=e._max[n]).val-r.val,s=e._length-p(r)-p(a),0<l&&0<s&&f<l/s&&(o=r,i=a,f=l/s);if(u===d){var y=u-1,m=u+1;c="tozero"===e.rangemode?u<0?[y,0]:[0,m]:"nonnegative"===e.rangemode?[Math.max(0,y),Math.max(0,m)]:[y,m]}else f&&("linear"!==e.type&&"-"!==e.type||("tozero"===e.rangemode?(0<=o.val&&(o={val:0,pad:0}),i.val<=0&&(i={val:0,pad:0})):"nonnegative"===e.rangemode&&(o.val-f*p(o)<0&&(o={val:0,pad:0}),i.val<0&&(i={val:1,pad:0})),f=(i.val-o.val)/(e._length-p(o)-p(i))),c=[o.val-f*p(o),i.val+f*p(i)]);return c[0]===c[1]&&("tozero"===e.rangemode?c=c[0]<0?[c[0],0]:0<c[0]?[0,c[0]]:[0,1]:(c=[c[0]-1,c[0]+1],"nonnegative"===e.rangemode&&(c[0]=Math.max(0,c[0])))),h&&c.reverse(),v.simpleMap(c,e.l2r||Number)}function x(e){var t=e._length/20;return"domain"===e.constrain&&e._inputDomain&&(t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(e){return e.pad+(e.extrapad?t:0)}}function z(e,t){return e<=t}function O(e,t){return t<=e}t.exports={getAutoRange:a,makePadFn:x,doAutoRange:function(e){e._length||e.setScale();var t,n=e._min&&e._max&&e._min.length&&e._max.length;e.autorange&&n&&(e.range=a(e),e._r=e.range.slice(),e._rl=v.simpleMap(e._r,e.r2l),(t=e._input).range=e.range.slice(),t.autorange=e.autorange);if(e._anchorAxis&&e._anchorAxis.rangeslider){var r=e._anchorAxis.rangeslider[e._name];r&&"auto"===r.rangemode&&(r.range=n?a(e):e._rangeInitial?e._rangeInitial.slice():e.range.slice()),(t=e._anchorAxis._input).rangeslider[e._name]=v.extendFlat({},r)}},expand:function(s,l,e){if(t=s,!t.autorange&&!t._rangesliderAutorange||!l)return;var t;s._min||(s._min=[]);s._max||(s._max=[]);e||(e={});s._m||s.setScale();var n,c,u,d,f,h,p,g,y,m,v,x,r=l.length,b=e.padded||!1,_=e.tozero&&("linear"===s.type||"-"===s.type),w="log"===s.type,a=!1;function o(t){if(Array.isArray(t))return a=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var k=o((0<s._m?e.ppadplus:e.ppadminus)||e.ppad||0),M=o((0<s._m?e.ppadminus:e.ppadplus)||e.ppad||0),T=o(e.vpadplus||e.vpad),A=o(e.vpadminus||e.vpad);if(!a){if(v=1/0,x=-1/0,w)for(n=0;n<r;n++)(d=l[n])<v&&0<d&&(v=d),x<d&&d<C&&(x=d);else for(n=0;n<r;n++)(d=l[n])<v&&-C<d&&(v=d),x<d&&d<C&&(x=d);l=[v,x],r=2}function i(e){var t;if(f=l[e],L(f))for(g=k(e),y=M(e),v=f-A(e),x=f+T(e),w&&v<x/10&&(v=x/10),h=s.c2l(v),p=s.c2l(x),_&&(h=Math.min(0,h),p=Math.max(0,p)),u=0;u<2;u++){var n=u?p:h;if(L(t=n)&&Math.abs(t)<C){var r=u?s._max:s._min,a=u?g:y,o=u?O:z;for(m=!0,c=0;c<r.length&&m;c++){if(d=r[c],o(d.val,n)&&d.pad>=a&&(d.extrapad||!b)){m=!1;break}o(n,d.val)&&d.pad<=a&&(b||!d.extrapad)&&(r.splice(c,1),c--)}if(m){var i=_&&0===n;r.push({val:n,pad:i?0:a,extrapad:!i&&b})}}}}var S=Math.min(6,r);for(n=0;n<S;n++)i(n);for(n=r-1;S<=n;n--)i(n)}}},{"../../constants/numerical":137,"../../lib":156,"fast-isnumeric":4}],199:[function(r,P,e){(function(e){"use strict";var F="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,B=r("fast-isnumeric"),q=r("../../plots/plots"),H=r("../../registry"),V=r("../../lib"),U=r("../../lib/svg_text_utils"),G=r("../../components/titles"),Y=r("../../components/color"),X=r("../../components/drawing"),t=r("../../constants/numerical"),l=t.ONEAVGYEAR,y=t.ONEAVGMONTH,p=t.ONEDAY,c=t.ONEHOUR,u=t.ONEMIN,d=t.ONESEC,g=t.MINUS_SIGN,o=t.BADNUM,Z=r("../../constants/alignment").MID_SHIFT,W=r("../../constants/alignment").LINE_SPACING,J=P.exports={};J.setConvert=r("./set_convert");var s=r("./axis_autotype"),Q=r("./axis_ids");J.id2name=Q.id2name,J.name2id=Q.name2id,J.cleanId=Q.cleanId,J.list=Q.list,J.listIds=Q.listIds,J.getFromId=Q.getFromId,J.getFromTrace=Q.getFromTrace;var n=r("./autorange");J.expand=n.expand,J.getAutoRange=n.getAutoRange,J.coerceRef=function(e,t,n,r,a,o){var i=r.charAt(r.length-1),s=n._fullLayout._subplots[i+"axis"],l=r+"ref",c={};return a||(a=s[0]||o),o||(o=a),c[l]={valType:"enumerated",values:s.concat(o?[o]:[]),dflt:a},V.coerce(e,t,c,l)},J.coercePosition=function(e,t,n,r,a,o){var i,s;if("paper"===r||"pixel"===r)i=V.ensureNumber,s=n(a,o);else{var l=J.getFromId(t,r);s=n(a,o=l.fraction2r(o)),i=l.cleanPos}e[a]=i(s)},J.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?V.ensureNumber:J.getFromId(t,n).cleanPos)(e)};var a=J.getDataConversions=function(e,t,n,r){var a,o="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(o)){if(a={type:s(r),_categories:[]},J.setConvert(a),"category"===a.type)for(var i=0;i<r.length;i++)a.d2c(r[i])}else a=J.getFromTrace(e,t,o);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===o?{d2c:h,c2d:h}:{d2c:f,c2d:f}};function f(e){return+e}function h(e){return String(e)}J.getDataToCoordFunc=function(e,t,n,r){return a(e,t,n,r).d2c},J.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},J.minDtick=function(e,t,n,r){-1===["log","category"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},J.saveRangeInitial=function(e,t){for(var n=J.list(e,"",!0),r=!1,a=0;a<n.length;a++){var o=n[a],i=void 0===o._rangeInitial,s=i||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(i&&!1===o.autorange||t&&s)&&(o._rangeInitial=o.range.slice(),r=!0)}return r},J.saveShowSpikeInitial=function(e,t){for(var n=J.list(e,"",!0),r=!1,a="on",o=0;o<n.length;o++){var i=n[o],s=void 0===i._showSpikeInitial,l=s||!(i.showspikes===i._showspikes);(s||t&&l)&&(i._showSpikeInitial=i.showspikes,r=!0),"on"!==a||i.showspikes||(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,r},J.autoBin=function(e,t,n,r,a){var o,i,s=V.aggNums(Math.min,null,e),l=V.aggNums(Math.max,null,e);if(a||(a=t.calendar),"category"===t.type)return{start:s-.5,end:l+.5,size:1,_dataSpan:l-s};if(n)o=(l-s)/n;else{var c=V.distinctVals(e),u=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),d=u*V.roundUp(c.minDiff/u,[.9,1.9,4.9,9.9],!0);o=Math.max(d,2*V.stdev(e)/Math.pow(e.length,r?.25:.4)),B(o)||(o=1)}i="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:V.simpleMap([s,l],t.c2r,0,a),calendar:a},J.setConvert(i),J.autoTicks(i,o);var f,h=J.tickIncrement(J.tickFirst(i),i.dtick,"reverse",a);if("number"==typeof i.dtick)f=(h=function(t,e,n,r,a){var o=0,i=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:B(e[u])||l++,c(e[u])&&o++,c(e[u]+n.dtick/2)&&i++;var d=e.length-l;if(s===d&&"date"!==n.type)n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick);else if(i<.1*d&&(.3*d<o||c(r)||c(a))){var f=n.dtick/2;t+=t+f<r?f:-f}return t}(h,e,i,s,l))+(1+Math.floor((l-h)/i.dtick))*i.dtick;else for("M"===i.dtick.charAt(0)&&(h=function(e,t,n,r,a){var o=V.findExactDates(t,a);if(.8<o.exactDays){var i=Number(n.substr(1));.8<o.exactYears&&i%12==0?e=J.tickIncrement(e,"M6","reverse")+1.5*p:.8<o.exactMonths?e=J.tickIncrement(e,"M1","reverse")+15.5*p:e-=p/2;var s=J.tickIncrement(e,n);if(s<=r)return s}return e}(h,e,i.dtick,s,a)),f=h,0;f<=l;)f=J.tickIncrement(f,i.dtick,!1,a),0;return{start:t.c2r(h,0,a),end:t.c2r(f,0,a),size:i.dtick,_dataSpan:l-s}},J.prepTicks=function(e){var t=V.simpleMap(e.range,e.r2l);if("auto"===e.tickmode||!e.dtick){var n,r=e.nticks;r||("category"===e.type?(n=e.tickfont?1.2*(e.tickfont.size||12):15,r=e._length/n):(n="y"===e._id.charAt(0)?40:80,r=V.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(r*=2)),"array"===e.tickmode&&(r*=100),J.autoTicks(e,Math.abs(t[1]-t[0])/r),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),T(e)},J.calcTicks=function(e){J.prepTicks(e);var t=V.simpleMap(e.range,e.r2l);if("array"===e.tickmode)return function(e){var t,n,r=e.tickvals,a=e.ticktext,o=new Array(r.length),i=V.simpleMap(e.range,e.r2l),s=1.0001*i[0]-1e-4*i[1],l=1.0001*i[1]-1e-4*i[0],c=Math.min(s,l),u=Math.max(s,l),d=0;Array.isArray(a)||(a=[]);var f="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(n=0;n<r.length;n++)t=f(r[n]),c<t&&t<u&&(void 0===a[n]?o[d]=J.tickText(e,t):o[d]=A(e,t,String(a[n])),d++);d<r.length&&o.splice(d,r.length-d);return o}(e);e._tmin=J.tickFirst(e);var n=1.0001*t[0]-1e-4*t[1],r=1.0001*t[1]-1e-4*t[0],a=t[1]<t[0];if(e._tmin<n!==a)return[];var o=[];"category"===e.type&&(r=a?Math.max(-.5,r):Math.min(e._categories.length-.5,r));for(var i=null,s=Math.max(1e3,e._length||0),l=e._tmin;(a?r<=l:l<=r)&&!(o.length>s||l===i);l=J.tickIncrement(l,e.dtick,a,e.calendar))i=l,o.push(l);"angular"===e._id&&360===Math.abs(t[1]-t[0])&&o.pop(),e._tmax=o[o.length-1],e._prevDateHead="",e._inCalcTicks=!0;for(var c=new Array(o.length),u=0;u<o.length;u++)c[u]=J.tickText(e,o[u]);return e._inCalcTicks=!1,c};var m=[2,5,10],v=[1,2,3,6,12],x=[1,2,5,10,15,30],b=[1,2,3,7,14],_=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],w=[-.301,0,.301,.699,1],k=[15,30,45,90,180];function M(e,t,n){return t*V.roundUp(e/t,n)}function T(e){var t=e.dtick;if(e._tickexponent=0,B(t)||"string"==typeof t||(t=1),"category"===e.type&&(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),a=r.length;if("M"===String(t).charAt(0))10<a||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(p<=t&&a<=10||15*p<=t)e._tickround="d";else if(u<=t&&a<=16||c<=t)e._tickround="M";else if(d<=t&&a<=19||u<=t)e._tickround="S";else{var o=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(a,o)-20}}else if(B(t)||"L"===t.charAt(0)){var i=e.range.map(e.r2d||Number);B(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(i[0]),Math.abs(i[1])),l=Math.floor(Math.log(s)/Math.LN10+.01);3<Math.abs(l)&&(L(e.exponentformat)&&!C(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}function A(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}J.autoTicks=function(e,t){var n;function r(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=V.dateTick0(e.calendar);var a=2*t;l<a?(t/=l,n=r(10),e.dtick="M"+12*M(t,n,m)):y<a?(t/=y,e.dtick="M"+M(t,1,v)):p<a?(e.dtick=M(t,p,b),e.tick0=V.dateTick0(e.calendar,!0)):c<a?e.dtick=M(t,c,v):u<a?e.dtick=M(t,u,x):d<a?e.dtick=M(t,d,x):(n=r(10),e.dtick=M(t,n,m))}else if("log"===e.type){e.tick0=0;var o=V.simpleMap(e.range,e.r2l);if(.7<t)e.dtick=Math.ceil(t);else if(Math.abs(o[1]-o[0])<1){var i=1.5*Math.abs((o[1]-o[0])/t);t=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/i,n=r(10),e.dtick="L"+M(t,n,m)}else e.dtick=.3<t?"D2":"D1"}else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):"angular"===e._id?(e.tick0=0,n=1,e.dtick=M(t,n,k)):(e.tick0=0,n=r(10),e.dtick=M(t,n,m));if(0===e.dtick&&(e.dtick=1),!B(e.dtick)&&"string"!=typeof e.dtick){var s=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(s)}},J.tickIncrement=function(e,t,n,r){var a=n?-1:1;if(B(t))return e+a*t;var o=t.charAt(0),i=a*Number(t.substr(1));if("M"===o)return V.incrementMonth(e,i,r);if("L"===o)return Math.log(Math.pow(10,e)+i)/Math.LN10;if("D"===o){var s="D2"===t?w:_,l=e+.01*a,c=V.roundUp(V.mod(l,1),s,n);return Math.floor(l)+Math.log(F.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(t)},J.tickFirst=function(e){var t=e.r2l||Number,n=V.simpleMap(e.range,t),r=n[1]<n[0],a=r?Math.floor:Math.ceil,o=1.0001*n[0]-1e-4*n[1],i=e.dtick,s=t(e.tick0);if(B(i)){var l=a((o-s)/i)*i+s;return"category"===e.type&&(l=V.constrain(l,0,e._categories.length-1)),l}var c=i.charAt(0),u=Number(i.substr(1));if("M"===c){for(var d,f,h,p=0,g=s;p<10;){if(((d=J.tickIncrement(g,i,r,e.calendar))-o)*(g-o)<=0)return r?Math.min(g,d):Math.max(g,d);f=(o-(g+d)/2)/(d-g),h=c+(Math.abs(Math.round(f))||1)*u,g=J.tickIncrement(g,h,f<0?!r:r,e.calendar),p++}return V.error("tickFirst did not converge",e),g}if("L"===c)return Math.log(a((Math.pow(10,o)-s)/u)*u+s)/Math.LN10;if("D"===c){var y="D2"===i?w:_,m=V.roundUp(V.mod(o,1),y,r);return Math.floor(o)+Math.log(F.round(Math.pow(10,m),1))/Math.LN10}throw"unrecognized dtick "+String(i)},J.tickText=function(n,r,a){var e,t,o=A(n,r),i="array"===n.tickmode,s=a||i,l="category"===n.type?n.d2l_noadd:n.d2l;if(i&&Array.isArray(n.ticktext)){var c=V.simpleMap(n.range,n.r2l),u=Math.abs(c[1]-c[0])/1e4;for(t=0;t<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[t]))<u);t++);if(t<n.ticktext.length)return o.text=String(n.ticktext[t]),o}function d(e){var t;return void 0===e||(a?"none"===e:(t={first:n._tmin,last:n._tmax}[e],"all"!==e&&r!==t))}return e=a?"never":"none"!==n.exponentformat&&d(n.showexponent)?"hide":"","date"===n.type?function(e,t,n,r){var a=e._tickround,o=n&&e.hoverformat||J.getTickFormat(e);r&&(a=B(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var i,s=V.formatDate(t.x,o,a,e._dateFormat,e.calendar,e._extraFormat),l=s.indexOf("\n");-1!==l&&(i=s.substr(l+1),s=s.substr(0,l));r&&("00:00:00"===s||"00:00"===s?(s=i,i=""):8===s.length&&(s=s.replace(/:00$/,"")));i&&(n?"d"===a?s+=", "+i:s=i+(s?", "+s:""):e._inCalcTicks&&i===e._prevDateHead||(s+="<br>"+i,e._prevDateHead=i));t.text=s}(n,o,a,s):"log"===n.type?function(e,t,n,r,a){var o=e.dtick,i=t.x,s=e.tickformat;"never"===a&&(a="");!r||"string"==typeof o&&"L"===o.charAt(0)||(o="L3");if(s||"string"==typeof o&&"L"===o.charAt(0))t.text=z(Math.pow(10,i),e,a,r);else if(B(o)||"D"===o.charAt(0)&&V.mod(i+.01,1)<.1){var l=Math.round(i);-1!==["e","E","power"].indexOf(e.exponentformat)||L(e.exponentformat)&&C(l)?(t.text=0===l?1:1===l?"10":1<l?"10<sup>"+l+"</sup>":"10<sup>"+g+-l+"</sup>",t.fontSize*=1.25):(t.text=z(Math.pow(10,i),e,"","fakehover"),"D1"===o&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==o.charAt(0))throw"unrecognized dtick "+String(o);t.text=String(Math.round(Math.pow(10,V.mod(i,1)))),t.fontSize*=.75}if("D1"===e.dtick){var c=String(t.text).charAt(0);"0"!==c&&"1"!==c||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(i<0?.5:.25)))}}(n,o,0,s,e):"category"===n.type?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n="");t.text=String(n)}(n,o):"angular"===n._id?function(e,t,n,r,a){if("radians"!==e.thetaunit||n)t.text=z(t.x,e,a,r);else{var o=t.x/180;if(0===o)t.text="0";else{var i=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){var t=1;for(;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),n=e*t,a=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(n,t));return[Math.round(n/a),Math.round(t/a)]}(o);if(100<=i[1])t.text=z(V.deg2rad(t.x),e,a,r);else{var s=t.x<0;1===i[1]?1===i[0]?t.text="π":t.text=i[0]+"π":t.text=["<sup>",i[0],"</sup>","⁄","<sub>",i[1],"</sub>","π"].join(""),s&&(t.text=g+t.text)}}}}(n,o,a,s,e):function(e,t,n,r,a){"never"===a?a="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(a="hide");t.text=z(t.x,e,a,r)}(n,o,0,s,e),n.tickprefix&&!d(n.showtickprefix)&&(o.text=n.tickprefix+o.text),n.ticksuffix&&!d(n.showticksuffix)&&(o.text+=n.ticksuffix),o},J.hoverLabelText=function(e,t,n){if(n!==o&&n!==t)return J.hoverLabelText(e,t)+" - "+J.hoverLabelText(e,n);var r="log"===e.type&&t<=0,a=J.tickText(e,e.c2l(r?-t:t),"hover").text;return r?0===t?"0":g+a:a};var S=["f","p","n","μ","m","","k","M","G","T"];function L(e){return"SI"===e||"B"===e}function C(e){return 14<e||e<-15}function z(e,t,n,r){var a=e<0,o=t._tickround,i=n||t.exponentformat||"B",s=t._tickexponent,l=J.getTickFormat(t),c=t.separatethousands;if(r){var u={exponentformat:i,dtick:"none"===t.showexponent?t.dtick:B(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};T(u),o=(Number(u._tickround)||0)+4,s=u._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,g);var d,f=Math.pow(10,-o)/2;if("none"===i&&(s=0),(e=Math.abs(e))<f)a=!(e="0");else{if(e+=f,s&&(e*=Math.pow(10,-s),o+=s),0===o)e=String(Math.floor(e));else if(o<0){e=(e=String(Math.round(e))).substr(0,e.length+o);for(var h=o;h<0;h++)e+="0"}else{var p=(e=String(e)).indexOf(".")+1;p&&(e=e.substr(0,p+o).replace(/\.?0+$/,""))}e=V.numSeparate(e,t._separators,c)}s&&"hide"!==i&&(L(i)&&C(s)&&(i="power"),d=s<0?g+-s:"power"!==i?"+"+s:String(s),"e"===i?e+="e"+d:"E"===i?e+="E"+d:"power"===i?e+="×10<sup>"+d+"</sup>":"B"===i&&9===s?e+="B":L(i)&&(e+=S[s/3+5]));return a?g+e:e}function O(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function i(e,t,n){var r,a,o=[],i=[],s=e.layout;for(r=0;r<t.length;r++)o.push(J.getFromId(e,t[r]));for(r=0;r<n.length;r++)i.push(J.getFromId(e,n[r]));var l=Object.keys(o[0]),c=["anchor","domain","overlaying","position","side","tickangle"],u=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],f=o[0][d],h=i[0][d],p=!0,g=!1,y=!1;if("_"!==d.charAt(0)&&"function"!=typeof f&&-1===c.indexOf(d)){for(a=1;a<o.length&&p;a++){var m=o[a][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(m)&&f!==m?g=!0:m!==f&&(p=!1)}for(a=1;a<i.length&&p;a++){var v=i[a][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(v)&&h!==v?y=!0:i[a][d]!==h&&(p=!1)}p&&(g&&(s[o[0]._name].type="linear"),y&&(s[i[0]._name].type="linear"),j(s,d,o,i,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var x=e._fullLayout.annotations[r];-1!==t.indexOf(x.xref)&&-1!==n.indexOf(x.yref)&&V.swapAttrs(s.annotations[r],["?"])}}function j(e,t,n,r,a){var o,i=V.nestedProperty,s=i(e[n[0]._name],t).get(),l=i(e[r[0]._name],t).get();for("title"===t&&(s===a.x&&(s=a.y),l===a.y&&(l=a.x)),o=0;o<n.length;o++)i(e,n[o]._name+"."+t).set(l);for(o=0;o<r.length;o++)i(e,r[o]._name+"."+t).set(s)}J.getTickFormat=function(e){var t,n,r,a,o,i,s,l,c,u,d,f,h;function p(e){return"string"!=typeof e?e:Number(e.replace("M",""))*y}function g(e,t){var n=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),a=n.indexOf(t.charAt(0));return r===a?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-a}return"number"==typeof e?1:-1}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if(c=e.dtick,u=e.tickformatstops[t].dtickrange,d=void 0,d=p||function(e){return e},f=u[0],h=u[1],(!f&&"number"!=typeof f||d(f)<=d(c))&&(!h&&"number"!=typeof h||d(h)>=d(c))){n=e.tickformatstops[t];break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if(r=e.dtick,a=e.tickformatstops[t].dtickrange,void 0,o=null===a[0],i=null===a[1],s=0<=g(r,a[0]),l=g(r,a[1])<=0,(o||s)&&(i||l)){n=e.tickformatstops[t];break}}return n?n.value:e.tickformat},J.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),a=t?J.findSubplotsWithAxis(r,t):r;return a.sort(function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),a},J.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],a=0;a<e.length;a++){var o=e[a];n.test(o)&&r.push(o)}return r},J.makeClipPaths=function(e){var t,n,r=e._fullLayout,a={_offset:0,_length:r.width,_id:""},o={_offset:0,_length:r.height,_id:""},i=J.list(e,"x",!0),s=J.list(e,"y",!0),l=[];for(t=0;t<i.length;t++)for(l.push({x:i[t],y:o}),n=0;n<s.length;n++)0===t&&l.push({x:a,y:s[n]}),l.push({x:i[t],y:s[n]});var c=r._clips.selectAll(".axesclip").data(l,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+r._uid+e.x._id+e.y._id}).append("rect"),c.exit().remove(),c.each(function(e){F.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},J.doTicks=function(g,y,f){var m,p=g._fullLayout,e=!1;if("object"==typeof y)y=(m=y)._id,e=!0;else if(m=J.getFromId(g,y),"redraw"===y&&p._paper.selectAll("g.subplot").each(function(e){var t=p._plots[e],n=t.xaxis,r=t.yaxis;t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+r._id+"tick").remove(),t.gridlayer.selectAll("path").remove(),t.zerolinelayer.selectAll("path").remove(),p._infolayer.select(".g-"+n._id+"title").remove(),p._infolayer.select(".g-"+r._id+"title").remove()}),!y||"redraw"===y)return V.syncOrAsync(J.list(g,"",!0).map(function(t){return function(){if(t._id){var e=J.doTicks(g,t._id);return"redraw"===y&&(t._r=t.range.slice(),t._rl=V.simpleMap(t._r,t.r2l)),e}}}));m.setScale();var t,v,a,x,b,_=y.charAt(0),o=J.counterLetter(y),w=J.calcTicks(m),k=function(e){return[e.text,e.x,m.mirror,e.font,e.fontSize,e.fontColor].join("_")},M=y+"tick",T=y+"grid",A=y+"zl",S=(m.linewidth||1)/2,L="outside"===m.ticks?m.ticklen:0,C=0,z=X.crispRound(g,m.gridwidth,1),O=X.crispRound(g,m.zerolinewidth,z),r=X.crispRound(g,m.tickwidth,1);if(m._counterangle&&"outside"===m.ticks){var n=m._counterangle*Math.PI/180;L=m.ticklen*Math.cos(n)+1,C=m.ticklen*Math.sin(n)}if(m.showticklabels&&("outside"===m.ticks||m.showline)&&(L+=.2*m.tickfont.size),"x"===_)t=["bottom","top"],v=m._transfn||function(e){return"translate("+(m._offset+m.l2p(e.x))+",0)"},a=function(e,t){if(m._counterangle){var n=m._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else if("y"===_)t=["left","right"],v=m._transfn||function(e){return"translate(0,"+(m._offset+m.l2p(e.x))+")"},a=function(e,t){if(m._counterangle){var n=m._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+-Math.sin(n)*t}return"M"+e+",0h"+t};else{if("angular"!==y)return void V.warn("Unrecognized doTicks axis:",y);t=["left","right"],v=m._transfn,a=function(e,t){return"M"+e+",0h"+t}}var j=m.side||t[0],i=[-1,1,j===t[1]?1:-1];if("inside"!==m.ticks==("x"===_)&&(i=i.map(function(e){return-e})),m.visible){m._tickFilter&&(w=w.filter(m._tickFilter));var P=w.filter(D);if("angular"===m._id&&(P=w),e){if(I(m._axislayer,a(m._pos+S*i[2],i[2]*m.ticklen)),m._counteraxis)N({gridlayer:m._gridlayer,zerolinelayer:m._zerolinelayer},m._counteraxis);return E(m._axislayer,m._pos)}if(p._has("cartesian")){x=J.getSubplots(g,m);var s={};x.map(function(e){var t=p._plots[e],n=t[o+"axis"],r=n._mainAxis._id;s[r]||(s[r]=1,N(t,n,e))});var l=m._mainSubplot,c=p._plots[l],u=[];if(m.ticks){var d=i[2],h=a(m._mainLinePosition+S*d,d*m.ticklen);m._anchorAxis&&m.mirror&&!0!==m.mirror&&(h+=a(m._mainMirrorPosition-S*d,-d*m.ticklen)),I(c[_+"axislayer"],h),u=Object.keys(m._linepositions)}return u.map(function(e){var t=p._plots[e][_+"axislayer"],n=m._linepositions[e]||[];function r(e){var t=i[e];return a(n[e]+S*t,t*m.ticklen)}I(t,r(0)+r(1))}),E(c[_+"axislayer"],m._mainLinePosition)}}function D(e){var t=m.l2p(e.x);return 1<t&&t<m._length-1}function I(e,t){var n=e.selectAll("path."+M).data("inside"===m.ticks?P:w,k);t&&m.ticks?(n.enter().append("path").classed(M,1).classed("ticks",1).classed("crisp",1).call(Y.stroke,m.tickcolor).style("stroke-width",r+"px").attr("d",t),n.attr("transform",v),n.exit().remove()):n.remove()}function E(s,t){var l,c,u,n,r,e=s.selectAll("g."+M).data(w,k);if(!B(t))return e.remove(),void R();if(!m.showticklabels)return e.remove(),R(),void f();"x"===_?(l=function(e){return e.dx+C*r},n=t+(L+S)*(r="bottom"===j?1:-1),c=function(e){return e.dy+n+e.fontSize*("bottom"===j?1:-.2)},u=function(e){return B(e)&&0!==e&&180!==e?e*r<0?"end":"start":"middle"}):"y"===_?(r="right"===j?1:-1,c=function(e){return e.dy+e.fontSize*Z-C*r},l=function(e){return e.dx+t+(L+S+(90===Math.abs(m.tickangle)?e.fontSize/2:0))*r},u=function(e){return B(e)&&90===Math.abs(e)?"middle":"right"===j?"start":"end"}):"angular"===y&&(m._labelShift=C,m._labelStandoff=L,m._pad=S,l=m._labelx,c=m._labely,u=m._labelanchor);var a=0,i=0,o=[];function d(e,s){e.each(function(e){var t=u(s,e),n=F.select(this),r=n.select(".text-math-group"),a=v.call(n.node(),e)+(B(s)&&0!=+s?" rotate("+s+","+l(e)+","+(c(e)-e.fontSize/2)+")":""),o=function(e,t,n){var r=(e-1)*t;if("x"===_){if(n<-60||60<n)return-.5*r;if("top"===j)return-r}else{if((n*="left"===j?1:-1)<-30)return-r;if(n<30)return-.5*r}return 0}(U.lineCount(n),W*e.fontSize,B(s)?+s:0);if(o&&(a+=" translate(0, "+o+")"),r.empty())n.select("text").attr({transform:a,"text-anchor":t});else{var i=X.bBox(r.node()).width*{end:-.5,start:.5}[t];r.attr("transform",a+(i?"translate("+i+",0)":""))}})}function f(){if(m.showticklabels){var e=g.getBoundingClientRect(),t=s.node().getBoundingClientRect();m._boundingBox={width:t.width,height:t.height,left:t.left-e.left,right:t.right-e.left,top:t.top-e.top,bottom:t.bottom-e.top}}else{var n,r=p._size;"x"===_?(n="free"===m.anchor?r.t+r.h*(1-m.position):r.t+r.h*(1-m._anchorAxis.domain[{bottom:0,top:1}[m.side]]),m._boundingBox={top:n,bottom:n,left:m._offset,right:m._offset+m._length,width:m._length,height:0}):(n="free"===m.anchor?r.l+r.w*m.position:r.l+r.w*m._anchorAxis.domain[{left:0,right:1}[m.side]],m._boundingBox={left:n,right:n,bottom:m._offset+m._length,top:m._offset,height:m._length,width:0})}if(x){var a=m._counterSpan=[1/0,-1/0];for(b=0;b<x.length;b++){var o=p._plots[x[b]]["x"===_?"yaxis":"xaxis"];i(a,[o._offset,o._offset+o._length])}"free"===m.anchor&&i(a,"x"===_?[m._boundingBox.bottom,m._boundingBox.top]:[m._boundingBox.right,m._boundingBox.left])}function i(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[1])}}e.enter().append("g").classed(M,1).append("text").attr("text-anchor","middle").each(function(e){var t=F.select(this),n=g._promises.length;t.call(U.positionText,l(e),c(e)).call(X.font,e.font,e.fontSize,e.fontColor).text(e.text).call(U.convertToTspans,g),(n=g._promises[n])?o.push(g._promises.pop().then(function(){d(t,m.tickangle)})):d(t,m.tickangle)}),e.exit().remove(),e.each(function(e){a=Math.max(a,e.fontSize)}),"angular"===y&&e.each(function(e){F.select(this).select("text").call(U.positionText,l(e),c(e))}),d(e,m._lastangle||m.tickangle);var h=V.syncOrAsync([function(){return o.length&&Promise.all(o)},function(){if(d(e,m.tickangle),"x"===_&&!B(m.tickangle)&&("log"!==m.type||"D"!==String(m.dtick).charAt(0))){var o=[];for(e.each(function(e){var t=F.select(this),n=t.select(".text-math-group"),r=m.l2p(e.x);n.empty()&&(n=t.select("text"));var a=X.bBox(n.node());o.push({top:0,bottom:10,height:10,left:r-a.width/2,right:r+a.width/2+2,width:a.width+2})}),b=0;b<o.length-1;b++)if(V.bBoxIntersect(o[b],o[b+1])){i=30;break}i&&(Math.abs((w[w.length-1].x-w[0].x)*m._m)/(w.length-1)<2.5*a&&(i=90),d(e,i)),m._lastangle=i}return R(),y+" done"},f,function(){if(m.automargin&&("x"===_||"y"===_)){var e=m.side[0],t={x:0,y:0,r:0,l:0,t:0,b:0};"x"===_?(t.y="free"===m.anchor?m.position:m._anchorAxis.domain["t"===e?1:0],t[e]+=m._boundingBox.height):(t.x="free"===m.anchor?m.position:m._anchorAxis.domain["r"===e?1:0],t[e]+=m._boundingBox.width),m.title!==p._dfltTitle[_]&&(t[e]+=m.titlefont.size);var n=m._name+".automargin",r=p._pushmargin[n];(!r||r[e].size<t[e])&&q.autoMargin(g,n,t)}}]);return h&&h.then&&g._promises.push(h),h}function R(){if(!f){var e=Q.getFromId(g,y);if(!(e.rangeslider&&e.rangeslider.visible&&e._boundingBox&&"bottom"===e.side)){var t,n,r,a,o=F.select(g).selectAll("g."+y+"tick"),i={selection:o,side:e.side},s=y.charAt(0),l=g._fullLayout._size,c=e.titlefont.size;if(o.size()){var u=X.getTranslate(o.node().parentNode);i.offsetLeft=u.x,i.offsetTop=u.y}var d=10+1.5*c+(e.linewidth?e.linewidth-1:0);"x"===s?(n="free"===e.anchor?{_offset:l.t+(1-(e.position||0))*l.h,_length:0}:Q.getFromId(g,e.anchor),r=e._offset+e._length/2,a="top"===e.side?-d-c*(e.showticklabels?1:0):n._length+d+c*(e.showticklabels?1.5:.5),a+=n._offset,i.side||(i.side="bottom")):(n="free"===e.anchor?{_offset:l.l+(e.position||0)*l.w,_length:0}:Q.getFromId(g,e.anchor),a=e._offset+e._length/2,r="right"===e.side?n._length+d+c*(e.showticklabels?1:.5):-d-c*(e.showticklabels?.5:0),r+=n._offset,t={rotate:"-90",offset:0},i.side||(i.side="left")),G.draw(g,y+"title",{propContainer:e,propName:e._name+".title",placeholder:p._dfltTitle[s],avoid:i,transform:t,attributes:{x:r,y:a,"text-anchor":"middle"}})}}}function N(e,t,n){var r,a,o=e.gridlayer.selectAll("."+y),i=e.zerolinelayer,s=e["hidegrid"+_]?[]:P,l=m._gridpath||("x"===_?"M0,"+t._offset+"v":"M"+t._offset+",0h")+t._length,c=o.selectAll("path."+T).data(!1===m.showgrid?[]:s,k);if(c.enter().append("path").classed(T,1).classed("crisp",1).attr("d",l).each(function(e){m.zeroline&&("linear"===m.type||"-"===m.type)&&Math.abs(e.x)<m.dtick/100&&F.select(this).remove()}),c.attr("transform",v).call(Y.stroke,m.gridcolor||"#ddd").style("stroke-width",z+"px"),"function"==typeof l&&c.attr("d",l),c.exit().remove(),i){for(var u=!1,d=0;d<g._fullData.length;d++)if(r=g._fullData[d],a=n,!0===r.visible&&r.xaxis+r.yaxis===a&&(H.traceIs(r,"bar")&&r.orientation==={x:"h",y:"v"}[_]||r.fill&&r.fill.charAt(r.fill.length-1)===_)){u=!0;break}var f=V.simpleMap(m.range,m.r2l),h=f[0]*f[1]<=0&&m.zeroline&&("linear"===m.type||"-"===m.type)&&s.length&&(u||D({x:0})||!m.showline),p=i.selectAll("path."+A).data(h?[{x:0,id:y}]:[]);p.enter().append("path").classed(A,1).classed("zl",1).classed("crisp",1).attr("d",l).each(function(){i.selectAll("path").sort(function(e,t){return Q.idSort(e.id,t.id)})}),p.attr("transform",v).call(Y.stroke,m.zerolinecolor||Y.defaultLine).style("stroke-width",O+"px"),p.exit().remove()}}},J.swap=function(e,t){for(var n=function(e,t){var n,r,a=[];for(n=0;n<t.length;n++){var o=[],i=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(i&&s){for(r=0;r<a.length;r++)-1===a[r].x.indexOf(i)&&-1===a[r].y.indexOf(s)||o.push(r);if(o.length){var l,c=a[o[0]];if(1<o.length)for(r=1;r<o.length;r++)l=a[o[r]],O(c.x,l.x),O(c.y,l.y);O(c.x,[i]),O(c.y,[s])}else a.push({x:[i],y:[s]})}}return a}(e,t),r=0;r<n.length;r++)i(e,n[r].x,n[r].y)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/drawing":60,"../../components/titles":128,"../../constants/alignment":135,"../../constants/numerical":137,"../../lib":156,"../../lib/svg_text_utils":177,"../../plots/plots":240,"../../registry":248,"./autorange":198,"./axis_autotype":200,"./axis_ids":202,"./set_convert":218,"fast-isnumeric":4}],200:[function(e,t,n){"use strict";var s=e("fast-isnumeric"),l=e("../../lib"),i=e("../../constants/numerical").BADNUM;t.exports=function(e,t){return function(e,t){for(var n,r=0,a=0,o=Math.max(1,(e.length-1)/1e3),i=0;i<e.length;i+=o)n=e[Math.round(i)],l.isDateTime(n,t)&&(r+=1),s(n)&&(a+=1);return 2*a<r}(e,t)?"date":function(e){for(var t,n=Math.max(1,(e.length-1)/1e3),r=0,a=0,o=0;o<e.length;o+=n)t=e[Math.round(o)],l.cleanNumber(t)!==i?r++:"string"==typeof t&&""!==t&&"None"!==t&&a++;return 2*r<a}(e)?"category":function(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(s(e[t]))return!0;return!1}(e)?"linear":"-"}},{"../../constants/numerical":137,"../../lib":156,"fast-isnumeric":4}],201:[function(e,t,n){"use strict";var f=e("../../registry"),h=e("../../lib"),p=e("./layout_attributes"),g=e("./tick_value_defaults"),y=e("./tick_mark_defaults"),m=e("./tick_label_defaults"),v=e("./category_order_defaults"),x=e("./line_grid_defaults"),b=e("./set_convert"),_=e("./ordered_categories");t.exports=function(e,t,n,r,a){var o=r.letter,i=r.font||{},s=n("visible",!r.cheateronly),l=t.type;"date"===l&&f.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar);b(t,a);var c=n("autorange",!t.isValidRange(e.range));if(t._rangesliderAutorange=!1,c&&n("rangemode"),n("range"),t.cleanRange(),v(e,t,n),t._initialCategories="category"===l?_(o,t.categoryorder,t.categoryarray,r.data):[],"category"===l||r.noHover||n("hoverformat"),!s)return t;var u=n("color"),d=u===e.color?u:i.color;return n("title",a._dfltTitle[o]),h.coerceFont(n,"titlefont",{family:i.family,size:Math.round(1.2*i.size),color:d}),g(e,t,n,l),m(e,t,n,l,r),y(e,t,n,r),x(e,t,n,{dfltColor:u,bgColor:r.bgColor,showGrid:r.showGrid,attributes:p}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin"),t}},{"../../lib":156,"../../registry":248,"./category_order_defaults":203,"./layout_attributes":211,"./line_grid_defaults":213,"./ordered_categories":214,"./set_convert":218,"./tick_label_defaults":219,"./tick_mark_defaults":220,"./tick_value_defaults":221}],202:[function(e,t,u){"use strict";var i=e("../../registry"),r=e("./constants");u.id2name=function(e){if("string"==typeof e&&e.match(r.AX_ID_PATTERN)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},u.name2id=function(e){if(e.match(r.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},u.cleanId=function(e,t){if(e.match(r.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var a,o=u.listIds(e,t),i=new Array(o.length);for(a=0;a<o.length;a++){var s=o[a];i[a]=r[s.charAt(0)+"axis"+s.substr(1)]}if(!n){var l=r._subplots.gl3d||[];for(a=0;a<l.length;a++){var c=r[l[a]];t?i.push(c[t+"axis"]):i.push(c.xaxis,c.yaxis,c.zaxis)}}return i},u.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},u.getFromId=function(e,t,n){var r=e._fullLayout;return"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),r[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r=e._fullLayout,a=null;if(i.traceIs(t,"gl3d")){var o=t.scene;"scene"===o.substr(0,5)&&(a=r[o][n+"axis"])}else a=u.getFromId(e,t[n+"axis"]||n);return a},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":248,"./constants":204}],203:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("category"===t.type){var r,a=e.categoryarray,o=Array.isArray(a)&&0<a.length;o&&(r="array");var i=n("categoryorder",r);"array"===i&&n("categoryarray"),o||"array"!==i||(t.categoryorder="trace")}}},{}],204:[function(e,t,n){"use strict";var r=e("../../lib/regex").counter;t.exports={idRegex:{x:r("x"),y:r("y")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":171}],205:[function(e,t,n){"use strict";var d=e("../../lib"),f=e("./axis_ids").id2name;t.exports=function(e,t,n,r,a){var o=a._axisConstraintGroups,i=t._id,s=i.charAt(0);if(!t.fixedrange&&(n("constrain"),d.coerce(e,t,{constraintoward:{valType:"enumerated",values:"x"===s?["left","center","right"]:["bottom","middle","top"],dflt:"x"===s?"center":"middle"}},"constraintoward"),e.scaleanchor)){var l=function(e,t,n,r){var a,o,i,s,l=r[f(t)].type,c=[];for(o=0;o<n.length;o++)(i=n[o])!==t&&((s=r[f(i)]).type!==l||s.fixedrange||c.push(i));for(a=0;a<e.length;a++)if(e[a][t]){var u=e[a],d=[];for(o=0;o<c.length;o++)i=c[o],u[i]||d.push(i);return{linkableAxes:d,thisGroup:u}}return{linkableAxes:c,thisGroup:null}}(o,i,r,a),c=d.coerce(e,t,{scaleanchor:{valType:"enumerated",values:l.linkableAxes}},"scaleanchor");if(c){var u=n("scaleratio");u||(u=t.scaleratio=1),function(e,t,n,r,a){var o,i,s,l,c;null===t?((t={})[n]=1,c=e.length,e.push(t)):c=e.indexOf(t);var u=Object.keys(t);for(o=0;o<e.length;o++)if(s=e[o],o!==c&&s[r]){var d=s[r];for(i=0;i<u.length;i++)l=u[i],s[l]=d*a*t[l];return e.splice(c,1)}if(1!==a)for(i=0;i<u.length;i++)t[u[i]]*=a;t[r]=1}(o,l.thisGroup,i,c,u)}else-1!==r.indexOf(e.scaleanchor)&&d.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":156,"./axis_ids":202}],206:[function(e,t,n){"use strict";var P=e("./axis_ids").id2name,D=e("./scale_zoom"),I=e("./autorange").makePadFn,E=e("../../constants/numerical").ALMOST_EQUAL,o=e("../../constants/alignment").FROM_BL;function R(e,t){var n=e._inputDomain,r=o[e.constraintoward],a=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[a+(n[0]-a)/t,a+(n[1]-a)/t]}n.enforce=function(e){var t,n,r,a,o,i,s,l=e._fullLayout,c=l._axisConstraintGroups||[];for(t=0;t<c.length;t++){var u=c[t],d=Object.keys(u),f=1/0,h=0,p=1/0,g={},y={},m=!1;for(n=0;n<d.length;n++)y[r=d[n]]=a=l[P(r)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),g[r]=o=Math.abs(a._m)/u[r],f=Math.min(f,o),"domain"!==a.constrain&&a._constraintShrinkable||(p=Math.min(p,o)),delete a._constraintShrinkable,h=Math.max(h,o),"domain"===a.constrain&&(m=!0);if(!(E*h<f)||m)for(n=0;n<d.length;n++)if(o=g[r=d[n]],i=(a=y[r]).constrain,o!==p||"domain"===i)if(s=o/p,"range"===i)D(a,s);else{var v=a._inputDomain,x=(a.domain[1]-a.domain[0])/(v[1]-v[0]),b=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((s/=x)*b<1){a.domain=a._input.domain=v.slice(),D(a,s);continue}if(b<1&&(a.range=a._input.range=a._inputRange.slice(),s*=b),a.autorange&&a._min.length&&a._max.length){var _=a.r2l(a.range[0]),w=a.r2l(a.range[1]),k=(_+w)/2,M=k,T=k,A=Math.abs(w-k),S=k-A*s*1.0001,L=k+A*s*1.0001,C=I(a);R(a,s),a.setScale();var z,O,j=Math.abs(a._m);for(O=0;O<a._min.length;O++)S<(z=a._min[O].val-C(a._min[O])/j)&&z<M&&(M=z);for(O=0;O<a._max.length;O++)(z=a._max[O].val+C(a._max[O])/j)<L&&T<z&&(T=z);s/=(T-M)/(2*A),M=a.l2r(M),T=a.l2r(T),a.range=a._input.range=_<w?[M,T]:[T,M]}R(a,s)}}},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,a=e._fullLayout._axisConstraintGroups,o=0;o<a.length;o++)if(a[o][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":135,"../../constants/numerical":137,"./autorange":198,"./axis_ids":202,"./scale_zoom":216}],207:[function(n,c,e){(function(e){"use strict";var $="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,K=n("tinycolor2"),r=n("has-passive-events"),ee=n("../../registry"),te=n("../../lib"),ne=n("../../lib/svg_text_utils"),a=n("../../components/color"),re=n("../../components/drawing"),ae=n("../../components/fx"),o=n("../../lib/setcursor"),i=n("../../components/dragelement"),oe=n("../../constants/alignment").FROM_TL,ie=n("../plots"),se=n("./axes").doTicks,le=n("./axis_ids").getFromId,ce=n("./select"),ue=n("./scale_zoom"),de=n("./constants"),fe=de.MINDRAG,he=de.MINZOOM,t=!0;function l(e,t,n,r){var a=e.draglayer.selectAll("."+n).data([0]);return a.enter().append(t).classed("drag",!0).classed(n,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id),a.call(o,r),a.node()}function pe(e,t,n,r,a,o,i){var s=l(e,"rect",t,n);return $.select(s).call(re.setRect,r,a,o,i),s}function ge(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function ye(e,t,n,r,a){var o,i,s,l;for(o=0;o<e.length;o++)(i=e[o]).fixedrange||(s=i._rl[0],l=i._rl[1]-s,i.range=[i.l2r(s+l*t),i.l2r(s+l*n)],r[i._name+".range[0]"]=i.range[0],r[i._name+".range[1]"]=i.range[1]);if(a&&a.length){var c=(t+(1-n))/2;ye(a,c,1-c,r)}}function me(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)])}}function ve(e,t,n,r,a){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",a+"Z")}function xe(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+n+")").attr("d","M0,0Z")}function be(e){e.selectAll(".select-outline").remove()}function _e(e,t,n,r,a,o){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),s(e,t,a,o)}function s(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function we(e){$.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ke(e){t&&e.data&&e._context.showTips&&(te.notifier(te._(e,"Double-click to zoom back out"),"long"),t=!1)}function Me(e){return"lasso"===e||"select"===e}function Te(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,he)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Ae(e,t){if(r){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel&&(e.onmousewheel=t)}c.exports={makeDragBox:function(h,p,e,t,n,r,T,A){var g,S,L,y,m,v,x,b,_,w,C,z,O,j=h._fullLayout,c=h._fullLayout._zoomlayer,k=T+A==="nsew",M=1===(T+A).length;function u(){S=[p.xaxis],L=[p.yaxis];var e=S[0],t=L[0];v=e._length,x=t._length;var n,r,a=j._axisConstraintGroups,o=[e._id],i=[t._id];g=[p].concat(T&&A?p.overlays:[]);for(var s=1;s<g.length;s++){var l=g[s].xaxis,c=g[s].yaxis;-1===S.indexOf(l)&&(S.push(l),o.push(l._id)),-1===L.indexOf(c)&&(L.push(c),i.push(c._id))}b=ge(S,A),_=ge(L,T),n=_+b,r=j.dragmode,w=n?"nsew"===n?"pan"===r?"move":"crosshair":n.toLowerCase()+"-resize":"pointer",y=e._offset,m=t._offset;var u=function(e,t,n){var r,a,o,i,s,l,c=!1,u={},d={};for(r=0;r<e.length;r++){for(i=e[r],a=0;a<t.length;a++)if(i[t[a]]){for(s in i)-1===("x"===s.charAt(0)?t:n).indexOf(s)&&(u[s]=1);for(o=0;o<n.length;o++)i[n[o]]&&(c=!0)}for(a=0;a<n.length;a++)if(i[n[a]])for(l in i)-1===("x"===l.charAt(0)?t:n).indexOf(l)&&(d[l]=1)}return c&&(te.extendFlat(u,d),d={}),{x:u,y:d,xy:c}}(a,o,i);for(var d in C=u.xy,z=[],u.x)z.push(le(h,d));for(var f in O=[],u.y)O.push(le(h,f))}u();var P=pe(p,T+A+"drag",w,e,t,n,r),s=!_&&!b;if(s&&!k)return P.onmousedown=null,P.style.pointerEvents="none",P;var d,f,D,I,E,R,N,F,B,l={element:P,gd:h,plotinfo:p,prepFn:function(e,t,n){var r,a,o,i=h._fullLayout.dragmode;s||(k?e.shiftKey?"pan"===i?i="zoom":Me(i)||(i="pan"):e.ctrlKey&&(i="pan"):i="pan"),l.minDrag="lasso"===i?1:void 0,Me(i)?(l.xaxes=S,l.yaxes=L,ce(e,t,n,l,i)):s?be(c):"zoom"===i?(l.moveFn=H,l.doneFn=V,l.minDrag=1,r=t,a=n,o=P.getBoundingClientRect(),d=r-o.left,f=a-o.top,D={l:d,r:d,w:0,t:f,b:f,h:0},I=h._hmpixcount?h._hmlumcount/h._hmpixcount:K(h._fullLayout.plot_bgcolor).getLuminance(),R=!1,N="xy",F=ve(c,I,y,m,E="M0,0H"+v+"V"+x+"H0V0"),B=xe(c,y,m),be(c)):"pan"===i&&(l.moveFn=Z,l.doneFn=J,be(c))},clickFn:function(e,t){if(we(h),2!==e||M||function(){if(!h._transitioningWithDuration){var e,t,n,r=h._context.doubleClick,a=(b?S:[]).concat(_?L:[]),o={};if("reset+autosize"===r)for(r="autosize",t=0;t<a.length;t++)if((e=a[t])._rangeInitial&&(e.range[0]!==e._rangeInitial[0]||e.range[1]!==e._rangeInitial[1])||!e._rangeInitial&&!e.autorange){r="reset";break}if("autosize"===r)for(t=0;t<a.length;t++)(e=a[t]).fixedrange||(o[e._name+".autorange"]=!0);else if("reset"===r)for((b||C)&&(a=a.concat(z)),_&&!C&&(a=a.concat(O)),C&&(b?_||(a=a.concat(L)):a=a.concat(S)),t=0;t<a.length;t++)(e=a[t])._rangeInitial?(n=e._rangeInitial,o[e._name+".range[0]"]=n[0],o[e._name+".range[1]"]=n[1]):o[e._name+".autorange"]=!0;h.emit("plotly_doubleclick",null),ee.call("relayout",h,o)}}(),k)ae.click(h,t,p.id);else if(1===e&&M){var n=T?L[0]:S[0],r="s"===T||"w"===A?0:1,a=n._name+".range["+r+"]",o=(c=r,d=(l=n).range[c],f=Math.abs(d-l.range[1-c]),"date"===l.type?d:"log"===l.type?(u=Math.ceil(Math.max(0,-Math.log(f)/Math.LN10))+3,$.format("."+u+"g")(Math.pow(10,d))):(u=Math.floor(Math.log(Math.abs(d))/Math.LN10)-Math.floor(Math.log(f)/Math.LN10)+4,$.format("."+String(u)+"g")(d))),i="left",s="middle";if(n.fixedrange)return;T?(s="n"===T?"top":"bottom","right"===n.side&&(i="right")):"e"===A&&(i="right"),h._context.showAxisRangeEntryBoxes&&$.select(P).call(ne.makeEditable,{gd:h,immediate:!0,background:j.paper_bgcolor,text:String(o),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:i,verticalAlign:s}).on("edit",function(e){var t=n.d2r(e);void 0!==t&&ee.call("relayout",h,a,t)})}var l,c,u,d,f}};i.init(l);var q={};function H(e,t){if(h._transitioningWithDuration)return!1;var n,r,a,o,i=Math.max(0,Math.min(v,e+d)),s=Math.max(0,Math.min(x,t+f)),l=Math.abs(i-d),c=Math.abs(s-f);function u(){N="",D.r=D.l,D.t=D.b,B.attr("d","M0,0Z")}D.l=Math.min(d,i),D.r=Math.max(d,i),D.t=Math.min(f,s),D.b=Math.max(f,s),C?he<l||he<c?(N="xy",c/x<l/v?(c=l*x/v,s<f?D.t=f-c:D.b=f+c):(l=c*v/x,i<d?D.l=d-l:D.r=d+l),B.attr("d",Te(D))):u():!_||c<Math.min(Math.max(.6*l,fe),he)?l<fe?u():(D.t=0,D.b=x,N="x",B.attr("d",(o=f,"M"+((a=D).l-.5)+","+(o-he-.5)+"h-3v"+(2*he+1)+"h3ZM"+(a.r+.5)+","+(o-he-.5)+"h3v"+(2*he+1)+"h-3Z"))):!b||l<Math.min(.6*c,he)?(D.l=0,D.r=v,N="y",B.attr("d","M"+((r=d)-he-.5)+","+((n=D).t-.5)+"v-3h"+(2*he+1)+"v3ZM"+(r-he-.5)+","+(n.b+.5)+"v3h"+(2*he+1)+"v-3Z")):(N="xy",B.attr("d",Te(D))),D.w=D.r-D.l,D.h=D.b-D.t,_e(F,B,D,E,R,I),R=!0}function V(){if(Math.min(D.h,D.w)<2*fe)return we(h);"xy"!==N&&"x"!==N||ye(S,D.l/v,D.r/v,q,z),"xy"!==N&&"y"!==N||ye(L,(x-D.b)/x,(x-D.t)/x,q,O),we(h),J(),ke(h)}var U=[0,0,v,x],G=null,Y=de.REDRAWDELAY,X=p.mainplot?j._plots[p.mainplot]:p;function Z(e,t){if(!h._transitioningWithDuration){if(u(),"ew"===b||"ns"===_)return b&&me(S,e),_&&me(L,t),Q([b?-e:0,_?-t:0,v,x]),void W(_,b);if(C&&b&&_){var n="w"===b==("n"===_)?1:-1,r=(e/v+n*t/x)/2;e=r*v,t=n*r*x}"w"===b?e=s(S,0,e):"e"===b?e=s(S,1,-e):b||(e=0),"n"===_?t=s(L,1,t):"s"===_?t=s(L,0,-t):_||(t=0);var a="w"===b?e:0,o="n"===_?t:0;if(C){var i;if(!b&&1===_.length){for(i=0;i<S.length;i++)S[i].range=S[i]._r.slice(),ue(S[i],1-t/x);a=(e=t*v/x)/2}if(!_&&1===b.length){for(i=0;i<L.length;i++)L[i].range=L[i]._r.slice(),ue(L[i],1-e/v);o=(t=e*x/v)/2}}Q([a,o,v-e,x-t]),W(_,b)}function s(e,t,n){for(var r,a,o,i=1-t,s=0;s<e.length;s++){var l=e[s];if(!l.fixedrange){a=(r=l)._rl[i]+(l._rl[t]-l._rl[i])/(1-(0<=(o=n/l._length)?Math.min(o,.9):1/(1/Math.max(o,-.3)+3.222)));var c=l.l2r(a);!1!==c&&void 0!==c&&(l.range[t]=c)}}return r._length*(r._rl[t]-a)/(r._rl[t]-r._rl[i])}}function W(a,o){var i,s=[];function e(e){for(i=0;i<e.length;i++)e[i].fixedrange||s.push(e[i]._id)}for((o||C)&&(e(S),e(z)),(a||C)&&(e(L),e(O)),q={},i=0;i<s.length;i++){var t=s[i];se(h,t,!0);var n=le(h,t);q[n._name+".range[0]"]=n.range[0],q[n._name+".range[1]"]=n.range[1]}function r(e,t,n){for(i=0;i<e.length;i++){var r=e[i];if((o&&-1!==s.indexOf(r.xref)||a&&-1!==s.indexOf(r.yref))&&(t(h,i),n))return}}r(j.annotations||[],ee.getComponentMethod("annotations","drawOne")),r(j.shapes||[],ee.getComponentMethod("shapes","drawOne")),r(j.images||[],ee.getComponentMethod("images","draw"),!0)}function J(){Q([0,0,v,x]),te.syncOrAsync([ie.previousPromises,function(){ee.call("relayout",h,q)}],h)}function Q(e){var t,n,r,a,o,i=j._plots,s=Object.keys(i),l=e[2]/S[0]._length,c=e[3]/L[0]._length,u=A||C,d=T||C;function f(e){return e.fixedrange?0:u&&-1!==z.indexOf(e)?l:d&&-1!==(C?z:O).indexOf(e)?c:0}function h(e,t){return t?(e.range=e._r.slice(),ue(e,t),p(e,t)):0}function p(e,t){return e._length*(1-t)*oe[e.constraintoward||"middle"]}for(j._glcanvas&&j._glcanvas.size()&&j._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0})}),t=0;t<s.length;t++){var g=i[s[t]],y=g.xaxis,m=g.yaxis,v=u&&!y.fixedrange&&-1!==S.indexOf(y),x=d&&!m.fixedrange&&-1!==L.indexOf(m);if(g._scene&&g._scene.update){var b=te.simpleMap(y.range,y.r2l),_=te.simpleMap(m.range,m.r2l);g._scene.update({range:[b[0],_[0],b[1],_[1]]})}if(v?(n=l,a=A?e[0]:p(y,n)):a=h(y,n=f(y)),x?(r=c,o=T?e[1]:p(m,r)):o=h(m,r=f(m)),n||r){n||(n=1),r||(r=1);var w=y._offset-a/n,k=m._offset-o/r;j._defs.select("#"+g.clipId+"> rect").call(re.setTranslate,a,o).call(re.setScale,n,r);var M=g.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");g.plot.call(re.setTranslate,w,k).call(re.setScale,1/n,1/r),M.selectAll(".point").call(re.setPointGroupScale,n,r),M.selectAll(".textpoint").call(re.setTextPointsScale,n,r),M.call(re.hideOutsideRangePoints,g),g.plot.selectAll(".barlayer .trace").call(re.hideOutsideRangePoints,g,".bartext")}}}return T.length*A.length!=1&&Ae(P,function(e){if(h._context.scrollZoom||j._enablescrollzoom){if(null===G&&be(c),h._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();var t=h.querySelector(".plotly");if(u(),!(10<t.scrollHeight-t.clientHeight||10<t.scrollWidth-t.clientWidth)){clearTimeout(G);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var r,a=Math.exp(-Math.min(Math.max(n,-20),20)/200),o=X.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(e.clientX-o.left)/o.width,s=(o.bottom-e.clientY)/o.height;if(A||C){for(A||(i=.5),r=0;r<S.length;r++)l(S[r],i,a);U[2]*=a,U[0]+=U[2]*i*(1/a-1)}if(T||C){for(T||(s=.5),r=0;r<L.length;r++)l(L[r],s,a);U[3]*=a,U[1]+=U[3]*(1-s)*(1/a-1)}Q(U),W(T,A),G=setTimeout(function(){U=[0,0,v,x],J()},Y),e.preventDefault()}else te.log("Did not find wheel motion attributes: ",e)}}function l(t,e,n){if(!t.fixedrange){var r=te.simpleMap(t.range,t.r2l),a=r[0]+(r[1]-r[0])*e;t.range=r.map(function(e){return t.l2r(a+(e-a)*n)})}}}),P},makeDragger:l,makeRectDragger:pe,makeZoombox:ve,makeCorners:xe,updateZoombox:_e,xyCorners:Te,transitionZoombox:s,removeZoombox:we,clearSelect:be,showDoubleClickNotifier:ke,attachWheelEventHandler:Ae}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/dragelement":57,"../../components/drawing":60,"../../components/fx":77,"../../constants/alignment":135,"../../lib":156,"../../lib/setcursor":175,"../../lib/svg_text_utils":177,"../../registry":248,"../plots":240,"./axes":199,"./axis_ids":202,"./constants":204,"./scale_zoom":216,"./select":217,"has-passive-events":7,tinycolor2:337}],208:[function(n,r,e){(function(e){"use strict";var t="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,u=n("../../components/fx"),d=n("../../components/dragelement"),f=n("./constants"),h=n("./dragbox").makeDragBox;r.exports=function(l){var c=l._fullLayout;if(l._context.staticPlot)t.select(l).selectAll(".drag").remove();else if(c._has("cartesian")||c._has("gl2d")){Object.keys(c._plots||{}).sort(function(e,t){if((c._plots[e].mainplot&&!0)===(c._plots[t].mainplot&&!0)){var n=e.split("y"),r=t.split("y");return n[0]===r[0]?Number(n[1]||1)-Number(r[1]||1):Number(n[0]||1)-Number(r[0]||1)}return c._plots[e].mainplot?1:-1}).forEach(function(t){var e=c._plots[t],n=e.xaxis,r=e.yaxis,a=f.DRAGGERSIZE;if(!e.mainplot){var o=h(l,e,n._offset,r._offset,n._length,r._length,"ns","ew");o.onmousemove=function(e){l._fullLayout._rehover=function(){l._fullLayout._hoversubplot===t&&u.hover(l,e,t)},u.hover(l,e,t),l._fullLayout._lasthover=o,l._fullLayout._hoversubplot=t},o.onmouseout=function(e){l._dragging||(l._fullLayout._hoversubplot=null,d.unhover(l,e))},l._context.showAxisDragHandles&&(h(l,e,n._offset-a,r._offset-a,a,a,"n","w"),h(l,e,n._offset+n._length,r._offset-a,a,a,"n","e"),h(l,e,n._offset-a,r._offset+r._length,a,a,"s","w"),h(l,e,n._offset+n._length,r._offset+r._length,a,a,"s","e"))}if(l._context.showAxisDragHandles){if(t===n._mainSubplot){var i=n._mainLinePosition;"top"===n.side&&(i-=a),h(l,e,n._offset+.1*n._length,i,.8*n._length,a,"","ew"),h(l,e,n._offset,i,.1*n._length,a,"","w"),h(l,e,n._offset+.9*n._length,i,.1*n._length,a,"","e")}if(t===r._mainSubplot){var s=r._mainLinePosition;"right"!==r.side&&(s-=a),h(l,e,s,r._offset+.1*r._length,a,.8*r._length,"ns",""),h(l,e,s,r._offset+.9*r._length,a,.1*r._length,"s",""),h(l,e,s,r._offset,a,.1*r._length,"n","")}}});var e=c._hoverlayer.node();e.onmousemove=function(e){e.target=c._lasthover,u.hover(l,e,c._hoversubplot)},e.onclick=function(e){e.target=c._lasthover,u.click(l,e)},e.onmousedown=function(e){c._lasthover.onmousedown(e)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/dragelement":57,"../../components/fx":77,"./constants":204,"./dragbox":207}],209:[function(e,t,n){"use strict";var v=e("../../registry"),x=e("../../lib");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=v.subplotsRegistry.cartesian,a=r.idRegex,o=t._subplots,i=o.xaxis,s=o.yaxis,l=o.cartesian,c=t._has("cartesian")||t._has("gl2d"),u=0;u<n.length;u++){var d=n[u];if(x.isPlainObject(d)){var f=d.xref,h=d.yref,p=a.x.test(f),g=a.y.test(h);if(p||g){c||x.pushUnique(t._basePlotModules,r);var y=!1;p&&-1===i.indexOf(f)&&(i.push(f),y=!0),g&&-1===s.indexOf(h)&&(s.push(h),y=!0),y&&p&&g&&l.push(f+h)}}}}}},{"../../lib":156,"../../registry":248}],210:[function(t,e,n){(function(e){"use strict";var c="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,p=t("../../lib"),r=t("../plots"),u=t("../get_data").getModuleCalcData,g=t("./axis_ids"),y=t("./constants"),a=t("../../constants/xmlns_namespaces");function m(e,t,n,r,a){var o=e._fullLayout._modules;t.plot&&t.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var i=0;i<o.length;i++){var s=o[i];if("cartesian"===s.basePlotModule.name){var l=u(n,s);s.plot&&s.plot(e,t,l,r,a)}}}function o(e){var t=e.plotgroup,n=e.id,r=y.layerValue2layerClass[e.xaxis.layer],a=y.layerValue2layerClass[e.yaxis.layer];if(e.mainplot){var o=e.mainplotinfo,i=o.plotgroup,s=n+"-x",l=n+"-y";e.gridlayer=o.gridlayer,e.zerolinelayer=o.zerolinelayer,d(o.overlinesBelow,"path",s),d(o.overlinesBelow,"path",l),d(o.overaxesBelow,"g",s),d(o.overaxesBelow,"g",l),e.plot=d(o.overplot,"g",n),d(o.overlinesAbove,"path",s),d(o.overlinesAbove,"path",l),d(o.overaxesAbove,"g",s),d(o.overaxesAbove,"g",l),e.xlines=i.select(".overlines-"+r).select("."+s),e.ylines=i.select(".overlines-"+a).select("."+l),e.xaxislayer=i.select(".overaxes-"+r).select("."+s),e.yaxislayer=i.select(".overaxes-"+a).select("."+l)}else{var c=d(t,"g","layer-subplot");e.shapelayer=d(c,"g","shapelayer"),e.imagelayer=d(c,"g","imagelayer"),e.gridlayer=d(t,"g","gridlayer"),e.zerolinelayer=d(t,"g","zerolinelayer"),d(t,"path","xlines-below"),d(t,"path","ylines-below"),e.overlinesBelow=d(t,"g","overlines-below"),d(t,"g","xaxislayer-below"),d(t,"g","yaxislayer-below"),e.overaxesBelow=d(t,"g","overaxes-below"),e.plot=d(t,"g","plot"),e.overplot=d(t,"g","overplot"),d(t,"path","xlines-above"),d(t,"path","ylines-above"),e.overlinesAbove=d(t,"g","overlines-above"),d(t,"g","xaxislayer-above"),d(t,"g","yaxislayer-above"),e.overaxesAbove=d(t,"g","overaxes-above"),e.xlines=t.select(".xlines-"+r),e.ylines=t.select(".ylines-"+a),e.xaxislayer=t.select(".xaxislayer-"+r),e.yaxislayer=t.select(".yaxislayer-"+a)}d(e.gridlayer,"g",e.xaxis._id,e.xaxis._id),d(e.gridlayer,"g",e.yaxis._id,e.yaxis._id),e.gridlayer.selectAll("g").sort(g.idSort);for(var u=0;u<y.traceLayerClasses.length;u++)d(e.plot,"g",y.traceLayerClasses[u]);e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function k(e,t){if(e){var n={};e.each(function(e){c.select(this).remove(),M(e,t),n[e]=!0});for(var r=t._plots,a=Object.keys(r),o=0;o<a.length;o++)for(var i=r[a[o]].overlays||[],s=0;s<i.length;s++){var l=i[s];n[l.id]&&l.plot.selectAll(".trace").remove()}}}function M(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}function d(e,t,n,r){var a=e.selectAll("."+n).data([r||0]);return a.enter().append(t).classed(n,!0),a}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=y.idRegex,n.attrRegex=y.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(e,t){var n,r,a,o=t._subplots,i=o.xaxis,s=o.yaxis,l=o.cartesian,c=l.concat(o.gl2d||[]),u={},d={};for(n=0;n<c.length;n++){var f=c[n].split("y");d["y"+f[u[f[0]]=1]]=1}for(n=0;n<i.length;n++)u[r=i[n]]||(a=(e[g.id2name(r)]||{}).anchor,y.idRegex.y.test(a)||(a="y"),l.push(r+a),c.push(r+a),d[a]||(d[a]=1,p.pushUnique(s,a)));for(n=0;n<s.length;n++)d[a=s[n]]||(r=(e[g.id2name(a)]||{}).anchor,y.idRegex.x.test(r)||(r="x"),l.push(r+a),c.push(r+a),u[r]||(u[r]=1,p.pushUnique(i,r)));if(!c.length){for(var h in a=r="",e){if(y.attrRegex.test(h))"x"===h.charAt(0)?(!r||+h.substr(5)<+r.substr(5))&&(r=h):(!a||+h.substr(5)<+a.substr(5))&&(a=h)}r=r?g.name2id(r):"x",a=a?g.name2id(a):"y",i.push(r),s.push(a),l.push(r+a)}},n.plot=function(e,t,n,r){var a,o=e._fullLayout,i=o._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],a=0;a<s.length;a++)t.push(a);for(o._glcanvas&&o._glcanvas.size()&&o._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0})}),a=0;a<i.length;a++){for(var l,c=i[a],u=o._plots[c],d=[],f=0;f<s.length;f++){var h=s[f],p=h[0].trace;p.xaxis+p.yaxis===c&&((-1!==t.indexOf(p.index)||p.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(h)),l=h)}m(e,u,d,n,r)}},n.clean=function(e,t,n,r){var a,o,i,s,l,c,u,d,f,h=r._modules||[],p=t._modules||[];for(l=0;l<h.length;l++)"scatter"===(f=h[l].name)?a=!0:"scattergl"===f&&(i=!0);for(l=0;l<p.length;l++)"scatter"===(f=p[l].name)?o=!0:"scattergl"===f&&(s=!0);if(a&&!o){for(c=r._plots,u=Object.keys(c||{}),l=0;l<u.length;l++)(d=c[u[l]]).plot&&d.plot.select("g.scatterlayer").selectAll("g.trace").remove();r._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(i&&!s)for(c=r._plots,u=Object.keys(c||{}),l=0;l<u.length;l++)(d=c[u[l]])._scene&&d._scene.destroy();var g=r._subplots||{},y=t._subplots||{xaxis:[],yaxis:[]};if(g.xaxis&&g.yaxis){var m=g.xaxis.concat(g.yaxis),v=y.xaxis.concat(y.yaxis);for(l=0;l<m.length;l++)-1===v.indexOf(m[l])&&r._infolayer.selectAll(".g-"+m[l]+"title").remove()}var x=r._has&&r._has("cartesian"),b=t._has&&t._has("cartesian");if(x&&!b)k(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups;else if(g.cartesian)for(l=0;l<g.cartesian.length;l++){var _=g.cartesian[l];if(-1===y.cartesian.indexOf(_)){var w="."+_+",."+_+"-x,."+_+"-y";r._cartesianlayer.selectAll(w).remove(),M(_,r)}}},n.drawFramework=function(e){var n=e._fullLayout,t=function(e){for(var t=e._fullLayout,n=Object.keys(t._plots),r=[],a=[],o=0;o<n.length;o++){var i=n[o],s=t._plots[i],l=s.xaxis,c=s.yaxis,u=l._mainAxis,d=c._mainAxis,f=u._id+d._id;f!==i&&-1!==n.indexOf(f)?(s.mainplot=f,s.mainplotinfo=t._plots[f],a.push(i)):r.push(i)}return r=r.concat(a)}(e),r=n._cartesianlayer.selectAll(".subplot").data(t,p.identity);r.enter().append("g").attr("class",function(e){return"subplot "+e}),r.order(),r.exit().call(k,n),r.each(function(e){var t=n._plots[e];(t.plotgroup=c.select(this),t.overlays=[],o(t),t.mainplot)&&n._plots[t.mainplot].overlays.push(t);t.draglayer=d(n._draggers,"g",e)})},n.rangePlot=function(e,t,n){o(t),m(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=c.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:a.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/xmlns_namespaces":139,"../../lib":156,"../get_data":236,"../plots":240,"./attributes":197,"./axis_ids":202,"./constants":204,"./layout_attributes":211,"./layout_defaults":212,"./transition_axes":222}],211:[function(e,t,n){"use strict";var r=e("../font_attributes"),a=e("../../components/color/attributes"),o=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat,s=e("./constants");t.exports={visible:{valType:"boolean",role:"info",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:a.defaultLine,role:"style",editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{valType:"string",role:"info",editType:"ticks+margins",description:"Sets the title of this axis."},titlefont:r({editType:"ticks+margins",description:["Sets this axis' title font."].join(" ")}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",role:"info",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,role:"style",editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",role:"style",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",role:"info",items:[{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}}],editType:"plot+margins",impliedEdits:{autorange:!1},description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,role:"info",editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",role:"info",editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range* (default), or by decreasing the *domain*."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],role:"info",editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},tickmode:{valType:"enumerated",values:["auto","linear","array"],role:"info",editType:"ticks+margins",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},nticks:{valType:"integer",min:0,dflt:0,role:"style",editType:"ticks+margins",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tick0:{valType:"any",role:"style",editType:"ticks+margins",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick:{valType:"any",role:"style",editType:"ticks+margins",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},tickvals:{valType:"data_array",editType:"ticks+margins",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"ticks+margins",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:{valType:"enumerated",values:["outside","inside",""],role:"style",editType:"ticks+margins",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,role:"style",editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:{valType:"number",min:0,dflt:5,role:"style",editType:"ticks",description:"Sets the tick length (in px)."},tickwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks",description:"Sets the tick width (in px)."},tickcolor:{valType:"color",dflt:a.defaultLine,role:"style",editType:"ticks",description:"Sets the tick color."},showticklabels:{valType:"boolean",dflt:!0,role:"style",editType:"ticks+margins",description:"Determines whether or not the tick labels are drawn."},automargin:{valType:"boolean",dflt:!1,role:"style",editType:"ticks+margins",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,role:"style",editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,role:"style",editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,role:"style",editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:i({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],role:"style",dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",role:"style",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:r({editType:"ticks+margins",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",role:"style",editType:"ticks+margins",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",role:"style",editType:"ticks+margins",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks+margins",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",role:"style",editType:"ticks+margins",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks+margins",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"ticks+margins",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",role:"style",editType:"ticks+margins",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,role:"style",editType:"ticks+margins",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",role:"style",editType:"ticks+margins",description:["Sets the tick label formatting rule using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see:","https://github.com/d3/d3-format/blob/master/README.md#locale_format","And for dates see:","https://github.com/d3/d3-time-format/blob/master/README.md#locale_format","We add one item to d3's date formatter: *%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",role:"info",items:[{valType:"any",editType:"ticks+margins"},{valType:"any",editType:"ticks+margins"}],editType:"ticks+margins",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",role:"style",editType:"ticks+margins",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks+margins"},hoverformat:{valType:"string",dflt:"",role:"style",editType:"none",description:["Sets the hover text formatting rule using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see:","https://github.com/d3/d3-format/blob/master/README.md#locale_format","And for dates see:","https://github.com/d3/d3-time-format/blob/master/README.md#locale_format","We add one item to d3's date formatter: *%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")},showline:{valType:"boolean",dflt:!1,role:"style",editType:"layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:a.defaultLine,role:"style",editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",role:"style",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},gridcolor:{valType:"color",dflt:a.lightLine,role:"style",editType:"ticks",description:"Sets the color of the grid lines."},gridwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"ticks",description:"Sets the width (in px) of the grid lines."},zeroline:{valType:"boolean",role:"style",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:a.defaultLine,role:"style",editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,role:"style",editType:"ticks",description:"Sets the width (in px) of the zero line."},anchor:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"plot+margins",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],role:"info",editType:"plot+margins",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],role:"info",editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis.","If *false*, this axis does not overlay any same-letter axes."].join(" ")},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",role:"info",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",role:"info",items:[{valType:"number",min:0,max:1,editType:"plot+margins"},{valType:"number",min:0,max:1,editType:"plot+margins"}],dflt:[0,1],editType:"plot+margins",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"plot+margins",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",role:"info",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",role:"info",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",role:"info",editType:"ticks+margins",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")}}}},{"../../components/color/attributes":34,"../../components/drawing/attributes":59,"../../lib/extend":148,"../font_attributes":226,"./constants":204}],212:[function(e,t,n){"use strict";var B=e("../../registry"),q=e("../../lib"),H=e("../../components/color"),V=e("../layout_attributes"),U=e("./layout_attributes"),G=e("./type_defaults"),Y=e("./axis_defaults"),X=e("./constraint_defaults"),Z=e("./position_defaults"),W=e("./axis_ids");t.exports=function(i,e,t){var n,r={},a={},o={},s={};for(n=0;n<t.length;n++){var l=t[n];if(B.traceIs(l,"cartesian")||B.traceIs(l,"gl2d")){var c=W.id2name(l.xaxis),u=W.id2name(l.yaxis);if(B.traceIs(l,"carpet")&&("carpet"!==l.type||l._cheater)||c&&(a[c]=1),"carpet"===l.type&&l._cheater&&c&&(r[c]=1),B.traceIs(l,"2dMap")&&(o[c]=!0,o[u]=!0),B.traceIs(l,"oriented"))s["h"===l.orientation?u:c]=!0}}var d=e._subplots,f=d.xaxis,h=d.yaxis,p=q.simpleMap(f,W.id2name),g=q.simpleMap(h,W.id2name),y=p.concat(g),m=H.background;f.length&&h.length&&(m=q.coerce(i,e,V,"plot_bgcolor"));var v,x,b,_,w=H.combine(m,e.paper_bgcolor);function k(e,t){return q.coerce(b,_,U,e,t)}function M(e,t){return q.coerce2(b,_,U,e,t)}function T(e){return"x"===e?h:f}var A={x:T("x"),y:T("y")};function S(e,t){for(var n="x"===e?p:g,r=[],a=0;a<n.length;a++){var o=n[a];o===t||(i[o]||{}).overlaying||r.push(W.name2id(o))}return r}for(n=0;n<y.length;n++){v=y[n],q.isPlainObject(i[v])||(i[v]={}),b=i[v],_=e[v]={},G(b,_,k,t,v);var L=S(x=v.charAt(0),v),C={letter:x,font:e.font,outerTicks:o[v],showGrid:!s[v],data:t,bgColor:w,calendar:e.calendar,automargin:!0,cheateronly:"x"===x&&r[v]&&!a[v]};Y(b,_,k,C,e);var z=M("spikecolor"),O=M("spikethickness"),j=M("spikedash"),P=M("spikemode"),D=M("spikesnap");k("showspikes",!!(z||O||j||P||D))||(delete _.spikecolor,delete _.spikethickness,delete _.spikedash,delete _.spikemode,delete _.spikesnap);var I={letter:x,counterAxes:A[x],overlayableAxes:L,grid:e.grid};Z(b,_,k,I),_._input=b}var E=B.getComponentMethod("rangeslider","handleDefaults"),R=B.getComponentMethod("rangeselector","handleDefaults");for(n=0;n<p.length;n++)v=p[n],b=i[v],_=e[v],E(i,e,v),"date"===_.type&&R(b,_,e,g,_.calendar),k("fixedrange");for(n=0;n<g.length;n++){v=g[n],b=i[v],_=e[v];var N=e[W.id2name(_.anchor)];k("fixedrange",N&&N.rangeslider&&N.rangeslider.visible)}e._axisConstraintGroups=[];var F=A.x.concat(A.y);for(n=0;n<y.length;n++)x=(v=y[n]).charAt(0),b=i[v],_=e[v],X(b,_,k,F,e)}},{"../../components/color":35,"../../lib":156,"../../registry":248,"../layout_attributes":238,"./axis_defaults":201,"./axis_ids":202,"./constraint_defaults":205,"./layout_attributes":211,"./position_defaults":215,"./type_defaults":223}],213:[function(e,t,n){"use strict";var f=e("tinycolor2").mix,h=e("../../components/color/attributes").lightFraction,p=e("../../lib");t.exports=function(n,r,e,a){var t=(a=a||{}).dfltColor;function o(e,t){return p.coerce2(n,r,a.attributes,e,t)}var i=o("linecolor",t),s=o("linewidth");e("showline",a.showLine||!!i||!!s)||(delete r.linecolor,delete r.linewidth);var l=o("gridcolor",f(t,a.bgColor,a.blend||h).toRgbString()),c=o("gridwidth");if(e("showgrid",a.showGrid||!!l||!!c)||(delete r.gridcolor,delete r.gridwidth),!a.noZeroLine){var u=o("zerolinecolor",t),d=o("zerolinewidth");e("zeroline",a.showGrid||!!u||!!d)||(delete r.zerolinecolor,delete r.zerolinewidth)}}},{"../../components/color/attributes":34,"../../lib":156,tinycolor2:337}],214:[function(e,t,n){(function(e){"use strict";var d="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null;function a(t,e,n){var r,a,o,i,s,l=[],c=n.map(function(e){return e[t]}),u=d.bisector(e).left;for(r=0;r<c.length;r++)for(o=c[r],a=0;a<o.length;a++)null!=(i=o[a])&&((s=u(l,i))<l.length&&l[s]===i||l.splice(s,0,i));return l}t.exports=function(e,t,n,r){switch(t){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return a(e,d.ascending,r);case"category descending":return a(e,d.descending,r);case"trace":default:return[]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],215:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),g=e("../../lib");t.exports=function(e,t,n,r){var a,o,i,s,l=r.counterAxes||[],c=r.overlayableAxes||[],u=r.letter,d=r.grid;d&&(o=d._domains[u][d._axisMap[t._id]],a=d._anchors[t._id],o&&(i=d[u+"side"].split(" ")[0],s=d.domain[u]["right"===i||"top"===i?1:0])),o=o||[0,1],a=a||(p(e.position)?"free":l[0]||"free"),i=i||("x"===u?"bottom":"left"),s=s||0,"free"===g.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:a}},"anchor")&&n("position",s),g.coerce(e,t,{side:{valType:"enumerated",values:"x"===u?["bottom","top"]:["left","right"],dflt:i}},"side");var f=!1;if(c.length&&(f=g.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!f){var h=n("domain",o);h[0]>h[1]-.01&&(t.domain=o),g.noneOrAll(e.domain,t.domain,o)}return n("layer"),t}},{"../../lib":156,"fast-isnumeric":4}],216:[function(e,t,n){"use strict";var o=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=o[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],a=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(a+(r[0]-a)*t),e.l2r(a+(r[1]-a)*t)]}},{"../../constants/alignment":135}],217:[function(e,t,n){"use strict";var B=e("polybooljs"),r=e("../../lib/polygon"),q=e("../../lib/throttle"),H=e("../../components/color"),o=e("../../components/fx/helpers").makeEventData,V=e("../../components/fx"),U=e("./axes"),G=e("./constants"),Y=r.filter,X=r.tester,Z=r.multitester,W=G.MINSELECT;function J(e){return e._id}function Q(e,t,n){var r,a,o;if(n){var i=n.points||[];for(r=0;r<t.length;r++)(o=t[r].cd[0].trace).selectedpoints=[],o._input.selectedpoints=[];for(r=0;r<i.length;r++){var s=i[r],l=s.data,c=s.fullData;s.pointIndices?([].push.apply(l.selectedpoints,s.pointIndices),[].push.apply(c.selectedpoints,s.pointIndices)):(l.selectedpoints.push(s.pointIndex),c.selectedpoints.push(s.pointIndex))}}else for(r=0;r<t.length;r++)delete(o=t[r].cd[0].trace).selectedpoints,delete o._input.selectedpoints,t[r].cd[0].t&&t[r].cd[0].t.scene&&t[r].cd[0].t.scene.clearSelect();for(r=0;r<t.length;r++)(a=t[r]).style&&a.style(e,a.cd)}function $(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,a=0;a<e.length;a++)e[a]=o(e[a],r,n);return e}t.exports=function(e,t,n,i,s){var l,c,u,d,f=i.gd,r=f._fullLayout,a=r._zoomlayer,o=i.element.getBoundingClientRect(),h=i.plotinfo,p=h.xaxis._offset,g=h.yaxis._offset,y=t-o.left,m=n-o.top,v=y,x=m,b="M"+y+","+m,_=i.xaxes[0]._length,w=i.yaxes[0]._length,k=i.xaxes.map(J),M=i.yaxes.map(J),T=i.xaxes.concat(i.yaxes),A=e.altKey;(e.shiftKey||e.altKey)&&h.selection&&h.selection.polygons&&!i.polygons?(i.polygons=h.selection.polygons,i.mergedPolygons=h.selection.mergedPolygons):(!e.shiftKey&&!e.altKey||(e.shiftKey||e.altKey)&&!h.selection)&&(h.selection={},h.selection.polygons=i.polygons=[],h.selection.mergedPolygons=i.mergedPolygons=[]),"lasso"===s&&(l=Y([[y,m]],G.BENDPX));var S=a.selectAll("path.select-outline-"+h.id).data([1,2]);S.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+h.id}).attr("transform","translate("+p+", "+g+")").attr("d",b+"Z");var L,C,z,O,j,P,D=a.append("path").attr("class","zoombox-corners").style({fill:H.background,stroke:H.defaultLine,"stroke-width":1}).attr("transform","translate("+p+", "+g+")").attr("d","M0,0Z"),I=[],E=r._uid+G.SELECTID,R=[];for(L=0;L<f.calcdata.length;L++)if(!0===(z=(C=f.calcdata[L])[0].trace).visible&&z._module&&z._module.selectPoints)if(i.subplot)z.subplot!==i.subplot&&z.geo!==i.subplot||I.push({selectPoints:z._module.selectPoints,style:z._module.style,cd:C,xaxis:i.xaxes[0],yaxis:i.yaxes[0]});else{if(-1===k.indexOf(z.xaxis))continue;if(-1===M.indexOf(z.yaxis))continue;I.push({selectPoints:z._module.selectPoints,style:z._module.style,cd:C,xaxis:U.getFromId(f,z.xaxis),yaxis:U.getFromId(f,z.yaxis)})}function N(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return t.p2d(e[n])}}function F(e,t){return e-t}P=h.fillRangeItems?h.fillRangeItems:"select"===s?function(e,t){var n=e.range={};for(L=0;L<T.length;L++){var r=T[L],a=r._id.charAt(0);n[r._id]=[r.p2d(t[a+"min"]),r.p2d(t[a+"max"])].sort(F)}}:function(e,t,n){var r=e.lassoPoints={};for(L=0;L<T.length;L++){var a=T[L];r[a._id]=n.filtered.map(N(a))}},i.moveFn=function(e,t){v=Math.max(0,Math.min(_,e+y)),x=Math.max(0,Math.min(w,t+m));var n=Math.abs(v-y),r=Math.abs(x-m);"select"===s?r<Math.min(.6*n,W)?((d=[[y,0],[y,w],[v,w],[v,0]]).xmin=Math.min(y,v),d.xmax=Math.max(y,v),d.ymin=Math.min(0,w),d.ymax=Math.max(0,w),D.attr("d","M"+d.xmin+","+(m-W)+"h-4v"+2*W+"h4ZM"+(d.xmax-1)+","+(m-W)+"h4v"+2*W+"h-4Z")):n<Math.min(.6*r,W)?((d=[[0,m],[0,x],[_,x],[_,m]]).xmin=Math.min(0,_),d.xmax=Math.max(0,_),d.ymin=Math.min(m,x),d.ymax=Math.max(m,x),D.attr("d","M"+(y-W)+","+d.ymin+"v-4h"+2*W+"v4ZM"+(y-W)+","+(d.ymax-1)+"v4h"+2*W+"v-4Z")):((d=[[y,m],[y,x],[v,x],[v,m]]).xmin=Math.min(y,v),d.xmax=Math.max(y,v),d.ymin=Math.min(m,x),d.ymax=Math.max(m,x),D.attr("d","M0,0Z")):"lasso"===s&&(l.addPt([v,x]),d=l.filtered),i.polygons&&i.polygons.length?(u=function(e,t,n){if(n)return B.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return B.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(i.mergedPolygons,d,A),d.subtract=A,c=Z(i.polygons.concat([d]))):(u=[d],c=X(d));var a=[];for(L=0;L<u.length;L++){var o=u[L];a.push(o.join("L")+"L"+o[0])}S.attr("d","M"+a.join("M")+"Z"),q.throttle(E,G.SELECTDELAY,function(){R=[];var e,t,n=[];for(L=0;L<I.length;L++)if(t=(O=I[L]).selectPoints(O,c),n.push(t),e=$(t,O),R.length)for(var r=0;r<e.length;r++)R.push(e[r]);else R=e;Q(f,I,j={points:R}),P(j,d,l),i.gd.emit("plotly_selecting",j)})},i.clickFn=function(e,t){D.remove(),q.done(E).then(function(){if(q.clear(E),2===e){for(S.remove(),L=0;L<I.length;L++)(O=I[L]).selectPoints(O,!1);Q(f,I),f.emit("plotly_deselect",null)}else f.emit("plotly_selected",void 0);V.click(f,t)})},i.doneFn=function(){D.remove(),q.done(E).then(function(){q.clear(E),i.gd.emit("plotly_selected",j),d&&i.polygons&&(d.subtract=A,i.polygons.push(d),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,u))})}}},{"../../components/color":35,"../../components/fx":77,"../../components/fx/helpers":74,"../../lib/polygon":168,"../../lib/throttle":178,"./axes":199,"./constants":204,polybooljs:328}],218:[function(n,r,e){(function(e){"use strict";var d="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,f=n("fast-isnumeric"),h=n("../../lib"),p=h.cleanNumber,g=h.ms2DateTime,y=h.dateTime2ms,m=h.ensureNumber,t=n("../../constants/numerical"),v=t.FP_SAFE,x=t.BADNUM,b=n("./constants"),_=n("./axis_ids");function w(e){return Math.pow(10,e)}r.exports=function(u,s){s=s||{};var l=(u._id||"x").charAt(0);function n(e,t){if(0<e)return Math.log(e)/Math.LN10;if(e<=0&&t&&u.range&&2===u.range.length){var n=u.range[0],r=u.range[1];return.5*(n+r-30*Math.abs(n-r))}return x}function r(e,t,n){var r=y(e,n||u.calendar);if(r===x){if(!f(e))return x;r=y(new Date(+e))}return r}function a(e,t,n){return g(e,t,n||u.calendar)}function t(e){return u._categories[Math.round(e)]}function o(e){if(u._categoriesMap){var t=u._categoriesMap[e];if(void 0!==t)return t}if(f(e))return+e}function i(e){return f(e)?d.round(u._b+u._m*e,2):x}function c(e){return(e-u._b)/u._m}u.c2l="log"===u.type?n:m,u.l2c="log"===u.type?w:m,u.l2p=i,u.p2l=c,u.c2p="log"===u.type?function(e,t){return i(n(e,t))}:i,u.p2c="log"===u.type?function(e){return w(c(e))}:c,-1!==["linear","-"].indexOf(u.type)?(u.d2r=u.r2d=u.d2c=u.r2c=u.d2l=u.r2l=p,u.c2d=u.c2r=u.l2d=u.l2r=m,u.d2p=u.r2p=function(e){return u.l2p(p(e))},u.p2d=u.p2r=c,u.cleanPos=m):"log"===u.type?(u.d2r=u.d2l=function(e,t){return n(p(e),t)},u.r2d=u.r2c=function(e){return w(p(e))},u.d2c=u.r2l=p,u.c2d=u.l2r=m,u.c2r=n,u.l2d=w,u.d2p=function(e,t){return u.l2p(u.d2r(e,t))},u.p2d=function(e){return w(c(e))},u.r2p=function(e){return u.l2p(p(e))},u.p2r=c,u.cleanPos=m):"date"===u.type?(u.d2r=u.r2d=h.identity,u.d2c=u.r2c=u.d2l=u.r2l=r,u.c2d=u.c2r=u.l2d=u.l2r=a,u.d2p=u.r2p=function(e,t,n){return u.l2p(r(e,0,n))},u.p2d=u.p2r=function(e,t,n){return a(c(e),t,n)},u.cleanPos=function(e){return h.cleanDate(e,x,u.calendar)}):"category"===u.type&&(u.d2c=u.d2l=function(e){if(null!=e){if(void 0===u._categoriesMap&&(u._categoriesMap={}),void 0!==u._categoriesMap[e])return u._categoriesMap[e];u._categories.push(e);var t=u._categories.length-1;return u._categoriesMap[e]=t}return x},u.r2d=u.c2d=u.l2d=t,u.d2r=u.d2l_noadd=o,u.r2c=function(e){var t=o(e);return void 0!==t?t:u.fraction2r(.5)},u.l2r=u.c2r=m,u.r2l=o,u.d2p=function(e){return u.l2p(u.r2c(e))},u.p2d=function(e){return t(c(e))},u.r2p=u.d2p,u.p2r=c,u.cleanPos=function(e){return"string"==typeof e&&""!==e?e:m(e)}),u.fraction2r=function(e){var t=u.r2l(u.range[0]),n=u.r2l(u.range[1]);return u.l2r(t+e*(n-t))},u.r2fraction=function(e){var t=u.r2l(u.range[0]),n=u.r2l(u.range[1]);return(u.r2l(e)-t)/(n-t)},u.cleanRange=function(e,t){t||(t={}),e||(e="range");var n,r,a=h.nestedProperty(u,e).get();if(r=(r="date"===u.type?h.dfltRange(u.calendar):"y"===l?b.DFLTRANGEY:t.dfltRange||b.DFLTRANGEX).slice(),a&&2===a.length)for("date"===u.type&&(a[0]=h.cleanDate(a[0],x,u.calendar),a[1]=h.cleanDate(a[1],x,u.calendar)),n=0;n<2;n++)if("date"===u.type){if(!h.isDateTime(a[n],u.calendar)){u[e]=r;break}if(u.r2l(a[0])===u.r2l(a[1])){var o=h.constrain(u.r2l(a[0]),h.MIN_MS+1e3,h.MAX_MS-1e3);a[0]=u.l2r(o-1e3),a[1]=u.l2r(o+1e3);break}}else{if(!f(a[n])){if(!f(a[1-n])){u[e]=r;break}a[n]=a[1-n]*(n?10:.1)}if(a[n]<-v?a[n]=-v:a[n]>v&&(a[n]=v),a[0]===a[1]){var i=Math.max(1,Math.abs(1e-6*a[0]));a[0]-=i,a[1]+=i}}else h.nestedProperty(u,e).set(r)},u.setScale=function(e){var t=s._size;if(u._categories||(u._categories=[]),u._categoriesMap||(u._categoriesMap={}),u.overlaying){var n=_.getFromId({_fullLayout:s},u.overlaying);u.domain=n.domain}var r=e&&u._r?"_r":"range",a=u.calendar;u.cleanRange(r);var o=u.r2l(u[r][0],a),i=u.r2l(u[r][1],a);if("y"===l?(u._offset=t.t+(1-u.domain[1])*t.h,u._length=t.h*(u.domain[1]-u.domain[0]),u._m=u._length/(o-i),u._b=-u._m*i):(u._offset=t.l+u.domain[0]*t.w,u._length=t.w*(u.domain[1]-u.domain[0]),u._m=u._length/(i-o),u._b=-u._m*o),!isFinite(u._m)||!isFinite(u._b))throw s._replotting=!1,new Error("Something went wrong with axis scaling")},u.makeCalcdata=function(e,t){var n,r,a,o,i=u.type,s="date"===i&&e[t+"calendar"];if(t in e){if(n=e[t],o=e._length||n.length,h.isTypedArray(n)&&("linear"===i||"log"===i)){if(o===n.length)return n;if(n.subarray)return n.subarray(0,o)}for(r=new Array(o),a=0;a<o;a++)r[a]=u.d2c(n[a],0,s)}else{var l=t+"0"in e?u.d2c(e[t+"0"],0,s):0,c=e["d"+t]?Number(e["d"+t]):1;for(n=e[{x:"y",y:"x"}[t]],o=e._length||n.length,r=new Array(o),a=0;a<o;a++)r[a]=l+a*c}return r},u.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&f(u.r2l(e[0]))&&f(u.r2l(e[1]))},u.isPtWithinRange=function(e,t){var n=u.c2l(e[l],null,t);return n>=u.r2l(u.range[0])&&n<=u.r2l(u.range[1])},u.clearCalc=function(){u._min=[],u._max=[],u._categories=(u._initialCategories||[]).slice(),u._categoriesMap={};for(var e=0;e<u._categories.length;e++)u._categoriesMap[u._categories[e]]=e};var e=s._d3locale;"date"===u.type&&(u._dateFormat=e?e.timeFormat.utc:d.time.format.utc,u._extraFormat=s._extraFormat),u._separators=s.separators,u._numFormat=e?e.numberFormat:d.format,delete u._minDtick,delete u._forceTick0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/numerical":137,"../../lib":156,"./axis_ids":202,"./constants":204,"fast-isnumeric":4}],219:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./layout_attributes");t.exports=function(e,t,n,r,a){var o=function(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}(e);if(n("tickprefix")&&n("showtickprefix",o),n("ticksuffix",a.tickSuffixDflt)&&n("showticksuffix",o),n("showticklabels")){var i=a.font||{},s=t.color===e.color?t.color:i.color;if(c.coerceFont(n,"tickfont",{family:i.family,size:i.size,color:s}),n("tickangle"),"category"!==r){var l=n("tickformat");!function(e,t){var n,r,a=e.tickformatstops,o=t.tickformatstops=[];if(!Array.isArray(a))return;function i(e,t){return c.coerce(n,r,u.tickformatstops,e,t)}for(var s=0;s<a.length;s++)n=a[s],r={},i("dtickrange"),i("value"),o.push(r)}(e,t),l||"date"===r||(n("showexponent",o),n("exponentformat"),n("separatethousands"))}}}},{"../../lib":156,"./layout_attributes":211}],220:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("./layout_attributes");t.exports=function(e,t,n,r){var a=s.coerce2(e,t,l,"ticklen"),o=s.coerce2(e,t,l,"tickwidth"),i=s.coerce2(e,t,l,"tickcolor",t.color);n("ticks",r.outerTicks||a||o||i?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":156,"./layout_attributes":211}],221:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),h=e("../../lib"),p=e("../../constants/numerical").ONEDAY;t.exports=function(e,t,n,r){var a="auto";"array"!==e.tickmode||"log"!==r&&"date"!==r||(e.tickmode="auto"),Array.isArray(e.tickvals)?a="array":e.dtick&&(a="linear");var o=n("tickmode",a);if("auto"===o)n("nticks");else if("linear"===o){var i="date"===r?p:1,s=n("dtick",i);if(f(s))t.dtick=0<s?Number(s):i;else if("string"!=typeof s)t.dtick=i;else{var l=s.charAt(0),c=s.substr(1);((c=f(c)?Number(c):0)<=0||!("date"===r&&"M"===l&&c===Math.round(c)||"log"===r&&"L"===l||"log"===r&&"D"===l&&(1===c||2===c)))&&(t.dtick=i)}var u="date"===r?h.dateTick0(t.calendar):0,d=n("tick0",u);"date"===r?t.tick0=h.cleanDate(d,u):f(d)&&"D1"!==s&&"D2"!==s?t.tick0=Number(d):t.tick0=u}else{void 0===n("tickvals")?t.tickmode="auto":n("ticktext")}}},{"../../constants/numerical":137,"../../lib":156,"fast-isnumeric":4}],222:[function(t,r,e){(function(e){"use strict";var n="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,S=t("../../registry"),L=t("../../components/drawing"),C=t("./axes"),g=t("./constants").attrRegex;r.exports=function(M,e,a,t){var T=M._fullLayout,l=[];var o,i,s,c,A=function(e){var t,n,r,a,o={};for(t in e)if((n=t.split("."))[0].match(g)){var i=t.charAt(0),s=n[0];if(r=T[s],a={},Array.isArray(e[t])?a.to=e[t].slice(0):Array.isArray(e[t].range)&&(a.to=e[t].range.slice(0)),!a.to)continue;a.axisName=s,a.length=r._length,l.push(i),o[i]=a}return o}(e),u=Object.keys(A),d=function(e,t,n){var r,a,o,i=e._plots,s=[];for(r in i){var l=i[r];if(-1===s.indexOf(l)){var c=l.xaxis._id,u=l.yaxis._id,d=l.xaxis.range,f=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),a=n[c]?n[c].to:d,o=n[u]?n[u].to:f,d[0]===a[0]&&d[1]===a[1]&&f[0]===o[0]&&f[1]===o[1]||-1===t.indexOf(c)&&-1===t.indexOf(u)||s.push(l)}}return s}(T,u,A);if(!d.length)return function(){function e(e,t,n){for(var r=0;r<e.length;r++)if(t(M,r),n)return}e(T.annotations||[],S.getComponentMethod("annotations","drawOne")),e(T.shapes||[],S.getComponentMethod("shapes","drawOne")),e(T.images||[],S.getComponentMethod("images","draw"),!0)}(),!1;function f(e){var t=e.xaxis,n=e.yaxis;T._defs.select("#"+e.clipId+"> rect").call(L.setTranslate,0,0).call(L.setScale,1,1),e.plot.call(L.setTranslate,t._offset,n._offset).call(L.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(L.setPointGroupScale,1,1),r.selectAll(".textpoint").call(L.setTextPointsScale,1,1),r.call(L.hideOutsideRangePoints,e)}function h(e,t){var n,r,a,o=A[e.xaxis._id],i=A[e.yaxis._id],s=[];if(o){r=(n=M._fullLayout[o.axisName])._r,a=o.to,s[0]=(r[0]*(1-t)+t*a[0]-r[0])/(r[1]-r[0])*e.xaxis._length;var l=r[1]-r[0],c=a[1]-a[0];n.range[0]=r[0]*(1-t)+t*a[0],n.range[1]=r[1]*(1-t)+t*a[1],s[2]=e.xaxis._length*(1-t+t*c/l)}else s[0]=0,s[2]=e.xaxis._length;if(i){r=(n=M._fullLayout[i.axisName])._r,a=i.to,s[1]=(r[1]*(1-t)+t*a[1]-r[1])/(r[0]-r[1])*e.yaxis._length;var u=r[1]-r[0],d=a[1]-a[0];n.range[0]=r[0]*(1-t)+t*a[0],n.range[1]=r[1]*(1-t)+t*a[1],s[3]=e.yaxis._length*(1-t+t*d/u)}else s[1]=0,s[3]=e.yaxis._length;!function(e,t){var a,o=[];for(o=[e._id,t._id],a=0;a<o.length;a++)C.doTicks(M,o[a],!0);function n(e,t,n){for(a=0;a<e.length;a++){var r=e[a];if(-1===o.indexOf(r.xref)&&-1===o.indexOf(r.yref)||t(M,a),n)return}}n(T.annotations||[],S.getComponentMethod("annotations","drawOne")),n(T.shapes||[],S.getComponentMethod("shapes","drawOne")),n(T.images||[],S.getComponentMethod("images","draw"),!0)}(e.xaxis,e.yaxis);var f=e.xaxis,h=e.yaxis,p=!!o,g=!!i,y=p?f._length/s[2]:1,m=g?h._length/s[3]:1,v=p?s[0]:0,x=g?s[1]:0,b=p?s[0]/s[2]*f._length:0,_=g?s[1]/s[3]*h._length:0,w=f._offset-b,k=h._offset-_;T._defs.select("#"+e.clipId+"> rect").call(L.setTranslate,v,x).call(L.setScale,1/y,1/m),e.plot.call(L.setTranslate,w,k).call(L.setScale,y,m).selectAll(".points").selectAll(".point").call(L.setPointGroupScale,1/y,1/m),e.plot.selectAll(".points").selectAll(".textpoint").call(L.setTextPointsScale,1/y,1/m)}t&&(o=t());var p=n.ease(a.easing);return M._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},t=0;t<u.length;t++){var n=M._fullLayout[u[t]+"axis"];e[n._name+".range[0]"]=n.range[0],e[n._name+".range[1]"]=n.range[1],n.range=n._r.slice()}return S.call("relayout",M,e).then(function(){for(var e=0;e<d.length;e++)f(d[e])})}()}),i=Date.now(),c=window.requestAnimationFrame(function e(){s=Date.now();for(var t=Math.min(1,(s-i)/a.duration),n=p(t),r=0;r<d.length;r++)h(d[r],n);s-i>a.duration?(function(){for(var e={},t=0;t<u.length;t++){var n=M._fullLayout[A[u[t]].axisName],r=A[u[t]].to;e[n._name+".range[0]"]=r[0],e[n._name+".range[1]"]=r[1],n.range=r.slice()}o&&o(),S.call("relayout",M,e).then(function(){for(var e=0;e<d.length;e++)f(d[e])})}(),c=window.cancelAnimationFrame(e)):c=window.requestAnimationFrame(e)}),Promise.resolve()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/drawing":60,"../../registry":248,"./axes":199,"./constants":204}],223:[function(e,t,n){"use strict";var d=e("../../registry"),f=e("./axis_autotype"),o=e("./axis_ids").name2id;function h(e){return{v:"x",h:"y"}[e.orientation||"v"]}function p(e,t){var n=h(e),r=d.traceIs(e,"box-violin"),a=d.traceIs(e._fullInput||{},"candlestick");return r&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r,a){a&&(t._name=a,t._id=o(a)),"-"===n("type")&&(!function(e,t){if("-"!==e.type)return;var n=e._id,r=n.charAt(0);-1!==n.indexOf("scene")&&(n=r);var a=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if((a[n+"axis"]||n)===t){if(p(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(t,n,r);if(!a)return;if("histogram"===a.type&&r==={v:"y",h:"x"}[a.orientation||"v"])return e.type="linear";var o=r+"calendar",i=a[o];if(p(a,r)){for(var s,l=h(a),c=[],u=0;u<t.length;u++)s=t[u],d.traceIs(s,"box-violin")&&(s[r+"axis"]||r)===n&&(void 0!==s[l]?c.push(s[l][0]):void 0!==s.name?c.push(s.name):c.push("text"),s[o]!==i&&(i=void 0));e.type=f(c,i)}else e.type=f(a[r]||[a[r+"0"]],i)}(t,r),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":248,"./axis_autotype":200,"./axis_ids":202}],224:[function(e,t,h){"use strict";var i=e("../registry"),d=e("../lib");function c(e,t,n){var r,a,o,i=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return a=d.nestedProperty(r,t.prop).get(),(o=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==a&&(i=!0),{changed:i,value:o[t.prop]=a}}function o(e,t){var r=[],n=t[0],a={};if("string"==typeof n)a[n]=t[1];else{if(!d.isPlainObject(n))return r;a=n}return f(a,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(l,e){var c,t,n,r,u=[];if(t=e[0],n=e[1],c=e[2],r={},"string"==typeof t)r[t]=n;else{if(!d.isPlainObject(t))return u;r=t,void 0===c&&(c=n)}return void 0===c&&(c=null),f(r,function(e,t,n){var r;if(Array.isArray(n)){var a=Math.min(n.length,l.data.length);c&&(a=Math.min(a,c.length)),r=[];for(var o=0;o<a;o++)r[o]=c?c[o]:o}else r=c?c.slice(0):null;if(null===r)Array.isArray(n)&&(n=n[0]);else if(Array.isArray(r)){if(!Array.isArray(n)){var i=n;n=[];for(var s=0;s<r.length;s++)n[s]=i}n.length=Math.min(r.length,n.length)}u.push({type:"data",prop:e,traces:r,value:n})},"",0),u}function f(r,a,o,i){Object.keys(r).forEach(function(e){var t=r[e];if("_"!==e[0]){var n=o+(0<i?".":"")+e;d.isPlainObject(t)?f(t,a,n,i+1):a(n,e,t)}})}h.manageCommandObserver=function(t,e,n,r){var a={},o=!0;e&&e._commandObserver&&(a=e._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var i=h.hasSimpleAPICommandBindings(t,n,a.lookupTable);if(e&&e._commandObserver){if(i)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(i){c(t,i,a.cache),a.check=function(){if(o){var e=c(t,i,a.cache);return e.changed&&r&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(r({value:e.value,type:i.type,prop:i.prop,traces:i.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],a.check);a.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],a.check)}}else d.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){o=!1},a.enable=function(){o=!0},e&&(e._commandObserver=a),a},h.hasSimpleAPICommandBindings=function(e,t,n){var r,a,o=t.length;for(r=0;r<o;r++){var i,s=t[r],l=s.method,c=s.args;if(Array.isArray(c)||(c=[]),!l)return!1;var u=h.computeAPICommandBindings(e,l,c);if(1!==u.length)return!1;if(a){if((i=u[0]).type!==a.type)return!1;if(i.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==i.traces[d])return!1}else if(i.prop!==a.prop)return!1}else a=u[0],Array.isArray(a.traces)&&a.traces.sort();var f=(i=u[0]).value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}n&&(n[f]=r)}return a},h.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=i.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var o=0;o<n.length;o++)a.push(n[o]);return r.apply(null,a).catch(function(e){return d.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},h.computeAPICommandBindings=function(e,t,n){var r,a;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=o(e,n);break;case"update":r=s(e,[n[0],n[2]]).concat(o(e,[n[1]]));break;case"animate":a=n,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":156,"../registry":248}],225:[function(e,t,n){"use strict";var s=e("../lib/extend").extendFlat;n.attributes=function(e,t){t=t||{};var n={valType:"info_array",role:"info",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},r=e.name?e.name+" ":"",a=e.trace?"trace ":"subplot ",o=t.description?" "+t.description:"",i={x:s({},n,{description:["Sets the horizontal domain of this ",r,a,"(in plot fraction).",o].join("")}),y:s({},n,{description:["Sets the vertical domain of this ",r,a,"(in plot fraction).",o].join("")}),editType:e.editType};return e.noGridCell||(i.row={valType:"integer",min:0,dflt:0,role:"info",editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",r,a,".",o].join("")},i.column={valType:"integer",min:0,dflt:0,role:"info",editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",r,a,".",o].join("")}),i},n.defaults=function(e,t,n,r){var a=r&&r.x||[0,1],o=r&&r.y||[0,1],i=t.grid;if(i){var s=n("domain.column");void 0!==s&&(s<i.columns?a=i._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<i.rows?o=i._domains.y[l]:delete e.domain.row)}n("domain.x",a),n("domain.y",o)}},{"../lib/extend":148}],226:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var r={family:{valType:"string",role:"style",noBlank:!0,strict:!0,editType:t,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The plotly service (at https://plot.ly or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",role:"style",min:1,editType:t},color:{valType:"color",role:"style",editType:n},editType:t,description:""+(e.description||"")};return e.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],227:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string",role:"info",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",role:"info",description:"A label by which to identify the frame"},traces:{valType:"any",role:"info",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",role:"info",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",role:"object",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",role:"object",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}}},{}],228:[function(e,t,n){"use strict";n.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},n.axesNames=["lonaxis","lataxis"],n.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},n.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},n.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},n.clipPad=.001,n.precision=.1,n.landColor="#F0DC82",n.waterColor="#3399FF",n.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},n.sphereSVG={type:"Sphere"},n.fillLayers={ocean:1,land:1,lakes:1},n.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},n.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],n.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],n.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],229:[function(a,o,e){(function(e){"use strict";var k="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,M=a("../../registry"),T=a("../../lib"),y=a("../../components/color"),m=a("../../components/drawing"),c=a("../../components/fx"),i=a("../plots"),r=a("../cartesian/axes"),u=a("../../components/dragelement"),d=a("../cartesian/select"),f=a("./zoom"),A=a("./constants"),s=a("../../lib/topojson_utils"),v=a("topojson-client").feature;function t(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}a("./projections")(k);var n=t.prototype;o.exports=function(e){return new t(e)},n.plot=function(t,n,e){var r=this,a=n[this.id],o=s.getTopojsonName(a);null===r.topojson||o!==r.topojsonName?(r.topojsonName=o,void 0===PlotlyGeoAssets.topojson[r.topojsonName]?e.push(r.fetchTopojson().then(function(e){PlotlyGeoAssets.topojson[r.topojsonName]=e,r.topojson=e,r.update(t,n)})):(r.topojson=PlotlyGeoAssets.topojson[r.topojsonName],r.update(t,n))):r.update(t,n)},n.fetchTopojson=function(){var a=s.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(n,r){k.json(a,function(e,t){if(e)return 404===e.status?r(new Error(["plotly.js could not find topojson file at",a,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):r(new Error(["unexpected error while fetching topojson file at",a].join(" ")));n(t)})})},n.update=function(e,t){var n=t[this.id];if(!this.updateProjection(t,n)){this.hasChoropleth=!1;for(var r=0;r<e.length;r++)if("choropleth"===e[r][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(n),this.updateBaseLayers(t,n),this.updateDims(t,n),this.updateFx(t,n),i.generalUpdatePerTraceModule(this.graphDiv,this,e,n);var a=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=a.selectAll(".point"),this.dataPoints.text=a.selectAll("text"),this.dataPaths.line=a.selectAll(".js-line");var o=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=o.selectAll("path"),this.render()}},n.updateProjection=function(e,t){var n=e._size,r=t.domain,a=t.projection,o=a.rotation||{},i=t.center||{},s=this.projection=function(e){for(var t=e.projection.type,c=k.geo[A.projNames[t]](),r=e._isClipped?A.lonaxisSpan[t]/2:null,n=["center","rotate","parallels","clipExtent"],a=function(e){return e?c:[]},o=0;o<n.length;o++){var i=n[o];"function"!=typeof c[i]&&(c[i]=a)}c.isLonLatOverEdges=function(e){if(null===c(e))return!0;if(r){var t=c.rotate(),n=k.geo.distance(e,[-t[0],-t[1]]);return r*Math.PI/180<n}return!1},c.getPath=function(){return k.geo.path().projection(c)},c.getBounds=function(e){return c.getPath().bounds(e)},c.fitExtent=function(e,t){var n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=c.clipExtent&&c.clipExtent();c.scale(150).translate([0,0]),a&&c.clipExtent(null);var o=c.getBounds(t),i=Math.min(n/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),s=+e[0][0]+(n-i*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(r-i*(o[1][1]+o[0][1]))/2;return a&&c.clipExtent(a),c.scale(150*i).translate([s,l])},c.precision(A.precision),r&&c.clipAngle(r-A.clipPad);return c}(t);s.center([i.lon-o.lon,i.lat-o.lat]).rotate([-o.lon,-o.lat,o.roll]).parallels(a.parallels);var l=[[n.l+n.w*r.x[0],n.t+n.h*(1-r.y[1])],[n.l+n.w*r.x[1],n.t+n.h*(1-r.y[0])]],c=t.lonaxis,u=t.lataxis,d=function(e,t){var n=A.clipPad,r=e[0]+n,a=e[1]-n,o=t[0]+n,i=t[1]-n;0<r&&a<0&&(a+=360);var s=(a-r)/4;return{type:"Polygon",coordinates:[[[r,o],[r,i],[r+s,i],[r+2*s,i],[r+3*s,i],[a,i],[a,o],[a-s,o],[a-2*s,o],[a-3*s,o],[r,o]]]}}(c.range,u.range);s.fitExtent(l,d);var f=this.bounds=s.getBounds(d),h=this.fitScale=s.scale(),p=s.translate();if(!isFinite(f[0][0])||!isFinite(f[0][1])||!isFinite(f[1][0])||!isFinite(f[1][1])||isNaN(p[0])||isNaN(p[0])){for(var g=this.graphDiv,y=["projection.rotation","center","lonaxis.range","lataxis.range"],m="Invalid geo settings, relayout'ing to default view.",v={},x=0;x<y.length;x++)v[this.id+"."+y[x]]=null;return this.viewInitial=null,T.warn(m),g._promises.push(M.call("relayout",g,v)),m}var b=this.midPt=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2];if(s.scale(a.scale*h).translate([p[0]+(b[0]-p[0]),p[1]+(b[1]-p[1])]).clipExtent(f),t._isAlbersUsa){var _=s([i.lon,i.lat]),w=s.translate();s.translate([w[0]-(_[0]-w[0]),w[1]-(_[1]-w[1])])}},n.updateBaseLayers=function(e,u){var n=this,d=n.topojson,r=n.layers,f=n.basePaths;function h(e){return"lonaxis"===e||"lataxis"===e}function p(e){return Boolean(A.lineLayers[e])}function g(e){return Boolean(A.fillLayers[e])}var t=(this.hasChoropleth?A.layersForChoropleth:A.layers).filter(function(e){return p(e)||g(e)?u["show"+e]:!h(e)||u[e].showgrid}),a=n.framework.selectAll(".layer").data(t,String);a.exit().each(function(e){delete r[e],delete f[e],k.select(this).remove()}),a.enter().append("g").attr("class",function(e){return"layer "+e}).each(function(e){var t=r[e]=k.select(this);"bg"===e?n.bgRect=t.append("rect").style("pointer-events","all"):h(e)?f[e]=t.append("path").style("fill","none"):"backplot"===e?t.append("g").classed("choroplethlayer",!0):"frontplot"===e?t.append("g").classed("scatterlayer",!0):p(e)?f[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2):g(e)&&(f[e]=t.append("path").style("stroke","none"))}),a.order(),a.each(function(e){var t,n,r,a,o,i,s,l=f[e],c=A.layerNameToAdjective[e];"frame"===e?l.datum(A.sphereSVG):p(e)||g(e)?l.datum(v(d,d.objects[e])):h(e)&&l.datum((t=e,n=u,r=n[t].dtick,a=A.scopeDefaults[n.scope],o=a.lonaxisRange,i=a.lataxisRange,s="lonaxis"===t?[r]:[0,r],k.geo.graticule().extent([[o[0],i[0]],[o[1],i[1]]]).step(s))).call(y.stroke,u[e].gridcolor).call(m.dashLine,"",u[e].gridwidth),p(e)?l.call(y.stroke,u[c+"color"]).call(m.dashLine,"",u[c+"width"]):g(e)&&l.call(y.fill,u[c+"color"])})},n.updateDims=function(e,t){var n=this.bounds,r=(t.framewidth||0)/2,a=n[0][0]-r,o=n[0][1]-r,i=n[1][0]-a+r,s=n[1][1]-o+r;m.setRect(this.clipRect,a,o,i,s),this.bgRect.call(m.setRect,a,o,i,s).call(y.fill,t.bgcolor),this.xaxis._offset=a,this.xaxis._length=i,this.yaxis._offset=o,this.yaxis._length=s},n.updateFx=function(t,e){var r=this,a=r.graphDiv,n=r.bgRect,o=t.dragmode;if(!r.isStatic){if("pan"===o)n.node().onmousedown=null,n.call(f(r,e)),n.on("dblclick.zoom",function(){var e=r.viewInitial,t={};for(var n in e)t[r.id+"."+n]=e[n];M.call("relayout",a,t),a.emit("plotly_doubleclick",null)});else if("select"===o||"lasso"===o){var i;n.on(".zoom",null),"select"===o?i=function(e,t){(e.range={})[r.id]=[l([t.xmin,t.ymin]),l([t.xmax,t.ymax])]}:"lasso"===o&&(i=function(e,t,n){(e.lassoPoints={})[r.id]=n.filtered.map(l)});var s={element:r.bgRect.node(),gd:a,plotinfo:{xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:i},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(e){2===e&&t._zoomlayer.selectAll(".select-outline").remove()},prepFn:function(e,t,n){d(e,t,n,s,o)}};u.init(s)}n.on("mousemove",function(){var e=r.projection.invert(k.mouse(this));if(!e||isNaN(e[0])||isNaN(e[1]))return u.unhover(a,k.event);r.xaxis.p2c=function(){return e[0]},r.yaxis.p2c=function(){return e[1]},c.hover(a,k.event,r.id)}),n.on("mouseout",function(){u.unhover(a,k.event)}),n.on("click",function(){c.click(a,k.event)})}function l(e){return r.projection.invert([e[0]+r.xaxis._offset,e[1]+r.yaxis._offset])}},n.makeFramework=function(){var n=this,e=n.graphDiv._fullLayout,t="clip"+e._uid+n.id;n.clipDef=e._clips.append("clipPath").attr("id",t),n.clipRect=n.clipDef.append("rect"),n.framework=k.select(n.container).append("g").attr("class","geo "+n.id).call(m.setClipUrl,t),n.project=function(e){var t=n.projection(e);return t?[t[0]-n.xaxis._offset,t[1]-n.yaxis._offset]:[null,null]},n.xaxis={_id:"x",c2p:function(e){return n.project(e)[0]}},n.yaxis={_id:"y",c2p:function(e){return n.project(e)[1]}},n.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(n.mockAxis,e)},n.saveViewInitial=function(e){var t=e.center||{},n=e.projection,r=n.rotation||{};e._isScoped?this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale}:e._isClipped?this.viewInitial={"projection.scale":n.scale,"projection.rotation.lon":r.lon,"projection.rotation.lat":r.lat}:this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale,"projection.rotation.lon":r.lon}},n.render=function(){var e,n=this.projection,t=n.getPath();function r(e){var t=n(e.lonlat);return t?"translate("+t[0]+","+t[1]+")":null}function a(e){return n.isLonLatOverEdges(e.lonlat)?"none":null}for(e in this.basePaths)this.basePaths[e].attr("d",t);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(e){return t(e.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",a).attr("transform",r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/dragelement":57,"../../components/drawing":60,"../../components/fx":77,"../../lib":156,"../../lib/topojson_utils":180,"../../registry":248,"../cartesian/axes":199,"../cartesian/select":217,"../plots":240,"./constants":228,"./projections":234,"./zoom":235,"topojson-client":338}],230:[function(e,t,n){"use strict";var l=e("./geo"),c=e("../../plots/get_data").getSubplotCalcData,r=e("../../lib").counterRegex,u="geo";n.name=u,n.attr=u,n.idRoot=u,n.idRegex=n.attrRegex=r(u),n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){var t=e._fullLayout,n=e.calcdata,r=t._subplots.geo;void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var a=0;a<r.length;a++){var o=r[a],i=c(n,u,o),s=t[o]._subplot;s||(s=l({id:o,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[o]._subplot=s),s.plot(i,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots.geo||[],o=0;o<a.length;o++){var i=a[o],s=r[i]._subplot;!t[i]&&s&&(s.framework.remove(),s.clipDef.remove())}},n.updateFx=function(e){for(var t=e._subplots.geo,n=0;n<t.length;n++){var r=e[t[n]];r._subplot.updateFx(e,r)}}},{"../../lib":156,"../../plots/get_data":236,"./geo":229,"./layout/attributes":231,"./layout/defaults":232,"./layout/layout_attributes":233}],231:[function(e,t,n){"use strict";t.exports={geo:{valType:"subplotid",role:"info",dflt:"geo",editType:"calc",description:["Sets a reference between this trace's geospatial coordinates and","a geographic map.","If *geo* (the default value), the geospatial coordinates refer to","`layout.geo`.","If *geo2*, the geospatial coordinates refer to `layout.geo2`,","and so on."].join(" ")}}},{}],232:[function(e,t,n){"use strict";var r=e("../../subplot_defaults"),A=e("../constants"),a=e("./layout_attributes"),S=A.axesNames;function o(e,t,n){var r=n("resolution"),a=n("scope"),o=A.scopeDefaults[a],i=n("projection.type",o.projType),s=t._isAlbersUsa="albers usa"===i;s&&(a=t.scope="usa");var l=t._isScoped="world"!==a,c=t._isConic=-1!==i.indexOf("conic");t._isClipped=!!A.lonaxisSpan[i];for(var u=0;u<S.length;u++){var d,f=S[u],h=[30,10][u];if(l)d=o[f+"Range"];else{var p=A[f+"Span"],g=(p[i]||p["*"])/2,y=n("projection.rotation."+f.substr(0,3),o.projRotate[u]);d=[y-g,y+g]}n(f+".tick0",n(f+".range",d)[0]),n(f+".dtick",h),n(f+".showgrid")&&(n(f+".gridcolor"),n(f+".gridwidth"))}var m=t.lonaxis.range,v=t.lataxis.range,x=m[0],b=m[1];0<x&&b<0&&(b+=360);var _,w,k,M=(x+b)/2;if(!s){var T=l?o.projRotate:[M,0,0];_=n("projection.rotation.lon",T[0]),n("projection.rotation.lat",T[1]),n("projection.rotation.roll",T[2]),n("showcoastlines",!l)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean")&&n("oceancolor")}(s?(w=-96.6,k=38.7):(w=l?M:_,k=(v[0]+v[1])/2),n("center.lon",w),n("center.lat",k),c)&&n("projection.parallels",o.projParallels||[0,60]);n("projection.scale"),n("showland")&&n("landcolor"),n("showlakes")&&n("lakecolor"),n("showrivers")&&(n("rivercolor"),n("riverwidth")),n("showcountries",l&&"usa"!==a)&&(n("countrycolor"),n("countrywidth")),("usa"===a||"north america"===a&&50===r)&&(n("showsubunits",!0),n("subunitcolor"),n("subunitwidth")),l||n("showframe",!0)&&(n("framecolor"),n("framewidth")),n("bgcolor")}t.exports=function(e,t,n){r(e,t,n,{type:"geo",attributes:a,handleDefaults:o,partition:"y"})}},{"../../subplot_defaults":247,"../constants":228,"./layout_attributes":233}],233:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),a=e("../../domain").attributes,o=e("../constants"),i=e("../../../plot_api/edit_types").overrideAll,s={range:{valType:"info_array",role:"info",items:[{valType:"number"},{valType:"number"}],description:["Sets the range of this axis (in degrees),","sets the map's clipped coordinates."].join(" ")},showgrid:{valType:"boolean",role:"info",dflt:!1,description:"Sets whether or not graticule are shown on the map."},tick0:{valType:"number",role:"info",description:["Sets the graticule's starting tick longitude/latitude."].join(" ")},dtick:{valType:"number",role:"info",description:["Sets the graticule's longitude/latitude tick step."].join(" ")},gridcolor:{valType:"color",role:"style",dflt:r.lightLine,description:["Sets the graticule's stroke color."].join(" ")},gridwidth:{valType:"number",role:"style",min:0,dflt:1,description:["Sets the graticule's stroke width (in px)."].join(" ")}};t.exports=i({domain:a({name:"geo"},{description:["Note that geo subplots are constrained by domain.","In general, when `projection.scale` is set to 1.","a map will fit either its x or y domain, but not both."].join(" ")}),resolution:{valType:"enumerated",values:[110,50],role:"info",dflt:110,coerceNumber:!0,description:["Sets the resolution of the base layers.","The values have units of km/mm","e.g. 110 corresponds to a scale ratio of 1:110,000,000."].join(" ")},scope:{valType:"enumerated",role:"info",values:Object.keys(o.scopeDefaults),dflt:"world",description:"Set the scope of the map."},projection:{type:{valType:"enumerated",role:"info",values:Object.keys(o.projNames),description:"Sets the projection type."},rotation:{lon:{valType:"number",role:"info",description:["Rotates the map along parallels","(in degrees East).","Defaults to the center of the `lonaxis.range` values."].join(" ")},lat:{valType:"number",role:"info",description:["Rotates the map along meridians","(in degrees North)."].join(" ")},roll:{valType:"number",role:"info",description:["Roll the map (in degrees)","For example, a roll of *180* makes the map appear upside down."].join(" ")}},parallels:{valType:"info_array",role:"info",items:[{valType:"number"},{valType:"number"}],description:["For conic projection types only.","Sets the parallels (tangent, secant)","where the cone intersects the sphere."].join(" ")},scale:{valType:"number",role:"info",min:0,dflt:1,description:["Zooms in or out on the map view.","A scale of *1* corresponds to the largest zoom level","that fits the map's lon and lat ranges. "].join(" ")}},center:{lon:{valType:"number",role:"info",description:["Sets the longitude of the map's center.","By default, the map's longitude center lies at the middle of the longitude range","for scoped projection and above `projection.rotation.lon` otherwise."].join(" ")},lat:{valType:"number",role:"info",description:["Sets the latitude of the map's center.","For all projection types, the map's latitude center lies","at the middle of the latitude range by default."].join(" ")}},showcoastlines:{valType:"boolean",role:"info",description:"Sets whether or not the coastlines are drawn."},coastlinecolor:{valType:"color",role:"style",dflt:r.defaultLine,description:"Sets the coastline color."},coastlinewidth:{valType:"number",role:"style",min:0,dflt:1,description:"Sets the coastline stroke width (in px)."},showland:{valType:"boolean",role:"info",dflt:!1,description:"Sets whether or not land masses are filled in color."},landcolor:{valType:"color",role:"style",dflt:o.landColor,description:"Sets the land mass color."},showocean:{valType:"boolean",role:"info",dflt:!1,description:"Sets whether or not oceans are filled in color."},oceancolor:{valType:"color",role:"style",dflt:o.waterColor,description:"Sets the ocean color"},showlakes:{valType:"boolean",role:"info",dflt:!1,description:"Sets whether or not lakes are drawn."},lakecolor:{valType:"color",role:"style",dflt:o.waterColor,description:"Sets the color of the lakes."},showrivers:{valType:"boolean",role:"info",dflt:!1,description:"Sets whether or not rivers are drawn."},rivercolor:{valType:"color",role:"style",dflt:o.waterColor,description:"Sets color of the rivers."},riverwidth:{valType:"number",role:"style",min:0,dflt:1,description:"Sets the stroke width (in px) of the rivers."},showcountries:{valType:"boolean",role:"info",description:"Sets whether or not country boundaries are drawn."},countrycolor:{valType:"color",role:"style",dflt:r.defaultLine,description:"Sets line color of the country boundaries."},countrywidth:{valType:"number",role:"style",min:0,dflt:1,description:"Sets line width (in px) of the country boundaries."},showsubunits:{valType:"boolean",role:"info",description:["Sets whether or not boundaries of subunits within countries","(e.g. states, provinces) are drawn."].join(" ")},subunitcolor:{valType:"color",role:"style",dflt:r.defaultLine,description:"Sets the color of the subunits boundaries."},subunitwidth:{valType:"number",role:"style",min:0,dflt:1,description:"Sets the stroke width (in px) of the subunits boundaries."},showframe:{valType:"boolean",role:"info",description:"Sets whether or not a frame is drawn around the map."},framecolor:{valType:"color",role:"style",dflt:r.defaultLine,description:"Sets the color the frame."},framewidth:{valType:"number",role:"style",min:0,dflt:1,description:"Sets the stroke width (in px) of the frame."},bgcolor:{valType:"color",role:"style",dflt:r.background,description:"Set the background color of the map"},lonaxis:s,lataxis:s},"plot","from-root")},{"../../../components/color/attributes":34,"../../../plot_api/edit_types":184,"../../domain":225,"../constants":228}],234:[function(e,t,n){"use strict";t.exports=function(g){function n(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:r(e.geometry,t)}}function r(e,t){if(!e)return null;if("GeometryCollection"===e.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return r(e,t)})};if(!l.hasOwnProperty(e.type))return null;var n=l[e.type];return g.geo.stream(e,t(n)),n.result()}g.geo.project=function(e,t){var n=t.stream;if(!n)throw new Error("not yet supported");return(e&&a.hasOwnProperty(e.type)?a[e.type]:r)(e,n)};var a={Feature:n,FeatureCollection:function(e,t){return{type:"FeatureCollection",features:e.features.map(function(e){return n(e,t)})}}},o=[],i=[],e={point:function(e,t){o.push([e,t])},result:function(){var e=o.length?o.length<2?{type:"Point",coordinates:o[0]}:{type:"MultiPoint",coordinates:o}:null;return o=[],e}},t={lineStart:c,point:function(e,t){o.push([e,t])},lineEnd:function(){o.length&&(i.push(o),o=[])},result:function(){var e=i.length?i.length<2?{type:"LineString",coordinates:i[0]}:{type:"MultiLineString",coordinates:i}:null;return i=[],e}},s={polygonStart:c,lineStart:c,point:function(e,t){o.push([e,t])},lineEnd:function(){var e=o.length;if(e){for(;o.push(o[0].slice()),++e<4;);i.push(o),o=[]}},polygonEnd:c,result:function(){if(!i.length)return null;var r=[],t=[];return i.forEach(function(e){!function(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}(e)?t.push(e):r.push([e])}),t.forEach(function(t){var n=t[0];r.some(function(e){if(function(e,t){for(var n=t[0],r=t[1],a=!1,o=0,i=e.length,s=i-1;o<i;s=o++){var l=e[o],c=l[0],u=l[1],d=e[s],f=d[0],h=d[1];r<u^r<h&&n<(f-c)*(r-u)/(h-u)+c&&(a=!a)}return a}(e[0],n))return e.push(t),!0})||r.push([t])}),i=[],r.length?1<r.length?{type:"MultiPolygon",coordinates:r}:{type:"Polygon",coordinates:r[0]}:null}},l={Point:e,MultiPoint:e,LineString:t,MultiLineString:t,Polygon:s,MultiPolygon:s,Sphere:s};function c(){}var A=1e-6,x=A*A,S=Math.PI,L=S/2,b=(Math.sqrt(S),S/180),_=180/S;function u(e){return 1<e?L:e<-1?-L:Math.asin(e)}function C(e){return 1<e?0:e<-1?S:Math.acos(e)}var d=g.geo.projection,f=g.geo.projectionMutator;function h(e,t){var n=(2+L)*Math.sin(t);t/=2;for(var r=0,a=1/0;r<10&&Math.abs(a)>A;r++){var o=Math.cos(t);t-=a=(t+Math.sin(t)*(o+2)-n)/(2*o*(1+o))}return[2/Math.sqrt(S*(4+S))*e*(1+Math.cos(t)),2*Math.sqrt(S/(4+S))*Math.sin(t)]}g.geo.interrupt=function(u){var d,f=[[[[-S,0],[0,L],[S,0]]],[[[-S,0],[0,-L],[S,0]]]];function h(e,t){for(var n=t<0?-1:1,r=f[+(t<0)],a=0,o=r.length-1;a<o&&e>r[a][2][0];++a);var i=u(e-r[a][1][0],t);return i[0]+=u(r[a][1][0],n*t>n*r[a][0][1]?r[a][0][1]:t)[0],i}u.invert&&(h.invert=function(e,t){for(var n,r,a=d[+(t<0)],o=f[+(t<0)],i=0,s=a.length;i<s;++i){var l=a[i];if(l[0][0]<=e&&e<l[1][0]&&l[0][1]<=t&&t<l[1][1]){var c=u.invert(e-u(o[i][1][0],0)[0],t);return c[0]+=o[i][1][0],n=h(c[0],c[1]),r=[e,t],Math.abs(n[0]-r[0])<A&&Math.abs(n[1]-r[1])<A?c:null}}});var a=g.geo.projection(h),o=a.stream;function p(e,t){for(var n,r,a,o=-1,i=e.length,s=e[0],l=[];++o<i;){r=((n=e[o])[0]-s[0])/t,a=(n[1]-s[1])/t;for(var c=0;c<t;++c)l.push([s[0]+c*r,s[1]+c*a]);s=n}return l.push(n),l}return a.stream=function(e){var t=a.rotate(),n=o(e),r=(a.rotate([0,0]),o(e));return a.rotate(t),n.sphere=function(){g.geo.stream(function(){for(var e=1e-6,t=[],n=0,r=f[0].length;n<r;++n){var a=f[0][n],o=180*a[0][0]/S,i=180*a[0][1]/S,s=180*a[1][1]/S,l=180*a[2][0]/S,c=180*a[2][1]/S;t.push(p([[o+e,i+e],[o+e,s-e],[l-e,s-e],[l-e,c+e]],30))}for(var n=f[1].length-1;0<=n;--n){var a=f[1][n],o=180*a[0][0]/S,i=180*a[0][1]/S,s=180*a[1][1]/S,l=180*a[2][0]/S,c=180*a[2][1]/S;t.push(p([[l-e,c-e],[l-e,s+e],[o+e,s+e],[o+e,i-e]],30))}return{type:"Polygon",coordinates:[g.merge(t)]}}(),r)},n},a.lobes=function(e){return arguments.length?(f=e.map(function(e){return e.map(function(e){return[[e[0][0]*S/180,e[0][1]*S/180],[e[1][0]*S/180,e[1][1]*S/180],[e[2][0]*S/180,e[2][1]*S/180]]})}),d=f.map(function(e){return e.map(function(e){var t,n=u(e[0][0],e[0][1])[0],r=u(e[2][0],e[2][1])[0],a=u(e[1][0],e[0][1])[1],o=u(e[1][0],e[1][1])[1];return o<a&&(t=a,a=o,o=t),[[n,a],[r,o]]})}),a):f.map(function(e){return e.map(function(e){return[[180*e[0][0]/S,180*e[0][1]/S],[180*e[1][0]/S,180*e[1][1]/S],[180*e[2][0]/S,180*e[2][1]/S]]})})},a},h.invert=function(e,t){var n=.5*t*Math.sqrt((4+S)/S),r=u(n),a=Math.cos(r);return[e/(2/Math.sqrt(S*(4+S))*(1+a)),u((r+n*(a+2))/(2+L))]},(g.geo.eckert4=function(){return d(h)}).raw=h;var p=g.geo.azimuthalEqualArea.raw;function y(r,a){if(arguments.length<2&&(a=r),1===a)return p;if(a===1/0)return m;function e(e,t){var n=p(e/a,t);return n[0]*=r,n}return e.invert=function(e,t){var n=p.invert(e/r,t);return n[0]*=a,n},e}function m(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function v(e,t){return[3*e/(2*S)*Math.sqrt(S*S/3-t*t),t]}function w(e,t){return[e,1.25*Math.log(Math.tan(S/4+.4*t))]}function k(a){return function(e){for(var t,n=a*Math.sin(e),r=30;e-=t=(e+Math.sin(e)-n)/(1+Math.cos(e)),Math.abs(t)>A&&0<--r;);return e/2}}m.invert=function(e,t){var n=2*u(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(g.geo.hammer=function(){var t=2,n=f(y),e=n(t);return e.coefficient=function(e){return arguments.length?n(t=+e):t},e}).raw=y,v.invert=function(e,t){return[2/3*S*e/Math.sqrt(S*S/3-t*t),t]},(g.geo.kavrayskiy7=function(){return d(v)}).raw=v,w.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*S]},(g.geo.miller=function(){return d(w)}).raw=w,k(S);var M=function(r,a,o){var n=k(o);function e(e,t){return[r*e*Math.cos(t=n(t)),a*Math.sin(t)]}return e.invert=function(e,t){var n=u(t/a);return[e/(r*Math.cos(n)),u((2*n+Math.sin(2*n))/o)]},e}(Math.SQRT2/L,Math.SQRT2,S);function T(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}(g.geo.mollweide=function(){return d(M)}).raw=M,T.invert=function(e,t){var n,r=t,a=25;do{var o=r*r,i=o*o;r-=n=(r*(1.007226+o*(.015085+i*(.028874*o-.044475-.005916*i)))-t)/(1.007226+o*(.045255+i*(.259866*o-.311325-.005916*11*i)))}while(Math.abs(n)>A&&0<--a);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},(g.geo.naturalEarth=function(){return d(T)}).raw=T;var z=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function O(e,t){var n,r=Math.min(18,36*Math.abs(t)/S),a=Math.floor(r),o=r-a,i=(n=z[a])[0],s=n[1],l=(n=z[++a])[0],c=n[1],u=(n=z[Math.min(19,++a)])[0],d=n[1];return[e*(l+o*(u-i)/2+o*o*(u-2*l+i)/2),(0<t?L:-L)*(c+o*(d-s)/2+o*o*(d-2*c+s)/2)]}function j(e,t){return[e*Math.cos(t),t]}function P(e,t){var n,r=Math.cos(t),a=(n=C(r*Math.cos(e/=2)))?n/Math.sin(n):1;return[2*r*Math.sin(e)*a,Math.sin(t)*a]}function D(e,t){var n=P(e,t);return[(n[0]+e/L)/2,(n[1]+t)/2]}z.forEach(function(e){e[1]*=1.0144}),O.invert=function(e,t){var n=t/L,r=90*n,a=Math.min(18,Math.abs(r/5)),o=Math.max(0,Math.floor(a));do{var i=z[o][1],s=z[o+1][1],l=z[Math.min(19,o+2)][1],c=l-i,u=l-2*s+i,d=2*(Math.abs(n)-s)/c,f=u/c,h=d*(1-f*d*(1-2*f*d));if(0<=h||1===o){r=(0<=t?5:-5)*(h+a);for(var p,g=50;h=(a=Math.min(18,Math.abs(r)/5))-(o=Math.floor(a)),i=z[o][1],s=z[o+1][1],l=z[Math.min(19,o+2)][1],r-=(p=(0<=t?L:-L)*(s+h*(l-i)/2+h*h*(l-2*s+i)/2)-t)*_,Math.abs(p)>x&&0<--g;);break}}while(0<=--o);var y=z[o][0],m=z[o+1][0],v=z[Math.min(19,o+2)][0];return[e/(m+h*(v-y)/2+h*h*(v-2*m+y)/2),r*b]},(g.geo.robinson=function(){return d(O)}).raw=O,j.invert=function(e,t){return[e/Math.cos(t),t]},(g.geo.sinusoidal=function(){return d(j)}).raw=j,P.invert=function(e,t){if(!(S*S+A<e*e+4*t*t)){var n=e,r=t,a=25;do{var o,i=Math.sin(n),s=Math.sin(n/2),l=Math.cos(n/2),c=Math.sin(r),u=Math.cos(r),d=Math.sin(2*r),f=c*c,h=u*u,p=s*s,g=1-h*l*l,y=g?C(u*l)*Math.sqrt(o=1/g):o=0,m=2*y*u*s-e,v=y*c-t,x=o*(h*p+y*u*l*f),b=o*(.5*i*d-2*y*c*s),_=.25*o*(d*s-y*c*h*i),w=o*(f*l+y*p*u),k=b*_-w*x;if(!k)break;var M=(v*b-m*w)/k,T=(m*_-v*x)/k;n-=M,r-=T}while((Math.abs(M)>A||Math.abs(T)>A)&&0<--a);return[n,r]}},(g.geo.aitoff=function(){return d(P)}).raw=P,D.invert=function(e,t){var n=e,r=t,a=25;do{var o,i=Math.cos(r),s=Math.sin(r),l=Math.sin(2*r),c=s*s,u=i*i,d=Math.sin(n),f=Math.cos(n/2),h=Math.sin(n/2),p=h*h,g=1-u*f*f,y=g?C(i*f)*Math.sqrt(o=1/g):o=0,m=.5*(2*y*i*h+n/L)-e,v=.5*(y*s+r)-t,x=.5*o*(u*p+y*i*f*c)+.5/L,b=o*(d*l/4-y*s*h),_=.125*o*(l*h-y*s*u*d),w=.5*o*(c*f+y*p*i)+.5,k=b*_-w*x,M=(v*b-m*w)/k,T=(m*_-v*x)/k;n-=M,r-=T}while((Math.abs(M)>A||Math.abs(T)>A)&&0<--a);return[n,r]},(g.geo.winkel3=function(){return d(D)}).raw=D}},{}],235:[function(t,n,e){(function(e){"use strict";var T="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,c=t("../../lib"),p=Math.PI/180,A=180/Math.PI,g={cursor:"pointer"},y={cursor:"auto"};function m(e,t){return T.behavior.zoom().translate(t.translate()).scale(t.scale())}function v(e,t,n){var r=e.id,a=e.graphDiv,o=a.layout[r],i=a._fullLayout[r],s={};function l(e,t){var n=c.nestedProperty(i,e);n.get()!==t&&(n.set(t),c.nestedProperty(o,e).set(t),s[r+"."+e]=t)}n(l),l("projection.scale",t.scale()/e.fitScale),a.emit("plotly_relayout",s)}function r(n,r){var e=m(0,r);function t(e){var t=r.invert(n.midPt);e("center.lon",t[0]),e("center.lat",t[1])}return e.on("zoomstart",function(){T.select(this).style(g)}).on("zoom",function(){r.scale(T.event.scale).translate(T.event.translate),n.render()}).on("zoomend",function(){T.select(this).style(y),v(n,r,t)}),e}function a(r,a){var n,o,i,s,l,c,u,d,f=m(0,a),h=2;function p(e){return a.invert(e)}function e(e){var t=a.rotate(),n=a.invert(r.midPt);e("projection.rotation.lon",-t[0]),e("center.lon",n[0]),e("center.lat",n[1])}return f.on("zoomstart",function(){T.select(this).style(g),n=T.mouse(this),o=a.rotate(),i=a.translate(),s=o,l=p(n)}).on("zoom",function(){if(c=T.mouse(this),t=a(p(e=n)),Math.abs(t[0]-e[0])>h||Math.abs(t[1]-e[1])>h)return f.scale(a.scale()),void f.translate(a.translate());var e,t;a.scale(T.event.scale),a.translate([i[0],T.event.translate[1]]),l?p(c)&&(d=p(c),u=[s[0]+(d[0]-l[0]),o[1],o[2]],a.rotate(u),s=u):l=p(n=c),r.render()}).on("zoomend",function(){T.select(this).style(y),v(r,a,e)}),f}function o(t,_){var w,k={r:_.rotate(),k:_.scale()},d=m(0,_),M=function(a){var e=0,t=arguments.length,n=[];for(;++e<t;)n.push(arguments[e]);var o=T.dispatch.apply(null,n);return o.of=function(n,r){return function(e){var t;try{t=e.sourceEvent=T.event,e.target=a,T.event=e,o[e.type].apply(n,r)}finally{T.event=t}}},o}(d,"zoomstart","zoom","zoomend"),f=0,h=d.on;function n(e){var t=_.rotate();e("projection.rotation.lon",-t[0]),e("projection.rotation.lat",-t[1])}return d.on("zoomstart",function(){T.select(this).style(g);var e,t,n,r,a,o,i,s,l,c,u,y=T.mouse(this),m=_.rotate(),v=m,x=_.translate(),b=(t=.5*(e=m)[0]*p,n=.5*e[1]*p,r=.5*e[2]*p,a=Math.sin(t),o=Math.cos(t),i=Math.sin(n),s=Math.cos(n),l=Math.sin(r),c=Math.cos(r),[o*s*c+a*i*l,a*s*c-o*i*l,o*i*c+a*s*l,o*s*l-a*i*c]);w=S(_,y),h.call(d,"zoom",function(){var e,t,n,r,a,o,i,s,l,c,u,d=T.mouse(this);if(_.scale(k.k=T.event.scale),w){if(S(_,d)){_.rotate(m).translate(x);var f=S(_,d),h=function(e,t){if(!e||!t)return;var n=(i=e,s=t,[i[1]*s[2]-i[2]*s[1],i[2]*s[0]-i[0]*s[2],i[0]*s[1]-i[1]*s[0]]),r=Math.sqrt(z(n,n)),a=.5*Math.acos(Math.max(-1,Math.min(1,z(e,t)))),o=Math.sin(a)/r;var i,s;return r&&[Math.cos(a),n[2]*o,-n[1]*o,n[0]*o]}(w,f),p=(n=h,r=(t=b)[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1],c=n[2],u=n[3],e=[r*s-a*l-o*c-i*u,r*l+a*s+o*u-i*c,r*c-a*u+o*s+i*l,r*u+a*c-o*l+i*s],[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*A,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*A,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*A]),g=k.r=function(e,t,n){var r=C(t,2,e[0]);r=C(r=C(r,1,e[1]),0,e[2]-n[2]);var a,o,i=t[0],s=t[1],l=t[2],c=r[0],u=r[1],d=r[2],f=Math.atan2(s,i)*A,h=Math.sqrt(i*i+s*s);Math.abs(u)>h?(o=(0<u?90:-90)-f,a=0):(o=Math.asin(u/h)*A-f,a=Math.sqrt(h*h-u*u));var p=180-o-2*f,g=(Math.atan2(d,c)-Math.atan2(l,a))*A,y=(Math.atan2(d,c)-Math.atan2(l,-a))*A,m=L(n[0],n[1],o,g),v=L(n[0],n[1],p,y);return m<=v?[o,g,n[2]]:[p,y,n[2]]}(p,w,v);isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])||(g=v),_.rotate(g),v=g}}else w=S(_,y=d);M.of(this,arguments)({type:"zoom"})}),u=M.of(this,arguments),f++||u({type:"zoomstart"})}).on("zoomend",function(){var e;T.select(this).style(y),h.call(d,"zoom",null),e=M.of(this,arguments),--f||e({type:"zoomend"}),v(t,_,n)}).on("zoom.redraw",function(){t.render()}),T.rebind(d,M,"on")}function S(e,t){var n,r,a,o,i=e.invert(t);return i&&isFinite(i[0])&&isFinite(i[1])&&(r=(n=i)[0]*p,a=n[1]*p,[(o=Math.cos(a))*Math.cos(r),o*Math.sin(r),Math.sin(a)])}function L(e,t,n,r){var a=i(n-e),o=i(r-t);return Math.sqrt(a*a+o*o)}function i(e){return(e%360+540)%360-180}function C(e,t,n){var r=n*p,a=e.slice(),o=0===t?1:0,i=2===t?1:2,s=Math.cos(r),l=Math.sin(r);return a[o]=e[o]*s-e[i]*l,a[i]=e[i]*s+e[o]*l,a}function z(e,t){for(var n=0,r=0,a=e.length;r<a;++r)n+=e[r]*t[r];return n}n.exports=function(e,t){var n=e.projection;return(t._isScoped?r:t._isClipped?o:a)(e,n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156}],236:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){var r=u.subplotsRegistry[t];if(!r)return[];for(var a=r.attr,o=[],i=0;i<e.length;i++){var s=e[i];s[0].trace[a]===n&&o.push(s)}return o},n.getModuleCalcData=function(e,t){var n=[],r="string"==typeof t?u.getModule(t):t;if(!r)return n;for(var a=0;a<e.length;a++){var o=e[a],i=o[0].trace;i._module===r&&!0===i.visible&&n.push(o)}return n},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,a,o,i=u.subplotsRegistry[t].attr,s=[];if("gl2d"===t){var l=n.match(d);a="x"+l[1],o="y"+l[2]}for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[i[0]]===a&&r[i[1]]===o&&s.push(r):r[i]===n&&s.push(r);return s}},{"../registry":248,"./cartesian/constants":204}],237:[function(e,t,n){"use strict";function r(e,t){var n,r,a=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)a[r]+=e[4*n+r]*t[n];return a}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],238:[function(e,t,n){"use strict";var r=e("./font_attributes"),a=e("../components/color/attributes"),o=r({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=a.defaultLine,t.exports={font:o,title:{valType:"string",role:"info",editType:"layoutstyle",description:["Sets the plot's title."].join(" ")},titlefont:r({editType:"layoutstyle",description:"Sets the title font."}),autosize:{valType:"boolean",role:"info",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",role:"info",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",role:"info",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},margin:{l:{valType:"number",role:"info",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",role:"info",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",role:"info",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",role:"info",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",role:"info",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",role:"info",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",role:"style",dflt:a.background,editType:"plot",description:"Sets the color of paper where the graph is drawn."},plot_bgcolor:{valType:"color",role:"style",dflt:a.background,editType:"layoutstyle",description:["Sets the color of plotting area in-between x and y axes."].join(" ")},separators:{valType:"string",role:"style",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",role:"info",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the plotly service (at https://plot.ly or on-premise)."].join(" ")},showlegend:{valType:"boolean",role:"info",editType:"legend",description:"Determines whether or not a legend is drawn."},colorway:{valType:"colorlist",dflt:a.defaults,role:"style",editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",role:"info",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")}}},{"../components/color/attributes":34,"./font_attributes":226}],239:[function(e,t,n){"use strict";t.exports={t:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,role:"style",editType:"arraydraw",description:"The amount of padding (in px) on the left side of the component."},editType:"arraydraw"}},{}],240:[function(n,r,e){(function(e){"use strict";var w="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,T=n("fast-isnumeric"),A=n("../registry"),y=n("../plot_api/plot_schema"),C=n("../plots/cartesian/axis_ids"),k=n("../lib"),M=k._,v=n("../components/color"),m=n("../constants/numerical").BADNUM,S=r.exports={},a=n("./animation_attributes"),o=n("./frame_attributes"),L=k.relinkPrivateKeys;k.extendFlat(S,A),S.attributes=n("./attributes"),S.attributes.type.values=S.allTypes,S.fontAttrs=n("./font_attributes"),S.layoutAttributes=n("./layout_attributes"),S.fontWeight="normal";var x=S.transformsRegistry,t=n("./command");S.executeAPICommand=t.executeAPICommand,S.computeAPICommandBindings=t.computeAPICommandBindings,S.manageCommandObserver=t.manageCommandObserver,S.hasSimpleAPICommandBindings=t.hasSimpleAPICommandBindings,S.redrawText=function(t){if(!((t=k.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){A.getComponentMethod("annotations","draw")(t),A.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),e(S.previousPromises(t))},300)})},S.resize=function(a){return a=k.getGraphDiv(a),new Promise(function(t,e){var n,r;a&&(n=a,(r=window.getComputedStyle(n).display)&&"none"!==r)||e(new Error("Resize must be passed a displayed plot div element.")),a._redrawTimer&&clearTimeout(a._redrawTimer),a._redrawTimer=setTimeout(function(){if(a.layout.width&&a.layout.height)t(a);else{delete a.layout.width,delete a.layout.height;var e=a.changed;a.autoplay=!0,A.call("relayout",a,{autosize:!0}).then(function(){a.changed=e,t(a)})}},100)})},S.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},S.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=t._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:v.defaultLine,"pointer-events":"all"}).each(function(){var e=w.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var r=n.node(),a={y:t._paper.attr("height")-9};document.body.contains(r)&&r.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),i=n.select(".js-link-spacer"),s=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){S.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),a=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+a})}}(e,o),i.text(o.text()&&s.text()?" - ":"")}},S.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=w.select(e).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return r.append("input").attr({type:"text",name:"data"}).node().value=S.graphJson(e,!1,"keepdata"),r.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var z,O=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],j=["year","month","dayMonth","dayMonthYear"];function P(e,t){var n,r,a=e.trace,o=a._arrayAttrs,i={};for(n=0;n<o.length;n++)i[r=o[n]]=k.nestedProperty(a,r).get().slice();for(e.trace=t,n=0;n<o.length;n++)r=o[n],k.nestedProperty(e.trace,r).set(i[r])}function D(e,a){var t=e._context.locale,o=!1,i={};function n(e){for(var t=!0,n=0;n<a.length;n++){var r=a[n];i[r]||(e[r]?i[r]=e[r]:t=!1)}t&&(o=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),o))break;s=A.localeRegistry}var u=t.split("-")[0];if(o||u===t)break;t=u}return o||n(A.localeRegistry.en.format),i}function b(e,t,n,r){for(var a=e.transforms,o=[e],i=0;i<a.length;i++){var s=a[i],l=x[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:i}))}return o}function _(e){for(var t=0;t<e.length;t++)e[t].clearCalc()}S.supplyDefaults=function(e){var t=e._fullLayout||{};if(t._skipDefaults)delete t._skipDefaults;else{var n,r=e._fullLayout={},a=e.layout||{},o=e._fullData||[],i=e._fullData=[],s=e.data||[],l=e._context||{};e._transitionData||S.createTransitionData(e),r._dfltTitle={plot:M(e,"Click to enter Plot title"),x:M(e,"Click to enter X axis title"),y:M(e,"Click to enter Y axis title"),colorbar:M(e,"Click to enter Colorscale title"),annotation:M(e,"new text")},r._traceWord=M(e,"trace");var c,u,d=D(e,O);if(r._mapboxAccessToken=l.mapboxAccessToken,t._initialAutoSizeIsDone){var f=t.width,h=t.height;S.supplyLayoutGlobalDefaults(a,r,d),a.width||(r.width=f),a.height||(r.height=h)}else{S.supplyLayoutGlobalDefaults(a,r,d);var p=!a.width||!a.height,g=r.autosize,y=l.autosizable;p&&(g||y)?S.plotAutoSize(e,a,r):p&&S.sanitizeMargins(e),!g&&p&&(a.width=r.width,a.height=r.height)}r._d3locale=(c=d,u=r.separators,c.decimal=u.charAt(0),c.thousands=u.charAt(1),w.locale(c)),r._extraFormat=D(e,j),r._initialAutoSizeIsDone=!0,r._dataLength=s.length,r._modules=[],r._basePlotModules=[],r._subplots=function(){var e,t,n={};if(!z){z=[];var r=A.subplotsRegistry;for(var a in r){var o=r[a],i=o.attr;if(i&&(z.push(a),Array.isArray(i)))for(t=0;t<i.length;t++)k.pushUnique(z,i[t])}}for(e=0;e<z.length;e++)n[z[e]]=[];return n}(),r._globalTransforms=(e._context||{}).globalTransforms,S.supplyDataDefaults(s,i,a,r),r._has=S._hasPlotType.bind(r);var m=r._modules;for(n=0;n<m.length;n++){var v=m[n];v.cleanData&&v.cleanData(i)}if(o.length===s.length)for(n=0;n<i.length;n++)L(i[n],o[n]);S.supplyLayoutModuleDefaults(a,r,i,e._transitionData),r._hasCartesian=r._has("cartesian"),r._hasGeo=r._has("geo"),r._hasGL3D=r._has("gl3d"),r._hasGL2D=r._has("gl2d"),r._hasTernary=r._has("ternary"),r._hasPie=r._has("pie"),S.cleanPlot(i,r,o,t),S.linkSubplots(i,r,o,t),L(r,t),S.doAutoMargin(e);var x=C.list(e);for(n=0;n<x.length;n++){x[n].setScale()}if((e.calcdata||[]).length===i.length)for(n=0;n<i.length;n++){var b=i[n],_=e.calcdata[n][0];_&&_.trace&&(_.trace._hasCalcTransform?P(_,b):_.trace=b)}}},S.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},S._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++){if(n[t].name===e)return!0}var r=this._modules||[];for(t=0;t<r.length;t++){var a=r[t];if(a.categories&&0<=a.categories.indexOf(e))return!0}return!1},S.cleanPlot=function(e,t,n,r){var a,o,i=r._basePlotModules||[];for(a=0;a<i.length;a++){var s=i[a];s.clean&&s.clean(e,t,n,r)}var l=!!r._paper,c=!!r._infolayer,u=r._has&&r._has("gl"),d=t._has&&t._has("gl");u&&!d&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcanvas=null);e:for(a=0;a<n.length;a++){var f=n[a].uid;for(o=0;o<e.length;o++){if(f===e[o].uid)continue e}var h=".hm"+f+",.contour"+f+",.carpet"+f+",#clip"+f+",.trace"+f;l&&r._paper.selectAll(h).remove(),c&&(r._infolayer.selectAll(".cb"+f).remove(),r._infolayer.selectAll("g.rangeslider-container").selectAll(h).remove())}r._zoomlayer&&r._zoomlayer.selectAll(".select-outline").remove()},S.linkSubplots=function(e,t,n,r){var a,o,i,s,l=r._plots||{},c=t._plots={},u=t._subplots,d={_fullData:e,_fullLayout:t},f=u.cartesian.concat(u.gl2d||[]);for(a=0;a<f.length;a++){var h,p=l[i=f[a]],g=C.getFromId(d,i,"x"),y=C.getFromId(d,i,"y");for(p?((h=c[i]=p).xaxis.layer!==g.layer&&(h.xlines.attr("d",null),h.xaxislayer.selectAll("*").remove()),h.yaxis.layer!==y.layer&&(h.ylines.attr("d",null),h.yaxislayer.selectAll("*").remove())):(h=c[i]={}).id=i,h.xaxis=g,h.yaxis=y,h._hasClipOnAxisFalse=!1,o=0;o<e.length;o++){var m=e[o];if(m.xaxis===h.xaxis._id&&m.yaxis===h.yaxis._id&&!1===m.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var v=C.list(d,null,!0);for(a=0;a<v.length;a++){var x=null;(s=v[a]).overlaying&&(x=C.getFromId(d,s.overlaying))&&x.overlaying&&(s.overlaying=!1,x=null),s._mainAxis=x||s,x&&(s.domain=x.domain.slice()),s._anchorAxis="free"===s.anchor?null:C.getFromId(d,s.anchor)}for(a=0;a<v.length;a++){var b="x"===(s=v[a])._id.charAt(0),_=s._mainAxis._anchorAxis,w="",k="",M="";if(_&&(M=_._mainAxis._id,w=b?s._id+M:M+s._id),!w||-1===f.indexOf(w))for(w="",o=0;o<f.length;o++){var T=(i=f[o]).indexOf("y"),A=b?i.substr(0,T):i.substr(T),S=b?i.substr(T):i.substr(0,T);if(A===s._id){k||(k=i);var L=C.getFromId(d,S);if(M&&L.overlaying===M){w=i;break}}}s._mainSubplot=w||k}},S.clearExpandedTraceDefaultColors=function(e){var a,o,t;for(o=[],(a=e._module._colorAttrs)||(e._module._colorAttrs=a=[],y.crawl(e._module.attributes,function(e,t,n,r){o[r]=t,o.length=r+1,"color"===e.valType&&void 0===e.dflt&&a.push(o.join("."))})),t=0;t<a.length;t++){k.nestedProperty(e,"_input."+a[t]).get()||k.nestedProperty(e,a[t]).set(null)}},S.supplyDataDefaults=function(e,n,t,r){var a,o,i,s=r._modules,l=r._basePlotModules,c=0,u=0;function d(e){n.push(e);var t=e._module;t&&(!0===e.visible&&k.pushUnique(s,t),k.pushUnique(l,e._module.basePlotModule),c++,!1!==e._input.visible&&u++)}r._transformModules=[];var f={},h=[];for(a=0;a<e.length;a++){if(i=e[a],(o=S.supplyTraceDefaults(i,u,r,a)).index=a,o._input=i,o._expandedIndex=c,o.transforms&&o.transforms.length)for(var p=b(o,n,t,r),g=0;g<p.length;g++){var y=p[g],m=S.supplyTraceDefaults(y,c,r,a);L(m,y),y.uid=m.uid=o.uid+g,m.index=a,m._input=i,m._fullInput=o,m._expandedIndex=c,m._expandedInput=y,d(m)}else d((o._fullInput=o)._expandedInput=o);A.traceIs(o,"carpetAxis")&&(f[o.carpet]=o),A.traceIs(o,"carpetDependent")&&h.push(a)}for(a=0;a<h.length;a++)if((o=n[h[a]]).visible){var v=f[o.carpet];(o._carpet=v)&&v.visible?(o.xaxis=v.xaxis,o.yaxis=v.yaxis):o.visible=!1}},S.supplyAnimationDefaults=function(n){var e;n=n||{};var r={};function t(e,t){return k.coerce(n||{},r,a,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=S.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=S.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=S.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=S.supplyAnimationTransitionDefaults(n.transition||{});return r},S.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){return k.coerce(n||{},r,a.frame,e,t)}return e("duration"),e("redraw"),r},S.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){return k.coerce(n||{},r,a.transition,e,t)}return e("duration"),e("easing"),r},S.supplyFrameDefaults=function(n){var r={};function e(e,t){return k.coerce(n,r,o,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},S.supplyTraceDefaults=function(n,e,t,r){var a,o=t.colorway||v.defaults,i={},s=o[e%o.length];function l(e,t){return k.coerce(n,i,S.attributes,e,t)}var c=l("visible");l("type"),l("uid"),l("name",t._traceWord+" "+r);var u=S.getModule(i);if(i._module=u){var d=u.basePlotModule,f=d.attr;if(f){var h=t._subplots,p=d.attributes,g="";if("gl2d"!==d.name||c){if(Array.isArray(f))for(a=0;a<f.length;a++){var y=f[a],m=k.coerce(n,i,p,y);h[y]&&k.pushUnique(h[y],m),g+=m}else g=k.coerce(n,i,p,f);h[d.name]&&k.pushUnique(h[d.name],g)}}}return c&&(l("customdata"),l("ids"),A.traceIs(i,"showLegend")&&(l("showlegend"),l("legendgroup")),A.getComponentMethod("fx","supplyDefaults")(n,i,s,t),u&&(u.supplyDefaults(n,i,s,t),k.coerceHoverinfo(n,i,t)),A.traceIs(i,"noOpacity")||l("opacity"),A.traceIs(i,"notLegendIsolatable")&&(i.visible=!!i.visible),u&&u.selectPoints&&l("selectedpoints"),S.supplyTransformDefaults(n,i,t)),i},S.supplyTransformDefaults=function(e,t,n){var r=n._globalTransforms||[],a=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var o=e.transforms||[],i=r.concat(o),s=t.transforms=[],l=0;l<i.length;l++){var c,u=i[l],d=u.type,f=x[d],h=!(u._module&&u._module===f),p=f&&"function"==typeof f.transform;f||k.warn("Unrecognized transform type "+d+"."),f&&f.supplyDefaults&&(h||p)?((c=f.supplyDefaults(u,t,n,e)).type=d,c._module=f,k.pushUnique(a,f)):c=k.extendFlat({},u),s.push(c)}},S.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return k.coerce(n,r,S.layoutAttributes,e,t)}var a=k.coerceFont(t,"font");t("title",r._dfltTitle.plot),k.coerceFont(t,"titlefont",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&S.sanitizeMargins(r),A.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision"),A.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),A.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},S.plotAutoSize=function(e,t,n){var r,a,o=e._context||{},i=o.frameMargins,s=k.isPlotDiv(e);if(s&&e.emit("plotly_autosize"),o.fillFrame)r=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden";else if(T(i)&&0<i){var l=function(e){var t,n={left:0,right:0,bottom:0,top:0};if(e)for(t in e)e.hasOwnProperty(t)&&(n.left+=e[t].left||0,n.right+=e[t].right||0,n.bottom+=e[t].bottom||0,n.top+=e[t].top||0);return n}(e._boundingBoxMargins),c=l.left+l.right,u=l.bottom+l.top,d=1-2*i,f=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};r=Math.round(d*(f.width-c)),a=Math.round(d*(f.height-u))}else{var h=s?window.getComputedStyle(e):{};r=parseFloat(h.width)||n.width,a=parseFloat(h.height)||n.height}var p=S.layoutAttributes.width.min,g=S.layoutAttributes.height.min;r<p&&(r=p),a<g&&(a=g);var y=!t.width&&1<Math.abs(n.width-r),m=!t.height&&1<Math.abs(n.height-a);(m||y)&&(y&&(n.width=r),m&&(n.height=a)),e._initialAutoSize||(e._initialAutoSize={width:r,height:a}),S.sanitizeMargins(n)},S.supplyLayoutModuleDefaults=function(e,t,n,r){var a,o,i,s=A.componentsRegistry,l=t._basePlotModules,c=A.subplotsRegistry.cartesian;for(a in s)(i=s[a]).includeBasePlot&&i.includeBasePlot(e,t);for(var u in l.length||l.push(c),t._has("cartesian")&&(A.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[u].sort(k.subplotSort);for(o=0;o<l.length;o++)(i=l[o]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var d=t._modules;for(o=0;o<d.length;o++)(i=d[o]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var f=t._transformModules;for(o=0;o<f.length;o++)(i=f[o]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n,r);for(a in s)(i=s[a]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n)},S.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),void 0!==t._geocontainer&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),k.clearThrottle(),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e.firstscatter,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._replotPending,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},S.style=function(e){var t,n=e._fullLayout._modules,r=[];for(t=0;t<n.length;t++){var a=n[t];a.style&&k.pushUnique(r,a.style)}for(t=0;t<r.length;t++)r[t](e)},S.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,a=e.margin,o=n-(a.l+a.r),i=r-(a.t+a.b);o<0&&(t=(n-1)/(a.l+a.r),a.l=Math.floor(t*a.l),a.r=Math.floor(t*a.r)),i<0&&(t=(r-1)/(a.t+a.b),a.t=Math.floor(t*a.t),a.b=Math.floor(t*a.b))}},S.autoMargin=function(e,t,n){var r=e._fullLayout;if(r._pushmargin||(r._pushmargin={}),!1!==r.margin.autoexpand){if(n){var a=void 0===n.pad?12:n.pad;n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0),r._pushmargin[t]={l:{val:n.x,size:n.l+a},r:{val:n.x,size:n.r+a},b:{val:n.y,size:n.b+a},t:{val:n.y,size:n.t+a}}}else delete r._pushmargin[t];r._replotting||S.doAutoMargin(e)}},S.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),t._pushmargin||(t._pushmargin={});var n=t._size,r=JSON.stringify(n),a=Math.max(t.margin.l||0,0),o=Math.max(t.margin.r||0,0),i=Math.max(t.margin.t||0,0),s=Math.max(t.margin.b||0,0),l=t._pushmargin;if(!1!==t.margin.autoexpand)for(var c in l.base={l:{val:0,size:a},r:{val:1,size:o},t:{val:1,size:i},b:{val:0,size:s}},l){var u=l[c].l||{},d=l[c].b||{},f=u.val,h=u.size,p=d.val,g=d.size;for(var y in l){if(T(h)&&l[y].r){var m=l[y].r.val,v=l[y].r.size;if(f<m){var x=(h*m+(v-t.width)*f)/(m-f),b=(v*(1-f)+(h-t.width)*(1-m))/(m-f);0<=x&&0<=b&&a+o<x+b&&(a=x,o=b)}}if(T(g)&&l[y].t){var _=l[y].t.val,w=l[y].t.size;if(p<_){var k=(g*_+(w-t.height)*p)/(_-p),M=(w*(1-p)+(g-t.height)*(1-_))/(_-p);0<=k&&0<=M&&s+i<k+M&&(s=k,i=M)}}}}if(n.l=Math.round(a),n.r=Math.round(o),n.t=Math.round(i),n.b=Math.round(s),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,!t._replotting&&"{}"!==r&&r!==JSON.stringify(t._size))return A.call("plot",e)},S.graphJson=function(e,n,a,t,r){(r&&n&&!e._fullData||r&&!n&&!e._fullLayout)&&S.supplyDefaults(e);var o=r?e._fullData:e.data,i=r?e._fullLayout:e.layout,s=(e._transitionData||{})._frames;function l(e){if("function"==typeof e)return null;if(k.isPlainObject(e)){var t,n,r={};for(t in e)if("function"!=typeof e[t]&&-1===["_","["].indexOf(t.charAt(0))){if("keepdata"===a){if("src"===t.substr(t.length-3))continue}else if("keepstream"===a){if("string"==typeof(n=e[t+"src"])&&0<n.indexOf(":")&&!k.isPlainObject(e.stream))continue}else if("keepall"!==a&&"string"==typeof(n=e[t+"src"])&&0<n.indexOf(":"))continue;r[t]=l(e[t])}return r}return Array.isArray(e)?e.map(l):k.isJSDate(e)?k.ms2DateTimeLocal(+e):e}var c={data:(o||[]).map(function(e){var t=l(e);return n&&delete t.fit,t})};return n||(c.layout=l(i)),e.framework&&e.framework.isPolar&&(c=e.framework.getConfig()),s&&(c.frames=l(s)),"object"===t?c:JSON.stringify(c)},S.modifyFrames=function(e,t){var n,r,a,o=e._transitionData._frames,i=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((r=t[n]).type){case"replace":a=r.value;var s=(o[r.index]||{}).name,l=a.name;o[r.index]=i[l]=a,l!==s&&(delete i[s],i[l]=a);break;case"insert":i[(a=r.value).name]=a,o.splice(r.index,0,a);break;case"delete":delete i[(a=o[r.index]).name],o.splice(r.index,1)}return Promise.resolve()},S.computeFrame=function(e,t){var n,r,a,o,i=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=i[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=i[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=S.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(a=r[n])&&(-1===(o=u.traces.indexOf(a))&&(o=u.data.length,u.traces[o]=a),u.data[o]=S.extendTrace(u.data[o],s.data[n]))}return u},S.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var a=n[r];a&&a.name&&(t[a.name]=a)}},S.extendObjectWithContainers=function(e,t,n){var r,a,o,i,s,l,c,u=k.extendDeepNoArrays({},t||{}),d=k.expandObjectPaths(u),f={};if(n&&n.length)for(o=0;o<n.length;o++)void 0===(a=(r=k.nestedProperty(d,n[o])).get())?k.nestedProperty(f,n[o]).set(null):(r.set(null),k.nestedProperty(f,n[o]).set(a));if(e=k.extendDeepNoArrays(e||{},d),n&&n.length)for(o=0;o<n.length;o++)if(l=k.nestedProperty(f,n[o]).get()){for(c=(s=k.nestedProperty(e,n[o])).get(),Array.isArray(c)||(c=[],s.set(c)),i=0;i<l.length;i++){var h=l[i];c[i]=null===h?null:S.extendObjectWithContainers(c[i],h)}s.set(c)}return e},S.dataArrayContainers=["transforms","dimensions"],S.layoutArrayContainers=A.layoutArrayContainers,S.extendTrace=function(e,t){return S.extendObjectWithContainers(e,t,S.dataArrayContainers)},S.extendLayout=function(e,t){return S.extendObjectWithContainers(e,t,S.layoutArrayContainers)},S.transition=function(c,i,u,e,d,f){var t,n,r=Array.isArray(i)?i.length:0,s=e.slice(0,r),h=[];var p=!1;for(t=0;t<s.length;t++){n=s[t];c._fullData[n]._module}var a=[S.previousPromises,function(){if(c._transitionData)return c._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(c._transitionData._interruptCallbacks)},function(){var e;for(e=0;e<s.length;e++){var t=s[e],n=c._fullData[t]._module;n&&(n.animatable&&h.push(t),c.data[s[e]]=S.extendTrace(c.data[s[e]],i[e]))}var r=k.expandObjectPaths(k.extendDeepNoArrays({},u)),a=/^[xy]axis[0-9]*$/;for(var o in r)a.test(o)&&delete r[o].range;return S.extendLayout(c.layout,r),delete c.calcdata,S.supplyDefaults(c),S.doCalcdata(c),A.getComponentMethod("errorbars","calc")(c),Promise.resolve()},S.rehover,function(){return c.emit("plotly_transitioning",[]),new Promise(function(t){c._transitioning=!0,0<f.duration&&(c._transitioningWithDuration=!0),c._transitionData._interruptCallbacks.push(function(){p=!0}),d.redraw&&c._transitionData._interruptCallbacks.push(function(){return A.call("redraw",c)}),c._transitionData._interruptCallbacks.push(function(){c.emit("plotly_transitioninterrupted",[])});var e,n,r=0,a=0;function o(){return r++,function(){var e;a++,p||a!==r||(e=t,c._transitionData&&(function(e){if(e)for(;e.length;)e.shift()}(c._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(d.redraw)return A.call("redraw",c)}).then(function(){c._transitioning=!1,c._transitioningWithDuration=!1,c.emit("plotly_transitioned",[])}).then(e)))}}var i=c._fullLayout._basePlotModules,s=!1;if(u)for(n=0;n<i.length;n++)if(i[n].transitionAxes){var l=k.expandObjectPaths(u);s=i[n].transitionAxes(c,l,f,o)||s}for(s?(e=k.extendFlat({},f)).duration=0:e=f,n=0;n<i.length;n++)i[n].plot(c,h,e,o);setTimeout(o())})}],o=k.syncOrAsync(a,c);return o&&o.then||(o=Promise.resolve()),o.then(function(){return c})},S.doCalcdata=function(e,t){var n,r,a,o,i=C.list(e),s=e._fullData,l=e._fullLayout,c=new Array(s.length),u=(e.calcdata||[]).slice(0);for(e.calcdata=c,e.firstscatter=!0,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,l._piecolormap={},l._piecolorway=null,a=l._piedefaultcolorcount=0;a<s.length;a++)Array.isArray(t)&&-1===t.indexOf(a)&&(c[a]=u[a]);for(a=0;a<s.length;a++)(n=s[a])._arrayAttrs=y.findArrayAttributes(n);var d=l._subplots.polar||[];for(a=0;a<d.length;a++)i.push(l[d[a]].radialaxis,l[d[a]].angularaxis);_(i);var f=!1;for(a=0;a<s.length;a++)if(!0===(n=s[a]).visible&&n.transforms)for((r=n._module)&&r.calc&&r.calc(e,n),o=0;o<n.transforms.length;o++){var h=n.transforms[o];(r=x[h.type])&&r.calcTransform&&(f=n._hasCalcTransform=!0,r.calcTransform(e,n,h))}for(f&&_(i),a=0;a<s.length;a++){var p=[];if(!0===(n=s[a]).visible){r=n._module;var g=n.transforms||[];for(o=g.length-1;0<=o;o--)if(g[o].enabled){n._indexToPoints=g[o]._indexToPoints;break}r&&r.calc&&(p=r.calc(e,n))}Array.isArray(p)&&p[0]||(p=[{x:m,y:m}]),p[0].t||(p[0].t={}),p[0].trace=n,c[a]=p}A.getComponentMethod("fx","calc")(e)},S.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},S.generalUpdatePerTraceModule=function(e,t,n,r){var a,o=t.traceHash,i={};for(a=0;a<n.length;a++){var s=n[a],l=s[0].trace;l.visible&&(i[l.type]=i[l.type]||[],i[l.type].push(s))}for(var c in o)if(!i[c]){var u=o[c][0];u[0].trace.visible=!1,i[c]=[u]}for(var d in i){var f=i[d];f[0][0].trace._module.plot(e,t,k.filterVisible(f),r)}t.traceHash=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/color":35,"../constants/numerical":137,"../lib":156,"../plot_api/plot_schema":190,"../plots/cartesian/axis_ids":202,"../registry":248,"./animation_attributes":194,"./attributes":196,"./command":224,"./font_attributes":226,"./frame_attributes":227,"./layout_attributes":238,"fast-isnumeric":4}],241:[function(e,t,n){"use strict";var r=e("../../../traces/scatter/attributes"),a=r.marker;t.exports={r:r.r,t:r.t,marker:{color:a.color,size:a.size,symbol:a.symbol,opacity:a.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":294}],242:[function(e,t,n){"use strict";var r=e("../../cartesian/layout_attributes"),a=e("../../../lib/extend").extendFlat,o=e("../../../plot_api/edit_types").overrideAll,i=a({},r.domain,{description:["Polar chart subplots are not supported yet.","This key has currently no effect."].join(" ")});function s(e,t){var n={showline:{valType:"boolean",role:"style",description:["Determines whether or not the line bounding this",e,"axis","will be shown on the figure."].join(" ")},showticklabels:{valType:"boolean",role:"style",description:["Determines whether or not the",e,"axis ticks","will feature tick labels."].join(" ")},tickorientation:{valType:"enumerated",values:["horizontal","vertical"],role:"style",description:["Sets the orientation (from the paper perspective)","of the",e,"axis tick labels."].join(" ")},ticklen:{valType:"number",min:0,role:"style",description:["Sets the length of the tick lines on this",e,"axis."].join(" ")},tickcolor:{valType:"color",role:"style",description:["Sets the color of the tick lines on this",e,"axis."].join(" ")},ticksuffix:{valType:"string",role:"style",description:["Sets the length of the tick lines on this",e,"axis."].join(" ")},endpadding:{valType:"number",role:"style"},visible:{valType:"boolean",role:"info",description:["Determines whether or not this axis will be visible."].join(" ")}};return a({},t,n)}t.exports=o({radialaxis:s("radial",{range:{valType:"info_array",role:"info",items:[{valType:"number"},{valType:"number"}],description:["Defines the start and end point of this radial axis."].join(" ")},domain:i,orientation:{valType:"number",role:"style",description:["Sets the orientation (an angle with respect to the origin)","of the radial axis."].join(" ")}}),angularaxis:s("angular",{range:{valType:"info_array",role:"info",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}],description:["Defines the start and end point of this angular axis."].join(" ")},domain:i}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"],role:"info",description:["For polar plots only.","Sets the direction corresponding to positive angles."].join(" ")},orientation:{valType:"angle",role:"info",description:["For polar plots only.","Rotates the entire polar by the given angle."].join(" ")}}},"plot","nested")},{"../../../lib/extend":148,"../../../plot_api/edit_types":184,"../../cartesian/layout_attributes":211}],243:[function(e,t,n){"use strict";(t.exports=e("./micropolar")).manager=e("./micropolar_manager")},{"./micropolar":244,"./micropolar_manager":245}],244:[function(t,n,e){(function(e){var ce="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,ue=t("../../../lib").extendDeepAll,de=t("../../../constants/alignment").MID_SHIFT,fe=n.exports={version:"0.2.2"};fe.Axis=function(){var oe,n,ie,se,r={data:[],layout:{}},e={},le={},t=ce.dispatch("hover"),a={};return a.render=function(e){return function(e){n=e||n;var t=r.data,ae=r.layout;("string"==typeof n||n.nodeName)&&(n=ce.select(n)),n.datum(t).each(function(e,t){var n=e.slice();le={data:fe.util.cloneJson(n),layout:fe.util.cloneJson(ae)};var r=0;n.forEach(function(e,t){e.color||(e.color=ae.defaultColorRange[r],r=(r+1)%ae.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:ce.rgb(e.color).darker().toString()),le.data[t].color=e.color,le.data[t].strokeColor=e.strokeColor,le.data[t].strokeDash=e.strokeDash,le.data[t].strokeSize=e.strokeSize});var a=n.filter(function(e,t){var n=e.visible;return void 0===n||!0===n}),o=!1,i=a.map(function(e,t){return o=o||void 0!==e.groupId,e});if(o){var s=ce.nest().key(function(e,t){return void 0!==e.groupId?e.groupId:"unstacked"}).entries(i),l=[],c=s.map(function(e,t){if("unstacked"===e.key)return e.values;var r=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,n){e.yStack=[r],l.push(r),r=fe.util.sumArrays(e.r,r)}),e.values});a=ce.merge(c)}a.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var u=Math.min(ae.width-ae.margin.left-ae.margin.right,ae.height-ae.margin.top-ae.margin.bottom)/2;u=Math.max(10,u);var d,f=[ae.margin.left+u,ae.margin.top+u];d=o?[0,ce.max(fe.util.sumArrays(fe.util.arrayLast(a).r[0],fe.util.arrayLast(l)))]:ce.extent(fe.util.flattenArray(a.map(function(e,t){return e.r}))),ae.radialAxis.domain!=fe.DATAEXTENT&&(d[0]=0),ie=ce.scale.linear().domain(ae.radialAxis.domain!=fe.DATAEXTENT&&ae.radialAxis.domain?ae.radialAxis.domain:d).range([0,u]),le.layout.radialAxis.domain=ie.domain();var h,p=fe.util.flattenArray(a.map(function(e,t){return e.t})),g="string"==typeof p[0];g&&(p=fe.util.deduplicate(p),h=p.slice(),p=ce.range(p.length),a=a.map(function(e,t){var n=e;return e.t=[p],o&&(n.yStack=e.yStack),n}));var y=a.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===a.length,m=null===ae.needsEndSpacing?g||!y:ae.needsEndSpacing,v=ae.angularAxis.domain&&ae.angularAxis.domain!=fe.DATAEXTENT&&!g&&0<=ae.angularAxis.domain[0]?ae.angularAxis.domain:ce.extent(p),x=Math.abs(p[1]-p[0]);y&&!g&&(x=0);var b=v.slice();m&&g&&(b[1]+=x);var _=ae.angularAxis.ticksCount||4;8<_&&(_=_/(_/8)+_%8),ae.angularAxis.ticksStep&&(_=(b[1]-b[0])/_);var w=ae.angularAxis.ticksStep||(b[1]-b[0])/(_*(ae.minorTicks+1));h&&(w=Math.max(Math.round(w),1)),b[2]||(b[2]=w);var k=ce.range.apply(this,b);if(k=k.map(function(e,t){return parseFloat(e.toPrecision(12))}),se=ce.scale.linear().domain(b.slice(0,2)).range("clockwise"===ae.direction?[0,360]:[360,0]),le.layout.angularAxis.domain=se.domain(),le.layout.angularAxis.endPadding=m?x:0,void 0===(oe=ce.select(this).select("svg.chart-root"))||oe.empty()){var M=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),T=this.appendChild(this.ownerDocument.importNode(M.documentElement,!0));oe=ce.select(T)}oe.select(".guides-group").style({"pointer-events":"none"}),oe.select(".angular.axis-group").style({"pointer-events":"none"}),oe.select(".radial.axis-group").style({"pointer-events":"none"});var A,S=oe.select(".chart-group"),L={fill:"none",stroke:ae.tickColor},C={"font-size":ae.font.size,"font-family":ae.font.family,fill:ae.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+ae.font.outlineColor}).join(",")};if(ae.showLegend){A=oe.select(".legend-group").attr({transform:"translate("+[u,ae.margin.top]+")"}).style({display:"block"});var z=a.map(function(e,t){var n=fe.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend=void 0===e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});fe.Legend().config({data:a.map(function(e,t){return e.name||"Element"+t}),legendConfig:ue({},fe.Legend.defaultConfig().legendConfig,{container:A,elements:z,reverseOrder:ae.legend.reverseOrder})})();var O=A.node().getBBox();u=Math.min(ae.width-O.width-ae.margin.left-ae.margin.right,ae.height-ae.margin.top-ae.margin.bottom)/2,u=Math.max(10,u),f=[ae.margin.left+u,ae.margin.top+u],ie.range([0,u]),le.layout.radialAxis.domain=ie.domain(),A.attr("transform","translate("+[f[0]+u,f[1]-u]+")")}else A=oe.select(".legend-group").style({display:"none"});oe.attr({width:ae.width,height:ae.height}).style({opacity:ae.opacity}),S.attr("transform","translate("+f+")").style({cursor:"crosshair"});var j=[(ae.width-(ae.margin.left+ae.margin.right+2*u+(O?O.width:0)))/2,(ae.height-(ae.margin.top+ae.margin.bottom+2*u))/2];if(j[0]=Math.max(0,j[0]),j[1]=Math.max(0,j[1]),oe.select(".outer-group").attr("transform","translate("+j+")"),ae.title){var P=oe.select("g.title-group text").style(C).text(ae.title),D=P.node().getBBox();P.attr({x:f[0]-D.width/2,y:f[1]-u-20})}var I=oe.select(".radial.axis-group");if(ae.radialAxis.gridLinesVisible){var E=I.selectAll("circle.grid-circle").data(ie.ticks(5));E.enter().append("circle").attr({class:"grid-circle"}).style(L),E.attr("r",ie),E.exit().remove()}I.select("circle.outside-circle").attr({r:u}).style(L);var R=oe.select("circle.background-circle").attr({r:u}).style({fill:ae.backgroundColor,stroke:ae.stroke});function N(e,t){return se(e)%360+ae.orientation}if(ae.radialAxis.visible){var F=ce.svg.axis().scale(ie).ticks(5).tickSize(5);I.call(F).attr({transform:"rotate("+ae.radialAxis.orientation+")"}),I.selectAll(".domain").style(L),I.selectAll("g>text").text(function(e,t){return this.textContent+ae.radialAxis.ticksSuffix}).style(C).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===ae.radialAxis.tickOrientation?"rotate("+-ae.radialAxis.orientation+") translate("+[0,C["font-size"]]+")":"translate("+[0,C["font-size"]]+")"}}),I.selectAll("g>line").style({stroke:"black"})}var B=oe.select(".angular.axis-group").selectAll("g.angular-tick").data(k),q=B.enter().append("g").classed("angular-tick",!0);B.attr({transform:function(e,t){return"rotate("+N(e)+")"}}).style({display:ae.angularAxis.visible?"block":"none"}),B.exit().remove(),q.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(ae.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(ae.minorTicks+1)==0)}).style(L),q.selectAll(".minor").style({stroke:ae.minorTickColor}),B.select("line.grid-line").attr({x1:ae.tickLength?u-ae.tickLength:0,x2:u}).style({display:ae.angularAxis.gridLinesVisible?"block":"none"}),q.append("text").classed("axis-text",!0).style(C);var H=B.select("text.axis-text").attr({x:u+ae.labelOffset,dy:de+"em",transform:function(e,t){var n=N(e),r=u+ae.labelOffset,a=ae.angularAxis.tickOrientation;return"horizontal"==a?"rotate("+-n+" "+r+" 0)":"radial"==a?n<270&&90<n?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&0<n?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:ae.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(ae.minorTicks+1)!=0?"":h?h[e]+ae.angularAxis.ticksSuffix:e+ae.angularAxis.ticksSuffix}).style(C);ae.angularAxis.rewriteTicks&&H.text(function(e,t){return t%(ae.minorTicks+1)!=0?"":ae.angularAxis.rewriteTicks(this.textContent,t)});var V=ce.max(S.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));A.attr({transform:"translate("+[u+V,ae.margin.top]+")"});var U=0<oe.select("g.geometry-group").selectAll("g").size(),G=oe.select("g.geometry-group").selectAll("g.geometry").data(a);if(G.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}}),G.exit().remove(),a[0]||U){var Y=[];a.forEach(function(e,n){var t={};t.radialScale=ie,t.angularScale=se,t.container=G.filter(function(e,t){return t==n}),t.geometry=e.geometry,t.orientation=ae.orientation,t.direction=ae.direction,t.index=n,Y.push({data:e,geometryConfig:t})});var X=ce.nest().key(function(e,t){return void 0!==e.data.groupId||"unstacked"}).entries(Y),Z=[];X.forEach(function(e,t){"unstacked"===e.key?Z=Z.concat(e.values.map(function(e,t){return[e]})):Z.push(e.values)}),Z.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return ue(fe[n].defaultConfig(),e)});fe[n]().config(r)()})}var W,J,Q=oe.select(".guides-group"),$=oe.select(".tooltips-group"),K=fe.tooltipPanel().config({container:$,fontSize:8})(),ee=fe.tooltipPanel().config({container:$,fontSize:8})(),te=fe.tooltipPanel().config({container:$,hasTick:!0})();if(!g){var ne=Q.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});S.on("mousemove.angular-guide",function(e,t){var n=fe.util.getMousePos(R).angle;ne.attr({x2:-u,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-ae.orientation)%360;W=se.invert(r);var a=fe.util.convertToCartesian(u+12,n+180);K.text(fe.util.round(W)).move([a[0]+f[0],a[1]+f[1]])}).on("mouseout.angular-guide",function(e,t){Q.select("line").style({opacity:0})})}var re=Q.select("circle").style({stroke:"grey",fill:"none"});S.on("mousemove.radial-guide",function(e,t){var n=fe.util.getMousePos(R).radius;re.attr({r:n}).style({opacity:.5}),J=ie.invert(fe.util.getMousePos(R).radius);var r=fe.util.convertToCartesian(n,ae.radialAxis.orientation);ee.text(fe.util.round(J)).move([r[0]+f[0],r[1]+f[1]])}).on("mouseout.radial-guide",function(e,t){re.style({opacity:0}),te.hide(),K.hide(),ee.hide()}),oe.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,t){var n=ce.select(this),r=this.style.fill,a="black",o=this.style.opacity||1;if(n.attr({"data-opacity":o}),r&&"none"!==r){n.attr({"data-fill":r}),a=ce.hsl(r).darker().toString(),n.style({fill:a,opacity:1});var i={t:fe.util.round(e[0]),r:fe.util.round(e[1])};g&&(i.t=h[e[0]]);var s="t: "+i.t+", r: "+i.r,l=this.getBoundingClientRect(),c=oe.node().getBoundingClientRect(),u=[l.left+l.width/2-j[0]-c.left,l.top+l.height/2-j[1]-c.top];te.config({color:a}).text(s),te.move(u)}else r=this.style.stroke||"black",n.attr({"data-stroke":r}),a=ce.hsl(r).darker().toString(),n.style({stroke:a,opacity:1})}).on("mousemove.tooltip",function(e,t){if(0!=ce.event.which)return!1;ce.select(this).attr("data-fill")&&te.show()}).on("mouseout.tooltip",function(e,t){te.hide();var n=ce.select(this),r=n.attr("data-fill");r?n.style({fill:r,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(e),this},a.config=function(e){if(!arguments.length)return r;var t=fe.util.cloneJson(e);return t.data.forEach(function(e,t){r.data[t]||(r.data[t]={}),ue(r.data[t],fe.Axis.defaultConfig().data[0]),ue(r.data[t],e)}),ue(r.layout,fe.Axis.defaultConfig().layout),ue(r.layout,t.layout),this},a.getLiveConfig=function(){return le},a.getinputConfig=function(){return e},a.radialScale=function(e){return ie},a.angularScale=function(e){return se},a.svg=function(){return oe},ce.rebind(a,t,"on"),a},fe.Axis.defaultConfig=function(e,t){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:ce.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},fe.util={},fe.DATAEXTENT="dataExtent",fe.AREA="AreaChart",fe.LINE="LinePlot",fe.DOT="DotPlot",fe.BAR="BarChart",fe.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},fe.util._extend=function(e,t){for(var n in e)t[n]=e[n]},fe.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},fe.util.dataFromEquation2=function(r,e){var t=e||6;return ce.range(0,360+t,t).map(function(e,t){var n=e*Math.PI/180;return[e,r(n)]})},fe.util.dataFromEquation=function(a,e,t){var n=e||6,o=[],i=[];ce.range(0,360+n,n).forEach(function(e,t){var n=e*Math.PI/180,r=a(n);o.push(e),i.push(r)});var r={t:o,r:i};return t&&(r.name=t),r},fe.util.ensureArray=function(e,t){if(void 0===e)return null;var n=[].concat(e);return ce.range(t).map(function(e,t){return n[t]||n[0]})},fe.util.fillArrays=function(n,e,r){return e.forEach(function(e,t){n[e]=fe.util.ensureArray(n[e],r)}),n},fe.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},fe.util.validateKeys=function(e,t){"string"==typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},fe.util.sumArrays=function(e,t){return ce.zip(e,t).map(function(e,t){return ce.sum(e)})},fe.util.arrayLast=function(e){return e[e.length-1]},fe.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);0<=n--&&e[n]===t[n];);return-2===n},fe.util.flattenArray=function(e){for(var t=[];!fe.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},fe.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},fe.util.convertToCartesian=function(e,t){var n=t*Math.PI/180;return[e*Math.cos(n),e*Math.sin(n)]},fe.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},fe.util.getMousePos=function(e){var t=ce.mouse(e.node()),n=t[0],r=t[1],a={};return a.x=n,a.y=r,a.pos=t,a.angle=180*(Math.atan2(r,n)+Math.PI)/Math.PI,a.radius=Math.sqrt(n*n+r*r),a},fe.util.duplicatesCount=function(e){for(var t,n={},r={},a=0,o=e.length;a<o;a++)(t=e[a])in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},fe.util.duplicates=function(e){return Object.keys(fe.util.duplicatesCount(e))},fe.util.translator=function(e,r,a,t){if(t){var n=a.slice();a=r,r=n}var o=r.reduce(function(e,t){if(void 0!==e)return e[t]},e);void 0!==o&&(r.reduce(function(e,t,n){if(void 0!==e)return n===r.length-1&&delete e[t],e[t]},e),a.reduce(function(e,t,n){return void 0===e[t]&&(e[t]={}),n===a.length-1&&(e[t]=o),e[t]},e))},fe.PolyChart=function(){var n=[fe.PolyChart.defaultConfig()],e=ce.dispatch("hover"),g={solid:"none",dash:[5,2],dot:[2,5]};function t(){var p=n[0].geometryConfig,e=p.container;"string"==typeof e&&(e=ce.select(e)),e.datum(n).each(function(s,e){var n=!!s[0].data.yStack,o=s.map(function(e,t){return n?ce.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):ce.zip(e.data.t[0],e.data.r[0])}),l=p.angularScale,t=p.radialScale.domain()[0],i={bar:function(e,t,n){var r=s[n].data,a=p.radialScale(e[1])-p.radialScale(0),o=p.radialScale(e[2]||0),i=r.barWidth;ce.select(this).attr({class:"mark bar",d:"M"+[[a+o,-i/2],[a+o,i/2],[o,i/2],[o,-i/2]].join("L")+"Z",transform:function(e,t){return"rotate("+(p.orientation+l(e[0]))+")"}})}};i.dot=function(e,t,n){var c=e[2]?[e[0],e[1]+e[2]]:e,r=ce.svg.symbol().size(s[n].data.dotSize).type(s[n].data.dotType)(e,t);ce.select(this).attr({class:"mark dot",d:r,transform:function(e,t){var n,r,a,o,i,s,l=(o=c,i=p.radialScale(o[1]),s=(p.angularScale(o[0])+p.orientation)*Math.PI/180,r=(n={r:i,t:s}).r*Math.cos(n.t),a=n.r*Math.sin(n.t),{x:r,y:a});return"translate("+[l.x,l.y]+")"}})};var c=ce.svg.line.radial().interpolate(s[0].data.lineInterpolation).radius(function(e){return p.radialScale(e[1])}).angle(function(e){return p.angularScale(e[0])*Math.PI/180});i.line=function(n,r,a){var e=n[2]?o[a].map(function(e,t){return[e[0],e[1]+e[2]]}):o[a];if(ce.select(this).each(i.dot).style({opacity:function(e,t){return+s[a].data.dotVisible},fill:d.stroke(n,r,a)}).attr({class:"mark dot"}),!(0<r)){var t=ce.select(this.parentNode).selectAll("path.line").data([0]);t.enter().insert("path"),t.attr({class:"line",d:c(e),transform:function(e,t){return"rotate("+(p.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return d.fill(n,r,a)},"fill-opacity":0,stroke:function(e,t){return d.stroke(n,r,a)},"stroke-width":function(e,t){return d["stroke-width"](n,r,a)},"stroke-dasharray":function(e,t){return d["stroke-dasharray"](n,r,a)},opacity:function(e,t){return d.opacity(n,r,a)},display:function(e,t){return d.display(n,r,a)}})}};var r=p.angularScale.range(),a=Math.abs(r[1]-r[0])/o[0].length*Math.PI/180,u=ce.svg.arc().startAngle(function(e){return-a/2}).endAngle(function(e){return a/2}).innerRadius(function(e){return p.radialScale(t+(e[2]||0))}).outerRadius(function(e){return p.radialScale(t+(e[2]||0))+p.radialScale(e[1])});i.arc=function(e,t,n){ce.select(this).attr({class:"mark arc",d:u,transform:function(e,t){return"rotate("+(p.orientation+l(e[0])+90)+")"}})};var d={fill:function(e,t,n){return s[n].data.color},stroke:function(e,t,n){return s[n].data.strokeColor},"stroke-width":function(e,t,n){return s[n].data.strokeSize+"px"},"stroke-dasharray":function(e,t,n){return g[s[n].data.strokeDash]},opacity:function(e,t,n){return s[n].data.opacity},display:function(e,t,n){return void 0===s[n].data.visible||s[n].data.visible?"block":"none"}},f=ce.select(this).selectAll("g.layer").data(o);f.enter().append("g").attr({class:"layer"});var h=f.selectAll("path.mark").data(function(e,t){return e});h.enter().append("path").attr({class:"mark"}),h.style(d).each(i[p.geometryType]),h.exit().remove(),f.exit().remove()})}return t.config=function(e){return arguments.length?(e.forEach(function(e,t){n[t]||(n[t]={}),ue(n[t],fe.PolyChart.defaultConfig()),ue(n[t],e)}),this):n},t.getColorScale=function(){},ce.rebind(t,e,"on"),t},fe.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:ce.scale.category20()}}},fe.BarChart=function(){return fe.PolyChart()},fe.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},fe.AreaChart=function(){return fe.PolyChart()},fe.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},fe.DotPlot=function(){return fe.PolyChart()},fe.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},fe.LinePlot=function(){return fe.PolyChart()},fe.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},fe.Legend=function(){var m=fe.Legend.defaultConfig(),e=ce.dispatch("hover");function v(){var a=m.legendConfig,e=m.data.map(function(e,r){return[].concat(e).map(function(e,t){var n=ue({},a.elements[r]);return n.name=e,n.color=[].concat(a.elements[r].color)[t],n})}),n=ce.merge(e);n=n.filter(function(e,t){return a.elements[t]&&(a.elements[t].visibleInLegend||void 0===a.elements[t].visibleInLegend)}),a.reverseOrder&&(n=n.reverse());var t=a.container;("string"==typeof t||t.nodeName)&&(t=ce.select(t));var r=n.map(function(e,t){return e.color}),i=a.fontSize,o=null==a.isContinuous?"number"==typeof n[0]:a.isContinuous,s=o?a.height:i*n.length,l=t.classed("legend-group",!0).selectAll("svg").data([0]),c=l.enter().append("svg").attr({width:300,height:s+i,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});c.append("g").classed("legend-axis",!0),c.append("g").classed("legend-marks",!0);var u=ce.range(n.length),d=ce.scale[o?"linear":"ordinal"]().domain(u).range(r),f=ce.scale[o?"linear":"ordinal"]().domain(u)[o?"range":"rangePoints"]([0,s]);if(o){var h=l.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(r);h.enter().append("stop"),h.attr({offset:function(e,t){return t/(r.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),l.append("rect").classed("legend-mark",!0).attr({height:a.height,width:a.colorBandWidth,fill:"url(#grad1)"})}else{var p=l.select(".legend-marks").selectAll("path.legend-mark").data(n);p.enter().append("path").classed("legend-mark",!0),p.attr({transform:function(e,t){return"translate("+[i/2,f(t)+i/2]+")"},d:function(e,t){var n,r,a,o=e.symbol;return a=3*(r=i),"line"===(n=o)?"M"+[[-r/2,-r/12],[r/2,-r/12],[r/2,r/12],[-r/2,r/12]]+"Z":-1!=ce.svg.symbolTypes.indexOf(n)?ce.svg.symbol().type(n).size(a)():ce.svg.symbol().type("square").size(a)()},fill:function(e,t){return d(t)}}),p.exit().remove()}var g=ce.svg.axis().scale(f).orient("right"),y=l.select("g.legend-axis").attr({transform:"translate("+[o?a.colorBandWidth:i,i/2]+")"}).call(g);return y.selectAll(".domain").style({fill:"none",stroke:"none"}),y.selectAll("line").style({fill:"none",stroke:o?a.textColor:"none"}),y.selectAll("text").style({fill:a.textColor,"font-size":a.fontSize}).text(function(e,t){return n[t].name}),v}return v.config=function(e){return arguments.length?(ue(m,e),this):m},ce.rebind(v,e,"on"),v},fe.Legend.defaultConfig=function(e,t){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},fe.tooltipPanel=function(){var u,d,f,h={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},t="tooltip-"+fe.tooltipPanel.uid++,p=10,g=function(){var e=(u=h.container.selectAll("g."+t).data([0])).enter().append("g").classed(t,!0).style({"pointer-events":"none",display:"none"});return f=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),d=e.append("text").attr({dx:h.padding+p,dy:.3*+h.fontSize}),g};return g.text=function(e){var t=ce.hsl(h.color).l,n=.5<=t?"#aaa":"white",r=.5<=t?"black":"white",a=e||"";d.style({fill:r,"font-size":h.fontSize+"px"}).text(a);var o=h.padding,i=d.node().getBBox(),s={fill:h.color,stroke:n,"stroke-width":"2px"},l=i.width+2*o+p,c=i.height+2*o;return f.attr({d:"M"+[[p,-c/2],[p,-c/4],[h.hasTick?0:p,0],[p,c/4],[p,c/2],[l,c/2],[l,-c/2]].join("L")+"Z"}).style(s),u.attr({transform:"translate("+[p,-c/2+2*o]+")"}),u.style({display:"block"}),g},g.move=function(e){if(u)return u.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),g},g.hide=function(){if(u)return u.style({display:"none"}),g},g.show=function(){if(u)return u.style({display:"block"}),g},g.config=function(e){return ue(h,e),g},g},fe.tooltipPanel.uid=1,fe.adapter={},fe.adapter.plotly=function(){var e={convert:function(e,r){var a={};if(e.data&&(a.data=e.data.map(function(e,t){var n=ue({},e);return[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]].forEach(function(e,t){fe.util.translator.apply(null,e.concat(r))}),r||delete n.marker,r&&delete n.groupId,r?("LinePlot"===n.geometry?(n.type="scatter",!0===n.dotVisible?(delete n.dotVisible,n.mode="lines+markers"):n.mode="lines"):"DotPlot"===n.geometry?(n.type="scatter",n.mode="markers"):"AreaChart"===n.geometry?n.type="area":"BarChart"===n.geometry&&(n.type="bar"),delete n.geometry):("scatter"===n.type?"lines"===n.mode?n.geometry="LinePlot":"markers"===n.mode?n.geometry="DotPlot":"lines+markers"===n.mode&&(n.geometry="LinePlot",n.dotVisible=!0):"area"===n.type?n.geometry="AreaChart":"bar"===n.type&&(n.geometry="BarChart"),delete n.mode,delete n.type),n}),!r&&e.layout&&"stack"===e.layout.barmode)){var o=fe.util.duplicates(a.data.map(function(e,t){return e.geometry}));a.data.forEach(function(e,t){var n=o.indexOf(e.geometry);-1!=n&&(a.data[t].groupId=n)})}if(e.layout){var t=ue({},e.layout);if([[t,["plot_bgcolor"],["backgroundColor"]],[t,["showlegend"],["showLegend"]],[t,["radialaxis"],["radialAxis"]],[t,["angularaxis"],["angularAxis"]],[t.angularaxis,["showline"],["gridLinesVisible"]],[t.angularaxis,["showticklabels"],["labelsVisible"]],[t.angularaxis,["nticks"],["ticksCount"]],[t.angularaxis,["tickorientation"],["tickOrientation"]],[t.angularaxis,["ticksuffix"],["ticksSuffix"]],[t.angularaxis,["range"],["domain"]],[t.angularaxis,["endpadding"],["endPadding"]],[t.radialaxis,["showline"],["gridLinesVisible"]],[t.radialaxis,["tickorientation"],["tickOrientation"]],[t.radialaxis,["ticksuffix"],["ticksSuffix"]],[t.radialaxis,["range"],["domain"]],[t.angularAxis,["showline"],["gridLinesVisible"]],[t.angularAxis,["showticklabels"],["labelsVisible"]],[t.angularAxis,["nticks"],["ticksCount"]],[t.angularAxis,["tickorientation"],["tickOrientation"]],[t.angularAxis,["ticksuffix"],["ticksSuffix"]],[t.angularAxis,["range"],["domain"]],[t.angularAxis,["endpadding"],["endPadding"]],[t.radialAxis,["showline"],["gridLinesVisible"]],[t.radialAxis,["tickorientation"],["tickOrientation"]],[t.radialAxis,["ticksuffix"],["ticksSuffix"]],[t.radialAxis,["range"],["domain"]],[t.font,["outlinecolor"],["outlineColor"]],[t.legend,["traceorder"],["reverseOrder"]],[t,["labeloffset"],["labelOffset"]],[t,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(e,t){fe.util.translator.apply(null,e.concat(r))}),r?(void 0!==t.tickLength&&(t.angularaxis.ticklen=t.tickLength,delete t.tickLength),t.tickColor&&(t.angularaxis.tickcolor=t.tickColor,delete t.tickColor)):(t.angularAxis&&void 0!==t.angularAxis.ticklen&&(t.tickLength=t.angularAxis.ticklen),t.angularAxis&&void 0!==t.angularAxis.tickcolor&&(t.tickColor=t.angularAxis.tickcolor)),t.legend&&"boolean"!=typeof t.legend.reverseOrder&&(t.legend.reverseOrder="normal"!=t.legend.reverseOrder),t.legend&&"boolean"==typeof t.legend.traceorder&&(t.legend.traceorder=t.legend.traceorder?"reversed":"normal",delete t.legend.reverseOrder),t.margin&&void 0!==t.margin.t){var n=["t","r","b","l","pad"],i=["top","right","bottom","left","pad"],s={};ce.entries(t.margin).forEach(function(e,t){s[i[n.indexOf(e.key)]]=e.value}),t.margin=s}r&&(delete t.needsEndSpacing,delete t.minorTickColor,delete t.minorTicks,delete t.angularaxis.ticksCount,delete t.angularaxis.ticksCount,delete t.angularaxis.ticksStep,delete t.angularaxis.rewriteTicks,delete t.angularaxis.nticks,delete t.radialaxis.ticksCount,delete t.radialaxis.ticksCount,delete t.radialaxis.ticksStep,delete t.radialaxis.rewriteTicks,delete t.radialaxis.nticks),a.layout=t}return a}};return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../constants/alignment":135,"../../../lib":156}],245:[function(n,r,e){(function(e){"use strict";var c="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,t=n("../../../lib"),o=n("../../../components/color"),u=n("./micropolar"),d=n("./undo_manager"),f=t.extendDeepAll,h=r.exports={};h.framework=function(n){var a,o,r,i,s,l=new d;function e(e,t){return t&&(s=t),c.select(c.select(s).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),a=a?f(a,e):e,r||(r=u.Axis()),i=u.adapter.plotly().convert(a),r.config(i).render(s),n.data=a.data,n.layout=a.layout,h.fillLayout(n),a}return e.isPolar=!0,e.svg=function(){return r.svg()},e.getConfig=function(){return a},e.getLiveConfig=function(){return u.adapter.plotly().convert(r.getLiveConfig(),!0)},e.getLiveScales=function(){return{t:r.angularScale(),r:r.radialScale()}},e.setUndoPoint=function(){var e,t,n=this,r=u.util.cloneJson(a);e=r,t=o,l.add({undo:function(){t&&n(t)},redo:function(){n(e)}}),o=u.util.cloneJson(r)},e.undo=function(){l.undo()},e.redo=function(){l.redo()},e},h.fillLayout=function(e){var t=c.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),r=e.framework&&e.framework.svg&&e.framework.svg(),a={width:800,height:600,paper_bgcolor:o.background,_container:t,_paperdiv:n,_paper:r};e._fullLayout=f(a,e.layout)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../components/color":35,"../../../lib":156,"./micropolar":244,"./undo_manager":246}],246:[function(e,t,n){"use strict";t.exports=function(){var t,n=[],r=-1,a=!1;function o(e,t){return e&&(a=!0,e[t](),a=!1),this}return{add:function(e){return a||(n.splice(r+1,n.length-r),n.push(e),r=n.length-1),this},setCallback:function(e){t=e},undo:function(){var e=n[r];return e&&(o(e,"undo"),r-=1,t&&t(e.undo)),this},redo:function(){var e=n[r+1];return e&&(o(e,"redo"),r+=1,t&&t(e.redo)),this},clear:function(){n=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[r-1]},getIndex:function(){return r}}}},{}],247:[function(e,t,n){"use strict";var y=e("../lib"),m=e("./domain").defaults;t.exports=function(e,t,n,r){var a,o,i=r.type,s=r.attributes,l=r.handleDefaults,c=r.partition||"x",u=t._subplots[i],d=u.length;function f(e,t){return y.coerce(a,o,s,e,t)}for(var h=0;h<d;h++){var p=u[h];a=e[p]?e[p]:e[p]={},t[p]=o={};var g={};g[c]=[h/d,(h+1)/d],m(o,t,f,g),r.id=p,l(a,o,f,r)}}},{"../lib":156,"./domain":225}],248:[function(e,t,u){"use strict";var s=e("./lib/loggers"),r=e("./lib/noop"),o=e("./lib/push_unique"),i=e("./lib/is_plain_object"),n=e("./lib/extend"),a=e("./plots/attributes"),l=e("./plots/layout_attributes"),c=n.extendFlat,d=n.extendDeepAll;function f(e){var t=e.name,n=e.categories,r=e.meta;if(u.modules[t])s.log("Type "+t+" already registered");else{u.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(u.subplotsRegistry[t])return s.log("Plot type "+t+" already registered.");for(var n in y(e),u.subplotsRegistry[t]=e,u.componentsRegistry)x(n,e.name)}(e.basePlotModule);for(var a={},o=0;o<n.length;o++)a[n[o]]=!0,u.allCategories[n[o]]=!0;for(var i in u.modules[t]={_module:e,categories:a},r&&Object.keys(r).length&&(u.modules[t].meta=r),u.allTypes.push(t),u.componentsRegistry)m(i,t);e.layoutAttributes&&c(u.traceLayoutAttributes,e.layoutAttributes)}}function h(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t=e.name;for(var n in(u.componentsRegistry[t]=e).layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&o(u.layoutArrayContainers,t),y(e)),u.modules)m(t,n);for(var r in u.subplotsRegistry)x(t,r);for(var a in u.transformsRegistry)v(t,a);e.schema&&e.schema.layout&&d(l,e.schema.layout)}function p(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,n="function"==typeof e.transform,r="function"==typeof e.calcTransform;if(!n&&!r)throw new Error(t+" is missing a *transform* or *calcTransform* method.");for(var a in n&&r&&s.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),i(e.attributes)||s.log(t+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&s.log(t+" registered without a *supplyDefaults* method."),u.transformsRegistry[e.name]=e,u.componentsRegistry)v(a,e.name)}function g(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,a=e.format,o=r&&Object.keys(r).length,i=a&&Object.keys(a).length,s=u.localeRegistry,l=s[t];if(l||(s[t]=l={}),n!==t){var c=s[n];c||(s[n]=c={}),o&&c.dictionary===l.dictionary&&(c.dictionary=r),i&&c.format===l.format&&(c.format=a)}o&&(l.dictionary=r),i&&(l.format=a)}function y(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)o(u.layoutArrayRegexes,t[n])}}function m(e,t){var n=u.componentsRegistry[e].schema;if(n&&n.traces){var r=n.traces[t];r&&d(u.modules[t]._module.attributes,r)}}function v(e,t){var n=u.componentsRegistry[e].schema;if(n&&n.transforms){var r=n.transforms[t];r&&d(u.transformsRegistry[t].attributes,r)}}function x(e,t){var n=u.componentsRegistry[e].schema;if(n&&n.subplots){var r=u.subplotsRegistry[t],a=r.layoutAttributes,o="subplot"===r.attr?r.name:r.attr;Array.isArray(o)&&(o=o[0]);var i=n.subplots[o];a&&i&&d(a,i)}}function b(e){return"object"==typeof e&&(e=e.type),e}u.modules={},u.allCategories={},u.allTypes=[],u.subplotsRegistry={},u.transformsRegistry={},u.componentsRegistry={},u.layoutArrayContainers=[],u.layoutArrayRegexes=[],u.traceLayoutAttributes={},u.localeRegistry={},u.apiMethodRegistry={},u.register=function(e){if(!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":f(n);break;case"transform":p(n);break;case"component":h(n);break;case"locale":g(n);break;case"apiMethod":var r=n.name;u.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},u.getModule=function(e){var t=u.modules[b(e)];return!!t&&t._module},u.traceIs=function(e,t){if("various"===(e=b(e)))return!1;var n=u.modules[e];return n||(e&&"area"!==e&&s.log("Unrecognized trace type "+e+"."),n=u.modules[a.type.dflt]),!!n.categories[t]},u.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],a=0;a<r.length;a++)r[a].type===t&&n.push(a);return n},u.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},u.getComponentMethod=function(e,t){var n=u.componentsRegistry[e];return n&&n[t]||r},u.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return u.apiMethodRegistry[e].apply(null,t)}},{"./lib/extend":148,"./lib/is_plain_object":158,"./lib/loggers":161,"./lib/noop":165,"./lib/push_unique":169,"./plots/attributes":196,"./plots/layout_attributes":238}],249:[function(e,t,n){"use strict";var r=e("../lib"),y=r.extendFlat,m=r.extendDeep;function v(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n;e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var r,a=e.data,o=e.layout,i=m([],a),s=m({},o,v(t.tileClass)),l=e._context||{};if(t.width&&(s.width=t.width),t.height&&(s.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){s.annotations=[];var c=Object.keys(s);for(n=0;n<c.length;n++)r=c[n],-1<["xaxis","yaxis","zaxis"].indexOf(r.slice(0,5))&&(s[c[n]].title="");for(n=0;n<i.length;n++){var u=i[n];u.showscale=!1,u.marker&&(u.marker.showscale=!1),"pie"===u.type&&(u.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)s.annotations.push(t.annotations[n]);var d=Object.keys(s).filter(function(e){return e.match(/^scene\d*$/)});if(d.length){var f={};for("thumbnail"===t.tileClass&&(f={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<d.length;n++){var h=s[d[n]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),y(h.xaxis,f),y(h.yaxis,f),y(h.zaxis,f),h._scene=null}}var p=document.createElement("div");t.tileClass&&(p.className=t.tileClass);var g={gd:p,td:p,layout:s,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==t.setBackground&&(g.config.setBackground=t.setBackground||"opaque"),g.gd.defaultLayout=v(t.tileClass),g}},{"../lib":156}],250:[function(e,t,n){"use strict";var i=e("../plot_api/to_image"),s=e("../lib"),l=e("./filesaver");t.exports=function(a,o){return(o=o||{}).format=o.format||"png",new Promise(function(t,n){a._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==o.format&&n(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),a._snapshotInProgress=!0;var e=i(a,o),r=o.filename||a.fn||"newplot";r+="."+o.format,e.then(function(e){return a._snapshotInProgress=!1,l(e,r)}).then(function(e){t(e)}).catch(function(e){a._snapshotInProgress=!1,n(e)})})}},{"../lib":156,"../plot_api/to_image":192,"./filesaver":251}],251:[function(e,t,n){"use strict";t.exports=function(a,o){var i=document.createElement("a"),s="download"in i,l=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(e,t){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&t(new Error("IE < 10 unsupported")),l&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),e(o)),o||(o="download"),s&&(i.href=a,i.download=o,document.body.appendChild(i),i.click(),document.body.removeChild(i),e(o)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var n=a.split(/^data:image\/svg\+xml,/)[1],r=decodeURIComponent(n);navigator.msSaveBlob(new Blob([r]),o),e(o)}t(new Error("download error"))})}},{}],252:[function(e,t,n){"use strict";n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){var t=e._fullLayout||{};if(!(!(t._has&&t._has("polar"))&&e.data&&e.data[0]&&e.data[0].r))return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}}},{}],253:[function(e,t,n){"use strict";var r=e("./helpers"),a={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":249,"./download":250,"./helpers":252,"./svgtoimg":254,"./toimage":255,"./tosvg":256}],254:[function(e,t,n){"use strict";var v=e("../lib"),r=e("events").EventEmitter;t.exports=function(g){var y=g.emitter||new r,m=new Promise(function(n,r){var e=window.Image,t=g.svg,a=g.format||"png";if(v.isIE()&&"svg"!==a){var o=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return r(o),g.promise?m:y.emit("error",o)}var i=g.canvas,s=g.scale||1,l=g.width||300,c=g.height||150,u=s*l,d=s*c,f=i.getContext("2d"),h=new e,p="data:image/svg+xml,"+encodeURIComponent(t);i.width=u,i.height=d,h.onload=function(){var e;switch("svg"!==a&&f.drawImage(h,0,0,u,d),a){case"jpeg":e=i.toDataURL("image/jpeg");break;case"png":e=i.toDataURL("image/png");break;case"webp":e=i.toDataURL("image/webp");break;case"svg":e=p;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!g.promise)return y.emit("error",t)}n(e),g.promise||y.emit("success",e)},h.onerror=function(e){if(r(e),!g.promise)return y.emit("error",e)},h.src=p});return g.promise?m:y}},{"../lib":156,events:3}],255:[function(e,t,n){"use strict";var i=e("events").EventEmitter,s=e("../registry"),l=e("../lib"),c=e("./helpers"),u=e("./cloneplot"),d=e("./tosvg"),f=e("./svgtoimg");t.exports=function(e,n){var r=new i,t=u(e,{format:"png"}),a=t.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var o=c.getRedrawFunc(a);return s.call("plot",a,t.data,t.layout,t.config).then(o).then(function(){var e=c.getDelay(a._fullLayout);setTimeout(function(){var e=d(a),t=document.createElement("canvas");t.id=l.randstr(),(r=f({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){a&&document.body.removeChild(a)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":156,"../registry":248,"./cloneplot":249,"./helpers":252,"./svgtoimg":254,"./tosvg":256,events:3}],256:[function(t,n,e){(function(e){"use strict";var v="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,x=t("../lib"),b=t("../components/drawing"),_=t("../components/color"),w=t("../constants/xmlns_namespaces"),k=/"/g,M="TOBESTRIPPED",T=new RegExp('("'+M+")|("+M+'")',"g");n.exports=function(e,t,n){var r,a=e._fullLayout,o=a._paper,i=a._toppaper,s=a.width,l=a.height;o.insert("rect",":first-child").call(b.setRect,0,0,s,l).call(_.fill,a.paper_bgcolor);var c=a._basePlotModules||[];for(r=0;r<c.length;r++){var u=c[r];u.toSVG&&u.toSVG(e)}if(i){var d=i.node().childNodes,f=Array.prototype.slice.call(d);for(r=0;r<f.length;r++){var h=f[r];h.childNodes.length&&o.node().appendChild(h)}}a._draggers&&a._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=v.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(k,M))}else e.remove()}),o.selectAll(".point,.scatterpts").each(function(){var e=v.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(k,M))}),"pdf"!==t&&"eps"!==t||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(w.xmlns,"xmlns",w.svg),o.node().setAttributeNS(w.xmlns,"xmlns:xlink",w.xlink),"svg"===t&&n&&(o.attr("width",n*s),o.attr("height",n*l),o.attr("viewBox","0 0 "+s+" "+l));var p,g,y,m=(new window.XMLSerializer).serializeToString(o.node());return p=m,g=v.select("body").append("div").style({display:"none"}).html(""),y=p.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":g.html(e).text()}),g.remove(),m=(m=(m=y).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),x.isIE()&&(m=(m=(m=m.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),m}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../components/color":35,"../components/drawing":60,"../constants/xmlns_namespaces":139,"../lib":156}],257:[function(e,t,n){"use strict";var o=e("../../lib").mergeArray;t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;o(t.text,e,"tx"),o(t.hovertext,e,"htx");var r=t.marker;if(r){o(r.opacity,e,"mo"),o(r.color,e,"mc");var a=r.line;a&&(o(a.color,e,"mlc"),o(a.width,e,"mlw"))}}},{"../../lib":156}],258:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/colorscale/color_attributes"),o=e("../../components/colorbar/attributes"),i=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat,l=i({editType:"calc",arrayOk:!0,description:""}),c=r.marker,u=s({line:s({width:s({},c.line.width,{dflt:0}),editType:"calc"},a("marker.line")),editType:"calc"},a("marker"),{showscale:c.showscale,colorbar:o,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed).","*auto* positions `text` inside or outside","so that `text` size is maximized."].join(" ")},textfont:s({},l,{description:"Sets the font used for `text`."}),insidetextfont:s({},l,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:s({},l,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:s({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:u,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},{"../../components/colorbar/attributes":36,"../../components/colorscale/color_attributes":43,"../../lib/extend":148,"../../plots/font_attributes":226,"../scatter/attributes":294}],259:[function(e,t,n){"use strict";var p=e("fast-isnumeric"),g=e("../../lib").isArrayOrTypedArray,y=e("../../plots/cartesian/axes"),m=e("../../components/colorscale/has_colorscale"),v=e("../../components/colorscale/calc"),x=e("./arrays_to_calcdata"),b=e("../scatter/calc_selection");t.exports=function(e,t){var n,r,a,o,i,s=y.getFromId(e,t.xaxis||"x"),l=y.getFromId(e,t.yaxis||"y");"h"===(t.orientation||(t.x&&!t.y?"h":"v"))?(a=(n=s).makeCalcdata(t,"x"),r=l.makeCalcdata(t,"y"),i=t.xcalendar):(a=(n=l).makeCalcdata(t,"y"),r=s.makeCalcdata(t,"x"),i=t.ycalendar);var c=Math.min(r.length,a.length),u=new Array(c);for(o=0;o<c;o++)u[o]={p:r[o],s:a[o]},t.ids&&(u[o].id=String(t.ids[o]));var d,f=t.base;if(g(f)){for(o=0;o<Math.min(f.length,u.length);o++)d=n.d2c(f[o],0,i),p(d)?(u[o].b=+d,u[o].hasB=1):u[o].b=0;for(;o<u.length;o++)u[o].b=0}else{d=n.d2c(f,0,i);var h=p(d);for(d=h?d:0,o=0;o<u.length;o++)u[o].b=d,h&&(u[o].hasB=1)}return m(t,"marker")&&v(t,t.marker.color,"marker","c"),m(t,"marker.line")&&v(t,t.marker.line.color,"marker.line","c"),x(u,t),b(u,t),u}},{"../../components/colorscale/calc":42,"../../components/colorscale/has_colorscale":49,"../../lib":156,"../../plots/cartesian/axes":199,"../scatter/calc_selection":296,"./arrays_to_calcdata":257,"fast-isnumeric":4}],260:[function(e,t,n){"use strict";var f=e("../../lib"),h=e("../../components/color"),p=e("../../registry"),g=e("../scatter/xy_defaults"),y=e("../bar/style_defaults"),m=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return f.coerce(n,r,m,e,t)}var o=f.coerceFont;if(g(n,r,t,a)){a("orientation",r.x&&!r.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext");var i=a("textposition"),s=Array.isArray(i)||"auto"===i,l=s||"inside"===i,c=s||"outside"===i;if(l||c){var u=o(a,"textfont",t.font);l&&o(a,"insidetextfont",u),c&&o(a,"outsidetextfont",u),a("constraintext"),a("selected.textfont.color"),a("unselected.textfont.color"),a("cliponaxis")}y(n,r,a,e,t);var d=p.getComponentMethod("errorbars","supplyDefaults");d(n,r,h.defaultLine,{axis:"y"}),d(n,r,h.defaultLine,{axis:"x",inherit:"y"}),f.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},{"../../components/color":35,"../../lib":156,"../../registry":248,"../bar/style_defaults":270,"../scatter/xy_defaults":318,"./attributes":258}],261:[function(e,t,n){"use strict";var D=e("../../components/fx"),I=e("../../registry"),E=e("../../components/color"),R=e("../scatter/fill_hover_text");t.exports=function(e,t,n,r){var a,o,i,s,l,c,u,d=e.cd,f=d[0].trace,h=d[0].t,p="closest"===r,g=e.maxHoverDistance,y=e.maxSpikeDistance;function m(e){return e[i]-e.w/2}function v(e){return e[i]+e.w/2}var x=p?m:function(e){return Math.min(m(e),e.p-h.bardelta/2)},b=p?v:function(e){return Math.max(v(e),e.p+h.bardelta/2)};function _(e,t){return D.inbox(e-a,t-a,g+Math.min(1,Math.abs(t-e)/u)-1)}function w(e){return _(x(e),b(e))}function k(e){return D.inbox(e.b-o,e[s]-o,g+(e[s]-o)/(e[s]-e.b)-1)}"h"===f.orientation?(a=n,o=t,i="y",s="x",l=k,c=w):(a=t,o=n,i="x",s="y",c=k,l=w);var M=e[i+"a"],T=e[s+"a"];u=Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0]));var A=D.getDistanceFunction(r,l,c,function(e){return(l(e)+c(e))/2});if(D.getClosest(d,A,e),!1!==e.index){p||(x=function(e){return Math.min(m(e),e.p-h.bargroupwidth/2)},b=function(e){return Math.max(v(e),e.p+h.bargroupwidth/2)});var S=d[e.index],L=S.mcc||f.marker.color,C=S.mlcc||f.marker.line.color,z=S.mlw||f.marker.line.width;E.opacity(L)?e.color=L:E.opacity(C)&&z&&(e.color=C);var O=f.base?S.b+S.s:S.s;e[s+"0"]=e[s+"1"]=T.c2p(S[s],!0),e[s+"LabelVal"]=O;var j,P=h.extents[h.extents.round(S.p)];return e[i+"0"]=M.c2p(p?x(S):P[0],!0),e[i+"1"]=M.c2p(p?b(S):P[1],!0),e[i+"LabelVal"]=S.p,e.spikeDistance=(k(S)+_(m(j=S),v(j)))/2+y-g,e[i+"Spike"]=M.c2p(S.p,!0),R(S,f,e),I.getComponentMethod("errorbars","hoverInfo")(S,f,e),[e]}}},{"../../components/color":35,"../../components/fx":77,"../../registry":248,"../scatter/fill_hover_text":302}],262:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.setPositions=e("./set_positions"),r.colorbar=e("../scatter/colorbar"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="bar",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],r.meta={description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")},t.exports=r},{"../../plots/cartesian":210,"../scatter/colorbar":298,"./arrays_to_calcdata":257,"./attributes":258,"./calc":259,"./defaults":260,"./hover":261,"./layout_attributes":263,"./layout_defaults":264,"./plot":265,"./select":266,"./set_positions":267,"./style":269}],263:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",role:"info",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divide by the sum of the","values at the location coordinate.","With *percent*, the results form *fraction* are presented in percents."].join(" ")},bargap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},{}],264:[function(e,t,n){"use strict";var d=e("../../registry"),f=e("../../plots/cartesian/axes"),h=e("../../lib"),p=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return h.coerce(n,r,p,e,t)}for(var a=!1,o=!1,i=!1,s={},l=0;l<e.length;l++){var c=e[l];if(d.traceIs(c,"bar")){if(a=!0,"overlay"!==n.barmode&&"stack"!==n.barmode){var u=c.xaxis+c.yaxis;s[u]&&(i=!0),s[u]=!0}if(c.visible&&"histogram"===c.type)"category"!==f.getFromId({_fullLayout:r},c["v"===c.orientation?"xaxis":"yaxis"]).type&&(o=!0)}}a&&("overlay"!==t("barmode")&&t("barnorm"),t("bargap",o&&!i?0:.2),t("bargroupgap"))}},{"../../lib":156,"../../plots/cartesian/axes":199,"../../registry":248,"./layout_attributes":263}],265:[function(a,o,e){(function(e){"use strict";var M="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,T=a("fast-isnumeric"),u=a("tinycolor2"),n=a("../../lib"),Q=a("../../lib/svg_text_utils"),A=a("../../components/color"),$=a("../../components/drawing"),r=a("../../registry"),t=a("./attributes"),K=t.text,ee=t.textposition,te=t.textfont,ne=t.insidetextfont,re=t.outsidetextfont,ae=3;function oe(e,t,n,r,a,o){var i;return a<1?i="scale("+a+") ":(a=1,i=""),"translate("+(n-a*e)+" "+(r-a*t)+")"+i+(o?"rotate("+o+" "+e+" "+t+") ":"")}function ie(e,t,n,r){var a,o,i,s=se((t=t||{}).family,n),l=se(t.size,n),c=se(t.color,n);return{family:le(e.family,s,r.family),size:function(e,t,n){if(T(t)){t=+t;var r=e.min,a=e.max,o=void 0!==r&&t<r||void 0!==a&&a<t;if(!o)return t}return void 0!==n?n:e.dflt}(e.size,l,r.size),color:(a=e.color,o=c,i=r.color,u(o).isValid()?o:void 0!==i?i:a.dflt)}}function se(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n}function le(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if("number"==typeof t&&!e.strict)return String(t);return void 0!==n?n:e.dflt}o.exports=function(x,b,e){var _=b.xaxis,w=b.yaxis,k=x._fullLayout,t=b.plot.select(".barlayer").selectAll("g.trace.bars").data(e);t.enter().append("g").attr("class","trace bars"),t.each(function(e){e[0].node3=M.select(this)}),t.append("g").attr("class","points").each(function(g){var e=M.select(this),t=g[0].t,y=g[0].trace,m=t.poffset,v=Array.isArray(m);e.selectAll("g.point").data(n.identity).enter().append("g").classed("point",!0).each(function(e,t){var n,r,a,o,i=e.p+(v?m[t]:m),s=i+e.w,l=e.b,c=l+e.s;if("h"===y.orientation?(a=w.c2p(i,!0),o=w.c2p(s,!0),n=_.c2p(l,!0),r=_.c2p(c,!0),e.ct=[r,(a+o)/2]):(n=_.c2p(i,!0),r=_.c2p(s,!0),a=w.c2p(l,!0),o=w.c2p(c,!0),e.ct=[(n+r)/2,o]),T(n)&&T(r)&&T(a)&&T(o)&&n!==r&&a!==o){var u=(e.mlw+1||y.marker.line.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,d=M.round(u/2%1,2);if(!x._context.staticPlot){var f=A.opacity(e.mc||y.marker.color)<1||.01<u?p:function(e,t){return 2<=Math.abs(e-t)?p(e):t<e?Math.ceil(e):Math.floor(e)};r=f(r,n=f(n,r)),o=f(o,a=f(a,o))}var h=M.select(this);h.append("path").style("vector-effect","non-scaling-stroke").attr("d","M"+n+","+a+"V"+o+"H"+r+"V"+a+"Z").call($.setClipUrl,b.layerClipId),function(a,e,t,n,r,o,i,s){var l;function c(e,t,n){var r=e.append("text").text(t).attr({class:"bartext bartext-"+l,transform:"","text-anchor":"middle","data-notex":1}).call($.font,n).call(Q.convertToTspans,a);return r}var u=t[0].trace,d=u.orientation,f=(h=u,p=n,g=se(h.text,p),le(K,g));var h,p,g;if(!f)return;if("none"===(y=u,m=n,_=se(y.textposition,m),x=_,(v=ee).coerceNumber&&(x=+x),l=-1!==v.values.indexOf(x)?x:void 0!==b?b:v.dflt))return;var y,m,v,x,b,_;var w,k,M,T,A,S,L=(U=u,G=n,Y=a._fullLayout.font,ie(te,U.textfont,G,Y)),C=(q=u,H=n,V=L,ie(ne,q.insidetextfont,H,V)),z=(N=u,F=n,B=L,ie(re,N.outsidetextfont,F,B)),O=a._fullLayout.barmode,j="relative"===O,P="stack"===O||j,D=t[n],I=!P||D._outmost,E=Math.abs(o-r)-2*ae,R=Math.abs(s-i)-2*ae;var N,F,B;var q,H,V;var U,G,Y;"outside"===l&&(I||(l="inside"));if("auto"===l)if(I){l="inside",w=c(e,f,C),k=$.bBox(w.node()),M=k.width,T=k.height;var X=0<M&&0<T,Z=M<=E&&T<=R,W=M<=R&&T<=E,J="h"===d?M*(R/T)<=E:T*(E/M)<=R;X&&(Z||W||J)?l="inside":(l="outside",w.remove(),w=null)}else l="inside";if(!w&&(w=c(e,f,"outside"===l?z:C),k=$.bBox(w.node()),M=k.width,T=k.height,M<=0||T<=0))return w.remove();"outside"===l?(S="both"===u.constraintext||"outside"===u.constraintext,A=function(e,t,n,r,a,o,i){var s,l="h"===o?Math.abs(r-n):Math.abs(t-e);2*ae<l&&(s=ae);var c=1;i&&(c="h"===o?Math.min(1,l/a.height):Math.min(1,l/a.width));var u,d,f,h,p=(a.left+a.right)/2,g=(a.top+a.bottom)/2;u=c*a.width,d=c*a.height,"h"===o?(f=t<e?t-s-u/2:t+s+u/2,h=(n+r)/2):n<r?(f=(e+t)/2,h=r+s+d/2):(f=(e+t)/2,h=r-s-d/2);return oe(p,g,f,h,c,!1)}(r,o,i,s,k,d,S)):(S="both"===u.constraintext||"inside"===u.constraintext,A=function(e,t,n,r,a,o,i){var s,l,c,u,d,f,h,p=a.width,g=a.height,y=(a.left+a.right)/2,m=(a.top+a.bottom)/2,v=Math.abs(t-e),x=Math.abs(r-n);2*ae<v&&2*ae<x?(v-=2*(d=ae),x-=2*d):d=0;p<=v&&g<=x?(f=!1,h=1):p<=x&&g<=v?(f=!0,h=1):p<g==v<x?(f=!1,h=i?Math.min(v/p,x/g):1):(f=!0,h=i?Math.min(x/p,v/g):1);f&&(f=90);f?(s=h*g,l=h*p):(s=h*p,l=h*g);"h"===o?(c=t<e?t+d+s/2:t-d-s/2,u=(n+r)/2):n<r?(c=(e+t)/2,u=r-d-l/2):(c=(e+t)/2,u=r+d+l/2);return oe(y,m,c,u,h,f)}(r,o,i,s,k,d,S));w.attr("transform",A)}(x,h,g,t,n,r,a,o),b.layerClipId&&$.hideOutsideRangePoint(g[t],h.select("text"),_,w,y.xcalendar,y.ycalendar)}else M.select(this).remove();function p(e){return 0===k.bargap&&0===k.bargroupgap?M.round(Math.round(e)-d,2):e}})}),r.getComponentMethod("errorbars","plot")(t,b),t.each(function(e){var t=!1===e[0].trace.cliponaxis;$.setClipUrl(M.select(this),t?null:b.layerClipId)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/drawing":60,"../../lib":156,"../../lib/svg_text_utils":177,"../../registry":248,"./attributes":258,"fast-isnumeric":4,tinycolor2:337}],266:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r=e.cd,a=e.xaxis,o=e.yaxis,i=[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var s=r[n];t.contains(s.ct)?(i.push({pointNumber:n,x:a.c2d(s.x),y:o.c2d(s.y)}),s.selected=1):s.selected=0}return i}},{}],267:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),p=e("../../lib").isArrayOrTypedArray,b=e("../../constants/numerical").BADNUM,u=e("../../registry"),A=e("../../plots/cartesian/axes"),y=e("./sieve.js");function d(e,t,n,r){if(r.length){var a,o,i,s,l,c,u,d,f,h,p=e._fullLayout.barmode,g="group"===p;if("overlay"===p)m(e,t,n,r);else if(g){for(a=[],o=[],i=0;i<r.length;i++)void 0===(s=r[i])[0].trace.offset?o.push(s):a.push(s);o.length&&(c=t,u=n,d=o,f=(l=e)._fullLayout.barnorm,h=new y(d,!1,!f),function(e,t,n){var r,a,o,i,s=e._fullLayout,l=s.bargap,c=s.bargroupgap,u=n.positions,d=n.distinctPositions,f=n.minDiff,h=n.traces,p=u.length!==d.length,g=h.length,y=f*(1-l),m=p?y/g:y,v=m*(1-c);for(r=0;r<g;r++){a=h[r],o=a[0];var x=p?((2*r+1-g)*m-v)/2:-v/2;(i=o.t).barwidth=v,i.poffset=x,i.bargroupwidth=y,i.bardelta=f}n.binWidth=h[0][0].t.barwidth/100,_(n),w(e,t,n),k(e,t,n,p)}(l,c,h),f?(S(l,u,h),L(l,u,h)):T(l,u,h)),a.length&&m(e,t,n,a)}else{for(a=[],o=[],i=0;i<r.length;i++)void 0===(s=r[i])[0].trace.base?o.push(s):a.push(s);o.length&&function(e,t,n,r){var a=e._fullLayout.barmode,o="stack"===a,i="relative"===a,s=e._fullLayout.barnorm,l=new y(r,i,!(s||o||i));v(e,t,l),function(e,t,n){var r,a,o,i,s=e._fullLayout.barnorm,l=C(t),c=n.traces,u=[null,null];for(r=0;r<c.length;r++)for(a=c[r],o=0;o<a.length;o++)if((i=a[o]).s!==b){var d=n.put(i.p,i.b+i.s),f=d+i.b+i.s;i.b=d,i[l]=f,s||(x(t.c2l(f))&&M(u,f),i.hasB&&x(t.c2l(d))&&M(u,d))}s||A.expand(t,u,{tozero:!0,padded:!0})}(e,n,l);for(var c=0;c<r.length;c++)for(var u=r[c],d=0;d<u.length;d++){var f=u[d];if(f.s!==b){var h=f.b+f.s===l.get(f.p,f.s);h&&(f._outmost=!0)}}s&&L(e,n,l)}(e,t,n,o),a.length&&m(e,t,n,a)}!function(e,t){var n,r,a,o=t._id.charAt(0),i={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++){var c=a[r].p;x(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=i.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++)for((a=e[n])[0].t.extents=i,r=0;r<a.length;r++){var f=a[r],h=f[o]-f.w/2;if(x(h)){var p=f[o]+f.w/2,g=d(f.p);i[g]?i[g]=[Math.min(h,i[g][0]),Math.max(p,i[g][1])]:i[g]=[h,p]}}}(r,t)}}function m(e,t,n,r){for(var a=e._fullLayout.barnorm,o=!a,i=0;i<r.length;i++){var s=r[i],l=new y([s],!1,o);v(e,t,l),a?(S(e,n,l),L(e,n,l)):T(e,n,l)}}function v(e,t,n){var r,a,o=e._fullLayout,i=o.bargap,s=o.bargroupgap,l=n.minDiff,c=n.traces,u=l*(1-i),d=u*(1-s),f=-d/2;for(r=0;r<c.length;r++)(a=c[r][0].t).barwidth=d,a.poffset=f,a.bargroupwidth=u,a.bardelta=l;n.binWidth=c[0][0].t.barwidth/100,_(n),w(e,t,n),k(e,t,n)}function _(e){var t,n,r,a,o,i,s=e.traces;for(t=0;t<s.length;t++){a=(r=(n=s[t])[0]).trace,i=r.t;var l,c=a.offset,u=i.poffset;if(p(c)){for(l=c.slice(0,n.length),o=0;o<l.length;o++)x(l[o])||(l[o]=u);for(o=l.length;o<n.length;o++)l.push(u);i.poffset=l}else void 0!==c&&(i.poffset=c);var d=a.width,f=i.barwidth;if(p(d)){var h=d.slice(0,n.length);for(o=0;o<h.length;o++)x(h[o])||(h[o]=f);for(o=h.length;o<n.length;o++)h.push(f);if(i.barwidth=h,void 0===c){for(l=[],o=0;o<n.length;o++)l.push(u+(f-h[o])/2);i.poffset=l}}else void 0!==d&&(i.barwidth=d,void 0===c&&(i.poffset=u+(f-d)/2))}}function w(e,t,n){for(var r=n.traces,a=C(t),o=0;o<r.length;o++)for(var i=r[o],s=i[0].t,l=s.poffset,c=Array.isArray(l),u=s.barwidth,d=Array.isArray(u),f=0;f<i.length;f++){var h=i[f],p=h.w=d?u[f]:u;h[a]=h.p+(c?l[f]:l)+p/2}}function k(e,t,n,r){var a=n.traces,o=n.distinctPositions,i=o[0],s=n.minDiff,l=s/2;A.minDtick(t,s,i,r);for(var c=Math.min.apply(Math,o)-l,u=Math.max.apply(Math,o)+l,d=0;d<a.length;d++){var f=a[d],h=f[0],p=h.trace;if(void 0!==p.width||void 0!==p.offset)for(var g=h.t,y=g.poffset,m=g.barwidth,v=Array.isArray(y),x=Array.isArray(m),b=0;b<f.length;b++){var _=f[b],w=v?y[b]:y,k=x?m[b]:m,M=_.p+w,T=M+k;c=Math.min(c,M),u=Math.max(u,T)}}A.expand(t,[c,u],{padded:!1})}function M(e,t){x(e[0])?e[0]=Math.min(e[0],t):e[0]=t,x(e[1])?e[1]=Math.max(e[1],t):e[1]=t}function T(e,t,n){for(var r=n.traces,a=C(t),o=[null,null],i=0;i<r.length;i++)for(var s=r[i],l=0;l<s.length;l++){var c=s[l],u=c.b,d=u+c.s;c[a]=d,x(t.c2l(d))&&M(o,d),c.hasB&&x(t.c2l(u))&&M(o,u)}A.expand(t,o,{tozero:!0,padded:!0})}function S(e,t,n){for(var r=n.traces,a=0;a<r.length;a++)for(var o=r[a],i=0;i<o.length;i++){var s=o[i];s.s!==b&&n.put(s.p,s.b+s.s)}}function L(e,t,n){var r=n.traces,a=C(t),o="fraction"===e._fullLayout.barnorm?1:100,i=o/1e9,s=t.l2c(t.c2l(0)),l="stack"===e._fullLayout.barmode?o:s,c=[s,l],u=!1;function d(e){x(t.c2l(e))&&(e<s-i||l+i<e||!x(s))&&(u=!0,M(c,e))}for(var f=0;f<r.length;f++)for(var h=r[f],p=0;p<h.length;p++){var g=h[p];if(g.s!==b){var y=Math.abs(o/n.get(g.p,g.s));g.b*=y,g.s*=y;var m=g.b,v=m+g.s;d(g[a]=v),g.hasB&&d(m)}}A.expand(t,c,{tozero:!0,padded:u})}function C(e){return e._id.charAt(0)}t.exports=function(e,t){var n,r=t.xaxis,a=t.yaxis,o=e._fullData,i=e.calcdata,s=[],l=[];for(n=0;n<o.length;n++){var c=o[n];!0===c.visible&&u.traceIs(c,"bar")&&c.xaxis===r._id&&c.yaxis===a._id&&("h"===c.orientation?s.push(i[n]):l.push(i[n]))}d(e,r,a,l),d(e,a,r,s)}},{"../../constants/numerical":137,"../../lib":156,"../../plots/cartesian/axes":199,"../../registry":248,"./sieve.js":268,"fast-isnumeric":4}],268:[function(e,t,n){"use strict";t.exports=r;var u=e("../../lib"),d=e("../../constants/numerical").BADNUM;function r(e,t,n){this.traces=e,this.separateNegativeValues=t,this.dontMergeOverlappingData=n;for(var r=1/0,a=[],o=0;o<e.length;o++){for(var i=e[o],s=0;s<i.length;s++){var l=i[s];l.p!==d&&a.push(l.p)}i[0]&&i[0].width1&&(r=Math.min(i[0].width1,r))}this.positions=a;var c=u.distinctVals(a);this.distinctPositions=c.vals,1===c.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(c.minDiff,r),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},r.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":137,"../../lib":156}],269:[function(t,n,e){(function(e){"use strict";var i="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,s=t("../../components/drawing"),a=t("../../registry");n.exports=function(o,e){var t=e?e[0].node3:i.select(o).selectAll("g.trace.bars"),n=t.size(),r=o._fullLayout;t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(e){var t=i.select(this),n=t.selectAll("path"),r=t.selectAll("text"),a=e[0].trace;s.pointStyle(n,a,o),s.selectedPointStyle(n,a),r.each(function(n){var r,e=i.select(this);function t(e){var t=r[e];return Array.isArray(t)?t[n.i]:t}e.classed("bartext-inside")?r=a.insidetextfont:e.classed("bartext-outside")&&(r=a.outsidetextfont),r||(r=a.textfont),s.font(e,t("family"),t("size"),t("color"))}),s.selectedTextStyle(r,a)}),a.getComponentMethod("errorbars","style")(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/drawing":60,"../../registry":248}],270:[function(e,t,n){"use strict";var o=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),s=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,a){n("marker.color",r),i(e,"marker")&&s(e,t,a,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),i(e,"marker.line")&&s(e,t,a,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":35,"../../components/colorscale/defaults":45,"../../components/colorscale/has_colorscale":49}],271:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),a=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),i=e("../../plots/attributes"),s=e("../../lib/extend"),l=s.extendFlat,c=s.extendDeepAll,u=r.marker.line;t.exports=l({locations:{valType:"data_array",editType:"calc",description:["Sets the coordinates via location IDs or names.","See `locationmode` for more info."].join(" ")},locationmode:r.locationmode,z:{valType:"data_array",editType:"calc",description:"Sets the color values."},text:l({},r.text,{description:"Sets the text elements associated with each location."}),marker:{line:{color:u.color,width:l({},u.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,role:"style",editType:"style",description:"Sets the opacity of the locations."},editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:l({},i.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},c({},a,{zmax:{editType:"calc"},zmin:{editType:"calc"}}),{colorbar:o})},{"../../components/colorbar/attributes":36,"../../components/colorscale/attributes":41,"../../lib/extend":148,"../../plots/attributes":196,"../scattergeo/attributes":319}],272:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../constants/numerical").BADNUM,u=e("../../components/colorscale/calc"),d=e("../scatter/arrays_to_calcdata"),f=e("../scatter/calc_selection");t.exports=function(e,t){for(var n=t.locations.length,r=new Array(n),a=0;a<n;a++){var o=r[a]={},i=t.locations[a],s=t.z[a];o.loc="string"==typeof i?i:null,o.z=l(s)?s:c}return d(r,t),u(t,t.z,"","z"),f(r,t),r}},{"../../components/colorscale/calc":42,"../../constants/numerical":137,"../scatter/arrays_to_calcdata":293,"../scatter/calc_selection":296,"fast-isnumeric":4}],273:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return l.coerce(n,r,u,e,t)}var o,i=a("locations");if(i&&(o=i.length),i&&o){var s=a("z");l.isArrayOrTypedArray(s)?(s.length>o&&(r.z=s.slice(0,o)),a("locationmode"),a("text"),a("marker.line.color"),a("marker.line.width"),a("marker.opacity"),c(n,r,t,a,{prefix:"",cLetter:"z"}),l.coerceSelectionMarkerOpacity(r,a)):r.visible=!1}else r.visible=!1}},{"../../components/colorscale/defaults":45,"../../lib":156,"./attributes":271}],274:[function(e,t,n){"use strict";t.exports=function(e,t){return e.location=t.location,e.z=t.z,e}},{}],275:[function(e,t,n){"use strict";var f=e("../../plots/cartesian/axes"),h=e("./attributes"),p=e("../scatter/fill_hover_text");t.exports=function(e,t,n){var r,a,o,i,s=e.cd,l=s[0].trace,c=e.subplot;for(a=0;a<s.length;a++)if(i=!1,(r=s[a])._polygons){for(o=0;o<r._polygons.length;o++)r._polygons[o].contains([t,n])&&(i=!i),r._polygons[o].contains([t+360,n])&&(i=!i);if(i)break}if(i&&r)return e.x0=e.x1=e.xa.c2p(r.ct),e.y0=e.y1=e.ya.c2p(r.ct),e.index=r.index,e.location=r.loc,e.z=r.z,function(e,t,n,r){var a=n.hi||t.hoverinfo,o="all"===a?h.hoverinfo.flags:a.split("+"),i=-1!==o.indexOf("name"),s=-1!==o.indexOf("location"),l=-1!==o.indexOf("z"),c=-1!==o.indexOf("text"),u=[];!i&&s?e.nameOverride=n.loc:(i&&(e.nameOverride=t.name),s&&u.push(n.loc));l&&u.push((d=n.z,f.tickText(r,r.c2l(d),"hover").text));var d;c&&p(n,t,u);e.extraText=u.join("<br>")}(e,l,r,c.mockAxis),[e]}},{"../../plots/cartesian/axes":199,"../scatter/fill_hover_text":302,"./attributes":271}],276:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="choropleth",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","noOpacity"],r.meta={description:["The data that describes the choropleth value-to-color mapping","is set in `z`.","The geographic locations corresponding to each value in `z`","are set in `locations`."].join(" ")},t.exports=r},{"../../plots/geo":230,"../heatmap/colorbar":280,"./attributes":271,"./calc":272,"./defaults":273,"./event_data":274,"./hover":275,"./plot":277,"./select":278,"./style":279}],277:[function(t,n,e){(function(e){"use strict";var o="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,i=t("../../lib"),u=t("../../lib/polygon"),l=t("../../lib/topojson_utils").getTopojsonFeatures,c=t("../../lib/geo_location_utils").locationToFeature,s=t("./style");function d(e,t){for(var n=e[0].trace,r=e.length,a=l(n,t),o=0;o<r;o++){var i=e[o],s=c(n.locationmode,i.loc,a);s?(i.geojson=s,i.ct=s.properties.ct,i.index=o,i._polygons=f(s)):i.geojson=null}}function f(e){var t,n,r,o,a=e.geometry,i=a.coordinates,s=e.id,l=[];function c(e){for(var t=0;t<e.length-1;t++)if(0<e[t][0]&&e[t+1][0]<0)return t;return null}switch(t="RUS"===s||"FJI"===s?function(e){var t;if(null===c(e))t=e;else for(t=new Array(e.length),o=0;o<e.length;o++)t[o]=[e[o][0]<0?e[o][0]+360:e[o][0],e[o][1]];l.push(u.tester(t))}:"ATA"===s?function(e){var t=c(e);if(null===t)return l.push(u.tester(e));var n=new Array(e.length+1),r=0;for(o=0;o<e.length;o++)t<o?n[r++]=[e[o][0]+360,e[o][1]]:o===t?(n[r++]=e[o],n[r++]=[e[o][0],-90]):n[r++]=e[o];var a=u.tester(n);a.pts.pop(),l.push(a)}:function(e){l.push(u.tester(e))},a.type){case"MultiPolygon":for(n=0;n<i.length;n++)for(r=0;r<i[n].length;r++)t(i[n][r]);break;case"Polygon":for(n=0;n<i.length;n++)t(i[n])}return l}n.exports=function(n,e,t){for(var r=0;r<t.length;r++)d(t[r],e.topojson);var a=e.layers.backplot.select(".choroplethlayer").selectAll("g.trace.choropleth").data(t,function(e){return e[0].trace.uid});a.enter().append("g").attr("class","trace choropleth"),a.exit().remove(),a.each(function(e){var t=(e[0].node3=o.select(this)).selectAll("path.choroplethlocation").data(i.identity);t.enter().append("path").classed("choroplethlocation",!0),t.exit().remove(),s(n,e)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib":156,"../../lib/geo_location_utils":151,"../../lib/polygon":168,"../../lib/topojson_utils":180,"./style":279}],278:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,o,i,s=e.cd,l=e.xaxis,c=e.yaxis,u=[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)(a=(r=s[n]).ct)&&(o=l.c2p(a),i=c.c2p(a),t.contains([o,i])?(u.push({pointNumber:n,lon:a[0],lat:a[1]}),r.selected=1):r.selected=0);return u}},{}],279:[function(t,n,e){(function(e){"use strict";var l="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,c=t("../../components/color"),u=t("../../components/drawing"),d=t("../../components/colorscale");n.exports=function(e,t){var n,r,a,o,i,s;t&&(r=(n=t)[0].trace,a=n[0].node3.selectAll(".choroplethlocation"),o=r.marker||{},i=o.line||{},s=d.makeColorScaleFunc(d.extractScale(r.colorscale,r.zmin,r.zmax)),a.each(function(e){l.select(this).attr("fill",s(e.z)).call(c.stroke,e.mlc||i.color).call(u.dashLine,"",e.mlw||i.width||0).style("opacity",o.opacity)}),u.selectedPointStyle(a,r))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/colorscale":50,"../../components/drawing":60}],280:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("../../plots/plots"),d=e("../../components/colorscale"),f=e("../../components/colorbar/draw");t.exports=function(e,t){var n=t[0].trace,r="cb"+n.uid,a=n.zmin,o=n.zmax;if(l(a)||(a=c.aggNums(Math.min,null,n.z)),l(o)||(o=c.aggNums(Math.max,null,n.z)),e._fullLayout._infolayer.selectAll("."+r).remove(),n.showscale){var i=t[0].t.cb=f(e,r),s=d.makeColorScaleFunc(d.extractScale(n.colorscale,a,o),{noNumericCheck:!0});i.fillcolor(s).filllevels({start:a,end:o,size:(o-a)/254}).options(n.colorbar)()}else u.autoMargin(e,r)}},{"../../components/colorbar/draw":39,"../../components/colorscale":50,"../../lib":156,"../../plots/plots":240,"fast-isnumeric":4}],281:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../../plots/font_attributes"),o=e("../../plots/attributes"),i=e("../../plots/domain").attributes,s=e("../../lib/extend").extendFlat,l=a({editType:"calc",colorEditType:"style",description:"Sets the font used for `textinfo`."});t.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the sector labels.","If `labels` entries are duplicated, we sum associated `values`","or simply count occurrences if `values` is not provided.","For other array attributes (including color) we use the first","non-empty entry among all occurrences of the label."].join(" ")},label0:{valType:"number",role:"info",dflt:0,editType:"calc",description:["Alternate to `labels`.","Builds a numeric set of labels.","Use with `dlabel`","where `label0` is the starting label and `dlabel` the step."].join(" ")},dlabel:{valType:"number",role:"info",dflt:1,editType:"calc",description:"Sets the label step. See `label0` for more info."},values:{valType:"data_array",editType:"calc",description:["Sets the values of the sectors of this pie chart.","If omitted, we count occurrences of each label."].join(" ")},marker:{colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this pie chart.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:{valType:"color",role:"style",dflt:r.defaultLine,arrayOk:!0,editType:"style",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",role:"style",min:0,dflt:0,arrayOk:!0,editType:"style",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc",description:["Sets text elements associated with each sector.","If trace `textinfo` contains a *text* flag, these elements will seen","on the chart.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each sector.","If a single string, the same string appears for","all data points.","If an array of string, the items are mapped in order of","this trace's sectors.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},scalegroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["If there are multiple pies that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")},textinfo:{valType:"flaglist",role:"info",flags:["label","text","value","percent"],extras:["none"],editType:"calc",description:["Determines which trace information appear on the graph."].join(" ")},hoverinfo:s({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `textinfo`."].join(" ")},textfont:s({},l,{description:"Sets the font used for `textinfo`."}),insidetextfont:s({},l,{description:"Sets the font used for `textinfo` lying inside the pie."}),outsidetextfont:s({},l,{description:"Sets the font used for `textinfo` lying outside the pie."}),domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",role:"style",min:0,max:1,dflt:0,editType:"calc",description:["Sets the fraction of the radius to cut out of the pie.","Use this to make a donut chart."].join(" ")},sort:{valType:"boolean",role:"style",dflt:!0,editType:"calc",description:["Determines whether or not the sectors are reordered","from largest to smallest."].join(" ")},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],role:"style",dflt:"counterclockwise",editType:"calc",description:["Specifies the direction at which succeeding sectors follow","one another."].join(" ")},rotation:{valType:"number",role:"style",min:-360,max:360,dflt:0,editType:"calc",description:["Instead of the first slice starting at 12 o'clock,","rotate to some other angle."].join(" ")},pull:{valType:"number",role:"style",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc",description:["Sets the fraction of larger radius to pull the sectors","out from the center. This can be a constant","to pull all slices apart from each other equally","or an array to highlight one or more slices."].join(" ")}}},{"../../components/color/attributes":34,"../../lib/extend":148,"../../plots/attributes":196,"../../plots/domain":225,"../../plots/font_attributes":226}],282:[function(e,t,n){"use strict";var r=e("../../registry");n.name="pie",n.plot=function(e){var t=r.getModule("pie"),n=function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],o=a[0].trace;o._module===t&&!0===o.visible&&n.push(a)}return n}(e.calcdata,t);n.length&&t.plot(e,n)},n.clean=function(e,t,n,r){var a=r._has&&r._has("pie"),o=t._has&&t._has("pie");a&&!o&&r._pielayer.selectAll("g.trace").remove()}},{"../../registry":248}],283:[function(e,t,n){"use strict";var a,L=e("fast-isnumeric"),C=e("../../lib").isArrayOrTypedArray,z=e("tinycolor2"),O=e("../../components/color"),j=e("./helpers");function P(e,t){if(!a){var n=O.defaults;a=D(n)}var r=t||a;return r[e%r.length]}function D(e){var t,n=e.slice();for(t=0;t<e.length;t++)n.push(z(e[t]).lighten(20).toHexString());for(t=0;t<e.length;t++)n.push(z(e[t]).darken(20).toHexString());return n}t.exports=function(e,t){var n,r,a,o,i,s=t.values,l=C(s)&&s.length,c=t.labels,u=t.marker.colors||[],d=[],f=e._fullLayout,h=f.colorway,p=f._piecolormap,g={},y=0,m=f.hiddenlabels||[];if(f._piecolorway||h===O.defaults||(f._piecolorway=D(h)),t.dlabel)for(c=new Array(s.length),n=0;n<s.length;n++)c[n]=String(t.label0+n*t.dlabel);function v(e,t){return!!e&&(!!(e=z(e)).isValid()&&(e=O.addOpacity(e,e.getAlpha()),p[t]||(p[t]=e),e))}var x=(l?s:c).length;for(n=0;n<x;n++){if(l){if(r=s[n],!L(r))continue;if((r=+r)<0)continue}else r=1;void 0!==(a=c[n])&&""!==a||(a=n);var b=g[a=String(a)];void 0===b?(g[a]=d.length,(o=-1!==m.indexOf(a))||(y+=r),d.push({v:r,label:a,color:v(u[n]),i:n,pts:[n],hidden:o})):((i=d[b]).v+=r,i.pts.push(n),i.hidden||(y+=r),!1===i.color&&u[n]&&(i.color=v(u[n],a)))}for(t.sort&&d.sort(function(e,t){return t.v-e.v}),n=0;n<d.length;n++)!1===(i=d[n]).color&&(p[i.label]?i.color=p[i.label]:(p[i.label]=i.color=P(f._piedefaultcolorcount,f._piecolorway),f._piedefaultcolorcount++));if(d[0]&&(d[0].vTotal=y),t.textinfo&&"none"!==t.textinfo){var _,w=-1!==t.textinfo.indexOf("label"),k=-1!==t.textinfo.indexOf("text"),M=-1!==t.textinfo.indexOf("value"),T=-1!==t.textinfo.indexOf("percent"),A=f.separators;for(n=0;n<d.length;n++){if(i=d[n],_=w?[i.label]:[],k){var S=j.getFirstFilled(t.text,i.pts);S&&_.push(S)}M&&_.push(j.formatPieValue(i.v,A)),T&&_.push(j.formatPiePercent(i.v/y,A)),i.text=_.join("<br>")}}return d}},{"../../components/color":35,"../../lib":156,"./helpers":286,"fast-isnumeric":4,tinycolor2:337}],284:[function(e,t,n){"use strict";var g=e("../../lib"),y=e("./attributes"),m=e("../../plots/domain").defaults;t.exports=function(n,r,e,t){function a(e,t){return g.coerce(n,r,y,e,t)}var o=g.coerceFont,i=a("values"),s=a("labels");if(!Array.isArray(s)){if(!g.isArrayOrTypedArray(i)||!i.length)return void(r.visible=!1);a("label0"),a("dlabel")}a("marker.line.width")&&a("marker.line.color"),a("marker.colors"),a("scalegroup");var l=a("text"),c=a("textinfo",Array.isArray(l)?"text+percent":"percent");if(a("hovertext"),c&&"none"!==c){var u=a("textposition"),d=Array.isArray(u)||"auto"===u,f=d||"inside"===u,h=d||"outside"===u;if(f||h){var p=o(a,"textfont",t.font);f&&o(a,"insidetextfont",p),h&&o(a,"outsidetextfont",p)}}m(r,t,a),a("hole"),a("sort"),a("direction"),a("rotation"),a("pull")}},{"../../lib":156,"../../plots/domain":225,"./attributes":281}],285:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),n}},{"../../components/fx/helpers":74}],286:[function(e,t,n){"use strict";var r=e("../../lib");n.formatPiePercent=function(e,t){var n=(100*e).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)+"%"},n.formatPieValue=function(e,t){var n=e.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0}},{"../../lib":156}],287:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.layoutAttributes=e("./layout_attributes"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.styleOne=e("./style_one"),r.moduleType="trace",r.name="pie",r.basePlotModule=e("./base_plot"),r.categories=["pie","showLegend"],r.meta={description:["A data visualized by the sectors of the pie is set in `values`.","The sector labels are set in `labels`.","The sector colors are set in `marker.colors`"].join(" ")},t.exports=r},{"./attributes":281,"./base_plot":282,"./calc":283,"./defaults":284,"./layout_attributes":288,"./layout_defaults":289,"./plot":290,"./style":291,"./style_one":292}],288:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"}}},{}],289:[function(e,t,n){"use strict";var a=e("../../lib"),o=e("./layout_attributes");t.exports=function(e,t){var n,r;n="hiddenlabels",a.coerce(e,t,o,n,r)}},{"../../lib":156,"./layout_attributes":288}],290:[function(t,n,e){(function(e){"use strict";var _="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,w=t("../../components/fx"),l=t("../../components/color"),k=t("../../components/drawing"),M=t("../../lib/svg_text_utils"),T=t("./helpers"),A=t("./event_data");function S(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function L(e,t){var n=t.pxmid[0],r=t.pxmid[1],a=e.width/2,o=e.height/2;return n<0&&(a*=-1),r<0&&(o*=-1),{scale:1,rCenter:1,rotate:0,x:a+Math.abs(o)*(0<a?1:-1)/2,y:o/(1+n*n/(r*r)),outside:!0}}n.exports=function(x,e){var b=x._fullLayout;!function(e,t){var n,r,a,o,i,s,l,c,u,d=[];for(a=0;a<e.length;a++){if(i=e[a][0],s=i.trace,n=t.w*(s.domain.x[1]-s.domain.x[0]),r=t.h*(s.domain.y[1]-s.domain.y[0]),l=s.pull,Array.isArray(l))for(o=l=0;o<s.pull.length;o++)s.pull[o]>l&&(l=s.pull[o]);i.r=Math.min(n,r)/(2+2*l),i.cx=t.l+t.w*(s.domain.x[1]+s.domain.x[0])/2,i.cy=t.t+t.h*(2-s.domain.y[1]-s.domain.y[0])/2,s.scalegroup&&-1===d.indexOf(s.scalegroup)&&d.push(s.scalegroup)}for(o=0;o<d.length;o++){for(u=1/0,c=d[o],a=0;a<e.length;a++)(i=e[a][0]).trace.scalegroup===c&&(u=Math.min(u,i.r*i.r/i.vTotal));for(a=0;a<e.length;a++)(i=e[a][0]).trace.scalegroup===c&&(i.r=Math.sqrt(u*i.vTotal))}}(e,b._size);var t=b._pielayer.selectAll("g.trace").data(e);t.enter().append("g").attr({"stroke-linejoin":"round",class:"trace"}),t.exit().remove(),t.order(),t.each(function(t){var e=_.select(this),m=t[0],v=m.trace;!function(e){var t,n,r,a=e[0],o=a.trace,i=o.rotation*Math.PI/180,s=2*Math.PI/a.vTotal,l="px0",c="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;i+=s*e[t].v,s*=-1,l="px1",c="px0"}function u(e){return[a.r*Math.sin(e),-a.r*Math.cos(e)]}for(r=u(i),t=0;t<e.length;t++)(n=e[t]).hidden||(n[l]=r,i+=s*n.v/2,n.pxmid=u(i),n.midangle=i,i+=s*n.v/2,r=u(i),n[c]=r,n.largeArc=n.v>a.vTotal/2?1:0)}(t),e.each(function(){var e=_.select(this).selectAll("g.slice").data(t);e.enter().append("g").classed("slice",!0),e.exit().remove();var u=[[[],[]],[[],[]]],y=!1;e.each(function(d){if(d.hidden)_.select(this).selectAll("path,g").remove();else{d.pointNumber=d.i,d.curveNumber=v.index,u[d.pxmid[1]<0?0:1][d.pxmid[0]<0?0:1].push(d);var f=m.cx,h=m.cy,e=_.select(this),t=e.selectAll("path.surface").data([d]),p=!1,g=!1;if(t.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),e.select("path.textline").remove(),e.on("mouseover",function(){var e=x._fullLayout,t=x._fullData[v.index];if(!x._dragging&&!1!==e.hovermode){var n=t.hoverinfo;if(Array.isArray(n)&&(n=w.castHoverinfo({hoverinfo:[T.castOption(n,d.pts)],_module:v._module},e,0)),"all"===n&&(n="label+text+value+percent+name"),"none"!==n&&"skip"!==n&&n){var r=S(d,m),a=f+d.pxmid[0]*(1-r),o=h+d.pxmid[1]*(1-r),i=b.separators,s=[];if(-1!==n.indexOf("label")&&s.push(d.label),-1!==n.indexOf("text")){var l=T.castOption(t.hovertext||t.text,d.pts);l&&s.push(l)}-1!==n.indexOf("value")&&s.push(T.formatPieValue(d.v,i)),-1!==n.indexOf("percent")&&s.push(T.formatPiePercent(d.v/m.vTotal,i));var c=v.hoverlabel,u=c.font;w.loneHover({x0:a-r*m.r,x1:a+r*m.r,y:o,text:s.join("<br>"),name:-1!==n.indexOf("name")?t.name:void 0,idealAlign:d.pxmid[0]<0?"left":"right",color:T.castOption(c.bgcolor,d.pts)||d.color,borderColor:T.castOption(c.bordercolor,d.pts),fontFamily:T.castOption(u.family,d.pts),fontSize:T.castOption(u.size,d.pts),fontColor:T.castOption(u.color,d.pts)},{container:e._hoverlayer.node(),outerContainer:e._paper.node(),gd:x}),p=!0}x.emit("plotly_hover",{points:[A(d,t)],event:_.event}),g=!0}}).on("mouseout",function(e){var t=x._fullLayout,n=x._fullData[v.index];g&&(e.originalEvent=_.event,x.emit("plotly_unhover",{points:[A(d,n)],event:_.event}),g=!1),p&&(w.loneUnhover(t._hoverlayer.node()),p=!1)}).on("click",function(){var e=x._fullLayout,t=x._fullData[v.index];x._dragging||!1===e.hovermode||(x._hoverdata=[A(d,t)],w.click(x,_.event))}),v.pull){var n=+T.castOption(v.pull,d.pts)||0;0<n&&(f+=n*d.pxmid[0],h+=n*d.pxmid[1])}d.cxFinal=f,d.cyFinal=h;var r=v.hole;if(d.v===m.vTotal){var a="M"+(f+d.px0[0])+","+(h+d.px0[1])+c(d.px0,d.pxmid,!0,1)+c(d.pxmid,d.px0,!0,1)+"Z";r?t.attr("d","M"+(f+r*d.px0[0])+","+(h+r*d.px0[1])+c(d.px0,d.pxmid,!1,r)+c(d.pxmid,d.px0,!1,r)+"Z"+a):t.attr("d",a)}else{var o=c(d.px0,d.px1,!0,1);if(r){var i=1-r;t.attr("d","M"+(f+r*d.px1[0])+","+(h+r*d.px1[1])+c(d.px1,d.px0,!1,r)+"l"+i*d.px0[0]+","+i*d.px0[1]+o+"Z")}else t.attr("d","M"+f+","+h+"l"+d.px0[0]+","+d.px0[1]+o+"Z")}var s=T.castOption(v.textposition,d.pts),l=e.selectAll("g.slicetext").data(d.text&&"none"!==s?[0]:[]);l.enter().append("g").classed("slicetext",!0),l.exit().remove(),l.each(function(){var e=_.select(this).selectAll("text").data([0]);e.enter().append("text").attr("data-notex",1),e.exit().remove(),e.text(d.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,"outside"===s?v.outsidetextfont:v.insidetextfont).call(M.convertToTspans,x);var t,n=k.bBox(e.node());"outside"===s?t=L(n,d):(t=function(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),a=e.width/e.height,o=Math.PI*Math.min(t.v/n.vTotal,.5),i=1-n.trace.hole,s=S(t,n),l={scale:s*n.r*2/r,rCenter:1-s,rotate:0};if(1<=l.scale)return l;var c=a+1/(2*Math.tan(o)),u=n.r*Math.min(1/(Math.sqrt(c*c+.5)+c),i/(Math.sqrt(a*a+i/2)+a)),d={scale:2*u/e.height,rCenter:Math.cos(u/n.r)-u*a/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},f=1/a,h=f+1/(2*Math.tan(o)),p=n.r*Math.min(1/(Math.sqrt(h*h+.5)+h),i/(Math.sqrt(f*f+i/2)+f)),g={scale:2*p/e.width,rCenter:Math.cos(p/n.r)-p/a/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},y=d.scale<g.scale?g:d;return l.scale<1&&l.scale<y.scale?y:l}(n,d,m),"auto"===s&&t.scale<1&&(e.call(k.font,v.outsidetextfont),v.outsidetextfont.family===v.insidetextfont.family&&v.outsidetextfont.size===v.insidetextfont.size||(n=k.bBox(e.node())),t=L(n,d)));var r=f+d.pxmid[0]*t.rCenter+(t.x||0),a=h+d.pxmid[1]*t.rCenter+(t.y||0);t.outside&&(d.yLabelMin=a-n.height/2,d.yLabelMid=a,d.yLabelMax=a+n.height/2,d.labelExtraX=0,d.labelExtraY=0,y=!0),e.attr("transform","translate("+r+","+a+")"+(t.scale<1?"scale("+t.scale+")":"")+(t.rotate?"rotate("+t.rotate+")":"")+"translate("+-(n.left+n.right)/2+","+-(n.top+n.bottom)/2+")")})}function c(e,t,n,r){return"a"+r*m.r+","+r*m.r+" 0 "+d.largeArc+(n?" 1 ":" 0 ")+r*(t[0]-e[0])+","+r*(t[1]-e[1])}}),y&&function(e,h){var t,p,n,g,y,m,v,r,a,x,o,i,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function c(e,t){return t.pxmid[1]-e.pxmid[1]}function u(e,t){t||(t={});var n,r,a,o,i,s,l=t.labelExtraY+(p?t.yLabelMax:t.yLabelMin),c=p?e.yLabelMin:e.yLabelMax,u=p?e.yLabelMax:e.yLabelMin,d=e.cyFinal+y(e.px0[1],e.px1[1]),f=l-c;if(0<f*v&&(e.labelExtraY=f),Array.isArray(h.pull))for(r=0;r<x.length;r++)(a=x[r])===e||(T.castOption(h.pull,e.pts)||0)>=(T.castOption(h.pull,a.pts)||0)||(0<(e.pxmid[1]-a.pxmid[1])*v?(o=a.cyFinal+y(a.px0[1],a.px1[1]),0<(f=o-c-e.labelExtraY)*v&&(e.labelExtraY+=f)):0<(u+e.labelExtraY-d)*v&&(n=3*m*Math.abs(r-x.indexOf(e)),i=a.cxFinal+g(a.px0[0],a.px1[0]),0<(s=i+n-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*m&&(e.labelExtraX+=s)))}for(p=0;p<2;p++)for(n=p?l:c,y=p?Math.max:Math.min,v=p?1:-1,t=0;t<2;t++){for(g=t?Math.max:Math.min,m=t?1:-1,(r=e[p][t]).sort(n),a=e[1-p][t],x=a.concat(r),i=[],o=0;o<r.length;o++)void 0!==r[o].yLabelMid&&i.push(r[o]);for(s=!1,o=0;p&&o<a.length;o++)if(void 0!==a[o].yLabelMid){s=a[o];break}for(o=0;o<i.length;o++){var d=o&&i[o-1];s&&!o&&(d=s),u(i[o],d)}}}(u,v),e.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=_.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var r=e.cxFinal+e.pxmid[0],a="M"+r+","+(e.cyFinal+e.pxmid[1]),o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var i=e.labelExtraX*e.pxmid[1]/e.pxmid[0],s=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(i)>Math.abs(s)?a+="l"+s*e.pxmid[0]/e.pxmid[1]+","+s+"H"+(r+e.labelExtraX+o):a+="l"+e.labelExtraX+","+i+"v"+(s-i)+"h"+o}else a+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o;t.append("path").classed("textline",!0).call(l.stroke,v.outsidetextfont.color).attr({"stroke-width":Math.min(2,v.outsidetextfont.size/8),d:a,fill:"none"})}})})}),setTimeout(function(){t.selectAll("tspan").each(function(){var e=_.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/drawing":60,"../../components/fx":77,"../../lib/svg_text_utils":177,"./event_data":285,"./helpers":286}],291:[function(t,n,e){(function(e){"use strict";var r="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,a=t("./style_one");n.exports=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0].trace,n=r.select(this);n.style({opacity:t.opacity}),n.selectAll("path.surface").each(function(e){r.select(this).call(a,e,t)})})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./style_one":292}],292:[function(e,t,n){"use strict";var i=e("../../components/color"),s=e("./helpers").castOption;t.exports=function(e,t,n){var r=n.marker.line,a=s(r.color,t.pts)||i.defaultLine,o=s(r.width,t.pts)||0;e.style({"stroke-width":o}).call(i.fill,t.color).call(i.stroke,a)}},{"../../components/color":35,"./helpers":286}],293:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;i.mergeArray(t.text,e,"tx"),i.mergeArray(t.hovertext,e,"htx"),i.mergeArray(t.customdata,e,"data"),i.mergeArray(t.textposition,e,"tp"),t.textfont&&(i.mergeArray(t.textfont.size,e,"ts"),i.mergeArray(t.textfont.color,e,"tc"),i.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;if(r){i.mergeArray(r.size,e,"ms"),i.mergeArray(r.opacity,e,"mo"),i.mergeArray(r.symbol,e,"mx"),i.mergeArray(r.color,e,"mc");var a=r.line;r.line&&(i.mergeArray(a.color,e,"mlc"),i.mergeArray(a.width,e,"mlw"));var o=r.gradient;o&&"none"!==o.type&&(i.mergeArray(o.type,e,"mgt"),i.mergeArray(o.color,e,"mgc"))}}},{"../../lib":156}],294:[function(e,t,n){"use strict";var r=e("../../components/colorscale/color_attributes"),a=e("../../components/colorbar/attributes"),o=e("../../plots/font_attributes"),i=e("../../components/drawing/attributes").dash,s=e("../../components/drawing"),l=e("./constants"),c=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],role:"info",editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+l.PTS_LINESONLY+" points,","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],role:"info",editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},line:{color:{valType:"color",role:"style",editType:"style",description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,role:"style",editType:"style",description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",role:"style",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,role:"style",editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:c({},i,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",role:"style",editType:"calc",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")},fillcolor:{valType:"color",role:"style",editType:"style",description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},marker:c({symbol:{valType:"enumerated",values:s.symbolList,dflt:"circle",arrayOk:!0,role:"style",editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,role:"style",editType:"style",description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,role:"style",editType:"calcIfAutorange",description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,role:"style",editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,role:"style",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,role:"style",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",role:"info",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},showscale:{valType:"boolean",role:"info",dflt:!1,editType:"calc",description:["Has an effect only if `marker.color` is set to a numerical array.","Determines whether or not a colorbar is displayed."].join(" ")},colorbar:a,line:c({width:{valType:"number",min:0,arrayOk:!0,role:"style",editType:"style",description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},r("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",role:"style",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,role:"style",editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},r("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,role:"style",editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",role:"style",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,role:"style",editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",role:"style",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,role:"style",editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",role:"style",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,role:"style",editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",role:"style",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,role:"style",editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:o({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."}),r:{valType:"data_array",editType:"calc",description:["For legacy polar chart only.","Please switch to *scatterpolar* trace type.","Sets the radial coordinates."].join("")},t:{valType:"data_array",editType:"calc",description:["For legacy polar chart only.","Please switch to *scatterpolar* trace type.","Sets the angular coordinates."].join("")}}},{"../../components/colorbar/attributes":36,"../../components/colorscale/color_attributes":43,"../../components/drawing":60,"../../components/drawing/attributes":59,"../../lib/extend":148,"../../plots/font_attributes":226,"./constants":300}],295:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),u=e("../../lib").isArrayOrTypedArray,d=e("../../plots/cartesian/axes"),f=e("../../constants/numerical").BADNUM,h=e("./subtypes"),p=e("./colorscale_calc"),g=e("./arrays_to_calcdata"),y=e("./calc_selection");function m(e,t,n,r,a,o,i){var s=t._length;n._minDtick=0;var l={padded:!(r._minDtick=0)},c={padded:!0};i&&(l.ppad=c.ppad=i),!("tozerox"===t.fill||"tonextx"===t.fill&&e.firstscatter)||a[0]===a[s-1]&&o[0]===o[s-1]?t.error_y.visible||-1===["tonexty","tozeroy"].indexOf(t.fill)&&(h.hasMarkers(t)||h.hasText(t))||(l.padded=!1,l.ppad=0):l.tozero=!0,!("tozeroy"===t.fill||"tonexty"===t.fill&&e.firstscatter)||a[0]===a[s-1]&&o[0]===o[s-1]?-1!==["tonextx","tozerox"].indexOf(t.fill)&&(c.padded=!1):c.tozero=!0,d.expand(n,a,l),d.expand(r,o,c)}function v(e,t){if(h.hasMarkers(e)){var n,r=e.marker,a=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/a),3)}:function(e){return Math.max((e||0)/a,3)},u(r.size)){var o={type:"linear"};d.setConvert(o);for(var i=o.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(i[l]);return s}return n(r.size)}}t.exports={calc:function(e,t){var n=d.getFromId(e,t.xaxis||"x"),r=d.getFromId(e,t.yaxis||"y"),a=n.makeCalcdata(t,"x"),o=r.makeCalcdata(t,"y"),i=t._length,s=new Array(i);m(e,t,n,r,a,o,v(t,i));for(var l=0;l<i;l++)s[l]=c(a[l])&&c(o[l])?{x:a[l],y:o[l]}:{x:f,y:f},t.ids&&(s[l].id=String(t.ids[l]));return g(s,t),p(t),y(s,t),e.firstscatter=!1,s},calcMarkerSize:v,calcAxisExpansion:m}},{"../../constants/numerical":137,"../../lib":156,"../../plots/cartesian/axes":199,"./arrays_to_calcdata":293,"./calc_selection":296,"./colorscale_calc":299,"./subtypes":316,"fast-isnumeric":4}],296:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":156}],297:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var a=t-1;0<=a;a--){var o=e[a];if("scatter"===o.type&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=void 0;break}}}}}},{}],298:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),f=e("../../plots/plots"),h=e("../../components/colorscale"),p=e("../../components/colorbar/draw");t.exports=function(e,t){var n=t[0].trace,r=n.marker,a="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+a).remove(),void 0!==r&&r.showscale){var o=r.color,i=r.cmin,s=r.cmax;u(i)||(i=d.aggNums(Math.min,null,o)),u(s)||(s=d.aggNums(Math.max,null,o));var l=t[0].t.cb=p(e,a),c=h.makeColorScaleFunc(h.extractScale(r.colorscale,i,s),{noNumericCheck:!0});l.fillcolor(c).filllevels({start:i,end:s,size:(s-i)/254}).options(r.colorbar)()}else f.autoMargin(e,a)}},{"../../components/colorbar/draw":39,"../../components/colorscale":50,"../../lib":156,"../../plots/plots":240,"fast-isnumeric":4}],299:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),a=e("../../components/colorscale/calc"),o=e("./subtypes");t.exports=function(e){o.hasLines(e)&&r(e,"line")&&a(e,e.line.color,"line","c"),o.hasMarkers(e)&&(r(e,"marker")&&a(e,e.marker.color,"marker","c"),r(e,"marker.line")&&a(e,e.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":42,"../../components/colorscale/has_colorscale":49,"./subtypes":316}],300:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],301:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../../registry"),d=e("./attributes"),f=e("./constants"),h=e("./subtypes"),p=e("./xy_defaults"),g=e("./marker_defaults"),y=e("./line_defaults"),m=e("./line_shape_defaults"),v=e("./text_defaults"),x=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function a(e,t){return c.coerce(n,r,d,e,t)}var o=p(n,r,t,a),i=o<f.PTS_LINESONLY?"lines+markers":"lines";if(o){a("text"),a("hovertext"),a("mode",i),h.hasLines(r)&&(y(n,r,e,t,a),m(n,r,a),a("connectgaps"),a("line.simplify")),h.hasMarkers(r)&&g(n,r,e,t,a,{gradient:!0}),h.hasText(r)&&v(n,r,t,a);var s=[];(h.hasMarkers(r)||h.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),s.push("points")),a("fill"),"none"!==r.fill&&(x(n,r,e,a),h.hasLines(r)||m(n,r,a)),"tonext"!==r.fill&&"toself"!==r.fill||s.push("fills"),a("hoveron",s.join("+")||"points");var l=u.getComponentMethod("errorbars","supplyDefaults");l(n,r,e,{axis:"y"}),l(n,r,e,{axis:"x",inherit:"y"}),c.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},{"../../lib":156,"../../registry":248,"./attributes":294,"./constants":300,"./fillcolor_defaults":303,"./line_defaults":307,"./line_shape_defaults":309,"./marker_defaults":312,"./subtypes":316,"./text_defaults":317,"./xy_defaults":318}],302:[function(e,t,n){"use strict";var i=e("../../lib");function s(e){return e||0===e}t.exports=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=i.extractOption(e,t,"htx","hovertext");if(s(a))return r(a);var o=i.extractOption(e,t,"tx","text");return s(o)?r(o):void 0}},{"../../lib":156}],303:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var a=!1;if(t.marker){var o=t.marker.color,i=(t.marker.line||{}).color;o&&!l(o)?a=o:i&&!l(i)&&(a=i)}r("fillcolor",s.addOpacity((t.line||{}).color||a||n,.5))}},{"../../components/color":35,"../../lib":156}],304:[function(e,t,n){"use strict";var i=e("../../components/color"),s=e("./subtypes");t.exports=function(e,t){var n,r;if("lines"===e.mode)return(n=e.line.color)&&i.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var a=t.mcc||(e.marker||{}).color,o=t.mlcc||((e.marker||{}).line||{}).color;return(r=a&&i.opacity(a)?a:o&&i.opacity(o)&&(t.mlw||((e.marker||{}).line||{}).width)?o:"")?i.opacity(r)<.3?i.addOpacity(r,.3):r:(n=(e.line||{}).color)&&i.opacity(n)&&s.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":35,"./subtypes":316}],305:[function(e,t,n){"use strict";var R=e("../../lib"),N=e("../../components/fx"),F=e("../../registry"),B=e("./get_trace_color"),q=e("../../components/color"),H=e("./fill_hover_text");t.exports=function(e,t,n,r){var a=e.cd,o=a[0].trace,i=e.xa,s=e.ya,l=i.c2p(t),c=s.c2p(n),u=[l,c],d=o.hoveron||"",f=-1!==o.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var h=function(e){var t=Math.max(f,e.mrc||0),n=i.c2p(e.x)-l,r=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+r*r)-t,1-f/t)},p=N.getDistanceFunction(r,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(i.c2p(e.x)-l);return r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-c);return r<t?n*r/t:r-t+n},h);if(N.getClosest(a,p,e),!1!==e.index){var g=a[e.index],y=i.c2p(g.x,!0),m=s.c2p(g.y,!0),v=g.mrc||1;return R.extendFlat(e,{color:B(o,g),x0:y-v,x1:y+v,xLabelVal:g.x,y0:m-v,y1:m+v,yLabelVal:g.y,spikeDistance:h(g)}),H(g,o,e),F.getComponentMethod("errorbars","hoverInfo")(g,o,e),[e]}}if(-1!==d.indexOf("fills")&&o._polygons){var x,b,_,w,k,M,T,A,S,L=o._polygons,C=[],z=!1,O=1/0,j=-1/0,P=1/0,D=-1/0;for(x=0;x<L.length;x++)(_=L[x]).contains(u)&&(z=!z,C.push(_),P=Math.min(P,_.ymin),D=Math.max(D,_.ymax));if(z){var I=((P=Math.max(P,0))+(D=Math.min(D,s._length)))/2;for(x=0;x<C.length;x++)for(w=C[x].pts,b=1;b<w.length;b++)I<(A=w[b-1][1])!=I<=(S=w[b][1])&&(M=w[b-1][0],T=w[b][0],S-A&&(k=M+(T-M)*(I-A)/(S-A),O=Math.min(O,k),j=Math.max(j,k)));O=Math.max(O,0),j=Math.min(j,i._length);var E=q.defaultLine;return q.opacity(o.fillcolor)?E=o.fillcolor:q.opacity((o.line||{}).color)&&(E=o.line.color),R.extendFlat(e,{distance:e.maxHoverDistance,x0:O,x1:j,y0:I,y1:I,color:E}),delete e.index,o.text&&!Array.isArray(o.text)?e.text=String(o.text):e.text=o.name,[e]}}}},{"../../components/color":35,"../../components/fx":77,"../../lib":156,"../../registry":248,"./fill_hover_text":302,"./get_trace_color":304}],306:[function(e,t,n){"use strict";var r={},a=e("./subtypes");r.hasLines=a.hasLines,r.hasMarkers=a.hasMarkers,r.hasText=a.hasText,r.isBubble=a.isBubble,r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.cleanData=e("./clean_data"),r.calc=e("./calc").calc,r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style").style,r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.animatable=!0,r.moduleType="trace",r.name="scatter",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],r.meta={description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")},t.exports=r},{"../../plots/cartesian":210,"./arrays_to_calcdata":293,"./attributes":294,"./calc":295,"./clean_data":297,"./colorbar":298,"./defaults":301,"./hover":305,"./plot":313,"./select":314,"./style":315,"./subtypes":316}],307:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/has_colorscale"),c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,a,o){var i=(e.marker||{}).color;(a("line.color",n),l(e,"line"))?c(e,t,r,a,{prefix:"line.",cLetter:"c"}):a("line.color",!s(i)&&i||n);a("line.width"),(o||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":45,"../../components/colorscale/has_colorscale":49,"../../lib":156}],308:[function(e,t,n){"use strict";var Q=e("../../constants/numerical").BADNUM,$=e("../../lib"),K=$.segmentsIntersect,ee=$.constrain,te=e("./constants");t.exports=function(a,e){var t,n,r,o,i,s,l,c,u,d,f,h,p,g,y,m,v=e.xaxis,x=e.yaxis,b=e.simplify,_=e.connectGaps,w=e.baseTolerance,k=e.shape,M="linear"===k,T=[],A=te.minTolerance,S=new Array(a.length),L=0;function C(e){var t=a[e],n=v.c2p(t.x),r=x.c2p(t.y);return n===Q||r===Q?t.intoCenter||!1:[n,r]}function z(e){var t=e[0]/v._length,n=e[1]/x._length;return(1+te.toleranceGrowth*Math.max(0,-t,t-1,-n,n-1))*w}function O(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}b||(w=A=-1);var j,P,D,I,E,R,N,F=te.maxScreensAway,B=-v._length*F,q=v._length*(1+F),H=-x._length*F,V=x._length*(1+F),U=[[B,H,q,H],[q,H,q,V],[q,V,B,V],[B,V,B,H]];function G(e){if(e[0]<B||e[0]>q||e[1]<H||e[1]>V)return[ee(e[0],B,q),ee(e[1],H,V)]}function Y(e,t){return e[0]===t[0]&&(e[0]===B||e[0]===q)||(e[1]===t[1]&&(e[1]===H||e[1]===V)||void 0)}function X(i,s,l){return function(e,t){var n=G(e),r=G(t),a=[];if(n&&r&&Y(n,r))return a;n&&a.push(n),r&&a.push(r);var o=2*$.constrain((e[i]+t[i])/2,s,l)-((n||e)[i]+(r||t)[i]);o&&((n&&r?0<o==n[i]>r[i]?n:r:n||r)[i]+=o);return a}}function Z(e){var t=e[0],n=e[1],r=t===S[L-1][0],a=n===S[L-1][1];if(!r||!a)if(1<L){var o=t===S[L-2][0],i=n===S[L-2][1];r&&(t===B||t===q)&&o?i?L--:S[L-1]=e:a&&(n===H||n===V)&&i?o?L--:S[L-1]=e:S[L++]=e}else S[L++]=e}function W(e){S[L-1][0]!==e[0]&&S[L-1][1]!==e[1]&&Z([D,I]),Z(e),E=null,D=I=0}function J(e){if(j=e[0]<B?B:e[0]>q?q:0,P=e[1]<H?H:e[1]>V?V:0,j||P){if(L)if(E){var t=N(E,e);1<t.length&&(W(t[0]),S[L++]=t[1])}else R=N(S[L-1],e)[0],S[L++]=R;else S[L++]=[j||e[0],P||e[1]];var n=S[L-1];j&&P&&(n[0]!==j||n[1]!==P)?(E&&(D!==j&&I!==P?Z(D&&I?(r=E,o=(a=e)[0]-r[0],i=(a[1]-r[1])/o,0<(r[1]*a[0]-a[1]*r[0])/o?[0<i?B:q,V]:[0<i?q:B,H]):[D||j,I||P]):D&&I&&Z([D,I])),Z([j,P])):D-j&&I-P&&Z([j||D,P||I]),E=e,D=j,I=P}else E&&W(N(E,e)[0]),S[L++]=e;var r,a,o,i}for("linear"===k||"spline"===k?N=function(e,t){for(var n=[],r=0,a=0;a<4;a++){var o=U[a],i=K(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);i&&(!r||1<Math.abs(i.x-n[0][0])||1<Math.abs(i.y-n[0][1]))&&(i=[i.x,i.y],r&&O(i,e)<O(n[0],e)?n.unshift(i):n.push(i),r++)}return n}:"hv"===k||"vh"===k?N=function(e,t){var n=[],r=G(e),a=G(t);return r&&a&&Y(r,a)||(r&&n.push(r),a&&n.push(a)),n}:"hvh"===k?N=X(0,B,q):"vhv"===k&&(N=X(1,H,V)),t=0;t<a.length;t++)if(n=C(t)){for(L=0,E=null,J(n),t++;t<a.length;t++){if(!(o=C(t))){if(_)continue;break}if(M){if(!((d=O(o,n))<z(o)*A)){for(i=n,f=d,h=g=y=0,l=!(c=[(o[0]-n[0])/d,(o[1]-n[1])/d]),r=o,t++;t<a.length;t++){if(!(s=C(t))){if(_)continue;break}if(m=(u=[s[0]-n[0],s[1]-n[1]])[0]*c[1]-u[1]*c[0],g=Math.min(g,m),(y=Math.max(y,m))-g>z(s))break;r=s,f<(p=u[0]*c[0]+u[1]*c[1])?(f=p,o=s,l=!1):p<h&&(h=p,i=s,l=!0)}if(l?(J(o),r!==i&&J(i)):(i!==n&&J(i),r!==o&&J(o)),J(r),t>=a.length||!s)break;J(s),n=s}}else J(o)}E&&Z([D||E[0],I||E[1]]),T.push(S.slice(0,L))}return T}},{"../../constants/numerical":137,"../../lib":156,"./constants":300}],309:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],310:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r,a,o=null;for(a=0;a<n.length;++a)!0===(r=n[a][0].trace).visible?(r._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(r.fill)&&(r._prevtrace=o)&&(o._nexttrace=r),o=r):r._prevtrace=r._nexttrace=null}},{}],311:[function(e,t,n){"use strict";var o=e("fast-isnumeric");t.exports=function(e){var t=e.marker,n=t.sizeref||1,r=t.sizemin||0,a="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=a(e/2);return o(t)&&0<t?Math.max(t,r):0}}},{"fast-isnumeric":4}],312:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/has_colorscale"),u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,a,o){var i=d.isBubble(e),s=(e.line||{}).color;(o=o||{},s&&(n=s),a("marker.symbol"),a("marker.opacity",i?.7:1),a("marker.size"),a("marker.color",n),c(e,"marker")&&u(e,t,r,a,{prefix:"marker.",cLetter:"c"}),o.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),o.noLine||(a("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:i?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",i?1:0)),i&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),o.gradient)&&("none"!==a("marker.gradient.type")&&a("marker.gradient.color"))}},{"../../components/color":35,"../../components/colorscale/defaults":45,"../../components/colorscale/has_colorscale":49,"./subtypes":316}],313:[function(t,n,e){(function(e){"use strict";var H="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,V=t("../../registry"),U=t("../../lib"),G=t("../../components/drawing"),Y=t("./subtypes"),X=t("./line_points"),p=t("./link_traces"),Z=t("../../lib/polygon").tester;function g(f,e,h,a,t,n,r){var o,i;!function(e,r,t,n,a){var o=t.xaxis,i=t.yaxis,s=H.extent(U.simpleMap(o.range,o.r2c)),l=H.extent(U.simpleMap(i.range,i.r2c)),c=n[0].trace;if(!Y.hasMarkers(c))return;var u=c.marker.maxdisplayed;if(0===u)return;var d=n.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]}),f=Math.ceil(d.length/u),h=0;a.forEach(function(e,t){var n=e[0].trace;Y.hasMarkers(n)&&0<n.marker.maxdisplayed&&t<r&&h++});var p=Math.round(h*f/3+Math.floor(h/3)*f/7.1);n.forEach(function(e){delete e.vis}),d.forEach(function(e,t){0===Math.round((t+p)%f)&&(e.vis=!0)})}(0,e,h,a,t);var p=!!r&&0<r.duration;function g(e){return p?e.transition():e}var y=h.xaxis,m=h.yaxis,s=a[0].trace,l=s.line,c=H.select(n);if(V.getComponentMethod("errorbars","plot")(c,h,r),!0===s.visible){var u,d;g(c).style("opacity",s.opacity);var v=s.fill.charAt(s.fill.length-1);"x"!==v&&"y"!==v&&(v=""),a[0].node3=c;var x="",b=[],_=s._prevtrace;_&&(x=_._prevRevpath||"",d=_._nextFill,b=_._polygons);var w,k,M,T,A,S,L,C,z,O="",j="",P=[],D=U.noop;if(u=s._ownFill,Y.hasLines(s)||"none"!==s.fill){for(d&&d.datum(a),-1!==["hv","vh","hvh","vhv"].indexOf(l.shape)?(M=G.steps(l.shape),T=G.steps(l.shape.split("").reverse().join(""))):M=T="spline"===l.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?G.smoothclosed(e.slice(1),l.smoothing):G.smoothopen(e,l.smoothing)}:function(e){return"M"+e.join("L")},A=function(e){return T(e.reverse())},P=X(a,{xaxis:y,yaxis:m,connectGaps:s.connectgaps,baseTolerance:Math.max(l.width||1,3)/4,shape:l.shape,simplify:l.simplify}),z=s._polygons=new Array(P.length),i=0;i<P.length;i++)s._polygons[i]=Z(P[i]);P.length&&(S=P[0][0],C=(L=P[P.length-1])[L.length-1]),D=function(r){return function(e){if(w=M(e),k=A(e),O?v?(O+="L"+w.substr(1),j=k+"L"+j.substr(1)):(O+="Z"+w,j=k+"Z"+j):(O=w,j=k),Y.hasLines(s)&&1<e.length){var t=H.select(this);if(t.datum(a),r)g(t.style("opacity",0).attr("d",w).call(G.lineGroupStyle)).style("opacity",1);else{var n=g(t);n.attr("d",w),G.singleLineStyle(a,n)}}}}}var I=c.selectAll(".js-line").data(P);g(I.exit()).style("opacity",0).remove(),I.each(D(!1)),I.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(G.lineGroupStyle).each(D(!0)),G.setClipUrl(I,h.layerClipId),P.length?(u?S&&C&&(v?("y"===v?S[1]=C[1]=m.c2p(0,!0):"x"===v&&(S[0]=C[0]=y.c2p(0,!0)),g(u).attr("d","M"+C+"L"+S+"L"+O.substr(1)).call(G.singleFillStyle)):g(u).attr("d",O+"Z").call(G.singleFillStyle)):d&&("tonext"===s.fill.substr(0,6)&&O&&x?("tonext"===s.fill?g(d).attr("d",O+"Z"+x+"Z").call(G.singleFillStyle):g(d).attr("d",O+"L"+x.substr(1)+"Z").call(G.singleFillStyle),s._polygons=s._polygons.concat(b)):(R(d),s._polygons=null)),s._prevRevpath=j,s._prevPolygons=z):(u?R(u):d&&R(d),s._polygons=s._prevRevpath=s._prevPolygons=null);var E=c.selectAll(".points");o=E.data([a]),E.each(q),o.enter().append("g").classed("points",!0).each(q),o.exit().remove(),o.each(function(e){var t=!1===e[0].trace.cliponaxis;G.setClipUrl(H.select(this),t?null:h.layerClipId)})}function R(e){g(e).attr("d","M0,0Z")}function N(e){return e.filter(function(e){return e.vis})}function F(e){return e.id}function B(){return!1}function q(e){var t,r=e[0].trace,n=H.select(this),a=Y.hasMarkers(r),o=Y.hasText(r),i=function(e){if(e.ids)return F}(r),s=B,l=B;a&&(s=r.marker.maxdisplayed||r._needsCull?N:U.identity),o&&(l=r.marker.maxdisplayed||r._needsCull?N:U.identity);var c=(t=n.selectAll("path.point").data(s,i)).enter().append("path").classed("point",!0);p&&c.call(G.pointStyle,r,f).call(G.translatePoints,y,m).style("opacity",0).transition().style("opacity",1);var u=a&&G.tryColorscale(r.marker,""),d=a&&G.tryColorscale(r.marker,"line");t.order(),t.each(function(e){var t=H.select(this),n=g(t);G.translatePoint(e,n,y,m)?(G.singlePointStyle(e,n,r,u,d,f),h.layerClipId&&G.hideOutsideRangePoint(e,n,y,m,r.xcalendar,r.ycalendar),r.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),p?t.exit().transition().style("opacity",0).remove():t.exit().remove(),(t=n.selectAll("g").data(l,i)).enter().append("g").classed("textpoint",!0).append("text"),t.order(),t.each(function(e){var t=H.select(this),n=g(t.select("text"));G.translatePoint(e,n,y,m)?h.layerClipId&&G.hideOutsideRangePoint(e,t,y,m,r.xcalendar,r.ycalendar):t.remove()}),t.selectAll("text").call(G.textPointStyle,r,f).each(function(e){var t=y.c2p(e.x),n=m.c2p(e.y);H.select(this).selectAll("tspan.line").each(function(){g(H.select(this)).attr({x:t,y:n})})}),t.exit().remove()}}n.exports=function(n,r,a,o,e){var t,i,s,l,c,u,d=r.plot.select("g.scatterlayer"),f=!o,h=!!o&&0<o.duration;for((s=d.selectAll("g.trace").data(a,function(e){return e[0].trace.uid})).enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),p(n,r,a),c=r,d.selectAll("g.trace").each(function(e){var t=H.select(this);if((u=e[0].trace)._nexttrace){if(u._nextFill=t.select(".js-fill.js-tonext"),!u._nextFill.size()){var n=":first-child";t.select(".js-fill.js-tozero").size()&&(n+=" + *"),u._nextFill=t.insert("path",n).attr("class","js-fill js-tonext")}}else t.selectAll(".js-fill.js-tonext").remove(),u._nextFill=null;u.fill&&("tozero"===u.fill.substr(0,6)||"toself"===u.fill||"to"===u.fill.substr(0,2)&&!u._prevtrace)?(u._ownFill=t.select(".js-fill.js-tozero"),u._ownFill.size()||(u._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero"))):(t.selectAll(".js-fill.js-tozero").remove(),u._ownFill=null),t.selectAll(".js-fill").call(G.setClipUrl,c.layerClipId)}),t=0,i={};t<a.length;t++)i[a[t][0].trace.uid]=t;(d.selectAll("g.trace").sort(function(e,t){var n=i[e[0].trace.uid];return i[t[0].trace.uid]<n?1:-1}),h)?(e&&(l=e()),H.transition().duration(o.duration).ease(o.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){d.selectAll("g.trace").each(function(e,t){g(n,t,r,e,a,this,o)})})):d.selectAll("g.trace").each(function(e,t){g(n,t,r,e,a,this,o)});f&&s.exit().remove(),d.selectAll("path:not([d])").remove()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/drawing":60,"../../lib":156,"../../lib/polygon":168,"../../registry":248,"./line_points":308,"./link_traces":310,"./subtypes":316}],314:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,a,o,i=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=i[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++)r=i[n],a=s.c2p(r.x),o=l.c2p(r.y),t.contains([a,o])?(c.push({pointNumber:n,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":316}],315:[function(t,n,e){(function(e){"use strict";var r="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,o=t("../../components/drawing"),a=t("../../registry");function i(e,t,n){var r=e.selectAll("path.point"),a=e.selectAll("text");o.pointStyle(r,t,n),o.textPointStyle(a,t,n),o.selectedPointStyle(r,t),o.selectedTextStyle(a,t)}n.exports={style:function(t,e){var n=e?e[0].node3:r.select(t).selectAll("g.trace.scatter");n.style("opacity",function(e){return e[0].trace.opacity}),n.selectAll("g.points").each(function(e){i(r.select(this),e.trace||e[0].trace,t)}),n.selectAll("g.trace path.js-line").call(o.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(o.fillGroupStyle),a.getComponentMethod("errorbars","style")(n)},stylePoints:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/drawing":60,"../../registry":248}],316:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("markers")},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":156}],317:[function(e,t,n){"use strict";var o=e("../../lib");t.exports=function(e,t,n,r,a){a=a||{},r("textposition"),o.coerceFont(r,"textfont",n.font),a.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":156}],318:[function(e,t,n){"use strict";var s=e("../../registry");t.exports=function(e,t,n,r){var a,o=r("x"),i=r("y");if(s.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),o)i?a=Math.min(o.length,i.length):(a=o.length,r("y0"),r("dy"));else{if(!i)return 0;a=t.y.length,r("x0"),r("dx")}return t._length=a}},{"../../registry":248}],319:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),o=e("../../components/colorscale/color_attributes"),i=e("../../components/drawing/attributes").dash,s=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,c=r.marker,u=r.line,d=c.line;t.exports=l({lon:{valType:"data_array",description:"Sets the longitude coordinates (in degrees East)."},lat:{valType:"data_array",description:"Sets the latitude coordinates (in degrees North)."},locations:{valType:"data_array",description:["Sets the coordinates via location IDs or names.","Coordinates correspond to the centroid of each location given.","See `locationmode` for more info."].join(" ")},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],role:"info",dflt:"ISO-3",description:["Determines the set of locations used to match entries in `locations`","to regions on the map."].join(" ")},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{description:["Sets text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),hovertext:s({},r.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),textfont:r.textfont,textposition:r.textposition,line:{color:u.color,width:u.width,dash:i},connectgaps:r.connectgaps,marker:s({symbol:c.symbol,opacity:c.opacity,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,showscale:c.showscale,colorbar:c.colorbar,line:s({width:d.width},o("marker.line")),gradient:c.gradient},o("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none",role:"style",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape."].join(" ")},fillcolor:r.fillcolor,selected:r.selected,unselected:r.unselected,hoverinfo:s({},a.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested")},{"../../components/colorscale/color_attributes":43,"../../components/drawing/attributes":59,"../../lib/extend":148,"../../plot_api/edit_types":184,"../../plots/attributes":196,"../scatter/attributes":294}],320:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../constants/numerical").BADNUM,f=e("../scatter/colorscale_calc"),h=e("../scatter/arrays_to_calcdata"),p=e("../scatter/calc_selection"),g=e("../../lib")._;t.exports=function(e,t){for(var n=Array.isArray(t.locations),r=n?t.locations.length:t._length,a=new Array(r),o=0;o<r;o++){var i=a[o]={};if(n){var s=t.locations[o];i.loc="string"==typeof s?s:null}else{var l=t.lon[o],c=t.lat[o];u(l)&&u(c)?i.lonlat=[+l,+c]:i.lonlat=[d,d]}}return h(a,t),f(t),p(a,t),r&&(a[0].t={labels:{lat:g(e,"lat:")+" ",lon:g(e,"lon:")+" "}}),a}},{"../../constants/numerical":137,"../../lib":156,"../scatter/arrays_to_calcdata":293,"../scatter/calc_selection":296,"../scatter/colorscale_calc":299,"fast-isnumeric":4}],321:[function(e,t,n){"use strict";var o=e("../../lib"),i=e("../scatter/subtypes"),s=e("../scatter/marker_defaults"),l=e("../scatter/line_defaults"),c=e("../scatter/text_defaults"),u=e("../scatter/fillcolor_defaults"),d=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return o.coerce(n,r,d,e,t)}!function(e,t,n){var r,a,o=0,i=n("locations");if(i)return n("locationmode"),o=i.length;return r=n("lon")||[],a=n("lat")||[],o=Math.min(r.length,a.length),t._length=o}(0,r,a)?r.visible=!1:(a("text"),a("hovertext"),a("mode"),i.hasLines(r)&&(l(n,r,e,t,a),a("connectgaps")),i.hasMarkers(r)&&s(n,r,e,t,a,{gradient:!0}),i.hasText(r)&&c(n,r,t,a),a("fill"),"none"!==r.fill&&u(n,r,e,a))}},{"../../lib":156,"../scatter/fillcolor_defaults":303,"../scatter/line_defaults":307,"../scatter/marker_defaults":312,"../scatter/subtypes":316,"../scatter/text_defaults":317,"./attributes":319}],322:[function(e,t,n){"use strict";t.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null,e}},{}],323:[function(e,t,n){"use strict";var p=e("../../components/fx"),g=e("../../plots/cartesian/axes"),y=e("../../constants/numerical").BADNUM,m=e("../scatter/get_trace_color"),v=e("../scatter/fill_hover_text"),x=e("./attributes");t.exports=function(e,s,l){var t=e.cd,n=t[0].trace,r=e.xa,a=e.ya,o=e.subplot,c=o.projection.isLonLatOverEdges,u=o.project;if(p.getClosest(t,function(e){var t=e.lonlat;if(t[0]===y)return 1/0;if(c(t))return 1/0;var n=u(t),r=u([s,l]),a=Math.abs(n[0]-r[0]),o=Math.abs(n[1]-r[1]),i=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(a*a+o*o)-i,1-3/i)},e),!1!==e.index){var i=t[e.index],d=i.lonlat,f=[r.c2p(d),a.c2p(d)],h=i.mrc||1;return e.x0=f[0]-h,e.x1=f[0]+h,e.y0=f[1]-h,e.y1=f[1]+h,e.loc=i.loc,e.lon=d[0],e.lat=d[1],e.color=m(n,i),e.extraText=function(e,t,n,r){var a=t.hi||e.hoverinfo,o="all"===a?x.hoverinfo.flags:a.split("+"),i=-1!==o.indexOf("location")&&Array.isArray(e.locations),s=-1!==o.indexOf("lon"),l=-1!==o.indexOf("lat"),c=-1!==o.indexOf("text"),u=[];function d(e){return g.tickText(n,n.c2l(e),"hover").text+"°"}i?u.push(t.loc):s&&l?u.push("("+d(t.lonlat[0])+", "+d(t.lonlat[1])+")"):s?u.push(r.lon+d(t.lonlat[0])):l&&u.push(r.lat+d(t.lonlat[1]));c&&v(t,e,u);return u.join("<br>")}(n,i,o.mockAxis,t[0].t.labels),[e]}}},{"../../components/fx":77,"../../constants/numerical":137,"../../plots/cartesian/axes":199,"../scatter/fill_hover_text":302,"../scatter/get_trace_color":304,"./attributes":319}],324:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="scattergeo",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","symbols","markerColorscale","showLegend","scatter-like"],r.meta={hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")},t.exports=r},{"../../plots/geo":230,"../scatter/colorbar":298,"./attributes":319,"./calc":320,"./defaults":321,"./event_data":322,"./hover":323,"./plot":325,"./select":326,"./style":327}],325:[function(t,n,e){(function(e){"use strict";var s="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,l=t("../../lib"),c=t("../../constants/numerical").BADNUM,u=t("../../lib/topojson_utils").getTopojsonFeatures,d=t("../../lib/geo_location_utils").locationToFeature,f=t("../../lib/geojson_utils"),h=t("../scatter/subtypes"),p=t("./style");function a(e,t){var n=e[0].trace;if(Array.isArray(n.locations))for(var r=u(n,t),a=n.locationmode,o=0;o<e.length;o++){var i=e[o],s=d(a,i.loc,r);i.lonlat=s?s.properties.ct:[c,c]}}n.exports=function(o,e,t){for(var n=0;n<t.length;n++)a(t[n],e.topojson);function i(e,t){e.lonlat[0]===c&&s.select(t).remove()}var r=e.layers.frontplot.select(".scatterlayer").selectAll("g.trace.scattergeo").data(t,function(e){return e[0].trace.uid});r.enter().append("g").attr("class","trace scattergeo"),r.exit().remove(),r.selectAll("*").remove(),r.each(function(e){var t=e[0].node3=s.select(this),n=e[0].trace;if(h.hasLines(n)||"none"!==n.fill){var r=f.calcTraceToLineCoords(e),a="none"!==n.fill?f.makePolygon(r):f.makeLine(r);t.selectAll("path.js-line").data([{geojson:a,trace:n}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}h.hasMarkers(n)&&t.selectAll("path.point").data(l.identity).enter().append("path").classed("point",!0).each(function(e){i(e,this)}),h.hasText(n)&&t.selectAll("g").data(l.identity).enter().append("g").append("text").each(function(e){i(e,this)}),p(o,e)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../constants/numerical":137,"../../lib":156,"../../lib/geo_location_utils":151,"../../lib/geojson_utils":152,"../../lib/topojson_utils":180,"../scatter/subtypes":316,"./style":327}],326:[function(e,t,n){"use strict";var f=e("../scatter/subtypes");t.exports=function(e,t){var n,r,a,o,i,s=e.cd,l=e.xaxis,c=e.yaxis,u=[],d=s[0].trace;if(!f.hasMarkers(d)&&!f.hasText(d))return[];if(!1===t)for(i=0;i<s.length;i++)s[i].selected=0;else for(i=0;i<s.length;i++)r=(n=s[i]).lonlat,a=l.c2p(r),o=c.c2p(r),t.contains([a,o])?(u.push({pointNumber:i,lon:r[0],lat:r[1]}),n.selected=1):n.selected=0;return u}},{"../scatter/subtypes":316}],327:[function(t,n,e){(function(e){"use strict";var i="undefined"!=typeof window?window.d3:void 0!==e?e.d3:null,s=t("../../components/drawing"),l=t("../../components/color"),c=t("../scatter/style").stylePoints;n.exports=function(e,t){var n,r,a,o;t&&(n=e,a=(r=t)[0].trace,(o=r[0].node3).style("opacity",r[0].trace.opacity),c(o,a,n),o.selectAll("path.js-line").style("fill","none").each(function(e){var t=i.select(this),n=e.trace,r=n.line||{};t.call(l.stroke,r.color).call(s.dashLine,r.dash||"",r.width||0),"none"!==n.fill&&t.call(l.fill,n.fillcolor)}))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/color":35,"../../components/drawing":60,"../scatter/style":315}],328:[function(e,t,n){var i,r=e("./lib/build-log"),a=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=a();function f(e,t,n){var r=i.segments(e),a=i.segments(t),o=n(i.combine(r,a));return i.polygon(o)}i={buildLog:function(e){return!0===e?u=r():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(i,e)},polygonToGeoJSON:function(e){return c.fromPolygon(i,d,e)},union:function(e,t){return f(e,t,i.selectUnion)},intersect:function(e,t){return f(e,t,i.selectIntersect)},difference:function(e,t){return f(e,t,i.selectDifference)},differenceRev:function(e,t){return f(e,t,i.selectDifferenceRev)},xor:function(e,t){return f(e,t,i.selectXor)}},"object"==typeof window&&(window.PolyBool=i),t.exports=i},{"./lib/build-log":329,"./lib/epsilon":330,"./lib/geojson":331,"./lib/intersecter":332,"./lib/segment-chainer":334,"./lib/segment-selector":335}],329:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),r("log",{txt:e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],330:[function(e,t,n){t.exports=function(p){"number"!=typeof p&&(p=1e-10);var n={epsilon:function(e){return"number"==typeof e&&(p=e),p},pointAboveOrOnLine:function(e,t,n){var r=t[0],a=t[1],o=n[0],i=n[1],s=e[0],l=e[1];return-p<=(o-r)*(l-a)-(i-a)*(s-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],a=n[0]-t[0],o=e[0]-t[0],i=n[1]-t[1],s=o*a+r*i;return!(s<p||-p<s-(a*a+i*i))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<p},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<p},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],a=e[1]-t[1],o=t[0]-n[0],i=t[1]-n[1];return Math.abs(r*i-o*a)<p},linesIntersect:function(e,t,n,r){var a=t[0]-e[0],o=t[1]-e[1],i=r[0]-n[0],s=r[1]-n[1],l=a*s-o*i;if(Math.abs(l)<p)return!1;var c=e[0]-n[0],u=e[1]-n[1],d=(i*u-s*c)/l,f=(a*u-o*c)/l,h={alongA:0,alongB:0,pt:[e[0]+d*a,e[1]+d*o]};return h.alongA=d<=-p?-2:d<p?-1:d-1<=-p?0:d-1<p?1:2,h.alongB=f<=-p?-2:f<p?-1:f-1<=-p?0:f-1<p?1:2,h},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],a=t[t.length-1][0],o=t[t.length-1][1],i=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];p<c-r!=p<o-r&&p<(a-l)*(r-c)/(o-c)+l-n&&(i=!i),a=l,o=c}return i}};return n}},{}],331:[function(e,t,n){var r={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:!1,regions:[]});function t(e){var t=e.slice(0,e.length-1);return a.segments({inverted:!1,regions:[t]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=a.selectDifference(a.combine(n,t(e[r])));return n}if("Polygon"===e.type)return a.polygon(t(e.coordinates));if("MultiPolygon"===e.type){for(var n=a.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=a.selectUnion(a.combine(n,t(e.coordinates[r])));return a.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function i(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=i(null);function s(e,t){for(var n=0;n<e.children.length;n++){if(o(t,(a=e.children[n]).region))return void s(a,t)}var r=i(t);for(n=0;n<e.children.length;n++){var a;o((a=e.children[n]).region,t)&&(r.children.push(a),e.children.splice(n,1),n--)}e.children.push(r)}for(var a=0;a<t.regions.length;a++){var l=t.regions[a];l.length<3||s(r,l)}function c(e,t){for(var n=0,r=e[e.length-1][0],a=e[e.length-1][1],o=[],i=0;i<e.length;i++){var s=e[i][0],l=e[i][1];o.push([s,l]),n+=l*r-s*a,r=s,a=l}return n<0!==t&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var u=[];function d(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(f(e.children[n]))}function f(e){for(var t=0;t<e.children.length;t++)d(e.children[t]);return c(e.region,!0)}for(a=0;a<r.children.length;a++)d(r.children[a]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};t.exports=r},{}],332:[function(e,t,n){var _=e("./linked-list");t.exports=function(y,m,v){function o(e,t,n){return{id:v?v.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var x=_.create();function u(l,c){x.insertBefore(l,function(e){var t,n,r,a,o,i,s;return t=l.isStart,n=l.pt,r=c,a=e.isStart,o=e.pt,i=e.other.pt,(0!==(s=m.pointsCompare(n,o))?s:m.pointsSame(r,i)?0:t!==a?t?1:-1:m.pointAboveOrOnLine(r,a?o:i,a?i:o)?1:-1)<0})}function s(e,t){var n,r,a,o,i,s,l,c=(n=e,r=t,u(a=_.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),a);return o=c,i=e,s=t,l=_.node({isStart:!1,pt:i.end,seg:i,primary:s,other:o,status:null}),u(o.other=l,o.pt),c}function b(e,t){var n,r,a=o(t,e.seg.end,e.seg);return n=e,r=t,v&&v.segmentChop(n.seg,r),n.other.remove(),n.seg.end=r,n.other.pt=r,u(n.other,n.pt),s(a,e.primary)}function a(e,t){var n=_.create();function r(s){return n.findTransition(function(e){var t,n,r,a,o,i;return 0<(t=s,n=e.ev,r=t.seg.start,a=t.seg.end,o=n.seg.start,i=n.seg.end,m.pointsCollinear(r,o,i)?m.pointsCollinear(a,o,i)?1:m.pointAboveOrOnLine(a,o,i)?1:-1:m.pointAboveOrOnLine(r,o,i)?1:-1)})}function a(e,t){var n=e.seg,r=t.seg,a=n.start,o=n.end,i=r.start,s=r.end;v&&v.checkIntersection(n,r);var l=m.linesIntersect(a,o,i,s);if(!1===l){if(!m.pointsCollinear(a,o,i))return!1;if(m.pointsSame(a,s)||m.pointsSame(o,i))return!1;var c=m.pointsSame(a,i),u=m.pointsSame(o,s);if(c&&u)return t;var d=!c&&m.pointBetween(a,i,s),f=!u&&m.pointBetween(o,i,s);if(c)return f?b(t,o):b(e,s),t;d&&(u||(f?b(t,o):b(e,s)),b(t,a))}else 0===l.alongA&&(-1===l.alongB?b(e,i):0===l.alongB?b(e,l.pt):1===l.alongB&&b(e,s)),0===l.alongB&&(-1===l.alongA?b(t,a):0===l.alongA?b(t,l.pt):1===l.alongA&&b(t,o));return!1}for(var o=[];!x.isEmpty();){var i=x.getHead();if(v&&v.vert(i.pt[0]),i.isStart){v&&v.segmentNew(i.seg,i.primary);var s=r(i),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;function u(){if(l){var e=a(i,l);if(e)return e}return!!c&&a(i,c)}v&&v.tempStatus(i.seg,!!l&&l.seg,!!c&&c.seg);var d,f,h=u();if(h)y?(f=null===i.seg.myFill.below||i.seg.myFill.above!==i.seg.myFill.below)&&(h.seg.myFill.above=!h.seg.myFill.above):h.seg.otherFill=i.seg.myFill,v&&v.segmentUpdate(h.seg),i.other.remove(),i.remove();if(x.getHead()!==i){v&&v.rewind(i.seg);continue}y?(f=null===i.seg.myFill.below||i.seg.myFill.above!==i.seg.myFill.below,i.seg.myFill.below=c?c.seg.myFill.above:e,i.seg.myFill.above=f?!i.seg.myFill.below:i.seg.myFill.below):null===i.seg.otherFill&&(d=c?i.primary===c.primary?c.seg.otherFill.above:c.seg.myFill.above:i.primary?t:e,i.seg.otherFill={above:d,below:d}),v&&v.status(i.seg,!!l&&l.seg,!!c&&c.seg),i.other.status=s.insert(_.node({ev:i}))}else{var p=i.status;if(null===p)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(n.exists(p.prev)&&n.exists(p.next)&&a(p.prev.ev,p.next.ev),v&&v.statusRemove(p.ev.seg),p.remove(),!i.primary){var g=i.seg.myFill;i.seg.myFill=i.seg.otherFill,i.seg.otherFill=g}o.push(i.seg)}x.getHead().remove()}return v&&v.done(),o}return y?{addRegion:function(e){for(var t,n,r,a=e[e.length-1],o=0;o<e.length;o++){t=a,a=e[o];var i=m.pointsCompare(t,a);0!==i&&s((n=i<0?t:a,r=i<0?a:t,{id:v?v.segmentId():-1,start:n,end:r,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return a(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){s(o(e.start,e.end,e),!0)}),n.forEach(function(e){s(o(e.start,e.end,e),!1)}),a(t,r)}}}},{"./linked-list":333}],333:[function(e,t,n){t.exports={create:function(){var a={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==a.root},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(e,t){for(var n=a.root,r=a.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=a.root,n=a.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===a.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return a},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],334:[function(e,t,n){t.exports=function(e,k,M){var T=[],A=[];return e.forEach(function(e){var t=e.start,n=e.end;if(k.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(e);for(var r={index:0,matches_head:!1,matches_pt1:!1},a={index:0,matches_head:!1,matches_pt1:!1},o=r,i=0;i<T.length;i++){var s=(f=T[i])[0],l=(f[1],f[f.length-1]);if(f[f.length-2],k.pointsSame(s,t)){if(b(i,!0,!0))break}else if(k.pointsSame(s,n)){if(b(i,!0,!1))break}else if(k.pointsSame(l,t)){if(b(i,!1,!0))break}else if(k.pointsSame(l,n)&&b(i,!1,!1))break}if(o===r)return T.push([t,n]),void(M&&M.chainNew(t,n));if(o===a){M&&M.chainMatch(r.index);var c=r.index,u=r.matches_pt1?n:t,d=r.matches_head,f=T[c],h=d?f[0]:f[f.length-1],p=d?f[1]:f[f.length-2],g=d?f[f.length-1]:f[0],y=d?f[f.length-2]:f[1];return k.pointsCollinear(p,h,u)&&(d?(M&&M.chainRemoveHead(r.index,u),f.shift()):(M&&M.chainRemoveTail(r.index,u),f.pop()),h=p),k.pointsSame(g,u)?(T.splice(c,1),k.pointsCollinear(y,g,h)&&(d?(M&&M.chainRemoveTail(r.index,h),f.pop()):(M&&M.chainRemoveHead(r.index,h),f.shift())),M&&M.chainClose(r.index),void A.push(f)):void(d?(M&&M.chainAddHead(r.index,u),f.unshift(u)):(M&&M.chainAddTail(r.index,u),f.push(u)))}var m=r.index,v=a.index;M&&M.chainConnect(m,v);var x=T[m].length<T[v].length;r.matches_head?a.matches_head?x?(_(m),w(m,v)):(_(v),w(v,m)):w(v,m):a.matches_head?w(m,v):x?(_(m),w(v,m)):(_(v),w(m,v))}function b(e,t,n){return o.index=e,o.matches_head=t,o.matches_pt1=n,o===r?(o=a,!1):!(o=null)}function _(e){M&&M.chainReverse(e),T[e].reverse()}function w(e,t){var n=T[e],r=T[t],a=n[n.length-1],o=n[n.length-2],i=r[0],s=r[1];k.pointsCollinear(o,a,i)&&(M&&M.chainRemoveTail(e,a),n.pop(),a=o),k.pointsCollinear(a,i,s)&&(M&&M.chainRemoveHead(t,i),r.shift()),M&&M.chainJoin(e,t),T[e]=n.concat(r),T.splice(t,1)}}),A}},{}],335:[function(e,t,n){function r(e,n,r){var a=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&a.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(a),a}var a={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],336:[function(e,t,n){var r,a,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var c,u=[],d=!1,f=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!d){var e=l(h);d=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,d=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||d||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],337:[function(e,q,t){!function(d){var f=/^\s+/,h=/\s+$/,r=0,i=d.round,p=d.min,g=d.max,e=d.random;function u(e,t){if(t=t||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,o=null,i=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(f,"").replace(h,"").toLowerCase();var t,n=!1;if(A[e])e=A[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{r:O(t[1]),g:O(t[2]),b:O(t[3]),a:I(t[4]),format:n?"name":"hex8"};if(t=F.hex6.exec(e))return{r:O(t[1]),g:O(t[2]),b:O(t[3]),format:n?"name":"hex"};if(t=F.hex4.exec(e))return{r:O(t[1]+""+t[1]),g:O(t[2]+""+t[2]),b:O(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=F.hex3.exec(e))return{r:O(t[1]+""+t[1]),g:O(t[2]+""+t[2]),b:O(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(B(e.r)&&B(e.g)&&B(e.b)?(l=e.r,c=e.g,u=e.b,t={r:255*C(l,255),g:255*C(c,255),b:255*C(u,255)},i=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):B(e.h)&&B(e.s)&&B(e.v)?(r=P(e.s),a=P(e.v),t=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=d.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),l=r%6;return{r:255*[n,i,o,o,s,n][l],g:255*[s,n,n,i,o,o][l],b:255*[o,o,s,n,n,i][l]}}(e.h,r,a),i=!0,s="hsv"):B(e.h)&&B(e.s)&&B(e.l)&&(r=P(e.s),o=P(e.l),t=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=i(l,s,e+1/3),a=i(l,s,e),o=i(l,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(e.h,r,o),i=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));var l,c,u;return n=L(n),{ok:i,format:e.format||s,r:p(255,g(t.r,0)),g:p(255,g(t.g,0)),b:p(255,g(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=i(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=n.ok,this._tc_id=r++}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=g(e,t,n),i=p(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var l=o-i;switch(a=.5<s?l/(2-o-i):l/(o+i),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=g(e,t,n),i=p(e,t,n),s=o,l=o-i;if(a=0===o?0:l/o,o==i)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:a,v:s}}function t(e,t,n,r){var a=[j(i(e).toString(16)),j(i(t).toString(16)),j(i(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[j(D(r)),j(i(e).toString(16)),j(i(t).toString(16)),j(i(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s-=t/100,n.s=z(n.s),u(n)}function l(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s+=t/100,n.s=z(n.s),u(n)}function c(e){return u(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l+=t/100,n.l=z(n.l),u(n)}function m(e,t){t=0===t?0:t||10;var n=u(e).toRgb();return n.r=g(0,p(255,n.r-i(-t/100*255))),n.g=g(0,p(255,n.g-i(-t/100*255))),n.b=g(0,p(255,n.b-i(-t/100*255))),u(n)}function v(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l-=t/100,n.l=z(n.l),u(n)}function x(e,t){var n=u(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,u(n)}function b(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)}function _(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function M(e,t,n){t=t||6,n=n||30;var r=u(e).toHsl(),a=360/n,o=[u(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,o.push(u(r));return o}function T(e,t){t=t||6;for(var n=u(e).toHsv(),r=n.h,a=n.s,o=n.v,i=[],s=1/t;t--;)i.push(u({h:r,s:a,v:o})),o=(o+s)%1;return i}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:d.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:d.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:d.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=L(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[j(i(e).toString(16)),j(i(t).toString(16)),j(i(n).toString(16)),j(D(r))];if(a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*C(this._r,255))+"%",g:i(100*C(this._g,255))+"%",b:i(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*C(this._r,255))+"%, "+i(100*C(this._g,255))+"%, "+i(100*C(this._b,255))+"%)":"rgba("+i(100*C(this._r,255))+"%, "+i(100*C(this._g,255))+"%, "+i(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var a=u(e);n="#"+s(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},u.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:P(e[r]));e=n}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:e(),g:e(),b:e()})},u.mix=function(e,t,n){n=0===n?0:n||50;var r=u(e).toRgb(),a=u(t).toRgb(),o=n/100;return u({r:(a.r-r.r)*o+r.r,g:(a.g-r.g)*o+r.g,b:(a.b-r.b)*o+r.b,a:(a.a-r.a)*o+r.a})},u.readability=function(e,t){var n=u(e),r=u(t);return(d.max(n.getLuminance(),r.getLuminance())+.05)/(d.min(n.getLuminance(),r.getLuminance())+.05)},u.isReadable=function(e,t,n){var r,a,o=u.readability(e,t);switch(a=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":a=4.5<=o;break;case"AAlarge":a=3<=o;break;case"AAAsmall":a=7<=o}return a},u.mostReadable=function(e,t,n){var r,a,o,i,s=null,l=0;a=(n=n||{}).includeFallbackColors,o=n.level,i=n.size;for(var c=0;c<t.length;c++)l<(r=u.readability(e,t[c]))&&(l=r,s=u(t[c]));return u.isReadable(e,s,{level:o,size:i})||!a?s:(n.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],n))};var A=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(A);function L(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function C(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var r,a="string"==typeof(r=e)&&-1!=r.indexOf("%");return e=p(t,g(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),d.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function z(e){return p(1,g(0,e))}function O(e){return parseInt(e,16)}function j(e){return 1==e.length?"0"+e:""+e}function P(e){return e<=1&&(e=100*e+"%"),e}function D(e){return d.round(255*parseFloat(e)).toString(16)}function I(e){return O(e)/255}var E,R,N,F=(R="[\\s|\\(]+("+(E="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",N="[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",{CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(e){return!!F.CSS_UNIT.exec(e)}void 0!==q&&q.exports?q.exports=u:window.tinycolor=u}(Math)},{}],338:[function(e,t,n){var r;r=this,function(e){"use strict";var u=function(e){return e},f=function(e){if(null==(t=e.transform))return u;var t,n,r,a=t.scale[0],o=t.scale[1],i=t.translate[0],s=t.translate[1];return function(e,t){return t||(n=r=0),e[0]=(n+=e[0])*a+i,e[1]=(r+=e[1])*o+s,e}},i=function(e){var t=e.bbox;function n(e){s[0]=e[0],s[1]=e[1],i(s),s[0]<l&&(l=s[0]),s[0]>u&&(u=s[0]),s[1]<c&&(c=s[1]),s[1]>d&&(d=s[1])}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":n(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(n)}}if(!t){var a,o,i=f(e),s=new Array(2),l=1/0,c=l,u=-l,d=-l;for(o in e.arcs.forEach(function(e){for(var t=-1,n=e.length;++t<n;)a=e[t],s[0]=a[0],s[1]=a[1],i(s,t),s[0]<l&&(l=s[0]),s[0]>u&&(u=s[0]),s[1]<c&&(c=s[1]),s[1]>d&&(d=s[1])}),e.objects)r(e.objects[o]);t=e.bbox=[l,c,u,d]}return t},d=function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n};function n(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,o=h(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:o}:null==r?{type:"Feature",id:n,properties:a,geometry:o}:{type:"Feature",id:n,bbox:r,properties:a,geometry:o}}function h(e,t){var o=f(e),i=e.arcs;function a(e,t){t.length&&t.pop();for(var n=i[e<0?~e:e],r=0,a=n.length;r<a;++r)t.push(o(n[r].slice(),r));e<0&&d(t,a)}function s(e){return o(e.slice())}function l(e){for(var t=[],n=0,r=e.length;n<r;++n)a(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function n(e){for(var t=l(e);t.length<4;)t.push(t[0].slice());return t}function c(e){return e.map(n)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=l(t.arcs);break;case"MultiLineString":n=t.arcs.map(l);break;case"Polygon":n=c(t.arcs);break;case"MultiPolygon":n=t.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(t)}var p=function(l,a){var o={},c={},u={},i=[],s=-1;function e(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){o[e<0?~e:e]=1}),i.push(r)}}return a.forEach(function(e,t){var n,r=l.arcs[e<0?~e:e];r.length<3&&!r[1][0]&&!r[1][1]&&(n=a[++s],a[s]=e,a[t]=n)}),a.forEach(function(e){var t,n,r=function(e){var t,n=l.arcs[e<0?~e:e],r=n[0];l.transform?(t=[0,0],n.forEach(function(e){t[0]+=e[0],t[1]+=e[1]})):t=n[n.length-1];return e<0?[t,r]:[r,t]}(e),a=r[0],o=r[1];if(t=u[a])if(delete u[t.end],t.push(e),t.end=o,n=c[o]){delete c[n.start];var i=n===t?t:t.concat(n);c[i.start=t.start]=u[i.end=n.end]=i}else c[t.start]=u[t.end]=t;else if(t=c[o])if(delete c[t.start],t.unshift(e),t.start=a,n=u[a]){delete u[n.end];var s=n===t?t:n.concat(t);c[s.start=n.start]=u[s.end=t.end]=s}else c[t.start]=u[t.end]=t;else c[(t=[e]).start=a]=u[t.end=o]=t}),e(u,c),e(c,u),a.forEach(function(e){o[e<0?~e:e]||i.push([e])}),i};function t(e,t,n){var r,a,o;if(1<arguments.length)r=function(e,t,n){var r,a=[],o=[];function i(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(i)}function l(e){e.forEach(s)}return function e(t){switch((r=t).type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":t.arcs.forEach(l)}}(t),o.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}(0,t,n);else for(a=0,r=new Array(o=e.arcs.length);a<o;++a)r[a]=a;return{type:"MultiLineString",arcs:p(e,r)}}function r(s,e){var l={},n=[],r=[];function a(t){t.forEach(function(e){e.forEach(function(e){(l[e=e<0?~e:e]||(l[e]=[])).push(t)})}),n.push(t)}function c(e){return function(e){for(var t,n=-1,r=e.length,a=e[r-1],o=0;++n<r;)t=a,a=e[n],o+=t[0]*a[1]-t[1]*a[0];return Math.abs(o)}(h(s,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}),n.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,r.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){l[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),n.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:r.map(function(e){var t,n=[];if(e.forEach(function(e){e.forEach(function(e){e.forEach(function(e){l[e<0?~e:e].length<2&&n.push(e)})})}),1<(t=(n=p(s,n)).length))for(var r,a,o=1,i=c(n[0]);o<t;++o)(r=c(n[o]))>i&&(a=n[0],n[0]=n[o],n[o]=a,i=r);return n})}}var g=function(e,t){for(var n=0,r=e.length;n<r;){var a=n+r>>>1;e[a]<t?n=a+1:r=a}return n};e.bbox=i,e.feature=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return n(t,e)})}:n(t,e)},e.mesh=function(e){return h(e,t.apply(this,arguments))},e.meshArcs=t,e.merge=function(e){return h(e,r.apply(this,arguments))},e.mergeArcs=r,e.neighbors=function(e){var r={},t=e.map(function(){return[]});function n(e,n){e.forEach(function(e){e<0&&(e=~e);var t=r[e];t?t.push(n):r[e]=[n]})}function a(e,t){e.forEach(function(e){n(e,t)})}var o={LineString:n,MultiLineString:a,Polygon:a,MultiPolygon:function(e,t){e.forEach(function(e){a(e,t)})}};for(var i in e.forEach(function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach(function(e){t(e,n)}):e.type in o&&o[e.type](e.arcs,n)}),r)for(var s=r[i],l=s.length,c=0;c<l;++c)for(var u=c+1;u<l;++u){var d,f=s[c],h=s[u];(d=t[f])[i=g(d,h)]!==h&&d.splice(i,0,h),(d=t[h])[i=g(d,f)]!==f&&d.splice(i,0,f)}return t},e.quantize=function(e,t){if(!(2<=(t=Math.floor(t))))throw new Error("n must be ≥2");if(e.transform)throw new Error("already quantized");var n,r=i(e),u=r[0],d=(r[2]-u)/(t-1)||1,f=r[1],h=(r[3]-f)/(t-1)||1;function a(e){e[0]=Math.round((e[0]-u)/d),e[1]=Math.round((e[1]-f)/h)}function o(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(o);break;case"Point":a(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(a)}}for(n in e.arcs.forEach(function(e){for(var t,n,r,a=1,o=1,i=e.length,s=e[0],l=s[0]=Math.round((s[0]-u)/d),c=s[1]=Math.round((s[1]-f)/h);a<i;++a)s=e[a],n=Math.round((s[0]-u)/d),r=Math.round((s[1]-f)/h),n===l&&r===c||((t=e[o++])[0]=n-l,l=n,t[1]=r-c,c=r);o<2&&((t=e[o++])[0]=0,t[1]=0),e.length=o}),e.objects)o(e.objects[n]);return e.transform={scale:[d,h],translate:[u,f]},e},e.transform=f,e.untransform=function(e){if(null==(t=e.transform))return u;var t,a,o,i=t.scale[0],s=t.scale[1],l=t.translate[0],c=t.translate[1];return function(e,t){t||(a=o=0);var n=Math.round((e[0]-l)/i),r=Math.round((e[1]-c)/s);return e[0]=n-a,a=n,e[1]=r-o,o=r,e}},Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:r.topojson=r.topojson||{})},{}]},{},[12])(12)})</script><script>!function(){function e(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",e):"interactive"===document.readyState||"complete"===document.readyState?e():addEventListener("DOMContentLoaded",e)}(),window.Polymer={Settings:function(){var e=window.Polymer||{};if(!e.noUrlSettings)for(var t,r=location.search.slice(1).split("&"),i=0;i<r.length&&(t=r[i]);i++)(t=t.split("="))[0]&&(e[t[0]]=t[1]||!0);return e.wantShadow="shadow"===e.dom,e.hasShadow=Boolean(Element.prototype.createShadowRoot),e.nativeShadow=e.hasShadow&&!window.ShadowDOMPolyfill,e.useShadow=e.wantShadow&&e.hasShadow,e.hasNativeImports=Boolean("import"in document.createElement("link")),e.useNativeImports=e.hasNativeImports,e.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative,e.useNativeShadow=e.useShadow&&e.nativeShadow,e.usePolyfillProto=!e.useNativeCustomElements&&!Object.__proto__,e.hasNativeCSSProperties=!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)"),e.useNativeCSSProperties=e.hasNativeCSSProperties&&e.lazyRegister&&e.useNativeCSSProperties,e.isIE=navigator.userAgent.match("Trident"),e.passiveTouchGestures=e.passiveTouchGestures||!1,e}()},function(){var e=window.Polymer;window.Polymer=function(e){"function"==typeof e&&(e=e.prototype),e||(e={});var t=(e=s(e))===e.constructor.prototype?e.constructor:null,r={prototype:e};e.extends&&(r.extends=e.extends),Polymer.telemetry._registrate(e);var i=document.registerElement(e.is,r);return t||i};var s=function(e){var t=Polymer.Base;return e.extends&&(t=Polymer.Base._getExtendedPrototype(e.extends)),(e=Polymer.Base.chainObject(e,t)).registerCallback(),e};if(e)for(var t in e)Polymer[t]=e[t];Polymer.Class=function(e){return e.factoryImpl||(e.factoryImpl=function(){}),s(e).constructor}}(),Polymer.telemetry={registrations:[],_regLog:function(e){console.log("["+e.is+"]: registered")},_registrate:function(e){this.registrations.push(e),Polymer.log&&this._regLog(e)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}}),Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(e){this._ready?e():this._callbacks.push(e)},_makeReady:function(){this._ready=!0;for(var e=0;e<this._callbacks.length;e++)this._callbacks[e]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(e,t,r){this._watchNextRender(),this._afterNextRenderQueue.push([e,t,r])},hasRendered:function(){return this._ready},_watchNextRender:function(){if(!this._waitingNextRender){this._waitingNextRender=!0;var e=function(){Polymer.RenderStatus._flushNextRender()};this._ready?requestAnimationFrame(e):this.whenReady(e)}},_flushNextRender:function(){var e=this;setTimeout(function(){e._flushRenderCallbacks(e._afterNextRenderQueue),e._afterNextRenderQueue=[],e._waitingNextRender=!1})},_flushRenderCallbacks:function(e){for(var t,r=0;r<e.length;r++)(t=e[r])[1].apply(t[0],t[2]||Polymer.nar)}},window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender(),Polymer.ImportStatus=Polymer.RenderStatus,Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady,function(){"use strict";var e,o=Polymer.Settings;if(Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(e){this.mixin(this,e)},registerCallback:function(){if("max"===o.lazyRegister)this.beforeRegister&&this.beforeRegister();else{this._desugarBehaviors();for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).beforeRegister&&e.beforeRegister.call(this);this.beforeRegister&&this.beforeRegister()}this._registerFeatures(),o.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(o.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade"))return this._propertySetter=e,this._configValue=null,void(this.__data__={});this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__),Polymer.telemetry.instanceCount++,this.root=this;for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).created&&e.created.call(this);this.created&&this.created(),this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(e){if(e.__hasRegisterFinished!==e.is||!e.is){if("max"===o.lazyRegister){e._desugarBehaviors();for(var t,r=0;r<e.behaviors.length;r++)(t=e.behaviors[r]).beforeRegister&&t.beforeRegister.call(e)}e.__hasRegisterFinished=e.is,e._finishRegisterFeatures&&e._finishRegisterFeatures();for(var i,s=0;s<e.behaviors.length;s++)(i=e.behaviors[s]).registered&&i.registered.call(e);e.registered&&e.registered(),o.usePolyfillProto&&e!==this&&e.extend(this,e)}},attachedCallback:function(){var r=this;Polymer.RenderStatus.whenReady(function(){r.isAttached=!0;for(var e,t=0;t<r.behaviors.length;t++)(e=r.behaviors[t]).attached&&e.attached.call(r);r.attached&&r.attached()})},detachedCallback:function(){var r=this;Polymer.RenderStatus.whenReady(function(){r.isAttached=!1;for(var e,t=0;t<r.behaviors.length;t++)(e=r.behaviors[t]).detached&&e.detached.call(r);r.detached&&r.detached()})},attributeChangedCallback:function(e,t,r){this._attributeChangedImpl(e);for(var i,s=0;s<this.behaviors.length;s++)(i=this.behaviors[s]).attributeChanged&&i.attributeChanged.call(this,e,t,r);this.attributeChanged&&this.attributeChanged(e,t,r)},_attributeChangedImpl:function(e){this._setAttributeToProperty(this,e)},extend:function(e,t){if(e&&t)for(var r,i=Object.getOwnPropertyNames(t),s=0;s<i.length&&(r=i[s]);s++)this.copyOwnProperty(r,t,e);return e||t},mixin:function(e,t){for(var r in t)e[r]=t[r];return e},copyOwnProperty:function(e,t,r){var i=Object.getOwnPropertyDescriptor(t,e);i&&Object.defineProperty(r,e,i)},_logger:function(e,t){switch(1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e].apply(console,t)}},_log:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("log",e)},_warn:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("warn",e)},_error:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("error",e)},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}},Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:["[%s::%s]:"],Polymer.Base.chainObject=function(e,t){return e&&t&&e!==t&&(Object.__proto__||(e=Polymer.Base.extend(Object.create(t),e)),e.__proto__=t),e},Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype),Polymer.BaseDescriptors={},o.disableUpgradeEnabled){e=function(e,t){this.__data__[e]=t};var i=Polymer.Base.attributeChangedCallback;Polymer.Base.attributeChangedCallback=function(e,t,r){this.__hasInitialized||"disable-upgrade"!==e||(this.__hasInitialized=!0,this._propertySetter=Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize()),i.call(this,e,t,r)}}window.CustomElements?Polymer.instanceof=CustomElements.instanceof:Polymer.instanceof=function(e,t){return e instanceof t},Polymer.isInstance=function(e){return Boolean(e&&e.__isPolymerInstance__)},Polymer.telemetry.instanceCount=0}(),function(){var t={},r={},i=function(e){return t[e]||r[e.toLowerCase()]},e=function(){return document.createElement("dom-module")};e.prototype=Object.create(HTMLElement.prototype),Polymer.Base.mixin(e.prototype,{createdCallback:function(){this.register()},register:function(e){(e=e||this.id||this.getAttribute("name")||this.getAttribute("is"))&&(this.id=e,t[e]=this,r[e.toLowerCase()]=this)},import:function(e,t){if(e){var r=i(e);return r||(!function(){if(o)for(var e,t=document._currentScript||document.currentScript,r=t&&t.ownerDocument||document,i=r.querySelectorAll("dom-module"),s=i.length-1;0<=s&&(e=i[s]);s--){if(e.__upgraded__)return;CustomElements.upgrade(e)}}(),r=i(e)),r&&t&&(r=r.querySelector(t)),r}}}),Object.defineProperty(e.prototype,"constructor",{value:e,configurable:!0,writable:!0});var o=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",e)}(),Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var e=(document._currentScript||document.currentScript).parentNode;if("dom-module"===e.localName){var t=e.id||e.getAttribute("name")||e.getAttribute("is");this.is=t}}this.is&&(this.is=this.is.toLowerCase())}}),Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(e){for(var t=[],r=(e=this._flattenBehaviorsList(e)).length-1;0<=r;r--){var i=e[r];-1===t.indexOf(i)&&(this._mixinBehavior(i),t.unshift(i))}return t},_flattenBehaviorsList:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i instanceof Array?t=t.concat(this._flattenBehaviorsList(i)):i?t.push(i):this._warn(this._logf("_flattenBehaviorsList","behavior is null, check for missing or 404 import"))}return t},_mixinBehavior:function(e){for(var t,r=Object.getOwnPropertyNames(e),i=e._noAccessors,s=0;s<r.length&&(t=r[s]);s++)Polymer.Base._behaviorProperties[t]||this.hasOwnProperty(t)||(i?this[t]=e[t]:this.copyOwnProperty(t,e,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(e){for(var t=0,r=e.length;t<r;t++)this._prepBehavior(e[t]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var e=0;e<this.behaviors.length;e++)this._marshalBehavior(this.behaviors[e]);this._marshalBehavior(this)}}),Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0},Polymer.Base._addFeature({_getExtendedPrototype:function(e){return this._getExtendedNativePrototype(e)},_nativePrototypes:{},_getExtendedNativePrototype:function(e){var t=this._nativePrototypes[e];if(!t){t=Object.create(this.getNativePrototype(e));for(var r,i=Object.getOwnPropertyNames(Polymer.Base),s=0;s<i.length&&(r=i[s]);s++)Polymer.BaseDescriptors[r]||(t[r]=Polymer.Base[r]);Object.defineProperties(t,Polymer.BaseDescriptors),this._nativePrototypes[e]=t}return t},getNativePrototype:function(e){return Object.getPrototypeOf(document.createElement(e))}}),Polymer.Base._addFeature({_prepConstructor:function(){this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];var e=function(){return this._factory(arguments)};this.hasOwnProperty("extends")&&(e.extends=this.extends),Object.defineProperty(this,"constructor",{value:e,writable:!0,configurable:!0}),e.prototype=this},_factory:function(e){var t=document.createElement.apply(document,this._factoryArgs);return this.factoryImpl&&this.factoryImpl.apply(t,e),t}}),Polymer.nob=Object.create(null),Polymer.Base._addFeature({getPropertyInfo:function(e){var t=this._getPropertyInfo(e,this.properties);if(!t)for(var r=0;r<this.behaviors.length;r++)if(t=this._getPropertyInfo(e,this.behaviors[r].properties))return t;return t||Polymer.nob},_getPropertyInfo:function(e,t){var r=t&&t[e];return"function"==typeof r&&(r=t[e]={type:r}),r&&(r.defined=!0),r},_prepPropertyInfo:function(){this._propertyInfo={};for(var e=0;e<this.behaviors.length;e++)this._addPropertyInfo(this._propertyInfo,this.behaviors[e].properties);this._addPropertyInfo(this._propertyInfo,this.properties),this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(e,t){var r,i;if(t)for(var s in t)r=e[s],i=t[s],("_"!==s[0]||i.readOnly)&&(e[s]?(r.type||(r.type=i.type),r.readOnly||(r.readOnly=i.readOnly)):e[s]={type:"function"==typeof i?i:i.type,readOnly:i.readOnly,attribute:Polymer.CaseMap.camelToDashCase(s)})}}),function(){var e={configurable:!0,writable:!0,enumerable:!0,value:{}};Polymer.BaseDescriptors.properties=e,Object.defineProperty(Polymer.Base,"properties",e)}(),Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.indexOf("-")<0?e:e.replace(this._rx.dashToCamel,function(e){return e[1].toUpperCase()}))},camelToDashCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.replace(this._rx.camelToDash,"-$1").toLowerCase())}},Polymer.Base._addFeature({_addHostAttributes:function(e){this._aggregatedAttributes||(this._aggregatedAttributes={}),e&&this.mixin(this._aggregatedAttributes,e)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(e,t){for(var r in t)if(!this.hasAttribute(r)&&"class"!==r){var i=t[r];this.serializeValueToAttribute(i,r,this)}},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(e){if(this.hasAttributes())for(var t in this._propertyInfo){var r=this._propertyInfo[t];this.hasAttribute(r.attribute)&&this._setAttributeToProperty(e,r.attribute,t,r)}},_setAttributeToProperty:function(e,t,r,i){if(!this._serializing&&(r=r||Polymer.CaseMap.dashToCamelCase(t),(i=i||this._propertyInfo&&this._propertyInfo[r])&&!i.readOnly)){var s=this.getAttribute(t);e[r]=this.deserialize(s,i.type)}},_serializing:!1,reflectPropertyToAttribute:function(e,t,r){this._serializing=!0,r=void 0===r?this[e]:r,this.serializeValueToAttribute(r,t||Polymer.CaseMap.camelToDashCase(e)),this._serializing=!1},serializeValueToAttribute:function(e,t,r){var i=this.serialize(e);r=r||this,void 0===i?r.removeAttribute(t):r.setAttribute(t,i)},deserialize:function(t,e){switch(e){case Number:t=Number(t);break;case Boolean:t=null!=t;break;case Object:try{t=JSON.parse(t)}catch(e){}break;case Array:try{t=JSON.parse(t)}catch(e){t=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:t=new Date(t);break;case String:}return t},serialize:function(e){switch(typeof e){case"boolean":return e?"":void 0;case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return null!=e?e:void 0}}}),Polymer.version="1.11.3",Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_marshalBehavior:function(e){},_initFeatures:function(){this._marshalHostAttributes(),this._marshalBehaviors()}})</script><script>!function(){function l(e,n){return e.replace(t,function(e,t,o,i){return t+"'"+h(o.replace(/["']/g,""),n)+"'"+i})}function h(e,t){if(e&&n.test(e))return e;var o,i=(o=t).body.__urlResolver||(o.body.__urlResolver=o.createElement("a"));return i.href=e,i.href||e}var o,i;function e(e){return e.substring(0,e.lastIndexOf("/")+1)}var t=/(url\()([^)]*)(\))/g,u={"*":["href","src","style","url"],form:["action"]},n=/(^\/)|(^#)|(^[\w-\d]*:)/,c=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:l,resolveAttrs:function(e,t){for(var o in u)for(var i,n,s,r=u[o],d=0,a=r.length;d<a&&(i=r[d]);d++)"*"!==o&&e.localName!==o||(s=(n=e.attributes[i])&&n.value)&&s.search(c)<0&&(n.value="style"===i?l(s,t):h(s,t))},resolveUrl:function(e,t){return o||(o=document.implementation.createHTMLDocument("temp"),i=o.createElement("base"),o.head.appendChild(i)),i.href=t,h(e,o)},pathFromUrl:e},Polymer.rootPath=Polymer.Settings.rootPath||e(document.baseURI||window.location.href)}(),Polymer.Base._addFeature({_prepTemplate:function(){var e;if(void 0===this._template&&(e=Polymer.DomModule.import(this.is),this._template=e&&e.querySelector("template")),e){var t=e.getAttribute("assetpath")||"",o=Polymer.ResolveUrl.resolveUrl(t,e.ownerDocument.baseURI);this._importPath=Polymer.ResolveUrl.pathFromUrl(o)}else this._importPath="";this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,"Move inside simple <template>.")),this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(e){return document.importNode(e._content||e.content,!0)}}),function(){var e=Polymer.Base.attachedCallback,t=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(e){this.dataHost=e=e||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1],e&&e._clients&&e._clients.push(this),this._clients=null,this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this),this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=!1,this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady(),this._template&&(this._setupRoot(),this._readyClients()),this._clientsReadied=!0,this._clients=null,this._afterClientsReady(),this._readySelf()},_readyClients:function(){this._beginDistribute();var e=this._clients;if(e)for(var t,o=0,i=e.length;o<i&&(t=e[o]);o++)t._ready();this._finishDistribute()},_readySelf:function(){for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).ready&&e.ready.call(this);this.ready&&this.ready(),this._readied=!0,this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),e.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?t.call(this):this._attachedPending=!1}})}(),Polymer.ArraySplice=function(){function m(e,t,o){return{index:e,removed:t,addedCount:o}}function e(){}return e.prototype={calcEditDistances:function(e,t,o,i,n,s){for(var r=s-n+1,d=o-t+1,a=new Array(r),l=0;l<r;l++)a[l]=new Array(d),a[l][0]=l;for(var h=0;h<d;h++)a[0][h]=h;for(l=1;l<r;l++)for(h=1;h<d;h++)if(this.equals(e[t+h-1],i[n+l-1]))a[l][h]=a[l-1][h-1];else{var u=a[l-1][h]+1,c=a[l][h-1]+1;a[l][h]=u<c?u:c}return a},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,o=e[0].length-1,i=e[t][o],n=[];0<t||0<o;)if(0!=t)if(0!=o){var s,r=e[t-1][o-1],d=e[t-1][o],a=e[t][o-1];(s=d<a?d<r?d:r:a<r?a:r)==r?(r==i?n.push(0):(n.push(1),i=r),t--,o--):s==d?(n.push(3),t--,i=d):(n.push(2),o--,i=a)}else n.push(3),t--;else n.push(2),o--;return n.reverse(),n},calcSplices:function(e,t,o,i,n,s){var r=0,d=0,a=Math.min(o-t,s-n);if(0==t&&0==n&&(r=this.sharedPrefix(e,i,a)),o==e.length&&s==i.length&&(d=this.sharedSuffix(e,i,a-r)),n+=r,s-=d,(o-=d)-(t+=r)==0&&s-n==0)return[];if(t==o){for(var l=m(t,[],0);n<s;)l.removed.push(i[n++]);return[l]}if(n==s)return[m(t,[],o-t)];var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,o,i,n,s));l=void 0;for(var u=[],c=t,_=n,f=0;f<h.length;f++)switch(h[f]){case 0:l&&(u.push(l),l=void 0),c++,_++;break;case 1:l||(l=m(c,[],0)),l.addedCount++,c++,l.removed.push(i[_]),_++;break;case 2:l||(l=m(c,[],0)),l.addedCount++,c++;break;case 3:l||(l=m(c,[],0)),l.removed.push(i[_]),_++}return l&&u.push(l),u},sharedPrefix:function(e,t,o){for(var i=0;i<o;i++)if(!this.equals(e[i],t[i]))return i;return o},sharedSuffix:function(e,t,o){for(var i=e.length,n=t.length,s=0;s<o&&this.equals(e[--i],t[--n]);)s++;return s},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},new e}(),Polymer.domInnerHTML=function(){var l=/[&\u00A0"]/g,h=/[&\u00A0<>]/g;function u(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function e(e){for(var t={},o=0;o<e.length;o++)t[e[o]]=!0;return t}var c=e(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),_=e(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function d(e,t,o){switch(e.nodeType){case Node.ELEMENT_NODE:for(var i,n=e.localName,s="<"+n,r=e.attributes,d=0;i=r[d];d++)s+=" "+i.name+'="'+i.value.replace(l,u)+'"';return s+=">",c[n]?s:s+f(e,o)+"</"+n+">";case Node.TEXT_NODE:var a=e.data;return t&&_[t.localName]?a:a.replace(h,u);case Node.COMMENT_NODE:return"\x3c!--"+e.data+"--\x3e";default:throw console.error(e),new Error("not implemented")}}function f(e,t){e instanceof HTMLTemplateElement&&(e=e.content);for(var o,i="",n=Polymer.dom(e).childNodes,s=0,r=n.length;s<r&&(o=n[s]);s++)i+=d(o,e,t);return i}return{getInnerHTML:f}}(),function(){"use strict";var i=Element.prototype.insertBefore,o=Element.prototype.appendChild,n=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(e){for(var t=[],o=0,i=e.firstChild;i;i=i.nextSibling)t[o++]=i;return t},arrayCopyChildren:function(e){for(var t=[],o=0,i=e.firstElementChild;i;i=i.nextElementSibling)t[o++]=i;return t},arrayCopy:function(e){for(var t=e.length,o=new Array(t),i=0;i<t;i++)o[i]=e[i];return o}},Polymer.TreeApi.Logical={hasParentNode:function(e){return Boolean(e.__dom&&e.__dom.parentNode)},hasChildNodes:function(e){return Boolean(e.__dom&&void 0!==e.__dom.childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):e.childNodes},_getChildNodes:function(e){if(!e.__dom.childNodes){e.__dom.childNodes=[];for(var t=e.__dom.firstChild;t;t=t.__dom.nextSibling)e.__dom.childNodes.push(t)}return e.__dom.childNodes},getParentNode:function(e){return e.__dom&&void 0!==e.__dom.parentNode?e.__dom.parentNode:e.parentNode},getFirstChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?e.__dom.firstChild:e.firstChild},getLastChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?e.__dom.lastChild:e.lastChild},getNextSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?e.__dom.nextSibling:e.nextSibling},getPreviousSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?e.__dom.previousSibling:e.previousSibling},getFirstElementChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?this._getFirstElementChild(e):e.firstElementChild},_getFirstElementChild:function(e){for(var t=e.__dom.firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getLastElementChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?this._getLastElementChild(e):e.lastElementChild},_getLastElementChild:function(e){for(var t=e.__dom.lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},getNextElementSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?this._getNextElementSibling(e):e.nextElementSibling},_getNextElementSibling:function(e){for(var t=e.__dom.nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getPreviousElementSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?this._getPreviousElementSibling(e):e.previousElementSibling},_getPreviousElementSibling:function(e){for(var t=e.__dom.previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},saveChildNodes:function(e){if(!this.hasChildNodes(e)){e.__dom=e.__dom||{},e.__dom.firstChild=e.firstChild,e.__dom.lastChild=e.lastChild,e.__dom.childNodes=[];for(var t=e.firstChild;t;t=t.nextSibling)t.__dom=t.__dom||{},(t.__dom.parentNode=e).__dom.childNodes.push(t),t.__dom.nextSibling=t.nextSibling,t.__dom.previousSibling=t.previousSibling}},recordInsertBefore:function(e,t,o){if(t.__dom.childNodes=null,e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var i=e.firstChild;i;i=i.nextSibling)this._linkNode(i,t,o);else this._linkNode(e,t,o)},_linkNode:function(e,t,o){e.__dom=e.__dom||{},t.__dom=t.__dom||{},o&&(o.__dom=o.__dom||{}),e.__dom.previousSibling=o?o.__dom.previousSibling:t.__dom.lastChild,e.__dom.previousSibling&&(e.__dom.previousSibling.__dom.nextSibling=e),e.__dom.nextSibling=o||null,e.__dom.nextSibling&&(e.__dom.nextSibling.__dom.previousSibling=e),e.__dom.parentNode=t,o?o===t.__dom.firstChild&&(t.__dom.firstChild=e):(t.__dom.lastChild=e,t.__dom.firstChild||(t.__dom.firstChild=e)),t.__dom.childNodes=null},recordRemoveChild:function(e,t){e.__dom=e.__dom||{},t.__dom=t.__dom||{},e===t.__dom.firstChild&&(t.__dom.firstChild=e.__dom.nextSibling),e===t.__dom.lastChild&&(t.__dom.lastChild=e.__dom.previousSibling);var o=e.__dom.previousSibling,i=e.__dom.nextSibling;o&&(o.__dom.nextSibling=i),i&&(i.__dom.previousSibling=o),e.__dom.parentNode=e.__dom.previousSibling=e.__dom.nextSibling=void 0,t.__dom.childNodes=null}},Polymer.TreeApi.Composed={getChildNodes:function(e){return Polymer.TreeApi.arrayCopyChildNodes(e)},getParentNode:function(e){return e.parentNode},clearChildNodes:function(e){e.textContent=""},insertBefore:function(e,t,o){return i.call(e,t,o||null)},appendChild:function(e,t){return o.call(e,t)},removeChild:function(e,t){return n.call(e,t)}}}(),Polymer.DomApi=function(){"use strict";var e=Polymer.Settings,s=Polymer.TreeApi,r=function(e){this.node=t?r.wrap(e):e},t=e.hasShadow&&!e.nativeShadow;r.wrap=window.wrap?window.wrap:function(e){return e},r.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(e){if(this.node.contains(e))return!0;for(var t=e,o=e.ownerDocument;t&&t!==o&&t!==this.node;)t=Polymer.dom(t).parentNode||t.host;return t===this.node},queryDistributedElements:function(e){for(var t,o=this.getEffectiveChildNodes(),i=[],n=0,s=o.length;n<s&&(t=o[n]);n++)t.nodeType===Node.ELEMENT_NODE&&r.matchesSelector.call(t,e)&&i.push(t);return i},getEffectiveChildNodes:function(){for(var e,t=[],o=this.childNodes,i=0,n=o.length;i<n&&(e=o[i]);i++)if(e.localName===d)for(var s=a(e).getDistributedNodes(),r=0;r<s.length;r++)t.push(s[r]);else t.push(e);return t},observeNodes:function(e){if(e)return this.observer||(this.observer=this.node.localName===d?new r.DistributedNodesObserver(this):new r.EffectiveNodesObserver(this)),this.observer.addListener(e)},unobserveNodes:function(e){this.observer&&this.observer.removeListener(e)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(e,t,o){t=t||this.node;var i=[];return this._queryElements(s.Logical.getChildNodes(t),e,o,i),i},_queryElements:function(e,t,o,i){for(var n,s=0,r=e.length;s<r&&(n=e[s]);s++)if(n.nodeType===Node.ELEMENT_NODE&&this._queryElement(n,t,o,i))return!0},_queryElement:function(e,t,o,i){var n=t(e);if(n&&i.push(e),o&&o(n))return n;this._queryElements(s.Logical.getChildNodes(e),t,o,i)}};var d=r.CONTENT="content",a=r.factory=function(e){return(e=e||document).__domApi||(e.__domApi=new r.ctor(e)),e.__domApi};r.hasApi=function(e){return Boolean(e.__domApi)},r.ctor=r,Polymer.dom=function(e,t){return e instanceof Event?Polymer.EventApi.factory(e):r.factory(e,t)};var o=Element.prototype;return r.matchesSelector=o.matches||o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector,r}(),function(){"use strict";var e=Polymer.Settings,n=Polymer.DomApi,h=n.factory,u=Polymer.TreeApi,t=Polymer.domInnerHTML.getInnerHTML,a=n.CONTENT;if(!e.useShadow){var r=Element.prototype.cloneNode,l=Document.prototype.importNode;Polymer.Base.mixin(n.prototype,{_lazyDistribute:function(e){e.shadyRoot&&e.shadyRoot._distributionClean&&(e.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(e.debounce("_distribute",e._distributeContent)))},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(t&&u.Logical.getParentNode(t)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var o=u.Logical.getParentNode(e);o?(n.hasApi(o)&&h(o).notifyObserver(),this._removeNode(e)):this._removeOwnerShadyRoot(e)}if(!this._addNode(e,t)){t&&(t=t.localName===a?this._firstComposedNode(t):t);var i=this.node._isShadyRoot?this.node.host:this.node;t?u.Composed.insertBefore(i,e,t):u.Composed.appendChild(i,e)}return this.notifyObserver(),e},_addNode:function(e,t){var o=this.getOwnerRoot();if(o){var i=this._maybeAddInsertionPoint(e,this.node);o._invalidInsertionPoints||(o._invalidInsertionPoints=i),this._addNodeToHost(o.host,e)}u.Logical.hasChildNodes(this.node)&&u.Logical.recordInsertBefore(e,this.node,t);var n=this._maybeDistribute(e)||this.node.shadyRoot;if(n)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;e.firstChild;)u.Composed.removeChild(e,e.firstChild);else{var s=u.Composed.getParentNode(e);s&&u.Composed.removeChild(s,e)}return n},removeChild:function(e){if(u.Logical.getParentNode(e)!==this.node)throw Error("The node to be removed is not a child of this node: "+e);if(!this._removeNode(e)){var t=this.node._isShadyRoot?this.node.host:this.node;t===u.Composed.getParentNode(e)&&u.Composed.removeChild(t,e)}return this.notifyObserver(),e},_removeNode:function(e){var t,o=u.Logical.hasParentNode(e)&&u.Logical.getParentNode(e),i=this._ownerShadyRootForNode(e);return o&&(t=h(e)._maybeDistributeParent(),u.Logical.recordRemoveChild(e,o),i&&this._removeDistributedChildren(i,e)&&(i._invalidInsertionPoints=!0,this._lazyDistribute(i.host))),this._removeOwnerShadyRoot(e),i&&this._removeNodeFromHost(i.host,e),t},replaceChild:function(e,t){return this.insertBefore(e,t),this.removeChild(t),e},_hasCachedOwnerRoot:function(e){return Boolean(void 0!==e._ownerShadyRoot)},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(e){if(e){var t=e._ownerShadyRoot;if(void 0===t){if(e._isShadyRoot)t=e;else{var o=u.Logical.getParentNode(e);t=o?o._isShadyRoot?o:this._ownerShadyRootForNode(o):null}(t||document.documentElement.contains(e))&&(e._ownerShadyRoot=t)}return t}},_maybeDistribute:function(e){var t=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!e.__noContent&&h(e).querySelector(a),o=t&&u.Logical.getParentNode(t).nodeType!==Node.DOCUMENT_FRAGMENT_NODE,i=t||e.localName===a;if(i){var n=this.getOwnerRoot();n&&this._lazyDistribute(n.host)}var s=this._nodeNeedsDistribution(this.node);return s&&this._lazyDistribute(this.node),s||i&&!o},_maybeAddInsertionPoint:function(e,t){var o;if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||e.__noContent)e.localName===a&&(u.Logical.saveChildNodes(t),u.Logical.saveChildNodes(e),o=!0);else for(var i,n,s,r=h(e).querySelectorAll(a),d=0;d<r.length&&(i=r[d]);d++)(n=u.Logical.getParentNode(i))===e&&(n=t),s=this._maybeAddInsertionPoint(i,n),o=o||s;return o},_updateInsertionPoints:function(e){for(var t,o=e.shadyRoot._insertionPoints=h(e.shadyRoot).querySelectorAll(a),i=0;i<o.length;i++)t=o[i],u.Logical.saveChildNodes(t),u.Logical.saveChildNodes(u.Logical.getParentNode(t))},_nodeNeedsDistribution:function(e){return e&&e.shadyRoot&&n.hasInsertionPoint(e.shadyRoot)},_addNodeToHost:function(e,t){e._elementAdd&&e._elementAdd(t)},_removeNodeFromHost:function(e,t){e._elementRemove&&e._elementRemove(t)},_removeDistributedChildren:function(e,t){for(var o,i=e._insertionPoints,n=0;n<i.length;n++){var s=i[n];if(this._contains(t,s))for(var r=h(s).getDistributedNodes(),d=0;d<r.length;d++){o=!0;var a=r[d],l=u.Composed.getParentNode(a);l&&u.Composed.removeChild(l,a)}}return o},_contains:function(e,t){for(;t;){if(t==e)return!0;t=u.Logical.getParentNode(t)}},_removeOwnerShadyRoot:function(e){if(this._hasCachedOwnerRoot(e))for(var t,o=u.Logical.getChildNodes(e),i=0,n=o.length;i<n&&(t=o[i]);i++)this._removeOwnerShadyRoot(t);e._ownerShadyRoot=void 0},_firstComposedNode:function(e){for(var t,o,i=h(e).getDistributedNodes(),n=0,s=i.length;n<s&&(t=i[n]);n++)if((o=h(t).getDestinationInsertionPoints())[o.length-1]===e)return t},querySelector:function(t){return this._query(function(e){return n.matchesSelector.call(e,t)},this.node,function(e){return Boolean(e)})[0]||null},querySelectorAll:function(t){return this._query(function(e){return n.matchesSelector.call(e,t)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(e,t){this.node.setAttribute(e,t),this._maybeDistributeParent()},removeAttribute:function(e){this.node.removeAttribute(e),this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(e){var t=r.call(this.node,!1);if(e)for(var o,i=this.childNodes,n=h(t),s=0;s<i.length;s++)o=h(i[s]).cloneNode(!0),n.appendChild(o);return t},importNode:function(e,t){var o=this.node instanceof Document?this.node:this.node.ownerDocument,i=l.call(o,e,!1);if(t)for(var n,s=u.Logical.getChildNodes(e),r=h(i),d=0;d<s.length;d++)n=h(o).importNode(s[d],!0),r.appendChild(n);return i},_getComposedInnerHTML:function(){return t(this.node,!0)}}),Object.defineProperties(n.prototype,{activeElement:{get:function(){var e=document.activeElement;if(!e)return null;var t=!!this.node._isShadyRoot;if(this.node!==document){if(!t)return null;if(this.node.host===e||!this.node.host.contains(e))return null}for(var o=h(e).getOwnerRoot();o&&o!==this.node;)e=o.host,o=h(e).getOwnerRoot();return this.node===document?o?null:e:o===this.node?e:null},configurable:!0},childNodes:{get:function(){var e=u.Logical.getChildNodes(this.node);return Array.isArray(e)?e:u.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return u.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE}):u.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return u.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return u.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return u.Logical.getLastChild(this.node)},configurable:!0},nextSibling:{get:function(){return u.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return u.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return u.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return u.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return u.Logical.getNextElementSibling(this.node)},configurable:!0},previousElementSibling:{get:function(){return u.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var e=this.node.nodeType;if(e===Node.TEXT_NODE||e===Node.COMMENT_NODE)return this.node.textContent;for(var t,o=[],i=0,n=this.childNodes;t=n[i];i++)t.nodeType!==Node.COMMENT_NODE&&o.push(t.textContent);return o.join("")},set:function(e){var t=this.node.nodeType;t===Node.TEXT_NODE||t===Node.COMMENT_NODE?this.node.textContent=e:(this._clear(),e&&this.appendChild(document.createTextNode(e)))},configurable:!0},innerHTML:{get:function(){var e=this.node.nodeType;return e===Node.TEXT_NODE||e===Node.COMMENT_NODE?null:t(this.node)},set:function(e){var t=this.node.nodeType;if(t!==Node.TEXT_NODE||t!==Node.COMMENT_NODE){this._clear();var o=document.createElement("div");o.innerHTML=e;for(var i=u.arrayCopyChildNodes(o),n=0;n<i.length;n++)this.appendChild(i[n])}},configurable:!0}}),n.hasInsertionPoint=function(e){return Boolean(e&&e._insertionPoints.length)}}}(),function(){"use strict";var e=Polymer.Settings,t=Polymer.TreeApi,o=Polymer.DomApi;if(e.useShadow){Polymer.Base.mixin(o.prototype,{querySelectorAll:function(e){return t.arrayCopy(this.node.querySelectorAll(e))},getOwnerRoot:function(){for(var e=this.node;e;){if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host)return e;e=e.parentNode}},importNode:function(e,t){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(e,t)},getDestinationInsertionPoints:function(){var e=this.node.getDestinationInsertionPoints&&this.node.getDestinationInsertionPoints();return e?t.arrayCopy(e):[]},getDistributedNodes:function(){var e=this.node.getDistributedNodes&&this.node.getDistributedNodes();return e?t.arrayCopy(e):[]}}),Object.defineProperties(o.prototype,{activeElement:{get:function(){var e=o.wrap(this.node),t=e.activeElement;return e.contains(t)?t:null},configurable:!0},childNodes:{get:function(){return t.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return t.arrayCopyChildren(this.node)},configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(e){return this.node.textContent=e},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(e){return this.node.innerHTML=e},configurable:!0}});var i=function(e){o.prototype[e]=function(){return this.node[e].apply(this.node,arguments)}};!function(e){for(var t=0;t<e.length;t++)i(e[t])}(["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector"]);var n=function(e){Object.defineProperty(o.prototype,e,{get:function(){return this.node[e]},configurable:!0})};!function(e){for(var t=0;t<e.length;t++)n(e[t])}(["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling"])}}(),Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){for(this._flushGuard=0,this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete(),this._prepareFlush(),this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var e=0;e<this._staticFlushList.length;e++)this._staticFlushList[e]()},addStaticFlush:function(e){this._staticFlushList.push(e)},removeStaticFlush:function(e){var t=this._staticFlushList.indexOf(e);0<=t&&this._staticFlushList.splice(t,1)},addDebouncer:function(e){this._debouncers.push(e),this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}}),Polymer.EventApi=function(){"use strict";var t=Polymer.DomApi.ctor,e=Polymer.Settings;t.Event=function(e){this.event=e},e.useShadow?t.Event.prototype={get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var e=this.event.path;return Array.isArray(e)||(e=Array.prototype.slice.call(e)),e}}:t.Event.prototype={get rootTarget(){return this.event.target},get localTarget(){for(var e=this.event.currentTarget,t=e&&Polymer.dom(e).getOwnerRoot(),o=this.path,i=0;i<o.length;i++)if(Polymer.dom(o[i]).getOwnerRoot()===t)return o[i]},get path(){if(!this.event._path){for(var e=[],t=this.rootTarget;t;){e.push(t);var o=Polymer.dom(t).getDestinationInsertionPoints();if(o.length){for(var i=0;i<o.length-1;i++)e.push(o[i]);t=o[o.length-1]}else t=Polymer.dom(t).parentNode||t.host}e.push(window),this.event._path=e}return this.event._path}};return{factory:function(e){return e.__eventApi||(e.__eventApi=new t.Event(e)),e.__eventApi}}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings.useShadow;Object.defineProperty(e.prototype,"classList",{get:function(){return this._classList||(this._classList=new e.ClassList(this)),this._classList},configurable:!0}),e.ClassList=function(e){this.domApi=e,this.node=e.node},e.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments),this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments),this._distributeParent()},toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments),this._distributeParent()},_distributeParent:function(){t||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings;if(e.EffectiveNodesObserver=function(e){this.domApi=e,this.node=this.domApi.node,this._listeners=[]},e.EffectiveNodesObserver.prototype={addListener:function(e){this._isSetup||(this._setup(),this._isSetup=!0);var t={fn:e,_nodes:[]};return this._listeners.push(t),this._scheduleNotify(),t},removeListener:function(e){var t=this._listeners.indexOf(e);0<=t&&(this._listeners.splice(t,1),e._nodes=[]),this._hasListeners()||(this._cleanup(),this._isSetup=!1)},_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return Boolean(this._listeners.length)},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop(),this._debouncer=Polymer.Debounce(this._debouncer,this._notify),this._debouncer.context=this,Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners(),this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(e){for(var t,o=0;o<e.length&&(t=e[o]);o++)this._isContent(t)&&(t.__observeNodesMap=t.__observeNodesMap||new WeakMap,t.__observeNodesMap.has(this)||t.__observeNodesMap.set(this,this._observeContent(t)))},_observeContent:function(e){var t=this,o=Polymer.dom(e).observeNodes(function(){t._scheduleNotify()});return o._avoidChangeCalculation=!0,o},_unobserveContentElements:function(e){for(var t,o,i=0;i<e.length&&(t=e[i]);i++)this._isContent(t)&&(o=t.__observeNodesMap.get(this))&&(Polymer.dom(t).unobserveNodes(o),t.__observeNodesMap.delete(this))},_isContent:function(e){return"content"===e.localName},_callListeners:function(){for(var e,t=this._listeners,o=this._getEffectiveNodes(),i=0;i<t.length&&(e=t[i]);i++){var n=this._generateListenerInfo(e,o);(n||e._alwaysNotify)&&this._callListener(e,n)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},_generateListenerInfo:function(e,t){if(e._avoidChangeCalculation)return!0;for(var o,i=e._nodes,n={target:this.node,addedNodes:[],removedNodes:[]},s=Polymer.ArraySplice.calculateSplices(t,i),r=0;r<s.length&&(o=s[r]);r++)for(var d,a=0;a<o.removed.length&&(d=o.removed[a]);a++)n.removedNodes.push(d);for(r=0;r<s.length&&(o=s[r]);r++)for(a=o.index;a<o.index+o.addedCount;a++)n.addedNodes.push(t[a]);return e._nodes=t,n.addedNodes.length||n.removedNodes.length?n:void 0},_callListener:function(e,t){return e.fn.call(this.node,t)},enableShadowAttributeTracking:function(){}},t.useShadow){var o=e.EffectiveNodesObserver.prototype._setup,i=e.EffectiveNodesObserver.prototype._cleanup;Polymer.Base.mixin(e.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var t=this;this._mutationHandler=function(e){e&&e.length&&t._scheduleNotify()},this._observer=new MutationObserver(this._mutationHandler),this._boundFlush=function(){t._flush()},Polymer.dom.addStaticFlush(this._boundFlush),this._observer.observe(this.node,{childList:!0})}o.call(this)},_cleanup:function(){this._observer.disconnect(),this._observer=null,this._mutationHandler=null,Polymer.dom.removeStaticFlush(this._boundFlush),i.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify(),this._observer.disconnect(),this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0});var e=this.domApi.getOwnerRoot(),t=e&&e.host;t&&Polymer.dom(t).observer&&Polymer.dom(t).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var e,t=0;t<this._listeners.length;t++)(e=this._listeners[t])._alwaysNotify=e._isContentListener}})}}(),function(){"use strict";var t=Polymer.DomApi.ctor,e=Polymer.Settings;t.DistributedNodesObserver=function(e){t.EffectiveNodesObserver.call(this,e)},t.DistributedNodesObserver.prototype=Object.create(t.EffectiveNodesObserver.prototype),Polymer.Base.mixin(t.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}}),e.useShadow&&Polymer.Base.mixin(t.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var e=this.domApi.getOwnerRoot(),t=e&&e.host;if(t){var o=this;this._observer=Polymer.dom(t).observeNodes(function(){o._scheduleNotify()}),this._observer._isContentListener=!0,this._hasAttrSelect()&&Polymer.dom(t).observer.enableShadowAttributeTracking()}}},_hasAttrSelect:function(){var e=this.node.getAttribute("select");return e&&e.match(/[[.]+/)},_cleanup:function(){var e=this.domApi.getOwnerRoot(),t=e&&e.host;t&&Polymer.dom(t).unobserveNodes(this._observer),this._observer=null}})}(),function(){var i=Polymer.DomApi,h=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||Boolean(this._template)},_setupShady:function(){this.shadyRoot=null,this.__domApi||(this.__domApi=null),this.__dom||(this.__dom=null),this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&h.Logical.saveChildNodes(this)},_setupRoot:function(){this._useContent&&(this._createLocalRoot(),this.dataHost||function(e){if(n&&e)for(var t=0;t<e.length;t++)CustomElements.upgrade(e[t])}(h.Logical.getChildNodes(this)))},_createLocalRoot:function(){this.shadyRoot=this.root,this.shadyRoot._distributionClean=!1,this.shadyRoot._hasDistributed=!1,this.shadyRoot._isShadyRoot=!0,this.shadyRoot._dirtyRoots=[];var e=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];h.Logical.saveChildNodes(this.shadyRoot);for(var t,o=0;o<e.length;o++)t=e[o],h.Logical.saveChildNodes(t),h.Logical.saveChildNodes(t.parentNode);this.shadyRoot.host=this},distributeContent:function(e){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||e;var t=function(e){for(;e&&o(e);)e=e.domHost;return e}(this);Polymer.dom(this)._lazyDistribute(t)}},_distributeContent:function(){this._useContent&&!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&i.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var e,t=this.shadyRoot._dirtyRoots,o=0,i=t.length;o<i&&(e=t[o]);o++)e._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){if(this.shadyRoot._distributionClean=!0,i.hasInsertionPoint(this.shadyRoot))this._composeTree(),function(e){for(var t,o=0;o<e._insertionPoints.length;o++)t=e._insertionPoints[o],i.hasApi(t)&&Polymer.dom(t).notifyObserver()}(this.shadyRoot);else if(this.shadyRoot._hasDistributed){var e=this._composeNode(this);this._updateChildNodes(this,e)}else h.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot);this.shadyRoot._hasDistributed||(t=this,i.hasApi(t)&&Polymer.dom(t).notifyObserver()),this.shadyRoot._hasDistributed=!0}var t},elementMatches:function(e,t){return t=t||this,i.matchesSelector.call(t,e)},_resetDistribution:function(){for(var e=h.Logical.getChildNodes(this),t=0;t<e.length;t++){var o=e[t];o._destinationInsertionPoints&&(o._destinationInsertionPoints=void 0),u(o)&&s(o)}for(var i=this.shadyRoot._insertionPoints,n=0;n<i.length;n++)i[n]._distributedNodes=[]},_collectPool:function(){for(var e=[],t=h.Logical.getChildNodes(this),o=0;o<t.length;o++){var i=t[o];u(i)?e.push.apply(e,i._distributedNodes):e.push(i)}return e},_distributePool:function(e,t){for(var o,i=e._insertionPoints,n=0,s=i.length;n<s&&(o=i[n]);n++)this._distributeInsertionPoint(o,t),r(o,this)},_distributeInsertionPoint:function(e,t){for(var o,i=!1,n=0,s=t.length;n<s;n++)(o=t[n])&&this._matchesContentSelect(o,e)&&(a(o,e),i=!(t[n]=void 0));if(!i)for(var r=h.Logical.getChildNodes(e),d=0;d<r.length;d++)a(r[d],e)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var e,t,o=this.shadyRoot._insertionPoints,i=0,n=o.length;i<n&&(e=o[i]);i++)(t=h.Logical.getParentNode(e))._useContent||t===this||t===this.shadyRoot||this._updateChildNodes(t,this._composeNode(t))},_composeNode:function(e){for(var t,o,i=[],n=h.Logical.getChildNodes(e.shadyRoot||e),s=0;s<n.length;s++){var r=n[s];if(u(r))for(var d=r._distributedNodes,a=0;a<d.length;a++){var l=d[a];t=r,void 0,(o=l._destinationInsertionPoints)&&o[o.length-1]===t&&i.push(l)}else i.push(r)}return i},_updateChildNodes:function(e,t){for(var o=h.Composed.getChildNodes(e),i=Polymer.ArraySplice.calculateSplices(t,o),n=0,s=0;n<i.length&&(a=i[n]);n++){for(var r,d=0;d<a.removed.length&&(r=a.removed[d]);d++)h.Composed.getParentNode(r)===e&&h.Composed.removeChild(e,r),o.splice(a.index+s,1);s-=a.addedCount}var a,l;for(n=0;n<i.length&&(a=i[n]);n++)for(l=o[a.index],d=a.index;d<a.index+a.addedCount;d++)r=t[d],h.Composed.insertBefore(e,r,l),o.splice(d,0,r)},_matchesContentSelect:function(e,t){var o=t.getAttribute("select");if(!o)return!0;if(!(o=o.trim()))return!0;if(!(e instanceof Element))return!1;return!!/^(:not\()?[*.#[a-zA-Z_|]/.test(o)&&this.elementMatches(o,e)},_elementAdd:function(){},_elementRemove:function(){}});var e={get:function(){var e=Polymer.dom(this).getOwnerRoot();return e&&e.host},configurable:!0};function a(e,t){t._distributedNodes.push(e);var o=e._destinationInsertionPoints;o?o.push(t):e._destinationInsertionPoints=[t]}function s(e){var t=e._distributedNodes;if(t)for(var o=0;o<t.length;o++){var i=t[o]._destinationInsertionPoints;i&&i.splice(i.indexOf(e)+1,i.length)}}function r(e,t){var o=h.Logical.getParentNode(e);o&&o.shadyRoot&&i.hasInsertionPoint(o.shadyRoot)&&o.shadyRoot._distributionClean&&(o.shadyRoot._distributionClean=!1,t.shadyRoot._dirtyRoots.push(o))}function u(e){return"content"==e.localName}function o(e){for(var t,o=h.Logical.getChildNodes(e),i=0;i<o.length;i++)if((t=o[i]).localName&&"content"===t.localName)return e.domHost}Object.defineProperty(Polymer.Base,"domHost",e),Polymer.BaseDescriptors.domHost=e;var n=window.CustomElements&&!CustomElements.useNative}(),Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot(),this.shadowRoot.appendChild(this.root),this.root=this.shadowRoot}}),Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(e,t){return 0<t?~setTimeout(e,t):(this._twiddle.textContent=this._twiddleContent++,this._callbacks.push(e),this._currVal++)},cancel:function(e){if(e<0)clearTimeout(~e);else{var t=e-this._lastVal;if(0<=t){if(!this._callbacks[t])throw"invalid async handle: "+e;this._callbacks[t]=null}}},_atEndOfMicrotask:function(){for(var e=this._callbacks.length,t=0;t<e;t++){var o=this._callbacks[t];if(o)try{o()}catch(e){throw t++,this._callbacks.splice(0,t),this._lastVal+=t,this._twiddle.textContent=this._twiddleContent++,e}}this._callbacks.splice(0,e),this._lastVal+=e}},new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()}).observe(Polymer.Async._twiddle,{characterData:!0}),Polymer.Debounce=function(){var i=Polymer.Async,n=function(e){this.context=e;var t=this;this.boundComplete=function(){t.complete()}};return n.prototype={go:function(e,t){var o;this.finish=function(){i.cancel(o)},o=i.run(this.boundComplete,t),this.callback=e},stop:function(){this.finish&&(this.finish(),this.finish=null,this.callback=null)},complete:function(){if(this.finish){var e=this.callback;this.stop(),e.call(this.context)}}},function(e,t,o){return e?e.stop():e=new n(this),e.go(t,o),e}}(),Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(e,t,o){return this._debouncers[e]=Polymer.Debounce.call(this,this._debouncers[e],t,o)},isDebouncerActive:function(e){var t=this._debouncers[e];return!(!t||!t.finish)},flushDebouncer:function(e){var t=this._debouncers[e];t&&t.complete()},cancelDebouncer:function(e){var t=this._debouncers[e];t&&t.stop()}}),Polymer.DomModule=document.createElement("dom-module"),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepTemplate(),this._prepShady(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._registerHost(),this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting()),this._marshalHostAttributes(),this._setupDebouncers(),this._marshalBehaviors(),this._tryReady()},_marshalBehavior:function(e){}})</script><script>!function(){Polymer.nar=[];var l=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(e,t){var n=[],r=e._content||e.content;return this._parseNodeAnnotations(r,n,t||e.hasAttribute("strip-whitespace")),n},_parseNodeAnnotations:function(e,t,n){return e.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(e,t):this._parseElementAnnotations(e,t,n)},_bindingRegex:new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*)(?:,\\s*(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g"),_parseBindings:function(e){for(var t,n=this._bindingRegex,r=[],s=0;null!==(t=n.exec(e));){t.index>s&&r.push({literal:e.slice(s,t.index)});var i,o,a,l=t[1][0],c=Boolean(t[2]),h=t[3].trim();"{"==l&&0<(a=h.indexOf("::"))&&(o=h.substring(a+2),h=h.substring(0,a),i=!0),r.push({compoundIndex:r.length,value:h,mode:l,negate:c,event:o,customEvent:i}),s=n.lastIndex}if(s&&s<e.length){var u=e.substring(s);u&&r.push({literal:u})}if(r.length)return r},_literalFromParts:function(e){for(var t="",n=0;n<e.length;n++){t+=e[n].literal||""}return t},_parseTextNodeAnnotation:function(e,t){var n=this._parseBindings(e.textContent);if(n){e.textContent=this._literalFromParts(n)||" ";var r={bindings:[{kind:"text",name:"textContent",parts:n,isCompound:1!==n.length}]};return t.push(r),r}},_parseElementAnnotations:function(e,t,n){var r={bindings:[],events:[]};return"content"===e.localName&&(t._hasContent=!0),this._parseChildNodesAnnotations(e,r,t,n),e.attributes&&(this._parseNodeAttributeAnnotations(e,r,t),this.prepElement&&this.prepElement(e)),(r.bindings.length||r.events.length||r.id)&&t.push(r),r},_parseChildNodesAnnotations:function(e,t,n,r){if(e.firstChild)for(var s=e.firstChild,i=0;s;){var o=s.nextSibling;if("template"!==s.localName||s.hasAttribute("preserve-content")||this._parseTemplate(s,i,n,t,r),"slot"==s.localName&&(s=this._replaceSlotWithContent(s)),s.nodeType===Node.TEXT_NODE){for(var a=o;a&&a.nodeType===Node.TEXT_NODE;)s.textContent+=a.textContent,o=a.nextSibling,e.removeChild(a),a=o;r&&!s.textContent.trim()&&(e.removeChild(s),i--)}if(s.parentNode){var l=this._parseNodeAnnotations(s,n,r);l&&(l.parent=t,l.index=i)}s=o,i++}},_replaceSlotWithContent:function(e){for(var t=e.ownerDocument.createElement("content");e.firstChild;)t.appendChild(e.firstChild);for(var n=e.attributes,r=0;r<n.length;r++){var s=n[r];t.setAttribute(s.name,s.value)}var i=e.getAttribute("name");return i&&t.setAttribute("select","[slot='"+i+"']"),e.parentNode.replaceChild(t,e),t},_parseTemplate:function(e,t,n,r,s){var i=document.createDocumentFragment();i._notes=this.parseAnnotations(e,s),i.appendChild(e.content),n.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:i,parent:r,index:t})},_parseNodeAttributeAnnotations:function(e,t){for(var n,r=Array.prototype.slice.call(e.attributes),s=r.length-1;n=r[s];s--){var i,o=n.name,a=n.value;"on-"===o.slice(0,3)?(e.removeAttribute(o),t.events.push({name:o.slice(3),value:a})):(i=this._parseNodeAttributeAnnotation(e,o,a))?t.bindings.push(i):"id"===o&&(t.id=a)}},_parseNodeAttributeAnnotation:function(e,t,n){var r=this._parseBindings(n);if(r){var s=t,i="property";"$"==t[t.length-1]&&(t=t.slice(0,-1),i="attribute");var o=this._literalFromParts(r);o&&"attribute"==i&&e.setAttribute(t,o),"input"===e.localName&&"value"===s&&e.setAttribute(s,""),l&&"disable-upgrade$"===s&&e.setAttribute(t,""),e.removeAttribute(s);var a=Polymer.CaseMap.dashToCamelCase(t);return"property"===i&&(t=a),{kind:i,name:t,propertyName:a,parts:r,literal:o,isCompound:1!==r.length}}},findAnnotatedNode:function(e,t){var n=t.parent&&Polymer.Annotations.findAnnotatedNode(e,t.parent);if(!n)return e;for(var r=n.firstChild,s=0;r;r=r.nextSibling)if(t.index===s++)return r}}}(),Polymer.Path={root:function(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)},isDeep:function(e){return-1!==e.indexOf(".")},isAncestor:function(e,t){return 0===e.indexOf(t+".")},isDescendant:function(e,t){return 0===t.indexOf(e+".")},translate:function(e,t,n){return t+n.slice(e.length)},matches:function(e,t,n){return e===n||this.isAncestor(e,n)||Boolean(t)&&this.isDescendant(e,n)}},Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var t=this;Polymer.Annotations.prepElement=function(e){t._prepElement(e)},this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes)),Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=0;r<n.bindings.length;r++)for(var s=n.bindings[r],i=0;i<s.parts.length;i++){var o=s.parts[i];if(!o.literal){var a=this._parseMethod(o.value);a?o.signature=a:o.model=Polymer.Path.root(o.value)}}if(n.templateContent){this._processAnnotations(n.templateContent._notes);var l=n.templateContent._parentProps=this._discoverTemplateParentProps(n.templateContent._notes),c=[];for(var h in l){var u="_parent_"+h;c.push({index:n.index,kind:"property",name:u,propertyName:u,parts:[{mode:"{",model:h,value:h}]})}n.bindings=n.bindings.concat(c)}}},_discoverTemplateParentProps:function(e){for(var t,n={},r=0;r<e.length&&(t=e[r]);r++){for(var s,i=0,o=t.bindings;i<o.length&&(s=o[i]);i++)for(var a,l=0,c=s.parts;l<c.length&&(a=c[l]);l++)if(a.signature){for(var h=a.signature.args,u=0;u<h.length;u++){var f=h[u].model;f&&(n[f]=!0)}a.signature.dynamicFn&&(n[a.signature.method]=!0)}else a.model&&(n[a.model]=!0);if(t.templateContent){var p=t.templateContent._parentProps;Polymer.Base.mixin(n,p)}}return n},_prepElement:function(e){Polymer.ResolveUrl.resolveAttrs(e,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var e=this._notes,t=this._nodes,n=0;n<e.length;n++){var r=e[n],s=t[n];this._configureTemplateContent(r,s),this._configureCompoundBindings(r,s)}},_configureTemplateContent:function(e,t){e.templateContent&&(t._content=e.templateContent)},_configureCompoundBindings:function(e,t){for(var n=e.bindings,r=0;r<n.length;r++){var s=n[r];if(s.isCompound){for(var i=t.__compoundStorage__||(t.__compoundStorage__={}),o=s.parts,a=new Array(o.length),l=0;l<o.length;l++)a[l]=o[l].literal;var c=s.name;i[c]=a,s.literal&&"property"==s.kind&&(t._configValue?t._configValue(c,s.literal):t[c]=s.literal)}}},_marshalIdNodes:function(){this.$={};for(var e,t=0,n=this._notes.length;t<n&&(e=this._notes[t]);t++)e.id&&(this.$[e.id]=this._findAnnotatedNode(this.root,e))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var e=new Array(this._notes.length),t=0;t<this._notes.length;t++)e[t]=this._findAnnotatedNode(this.root,this._notes[t]);this._nodes=e}},_marshalAnnotatedListeners:function(){for(var e,t=0,n=this._notes.length;t<n&&(e=this._notes[t]);t++)if(e.events&&e.events.length)for(var r,s=this._findAnnotatedNode(this.root,e),i=0,o=e.events;i<o.length&&(r=o[i]);i++)this.listen(s,r.name,r.value)}}),Polymer.Base._addFeature({listeners:{},_listenListeners:function(e){var t,n,r;for(r in e)r.indexOf(".")<0?(t=this,n=r):(n=r.split("."),t=this.$[n[0]],n=n[1]),this.listen(t,n,e[r])},listen:function(e,t,n){var r=this._recallEventHandler(this,t,e,n);r||(r=this._createEventHandler(e,t,n)),r._listening||(this._listen(e,t,r),r._listening=!0)},_boundListenerKey:function(e,t){return e+":"+t},_recordEventHandler:function(e,t,n,r,s){var i=e.__boundListeners;i||(i=e.__boundListeners=new WeakMap);var o=i.get(n);o||(o={},Polymer.Settings.isIE&&n==window||i.set(n,o)),o[this._boundListenerKey(t,r)]=s},_recallEventHandler:function(e,t,n,r){var s=e.__boundListeners;if(s){var i=s.get(n);if(i)return i[this._boundListenerKey(t,r)]}},_createEventHandler:function(e,t,n){var r=this,s=function(e){r[n]?r[n](e,e.detail):r._warn(r._logf("_createEventHandler","listener method `"+n+"` not defined"))};return s._listening=!1,this._recordEventHandler(r,t,e,n,s),s},unlisten:function(e,t,n){var r=this._recallEventHandler(this,t,e,n);r&&(this._unlisten(e,t,r),r._listening=!1)},_listen:function(e,t,n){e.addEventListener(t,n)},_unlisten:function(e,t,n){e.removeEventListener(t,n)}}),function(){"use strict";var h=Polymer.DomApi.wrap,c="string"==typeof document.head.style.touchAction,u="__polymerGestures",f="__polymerGesturesHandled",a="__polymerGesturesTouchAction",s=["mousedown","mousemove","mouseup","click"],r=[0,1,4,2],i=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function p(e){return-1<s.indexOf(e)}var t=!1;function d(e){if(!p(e)&&"touchend"!==e)return c&&t&&Polymer.Settings.passiveTouchGestures?{passive:!0}:void 0}!function(){try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();var _=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),o=function(e){var t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[f]={skip:!0},"click"===e.type)){var n=Polymer.dom(e).path;if(n)for(var r=0;r<n.length;r++)if(n[r]===m.mouse.target)return;e.preventDefault(),e.stopPropagation()}};function n(e){for(var t,n=_?["click"]:s,r=0;r<n.length;r++)t=n[r],e?document.addEventListener(t,o,!0):document.removeEventListener(t,o,!0)}function l(e){var t=e.type;if(!p(t))return!1;if("mousemove"===t){var n=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!i&&(n=r[e.which]||0),Boolean(1&n)}return 0===(void 0===e.button?0:e.button)}var m={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function y(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function v(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",function(e){m.mouse.mouseIgnoreJob||n(!0),m.mouse.target=Polymer.dom(e).rootTarget,m.mouse.mouseIgnoreJob=Polymer.Debounce(m.mouse.mouseIgnoreJob,function(){n(),m.mouse.target=null,m.mouse.mouseIgnoreJob=null},2500)},!!t&&{passive:!0});var g={gestures:{},recognizers:[],deepTargetFind:function(e,t){for(var n=document.elementFromPoint(e,t),r=n;r&&r.shadowRoot;)(r=r.shadowRoot.elementFromPoint(e,t))&&(n=r);return n},findOriginalTarget:function(e){return e.path?e.path[0]:e.target},handleNative:function(e){var t,n=e.type,r=h(e.currentTarget)[u];if(r){var s=r[n];if(s){if(!e[f]&&(e[f]={},"touch"===n.slice(0,5))){var i=e.changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(m.touch.id=i.identifier),m.touch.id!==i.identifier)return;c||"touchstart"!==n&&"touchmove"!==n||g.handleTouchAction(e)}if(!(t=e[f]).skip){for(var o,a=g.recognizers,l=0;l<a.length;l++)s[(o=a[l]).name]&&!t[o.name]&&o.flow&&-1<o.flow.start.indexOf(e.type)&&o.reset&&o.reset();for(l=0;l<a.length;l++)s[(o=a[l]).name]&&!t[o.name]&&(t[o.name]=!0,o[n](e))}}}},handleTouchAction:function(e){var t=e.changedTouches[0],n=e.type;if("touchstart"===n)m.touch.x=t.clientX,m.touch.y=t.clientY,m.touch.scrollDecided=!1;else if("touchmove"===n){if(m.touch.scrollDecided)return;m.touch.scrollDecided=!0;var r=function(e){for(var t,n=Polymer.dom(e).path,r="auto",s=0;s<n.length;s++)if((t=n[s])[a]){r=t[a];break}return r}(e),s=!1,i=Math.abs(m.touch.x-t.clientX),o=Math.abs(m.touch.y-t.clientY);e.cancelable&&("none"===r?s=!0:"pan-x"===r?s=i<o:"pan-y"===r&&(s=o<i)),s?e.preventDefault():g.prevent("track")}},add:function(e,t,n){e=h(e);var r=this.gestures[t],s=r.deps,i=r.name,o=e[u];o||(e[u]=o={});for(var a,l,c=0;c<s.length;c++)a=s[c],_&&p(a)&&"click"!==a||((l=o[a])||(o[a]=l={_count:0}),0===l._count&&e.addEventListener(a,this.handleNative,d(a)),l[i]=(l[i]||0)+1,l._count=(l._count||0)+1);e.addEventListener(t,n),r.touchAction&&this.setTouchAction(e,r.touchAction)},remove:function(e,t,n){e=h(e);var r=this.gestures[t],s=r.deps,i=r.name,o=e[u];if(o)for(var a,l,c=0;c<s.length;c++)(l=o[a=s[c]])&&l[i]&&(l[i]=(l[i]||1)-1,l._count=(l._count||1)-1,0===l._count&&e.removeEventListener(a,this.handleNative,d(a)));e.removeEventListener(t,n)},register:function(e){this.recognizers.push(e);for(var t=0;t<e.emits.length;t++)this.gestures[e.emits[t]]=e},findRecognizerByEvent:function(e){for(var t,n=0;n<this.recognizers.length;n++){t=this.recognizers[n];for(var r=0;r<t.emits.length;r++)if(t.emits[r]===e)return t}return null},setTouchAction:function(e,t){c&&(e.style.touchAction=t),e[a]=t},fire:function(e,t,n){if(Polymer.Base.fire(t,n,{node:e,bubbles:!0,cancelable:!0}).defaultPrevented){var r=n.preventer||n.sourceEvent;r&&r.preventDefault&&r.preventDefault()}},prevent:function(e){var t=this.findRecognizerByEvent(e);t.info&&(t.info.prevent=!0)},resetMouseCanceller:function(){m.mouse.mouseIgnoreJob&&m.mouse.mouseIgnoreJob.complete()}};g.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){v(this.info)},mousedown:function(e){if(l(e)){var t=g.findOriginalTarget(e),n=this;y(this.info,function(e){l(e)||(n.fire("up",t,e),v(n.info))},function(e){l(e)&&n.fire("up",t,e),v(n.info)}),this.fire("down",t,e)}},touchstart:function(e){this.fire("down",g.findOriginalTarget(e),e.changedTouches[0],e)},touchend:function(e){this.fire("up",g.findOriginalTarget(e),e.changedTouches[0],e)},fire:function(e,t,n,r){g.fire(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:r,prevent:function(e){return g.prevent(e)}})}}),g.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){2<this.moves.length&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,v(this.info)},hasMovedEnough:function(e,t){if(this.info.prevent)return!1;if(this.info.started)return!0;var n=Math.abs(this.info.x-e),r=Math.abs(this.info.y-t);return 5<=n||5<=r},mousedown:function(e){if(l(e)){var r=g.findOriginalTarget(e),s=this,t=function(e){var t=e.clientX,n=e.clientY;s.hasMovedEnough(t,n)&&(s.info.state=s.info.started?"mouseup"===e.type?"end":"track":"start","start"===s.info.state&&g.prevent("tap"),s.info.addMove({x:t,y:n}),l(e)||(s.info.state="end",v(s.info)),s.fire(r,e),s.info.started=!0)};y(this.info,t,function(e){s.info.started&&t(e),v(s.info)}),this.info.x=e.clientX,this.info.y=e.clientY}},touchstart:function(e){var t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){var t=g.findOriginalTarget(e),n=e.changedTouches[0],r=n.clientX,s=n.clientY;this.hasMovedEnough(r,s)&&("start"===this.info.state&&g.prevent("tap"),this.info.addMove({x:r,y:s}),this.fire(t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){var t=g.findOriginalTarget(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),this.fire(t,n,e))},fire:function(e,t,n){var r,s=this.info.moves[this.info.moves.length-2],i=this.info.moves[this.info.moves.length-1],o=i.x-this.info.x,a=i.y-this.info.y,l=0;return s&&(r=i.x-s.x,l=i.y-s.y),g.fire(e,"track",{state:this.info.state,x:t.clientX,y:t.clientY,dx:o,dy:a,ddx:r,ddy:l,sourceEvent:t,preventer:n,hover:function(){return g.deepTargetFind(t.clientX,t.clientY)}})}}),g.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(e){this.info.x=e.clientX,this.info.y=e.clientY},mousedown:function(e){l(e)&&this.save(e)},click:function(e){l(e)&&this.forward(e)},touchstart:function(e){this.save(e.changedTouches[0],e)},touchend:function(e){this.forward(e.changedTouches[0],e)},forward:function(e,t){var n=Math.abs(e.clientX-this.info.x),r=Math.abs(e.clientY-this.info.y),s=g.findOriginalTarget(e);(isNaN(n)||isNaN(r)||n<=25&&r<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;var t=g.findOriginalTarget(e).getBoundingClientRect(),n=e.pageX,r=e.pageY;return!(n>=t.left&&n<=t.right&&r>=t.top&&r<=t.bottom)}return!1}(e))&&(this.info.prevent||g.fire(s,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:t}))}});var P={x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(e,t,n){g.gestures[t]?g.add(e,t,n):e.addEventListener(t,n)},_unlisten:function(e,t,n){g.gestures[t]?g.remove(e,t,n):e.removeEventListener(t,n)},setScrollDirection:function(e,t){t=t||this,g.setTouchAction(t,P[e]||"auto")}}),Polymer.Gestures=g}(),function(){"use strict";if(Polymer.Base._addFeature({$$:function(e){return Polymer.dom(this.root).querySelector(e)},toggleClass:function(e,t,n){n=n||this,1==arguments.length&&(t=!n.classList.contains(e)),t?Polymer.dom(n).classList.add(e):Polymer.dom(n).classList.remove(e)},toggleAttribute:function(e,t,n){n=n||this,1==arguments.length&&(t=!n.hasAttribute(e)),t?Polymer.dom(n).setAttribute(e,""):Polymer.dom(n).removeAttribute(e)},classFollows:function(e,t,n){n&&Polymer.dom(n).classList.remove(e),t&&Polymer.dom(t).classList.add(e)},attributeFollows:function(e,t,n){n&&Polymer.dom(n).removeAttribute(e),t&&Polymer.dom(t).setAttribute(e,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var e,t=this.getEffectiveChildNodes(),n=[],r=0;e=t[r];r++)e.nodeType!==Node.COMMENT_NODE&&n.push(Polymer.dom(e).textContent);return n.join("")},queryEffectiveChildren:function(e){var t=Polymer.dom(this).queryDistributedElements(e);return t&&t[0]},queryAllEffectiveChildren:function(e){return Polymer.dom(this).queryDistributedElements(e)},getContentChildNodes:function(e){var t=Polymer.dom(this.root).querySelector(e||"content");return t?Polymer.dom(t).getDistributedNodes():[]},getContentChildren:function(e){return this.getContentChildNodes(e).filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},fire:function(e,t,n){var r=(n=n||Polymer.nob).node||this;t=null==t?{}:t;var s=void 0===n.bubbles||n.bubbles,i=Boolean(n.cancelable),o=n._useCache,a=this._getEvent(e,s,i,o);return a.detail=t,o&&(this.__eventCache[e]=null),r.dispatchEvent(a),o&&(this.__eventCache[e]=a),a},__eventCache:{},_getEvent:function(e,t,n,r){var s=r&&this.__eventCache[e];return s&&s.bubbles==t&&s.cancelable==n||(s=new Event(e,{bubbles:Boolean(t),cancelable:n})),s},async:function(e,t){var n=this;return Polymer.Async.run(function(){e.call(n)},t)},cancelAsync:function(e){Polymer.Async.cancel(e)},arrayDelete:function(e,t){var n;if(Array.isArray(e)){if(0<=(n=e.indexOf(t)))return e.splice(n,1)}else if(0<=(n=this._get(e).indexOf(t)))return this.splice(e,n,1)},transform:function(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e},translate3d:function(e,t,n,r){r=r||this,this.transform("translate3d("+e+","+t+","+n+")",r)},importHref:function(e,t,n,r){var s=document.createElement("link");s.rel="import",s.href=e;var i=Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{},o=i[s.href],a=o||s,l=this,c=function(e){return e.target.__firedLoad=!0,e.target.removeEventListener("load",c),e.target.removeEventListener("error",h),t.call(l,e)},h=function(e){return e.target.__firedError=!0,e.target.removeEventListener("load",c),e.target.removeEventListener("error",h),n.call(l,e)};return t&&a.addEventListener("load",c),n&&a.addEventListener("error",h),o?(o.__firedLoad&&o.dispatchEvent(new Event("load")),o.__firedError&&o.dispatchEvent(new Event("error"))):(i[s.href]=s,(r=Boolean(r))&&s.setAttribute("async",""),document.head.appendChild(s)),a},create:function(e,t){var n=document.createElement(e);if(t)for(var r in t)n[r]=t[r];return n},isLightDescendant:function(e){return this!==e&&this.contains(e)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(e).getOwnerRoot()},isLocalDescendant:function(e){return this.root===Polymer.dom(e).getOwnerRoot()}}),!Polymer.Settings.useNativeCustomElements){var s=Polymer.Base.importHref;Polymer.Base.importHref=function(e,t,n,r){CustomElements.ready=!1;return s.call(this,e,function(e){if(CustomElements.upgradeDocumentTree(document),CustomElements.ready=!0,t)return t.call(this,e)},n,r)}}}(),Polymer.Bind={prepareModel:function(e){Polymer.Base.mixin(e,this._modelApi)},_modelApi:{_notifyChange:function(e,t,n){n=void 0===n?this[e]:n,t=t||Polymer.CaseMap.camelToDashCase(e)+"-changed",this.fire(t,{value:n},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(e,t,n,r){var s=this.__data__[e];return s===t||s!=s&&t!=t||("object"==typeof(this.__data__[e]=t)&&this._clearPath(e),this._propertyChanged&&this._propertyChanged(e,t,s),n&&this._effectEffects(e,t,n,s,r)),s},__setProperty:function(e,t,n,r){var s=(r=r||this)._propertyEffects&&r._propertyEffects[e];s?r._propertySetter(e,t,s,n):r[e]!==t&&(r[e]=t)},_effectEffects:function(e,t,n,r,s){for(var i,o=0,a=n.length;o<a&&(i=n[o]);o++)i.fn.call(this,e,this[e],i.effect,r,s)},_clearPath:function(e){for(var t in this.__data__)Polymer.Path.isDescendant(e,t)&&(this.__data__[t]=void 0)}},ensurePropertyEffects:function(e,t){e._propertyEffects||(e._propertyEffects={});var n=e._propertyEffects[t];return n||(n=e._propertyEffects[t]=[]),n},addPropertyEffect:function(e,t,n,r){var s=this.ensurePropertyEffects(e,t),i={kind:n,effect:r,fn:Polymer.Bind["_"+n+"Effect"]};return s.push(i),i},createBindings:function(e){var t=e._propertyEffects;if(t)for(var n in t){var r=t[n];r.sort(this._sortPropertyEffects),this._createAccessors(e,n,r)}},_sortPropertyEffects:function(){var n={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,function:7};return function(e,t){return n[e.kind]-n[t.kind]}}(),_createAccessors:function(e,t,n){var r={get:function(){return this.__data__[t]}},s=function(e){this._propertySetter(t,e,n)},i=e.getPropertyInfo&&e.getPropertyInfo(t);i&&i.readOnly?i.computed||(e["_set"+this.upper(t)]=s):r.set=s,Object.defineProperty(e,t,r)},upper:function(e){return e[0].toUpperCase()+e.substring(1)},_addAnnotatedListener:function(e,t,n,r,s,i){e._bindListeners||(e._bindListeners=[]);var o=this._notedListenerFactory(n,r,Polymer.Path.isDeep(r),i),a=s||Polymer.CaseMap.camelToDashCase(n)+"-changed";e._bindListeners.push({index:t,property:n,path:r,changedFn:o,event:a})},_isEventBogus:function(e,t){return e.path&&e.path[0]!==t},_notedListenerFactory:function(s,i,o,a){return function(e,t,n){if(n){var r=Polymer.Path.translate(s,i,n);this._notifyPath(r,t)}else t=e[s],a&&(t=!t),o?this.__data__[i]!=t&&this.set(i,t):this[i]=t}},prepareInstance:function(e){e.__data__=Object.create(null)},setupBindListeners:function(e){for(var t,n=e._bindListeners,r=0,s=n.length;r<s&&(t=n[r]);r++){var i=e._nodes[t.index];this._addNotifyListener(i,e,t.event,t.changedFn)}},_addNotifyListener:function(e,t,n,r){e.addEventListener(n,function(e){return t._notifyListener(r,e)})}},Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(e){return e.name&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode},_annotationEffect:function(e,t,n){e!=n.value&&(t=this._get(n.value),this.__data__[n.value]=t),this._applyEffectValue(n,t)},_reflectEffect:function(e,t,n){this.reflectPropertyToAttribute(e,n.attribute,t)},_notifyEffect:function(e,t,n,r,s){s||this._notifyChange(e,n.event,t)},_functionEffect:function(e,t,n,r,s){n.call(this,e,t,r,s)},_observerEffect:function(e,t,n,r){var s=this[n.method];s?s.call(this,t,r):this._warn(this._logf("_observerEffect","observer method `"+n.method+"` not defined"))},_complexObserverEffect:function(e,t,n){var r=this[n.method];if(r){var s=Polymer.Bind._marshalArgs(this.__data__,n,e,t);s&&r.apply(this,s)}else n.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+n.method+"` not defined"))},_computeEffect:function(e,t,n){var r=this[n.method];if(r){var s=Polymer.Bind._marshalArgs(this.__data__,n,e,t);if(s){var i=r.apply(this,s);this.__setProperty(n.name,i)}}else n.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+n.method+"` not defined"))},_annotatedComputationEffect:function(e,t,n){var r=this._rootDataHost||this,s=r[n.method];if(s){var i=Polymer.Bind._marshalArgs(this.__data__,n,e,t);if(i){var o=s.apply(r,i);this._applyEffectValue(n,o)}}else n.dynamicFn||r._warn(r._logf("_annotatedComputationEffect","compute method `"+n.method+"` not defined"))},_marshalArgs:function(e,t,n,r){for(var s=[],i=t.args,o=1<i.length||t.dynamicFn,a=0,l=i.length;a<l;a++){var c,h=i[a],u=h.name;if(h.literal?c=h.value:n===u?c=r:void 0===(c=e[u])&&h.structured&&(c=Polymer.Base._get(u,e)),o&&void 0===c)return;if(h.wildcard){var f=Polymer.Path.isAncestor(n,u);s[a]={path:f?n:u,value:f?r:c,base:c}}else s[a]=c}return s}}),Polymer.Base._addFeature({_addPropertyEffect:function(e,t,n){var r=Polymer.Bind.addPropertyEffect(this,e,t,n);r.pathFn=this["_"+r.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this),this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(e){if(e)for(var t in e){var n=e[t];if(n.observer&&this._addObserverEffect(t,n.observer),n.computed&&(n.readOnly=!0,this._addComputedEffect(t,n.computed)),n.notify&&this._addPropertyEffect(t,"notify",{event:Polymer.CaseMap.camelToDashCase(t)+"-changed"}),n.reflectToAttribute){var r=Polymer.CaseMap.camelToDashCase(t);"-"===r[0]?this._warn(this._logf("_addPropertyEffects","Property "+t+" cannot be reflected to attribute "+r+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(t,"reflect",{attribute:r})}n.readOnly&&Polymer.Bind.ensurePropertyEffects(this,t)}},_addComputedEffect:function(e,t){for(var n,r=this._parseMethod(t),s=r.dynamicFn,i=0;i<r.args.length&&(n=r.args[i]);i++)this._addPropertyEffect(n.model,"compute",{method:r.method,args:r.args,trigger:n,name:e,dynamicFn:s});s&&this._addPropertyEffect(r.method,"compute",{method:r.method,args:r.args,trigger:null,name:e,dynamicFn:s})},_addObserverEffect:function(e,t){this._addPropertyEffect(e,"observer",{method:t,property:e})},_addComplexObserverEffects:function(e){if(e)for(var t,n=0;n<e.length&&(t=e[n]);n++)this._addComplexObserverEffect(t)},_addComplexObserverEffect:function(e){var t=this._parseMethod(e);if(!t)throw new Error("Malformed observer expression '"+e+"'");for(var n,r=t.dynamicFn,s=0;s<t.args.length&&(n=t.args[s]);s++)this._addPropertyEffect(n.model,"complexObserver",{method:t.method,args:t.args,trigger:n,dynamicFn:r});r&&this._addPropertyEffect(t.method,"complexObserver",{method:t.method,args:t.args,trigger:null,dynamicFn:r})},_addAnnotationEffects:function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++)for(var r,s=t.bindings,i=0;i<s.length&&(r=s[i]);i++)this._addAnnotationEffect(r,n)},_addAnnotationEffect:function(e,t){Polymer.Bind._shouldAddListener(e)&&Polymer.Bind._addAnnotatedListener(this,t,e.name,e.parts[0].value,e.parts[0].event,e.parts[0].negate);for(var n=0;n<e.parts.length;n++){var r=e.parts[n];r.signature?this._addAnnotatedComputationEffect(e,r,t):r.literal||("attribute"===e.kind&&"-"===e.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+e.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(r.model,"annotation",{kind:e.kind,index:t,name:e.name,propertyName:e.propertyName,value:r.value,isCompound:e.isCompound,compoundIndex:r.compoundIndex,event:r.event,customEvent:r.customEvent,negate:r.negate}))}},_addAnnotatedComputationEffect:function(e,t,n){var r=t.signature;if(r.static)this.__addAnnotatedComputationEffect("__static__",n,e,t,null);else{for(var s,i=0;i<r.args.length&&(s=r.args[i]);i++)s.literal||this.__addAnnotatedComputationEffect(s.model,n,e,t,s);r.dynamicFn&&this.__addAnnotatedComputationEffect(r.method,n,e,t,null)}},__addAnnotatedComputationEffect:function(e,t,n,r,s){this._addPropertyEffect(e,"annotatedComputation",{index:t,isCompound:n.isCompound,compoundIndex:r.compoundIndex,kind:n.kind,name:n.name,negate:r.negate,method:r.signature.method,args:r.signature.args,trigger:s,dynamicFn:r.signature.dynamicFn})},_parseMethod:function(e){var t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){var n={method:t[1],static:!0};if(this.getPropertyInfo(n.method)!==Polymer.nob&&(n.static=!1,n.dynamicFn=!0),t[2].trim()){var r=t[2].replace(/\\,/g,"&comma;").split(",");return this._parseArgs(r,n)}return n.args=Polymer.nar,n}},_parseArgs:function(e,n){return n.args=e.map(function(e){var t=this._parseArg(e);return t.literal||(n.static=!1),t},this),n},_parseArg:function(e){var t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t},r=t[0];switch("-"===r&&(r=t[1]),"0"<=r&&r<="9"&&(r="#"),r){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.model=Polymer.Path.root(t),n.structured=Polymer.Path.isDeep(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this),this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(e,t){var n=this._nodes[e.index],r=e.name;if(t=this._computeFinalAnnotationValue(n,r,t,e),"attribute"==e.kind)this.serializeValueToAttribute(t,r,n);else{var s=n._propertyInfo&&n._propertyInfo[r];if(s&&s.readOnly)return;this.__setProperty(r,t,Polymer.Settings.suppressBindingNotifications,n)}},_computeFinalAnnotationValue:function(e,t,n,r){if(r.negate&&(n=!n),r.isCompound){var s=e.__compoundStorage__[t];s[r.compoundIndex]=n,n=s.join("")}return"attribute"!==r.kind&&("className"===t&&(n=this._scopeElementClass(e,n)),("textContent"===t||"input"==e.localName&&"value"==t)&&(n=null==n?"":n)),n},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}}),function(){var t=Polymer.Settings.usePolyfillProto,n=Boolean(Object.getOwnPropertyDescriptor(document.documentElement,"properties"));Polymer.Base._addFeature({_setupConfigure:function(e){if(this._config={},this._handlers=[],this._aboveConfig=null,e)for(var t in e)void 0!==e[t]&&(this._config[t]=e[t])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(e){var t=this._clientsReadied?this:this._config;this._setAttributeToProperty(t,e)},_configValue:function(e,t){var n=this._propertyInfo[e];n&&n.readOnly||(this._config[e]=t)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences(),this._configureInstanceProperties(),this._aboveConfig=this.mixin({},this._config);for(var e={},t=0;t<this.behaviors.length;t++)this._configureProperties(this.behaviors[t].properties,e);this._configureProperties(n?this.__proto__.properties:this.properties,e),this.mixin(e,this._aboveConfig),this._config=e,this._clients&&this._clients.length&&this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var e in this._propertyEffects)!t&&this.hasOwnProperty(e)&&(this._configValue(e,this[e]),delete this[e])},_configureProperties:function(e,t){for(var n in e){var r=e[n];if(void 0!==r.value){var s=r.value;"function"==typeof s&&(s=s.call(this,this._config)),t[n]=s}}},_distributeConfig:function(e){var t=this._propertyEffects;if(t)for(var n in e){var r=t[n];if(r)for(var s,i=0,o=r.length;i<o&&(s=r[i]);i++)if("annotation"===s.kind){var a=this._nodes[s.effect.index],l=s.effect.propertyName,c="attribute"==s.effect.kind,h=a._propertyEffects&&a._propertyEffects[l];if(a._configValue&&(h||!c)){var u=n===s.effect.value?e[n]:this._get(s.effect.value,e);u=this._computeFinalAnnotationValue(a,l,u,s.effect),c&&(u=a.deserialize(this.serialize(u),a._propertyInfo[l].type)),a._configValue(l,u)}}}},_afterClientsReady:function(){this.importPath=this._importPath,this.rootPath=Polymer.rootPath,this._executeStaticEffects(),this._applyConfig(this._config,this._aboveConfig),this._flushHandlers()},_applyConfig:function(e,t){for(var n in e)void 0===this[n]&&this.__setProperty(n,e[n],n in t)},_notifyListener:function(e,t){if(!Polymer.Bind._isEventBogus(t,t.target)){var n,r;if(t.detail&&(n=t.detail.value,r=t.detail.path),this._clientsReadied)return e.call(this,t.target,n,r);this._queueHandler([e,t.target,n,r])}},_queueHandler:function(e){this._handlers.push(e)},_flushHandlers:function(){for(var e,t=this._handlers,n=0,r=t.length;n<r&&(e=t[n]);n++)e[0].call(this,e[1],e[2],e[3]);this._handlers=[]}})}(),function(){"use strict";var a=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(e,t,n){var r={},s=this._get(e,this,r);1===arguments.length&&(t=s),r.path&&this._notifyPath(r.path,t,n)},_notifyPath:function(e,t,n){var r=this._propertySetter(e,t);if(r!==t&&(r==r||t==t))return this._pathEffector(e,t),n||this._notifyPathUp(e,t),!0},_getPathParts:function(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].toString().split("."),s=0;s<r.length;s++)t.push(r[s]);return t}return e.toString().split(".")},set:function(e,t,n){var r,s=n||this,i=this._getPathParts(e),o=i[i.length-1];if(1<i.length){for(var a=0;a<i.length-1;a++){var l=i[a];if(r&&"#"==l[0]?s=Polymer.Collection.get(r).getItem(l):(s=s[l],r&&parseInt(l,10)==l&&(i[a]=Polymer.Collection.get(r).getKey(s))),!s)return;r=Array.isArray(s)?s:null}if(r){var c,h,u=Polymer.Collection.get(r);"#"==o[0]?(h=o,c=u.getItem(h),o=r.indexOf(c),u.setItem(h,t)):parseInt(o,10)==o&&(c=s[o],h=u.getKey(c),i[a]=h,u.setItem(h,t))}s[o]=t,n||this._notifyPath(i.join("."),t)}else s[e]=t},get:function(e,t){return this._get(e,t)},_get:function(e,t,n){for(var r,s=t||this,i=this._getPathParts(e),o=0;o<i.length;o++){if(!s)return;var a=i[o];r&&"#"==a[0]?s=Polymer.Collection.get(r).getItem(a):(s=s[a],n&&r&&parseInt(a,10)==a&&(i[o]=Polymer.Collection.get(r).getKey(s))),r=Array.isArray(s)?s:null}return n&&(n.path=i.join(".")),s},_pathEffector:function(e,t){var n=a.root(e),r=this._propertyEffects&&this._propertyEffects[n];if(r)for(var s,i=0;i<r.length&&(s=r[i]);i++){var o=s.pathFn;o&&o.call(this,e,t,s.effect)}this._boundPaths&&this._notifyBoundPaths(e,t)},_annotationPathEffect:function(e,t,n){if(a.matches(n.value,!1,e))Polymer.Bind._annotationEffect.call(this,e,t,n);else if(!n.negate&&a.isDescendant(n.value,e)){var r=this._nodes[n.index];if(r&&r._notifyPath){var s=a.translate(n.value,n.name,e);r._notifyPath(s,t,!0)}}},_complexObserverPathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._complexObserverEffect.call(this,e,t,n)},_computePathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._computeEffect.call(this,e,t,n)},_annotatedComputationPathEffect:function(e,t,n){a.matches(n.trigger.name,n.trigger.wildcard,e)&&Polymer.Bind._annotatedComputationEffect.call(this,e,t,n)},linkPaths:function(e,t){this._boundPaths=this._boundPaths||{},t?this._boundPaths[e]=t:this.unlinkPaths(e)},unlinkPaths:function(e){this._boundPaths&&delete this._boundPaths[e]},_notifyBoundPaths:function(e,t){for(var n in this._boundPaths){var r=this._boundPaths[n];a.isDescendant(n,e)?this._notifyPath(a.translate(n,r,e),t):a.isDescendant(r,e)&&this._notifyPath(a.translate(r,n,e),t)}},_notifyPathUp:function(e,t){var n=a.root(e),r=Polymer.CaseMap.camelToDashCase(n)+this._EVENT_CHANGED;this.fire(r,{path:e,value:t},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(e,t){var n={},r=this._get(e,this,n);this._notifySplices(r,n.path,t)},_notifySplices:function(e,t,n){var r={keySplices:Polymer.Collection.applySplices(e,n),indexSplices:n},s=t+".splices";this._notifyPath(s,r),this._notifyPath(t+".length",e.length),this.__data__[s]={keySplices:null,indexSplices:null}},_notifySplice:function(e,t,n,r,s){this._notifySplices(e,t,[{index:n,addedCount:r,removed:s,object:e,type:"splice"}])},push:function(e){var t={},n=this._get(e,this,t),r=Array.prototype.slice.call(arguments,1),s=n.length,i=n.push.apply(n,r);return r.length&&this._notifySplice(n,t.path,s,r.length,[]),i},pop:function(e){var t={},n=this._get(e,this,t),r=Boolean(n.length),s=Array.prototype.slice.call(arguments,1),i=n.pop.apply(n,s);return r&&this._notifySplice(n,t.path,n.length,0,[i]),i},splice:function(e,t){var n={},r=this._get(e,this,n);(t=t<0?r.length-Math.floor(-t):Math.floor(t))||(t=0);var s=Array.prototype.slice.call(arguments,1),i=r.splice.apply(r,s),o=Math.max(s.length-2,0);return(o||i.length)&&this._notifySplice(r,n.path,t,o,i),i},shift:function(e){var t={},n=this._get(e,this,t),r=Boolean(n.length),s=Array.prototype.slice.call(arguments,1),i=n.shift.apply(n,s);return r&&this._notifySplice(n,t.path,0,0,[i]),i},unshift:function(e){var t={},n=this._get(e,this,t),r=Array.prototype.slice.call(arguments,1),s=n.unshift.apply(n,r);return r.length&&this._notifySplice(n,t.path,0,r.length,[]),s},prepareModelNotifyPath:function(e){this.mixin(e,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})}(),Polymer.Base._addFeature({resolveUrl:function(e){return Polymer.ResolveUrl.resolveUrl(e,this._importPath)}}),Polymer.CssParse={parse:function(e){return e=this._clean(e),this._parseCss(this._lex(e),e)},_clean:function(e){return e.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(e){for(var t={start:0,end:e.length},n=t,r=0,s=e.length;r<s;r++)switch(e[r]){case this.OPEN_BRACE:n.rules||(n.rules=[]);var i=n;n={start:r+1,parent:i,previous:i.rules[i.rules.length-1]},i.rules.push(n);break;case this.CLOSE_BRACE:n.end=r+1,n=n.parent||t}return t},_parseCss:function(e,t){var n=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=n.trim(),e.parent){var r=e.previous?e.previous.end:e.parent.start;n=t.substring(r,e.start-1),n=(n=(n=this._expandUnicodeEscapes(n)).replace(this._rx.multipleSpaces," ")).substring(n.lastIndexOf(";")+1);var s=e.parsedSelector=e.selector=n.trim();e.atRule=0===s.indexOf(this.AT_START),e.atRule?0===s.indexOf(this.MEDIA_START)?e.type=this.types.MEDIA_RULE:s.match(this._rx.keyframesRule)&&(e.type=this.types.KEYFRAMES_RULE,e.keyframesName=e.selector.split(this._rx.multipleSpaces).pop()):0===s.indexOf(this.VAR_START)?e.type=this.types.MIXIN_RULE:e.type=this.types.STYLE_RULE}var i=e.rules;if(i)for(var o,a=0,l=i.length;a<l&&(o=i[a]);a++)this._parseCss(o,t);return e},_expandUnicodeEscapes:function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(){for(var e=arguments[1],t=6-e.length;t--;)e="0"+e;return"\\"+e})},stringify:function(e,t,n){n=n||"";var r="";if(e.cssText||e.rules){var s=e.rules;if(s&&!this._hasMixinRules(s))for(var i,o=0,a=s.length;o<a&&(i=s[o]);o++)r=this.stringify(i,t,r);else(r=(r=t?e.cssText:this.removeCustomProps(e.cssText)).trim())&&(r="  "+r+"\n")}return r&&(e.selector&&(n+=e.selector+" "+this.OPEN_BRACE+"\n"),n+=r,e.selector&&(n+=this.CLOSE_BRACE+"\n\n")),n},_hasMixinRules:function(e){return 0===e[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(e){return e=this.removeCustomPropAssignment(e),this.removeCustomPropApply(e)},removeCustomPropAssignment:function(e){return e.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(e){return e.replace(this._rx.mixinApply,"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},VAR_START:"--",MEDIA_START:"@media",AT_START:"@"},Polymer.StyleUtil=function(){var h=Polymer.Settings;return{unscopedStyleImports:new WeakMap,SHADY_UNSCOPED_ATTR:"shady-unscoped",NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel=import][type~=css], template",INCLUDE_ATTR:"include",toCssText:function(e,t){return"string"==typeof e&&(e=this.parser.parse(e)),t&&this.forEachRule(e,t),this.parser.stringify(e,this.NATIVE_VARIABLES)},forRulesInStyles:function(e,t,n){if(e)for(var r,s=0,i=e.length;s<i&&(r=e[s]);s++)this.forEachRuleInStyle(r,t,n)},forActiveRulesInStyles:function(e,t,n){if(e)for(var r,s=0,i=e.length;s<i&&(r=e[s]);s++)this.forEachRuleInStyle(r,t,n,!0)},rulesForStyle:function(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=this.parser.parse(e.textContent)),e.__cssRules},isKeyframesSelector:function(e){return e.parent&&e.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(t,n,r,e){var s,i,o=this.rulesForStyle(t);n&&(s=function(e){n(e,t)}),r&&(i=function(e){r(e,t)}),this.forEachRule(o,s,i,e)},forEachRule:function(e,t,n,r){if(e){var s=!1;if(r&&e.type===this.ruleTypes.MEDIA_RULE){var i=e.selector.match(this.rx.MEDIA_MATCH);i&&(window.matchMedia(i[1]).matches||(s=!0))}e.type===this.ruleTypes.STYLE_RULE?t(e):n&&e.type===this.ruleTypes.KEYFRAMES_RULE?n(e):e.type===this.ruleTypes.MIXIN_RULE&&(s=!0);var o=e.rules;if(o&&!s)for(var a,l=0,c=o.length;l<c&&(a=o[l]);l++)this.forEachRule(a,t,n,r)}},applyCss:function(e,t,n,r){var s=this.createScopeStyle(e,t);return this.applyStyle(s,n,r)},applyStyle:function(e,t,n){t=t||document.head;var r=n&&n.nextSibling||t.firstChild;return this.__lastHeadApplyNode=e,t.insertBefore(e,r)},createScopeStyle:function(e,t){var n=document.createElement("style");return t&&n.setAttribute("scope",t),n.textContent=e,n},__lastHeadApplyNode:null,applyStylePlaceHolder:function(e){var t=document.createComment(" Shady DOM styles for "+e+" "),n=this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null,r=document.head;return r.insertBefore(t,n||r.firstChild),this.__lastHeadApplyNode=t},cssFromModules:function(e,t){for(var n=e.trim().split(/\s+/),r="",s=0;s<n.length;s++)r+=this.cssFromModule(n[s],t);return r},cssFromModule:function(e,t){var n=Polymer.DomModule.import(e);return n&&!n._cssText&&(n._cssText=this.cssFromElement(n)),!n&&t&&console.warn("Could not find style data in module named",e),n&&n._cssText||""},cssFromElement:function(e){for(var t,n="",r=e.content||e,s=Polymer.TreeApi.arrayCopy(r.querySelectorAll(this.MODULE_STYLES_SELECTOR)),i=0;i<s.length;i++)if("template"===(t=s[i]).localName)t.hasAttribute("preserve-content")||(n+=this.cssFromElement(t));else if("style"===t.localName){var o=t.getAttribute(this.INCLUDE_ATTR);o&&(n+=this.cssFromModules(o,!0)),(t=t.__appliedElement||t).parentNode.removeChild(t);var a=this.resolveCss(t.textContent,e.ownerDocument);!h.useNativeShadow&&t.hasAttribute(this.SHADY_UNSCOPED_ATTR)?(t.textContent=a,document.head.insertBefore(t,document.head.firstChild)):n+=a}else if(t.import&&t.import.body){var l=this.resolveCss(t.import.body.textContent,t.import);if(!h.useNativeShadow&&t.hasAttribute(this.SHADY_UNSCOPED_ATTR)){if(!this.unscopedStyleImports.has(t.import)){this.unscopedStyleImports.set(t.import,!0);var c=document.createElement("style");c.setAttribute(this.SHADY_UNSCOPED_ATTR,""),c.textContent=l,document.head.insertBefore(c,document.head.firstChild)}}else n+=l}return n},styleIncludesToTemplate:function(e){for(var t,n=e.content.querySelectorAll("style[include]"),r=0;r<n.length;r++)(t=n[r]).parentNode.insertBefore(this._includesToFragment(t.getAttribute("include")),t)},_includesToFragment:function(e){for(var t=e.trim().split(" "),n=document.createDocumentFragment(),r=0;r<t.length;r++){var s=Polymer.DomModule.import(t[r],"template");s&&this._addStylesToFragment(n,s.content)}return n},_addStylesToFragment:function(e,t){for(var n,r=t.querySelectorAll("style"),s=0;s<r.length;s++){var i=(n=r[s]).getAttribute("include");i&&e.appendChild(this._includesToFragment(i)),n.textContent&&e.appendChild(n.cloneNode(!0))}},isTargetedBuild:function(e){return h.useNativeShadow?"shadow"===e:"shady"===e},cssBuildTypeForModule:function(e){var t=Polymer.DomModule.import(e);if(t)return this.getCssBuildType(t)},getCssBuildType:function(e){return e.getAttribute("css-build")},_findMatchingParen:function(e,t){for(var n=0,r=t,s=e.length;r<s;r++)switch(e[r]){case"(":n++;break;case")":if(0==--n)return r}return-1},processVariableAndFallback:function(e,t){var n=e.indexOf("var(");if(-1===n)return t(e,"","","");var r=this._findMatchingParen(e,n+3),s=e.substring(n+4,r),i=e.substring(0,n),o=this.processVariableAndFallback(e.substring(r+1),t),a=s.indexOf(",");return-1===a?t(i,s.trim(),"",o):t(i,s.substring(0,a).trim(),s.substring(a+1).trim(),o)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s>+~])"},resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}(),Polymer.StyleTransformer=function(){var f=Polymer.StyleUtil,p=Polymer.Settings,e={dom:function(e,t,n,r){this._transformDom(e,t||"",n,r)},_transformDom:function(e,t,n,r){e.setAttribute&&this.element(e,t,n,r);for(var s=Polymer.dom(e).childNodes,i=0;i<s.length;i++)this._transformDom(s[i],t,n,r)},element:function(e,t,n,r){if(n)r?e.removeAttribute(i):e.setAttribute(i,t);else if(t)if(e.classList)r?(e.classList.remove(i),e.classList.remove(t)):(e.classList.add(i),e.classList.add(t));else if(e.getAttribute){var s=e.getAttribute(g);r?s&&e.setAttribute(g,s.replace(i,"").replace(t,"")):e.setAttribute(g,(s?s+" ":"")+i+" "+t)}},elementStyles:function(e,t){var n,r=e._styles,s="",i=e.__cssBuild,o=p.useNativeShadow||"shady"===i;if(o){var a=this;n=function(e){e.selector=a._slottedToContent(e.selector),e.selector=e.selector.replace(d,":host > *"),e.selector=a._dirShadowTransform(e.selector),t&&t(e)}}for(var l,c=0,h=r.length;c<h&&(l=r[c]);c++){var u=f.rulesForStyle(l);s+=o?f.toCssText(u,n):this.css(u,e.is,e.extends,t,e._scopeCssViaAttr)+"\n\n"}return s.trim()},css:function(e,t,n,r,s){var i=this._calcHostScope(t,n);t=this._calcElementScope(t,s);var o=this;return f.toCssText(e,function(e){e.isScoped||(o.rule(e,t,i),e.isScoped=!0),r&&r(e,t,i)})},_calcElementScope:function(e,t){return e?t?m+e+y:a+e:""},_calcHostScope:function(e,t){return t?"[is="+e+"]":e},rule:function(e,t,n){this._transformRule(e,this._transformComplexSelector,t,n)},_transformRule:function(e,t,n,r){e.selector=e.transformedSelector=this._transformRuleCss(e,t,n,r)},_splitSelectorList:function(e){for(var t=[],n="",r=0;0<=r&&r<e.length;r++)if("("===e[r]){var s=f._findMatchingParen(e,r);n+=e.slice(r,s+1),r=s}else e[r]===h?(t.push(n),n=""):n+=e[r];return n&&t.push(n),0===t.length&&t.push(e),t},_transformRuleCss:function(e,t,n,r){var s=this._splitSelectorList(e.selector);if(!f.isKeyframesSelector(e))for(var i,o=0,a=s.length;o<a&&(i=s[o]);o++)s[o]=t.call(this,i,n,r);return s.join(h)},_ensureScopedDir:function(e){var t=e.match(A);return t&&""===t[1]&&t[0].length===e.length&&(e="*"+e),e},_additionalDirSelectors:function(e,t,n){return e&&t?h+(n=n||"")+" "+e+" "+t:""},_transformComplexSelector:function(e,s,i){var o=!1,a=!1,l=!1,c=this;return e=e.trim(),e=(e=(e=this._slottedToContent(e)).replace(d,":host > *")).replace(P,u+" $1"),e=(e=this._ensureScopedDir(e)).replace(n,function(e,t,n){if(o)n=n.replace(_," ");else{var r=c._transformCompoundSelector(n,t,s,i);o=o||r.stop,a=a||r.hostContext,l=l||r.dir,t=r.combinator,n=r.value}return t+n}),a&&(e=e.replace(r,function(e,t,n,r){var s=t+n+" "+i+r+h+" "+t+i+n+r;return l&&(s+=c._additionalDirSelectors(n,r,i)),s})),e},_transformDir:function(e){return e=(e=e.replace(b,T)).replace(A,x)},_transformCompoundSelector:function(e,t,n,r){var s,i=e.search(_),o=!1,a=!1;return e.match(A)&&(e=this._transformDir(e),a=!0),0<=e.indexOf(l)?o=!0:0<=e.indexOf(u)?e=this._transformHostSelector(e,r):0!==i&&(e=n?this._transformSimpleSelector(e,n):e),0<=e.indexOf(c)&&(t=""),0<=i&&(e=e.replace(_," "),s=!0),{value:e,combinator:t,stop:s,hostContext:o,dir:a}},_transformSimpleSelector:function(e,t){var n=e.split(v);return n[0]+=t,n.join(v)},_transformHostSelector:function(e,r){var t=e.match(o),n=t&&t[2].trim()||"";return n?n[0].match(s)?e.replace(o,function(e,t,n){return r+n}):n.split(s)[0]===r?n:S:e.replace(u,r)},documentRule:function(e){e.selector=e.parsedSelector,this.normalizeRootSelector(e),p.useNativeShadow||this._transformRule(e,this._transformDocumentSelector)},normalizeRootSelector:function(e){e.selector=e.selector.replace(d,"html");var t=this._splitSelectorList(e.selector);t=t.filter(function(e){return!e.match(C)}),e.selector=t.join(h)},_transformDocumentSelector:function(e){return this._transformComplexSelector(e,t)},_slottedToContent:function(e){return e.replace(E,c+"> $1")},_dirShadowTransform:function(e){return e.match(/:dir\(/)?this._splitSelectorList(e).map(function(e){e=this._ensureScopedDir(e),e=this._transformDir(e);var t=r.exec(e);return t&&(e+=this._additionalDirSelectors(t[2],t[3],"")),e},this).join(h):e},SCOPE_NAME:"style-scope"},i=e.SCOPE_NAME,t=":not(["+i+"]):not(."+i+")",h=",",n=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,s=/[[.:#*]/,u=":host",d=":root",o=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,l=":host-context",r=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,c="::content",_=/::content|::shadow|\/deep\//,a=".",m="["+i+"~=",y="]",v=":",g="class",P=new RegExp("^("+c+")"),S="should_not_match",E=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,C=/:host(?:\s*>\s*\*)?/,A=/(.*):dir\((ltr|rtl)\)/,x=':host-context([dir="$2"]) $1',b=/:host\(:dir\((rtl|ltr)\)\)/g,T=':host-context([dir="$1"])';return e}(),Polymer.StyleExtends=function(){var n=Polymer.StyleUtil;return{hasExtends:function(e){return Boolean(e.match(this.rx.EXTEND))},transform:function(e){var t=n.rulesForStyle(e),s=this;return n.forEachRule(t,function(e){if(s._mapRuleOntoParent(e),e.parent)for(var t;t=s.rx.EXTEND.exec(e.cssText);){var n=t[1],r=s._findExtendor(n,e);r&&s._extendRule(e,r)}e.cssText=e.cssText.replace(s.rx.EXTEND,"")}),n.toCssText(t,function(e){e.selector.match(s.rx.STRIP)&&(e.cssText="")},!0)},_mapRuleOntoParent:function(e){if(e.parent){for(var t=e.parent.map||(e.parent.map={}),n=e.selector.split(","),r=0;r<n.length;r++)t[n[r].trim()]=e;return t}},_findExtendor:function(e,t){return t.parent&&t.parent.map&&t.parent.map[e]||this._findExtendor(e,t.parent)},_extendRule:function(t,e){t.parent!==e.parent&&this._cloneAndAddRuleToParent(e,t.parent),t.extends=t.extends||[],t.extends.push(e),e.selector=e.selector.replace(this.rx.STRIP,""),e.selector=(e.selector&&e.selector+",\n")+t.selector,e.extends&&e.extends.forEach(function(e){this._extendRule(t,e)},this)},_cloneAndAddRuleToParent:function(e,t){(e=Object.create(e)).parent=t,e.extends&&(e.extends=e.extends.slice()),t.rules.push(e)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}(),Polymer.ApplyShim=function(){"use strict";var d=Polymer.StyleUtil,h=d.rx.MIXIN_MATCH,n=d.rx.VAR_ASSIGN,r=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,l=/;\s*/m,u=/^\s*(initial)|(inherit)\s*$/,_="_-_",s={};function m(e,t){e=e.trim(),s[e]={properties:t,dependants:{}}}function y(e){return e=e.trim(),s[e]}function v(e){for(var t,n,r,s,i,o,a,l=e.split(";"),c={},h=0;h<l.length;h++)(r=l[h])&&1<(s=r.split(":")).length&&(t=s[0].trim(),i=t,o=s.slice(1).join(":"),void 0,(a=u.exec(o))&&(o=a[1]?P._getInitialValueForProperty(i):"apply-shim-inherit"),n=o,c[t]=n);return c}function i(e,t,n,r){if(n&&d.processVariableAndFallback(n,function(e,t){t&&y(t)&&(r="@apply "+t+";")}),!r)return e;var s=g(r),i=e.slice(0,e.indexOf("--")),o=v(s),a=o,l=y(t),c=l&&l.properties;c?(a=Object.create(c),a=Polymer.Base.mixin(a,o)):m(t,a);var h,u,f=[],p=!1;for(h in a)void 0===(u=o[h])&&(u="initial"),!c||h in c||(p=!0),f.push(t+_+h+": "+u);return p&&function(e){var t=P.__currentElementProto,n=t&&t.is;for(var r in e.dependants)r!==n&&(e.dependants[r].__applyShimInvalid=!0)}(l),l&&(l.properties=a),n&&(i=e+";"+i),i+f.join("; ")+";"}function o(e,t,n){return"var("+t+",var("+n+"))"}function f(e,t){var n=[],r=y(e=e.replace(l,""));if(r||(m(e,{}),r=y(e)),r){var s,i,o,a=P.__currentElementProto;for(s in a&&(r.dependants[a.is]=a),r.properties)o=t&&t[s],i=[s,": var(",e,_,s],o&&i.push(",",o),i.push(")"),n.push(i.join(""))}return n.join("; ")}function g(e){for(var t;t=h.exec(e);){var n=t[0],r=t[1],s=t.index,i=s+n.indexOf("@apply"),o=s+n.length,a=e.slice(0,i),l=e.slice(o),c=f(r,v(a));e=[a,c,l].join(""),h.lastIndex=s+c.length}return e}var P={_measureElement:null,_map:s,_separator:_,transform:function(e,t){this.__currentElementProto=t,d.forRulesInStyles(e,this._boundFindDefinitions),d.forRulesInStyles(e,this._boundFindApplications),t&&(t.__applyShimInvalid=!1),this.__currentElementProto=null},_findDefinitions:function(e){var t=e.parsedCssText;t=(t=t.replace(r,o)).replace(n,i),e.cssText=t,":root"===e.selector&&(e.selector=":host > *")},_findApplications:function(e){e.cssText=g(e.cssText)},transformRule:function(e){this._findDefinitions(e),this._findApplications(e)},_getInitialValueForProperty:function(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}};return P._boundTransformRule=P.transformRule.bind(P),P._boundFindDefinitions=P._findDefinitions.bind(P),P._boundFindApplications=P._findApplications.bind(P),P}(),function(){var t=Polymer.Base._prepElement,r=Polymer.Settings.useNativeShadow,l=Polymer.StyleUtil,n=Polymer.StyleTransformer,c=Polymer.StyleExtends,s=Polymer.ApplyShim,i=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(e){this._encapsulateStyle&&"shady"!==this.__cssBuild&&n.element(e,this.is,this._scopeCssViaAttr),t.call(this,e)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!r),r||(this._scopeStyle=l.applyStylePlaceHolder(this.is)),this.__cssBuild=l.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){if(this._template){var e=l.isTargetedBuild(this.__cssBuild);if(i.useNativeCSSProperties&&"shadow"===this.__cssBuild&&e)return void(i.preserveStyleIncludes&&l.styleIncludesToTemplate(this._template));this._styles=this._styles||this._collectStyles(),i.useNativeCSSProperties&&!this.__cssBuild&&s.transform(this._styles,this);var t=i.useNativeCSSProperties&&e?this._styles.length&&this._styles[0].textContent.trim():n.elementStyles(this);this._prepStyleProperties(),!this._needsStyleProperties()&&t&&l.applyCss(t,this.is,r?this._template.content:null,this._scopeStyle)}else this._styles=[]},_collectStyles:function(){var e=[],t="",n=this.styleModules;if(n)for(var r,s=0,i=n.length;s<i&&(r=n[s]);s++)t+=l.cssFromModule(r);t+=l.cssFromModule(this.is);var o=this._template&&this._template.parentNode;if(!this._template||o&&o.id.toLowerCase()===this.is||(t+=l.cssFromElement(this._template)),t){var a=document.createElement("style");a.textContent=t,c.hasExtends(a.textContent)&&(t=c.transform(a)),e.push(a)}return e},_elementAdd:function(e){this._encapsulateStyle&&(e.__styleScoped?e.__styleScoped=!1:n.dom(e,this.is,this._scopeCssViaAttr))},_elementRemove:function(e){this._encapsulateStyle&&n.dom(e,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(e,t){if(!r){var i=this,s=function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e.getAttribute("class");e.setAttribute("class",i._scopeElementClass(e,t));for(var n,r=e.querySelectorAll("*"),s=0;s<r.length&&(n=r[s]);s++)t=n.getAttribute("class"),n.setAttribute("class",i._scopeElementClass(n,t))}};if(s(e),t){var n=new MutationObserver(function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++)if(t.addedNodes)for(var r=0;r<t.addedNodes.length;r++)s(t.addedNodes[r])});return n.observe(e,{childList:!0,subtree:!0}),n}}}})}(),Polymer.StyleProperties=function(){"use strict";var h=Polymer.DomApi.matchesSelector,u=Polymer.StyleUtil,p=Polymer.StyleTransformer,o=navigator.userAgent.match("Trident"),c=Polymer.Settings;return{decorateStyles:function(e,r){var t=this,s={},n=[],i=0,o=p._calcHostScope(r.is,r.extends);u.forRulesInStyles(e,function(n,e){t.decorateRule(n),n.index=i++,t.whenHostOrRootRule(r,n,e,function(e){if(n.parent.type===u.ruleTypes.MEDIA_RULE&&(r.__notStyleScopeCacheable=!0),e.isHost){var t=e.selector.split(" ").some(function(e){return 0===e.indexOf(o)&&e.length!==o.length});r.__notStyleScopeCacheable=r.__notStyleScopeCacheable||t}}),t.collectPropertiesInCssText(n.propertyInfo.cssText,s)},function(e){n.push(e)}),e._keyframes=n;var a=[];for(var l in s)a.push(l);return a},decorateRule:function(e){if(e.propertyInfo)return e.propertyInfo;var t={},n={};return this.collectProperties(e,n)&&(t.properties=n,e.rules=null),t.cssText=this.collectCssText(e),e.propertyInfo=t},collectProperties:function(e,t){var n=e.propertyInfo;if(!n){for(var r,s,i,o=this.rx.VAR_ASSIGN,a=e.parsedCssText;r=o.exec(a);)"inherit"!==(s=(r[2]||r[3]).trim())&&(t[r[1].trim()]=s),i=!0;return i}if(n.properties)return Polymer.Base.mixin(t,n.properties),!0},collectCssText:function(e){return this.collectConsumingCssText(e.parsedCssText)},collectConsumingCssText:function(e){return e.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(e,t){for(var n;n=this.rx.VAR_CONSUMED.exec(e);){var r=n[1];":"!==n[2]&&(t[r]=!0)}},reify:function(e){for(var t,n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++)e[t=n[r]]=this.valueForProperty(e[t],e)},valueForProperty:function(e,i){if(e)if(0<=e.indexOf(";"))e=this.valueForProperties(e,i);else{var o=this;e=u.processVariableAndFallback(e,function(e,t,n,r){var s=o.valueForProperty(i[t],i);return s&&"initial"!==s?"apply-shim-inherit"===s&&(s="inherit"):s=o.valueForProperty(i[n]||n,i)||n,e+(s||"")+r})}return e&&e.trim()||""},valueForProperties:function(e,t){for(var n,r,s=e.split(";"),i=0;i<s.length;i++)if(n=s[i]){if(this.rx.MIXIN_MATCH.lastIndex=0,r=this.rx.MIXIN_MATCH.exec(n))n=this.valueForProperty(t[r[1]],t);else{var o=n.indexOf(":");if(-1!==o){var a=n.substring(o);a=a.trim(),a=this.valueForProperty(a,t)||a,n=n.substring(0,o)+a}}s[i]=n&&n.lastIndexOf(";")===n.length-1?n.slice(0,-1):n||""}return s.join(";")},applyProperties:function(e,t){var n="";e.propertyInfo||this.decorateRule(e),e.propertyInfo.cssText&&(n=this.valueForProperties(e.propertyInfo.cssText,t)),e.cssText=n},applyKeyframeTransforms:function(e,t){var n=e.cssText,r=e.cssText;if(null==e.hasAnimations&&(e.hasAnimations=this.rx.ANIMATION_MATCH.test(n)),e.hasAnimations)if(null==e.keyframeNamesToTransform)for(var s in e.keyframeNamesToTransform=[],t)n!==(r=(0,t[s])(n))&&(n=r,e.keyframeNamesToTransform.push(s));else{for(var i=0;i<e.keyframeNamesToTransform.length;++i)n=(0,t[e.keyframeNamesToTransform[i]])(n);r=n}e.cssText=r},propertyDataFromStyles:function(e,o){var a={},l=this,c=[];return u.forActiveRulesInStyles(e,function(e){e.propertyInfo||l.decorateRule(e);var t,n,r,s,i=e.transformedSelector||e.parsedSelector;o&&e.propertyInfo.properties&&i&&h.call(o,i)&&(l.collectProperties(e,a),t=e.index,n=c,r=parseInt(t/32),s=1<<t%32,n[r]=(n[r]||0)|s)}),{properties:a,key:c}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(e,t){return Boolean(t.match(this._rootSelector))||"html"===e&&-1<t.indexOf("html")},whenHostOrRootRule:function(e,t,n,r){if(t.propertyInfo||self.decorateRule(t),t.propertyInfo.properties){var s=e.is?p._calcHostScope(e.is,e.extends):"html",i=t.parsedSelector,o=this._checkRoot(s,i),a=!o&&0===i.indexOf(":host");if("shady"===(e.__cssBuild||n.__cssBuild)&&(a=!(o=i===s+" > *."+s||-1<i.indexOf("html"))&&0===i.indexOf(s)),o||a){var l=s;a&&(c.useNativeShadow&&!t.transformedSelector&&(t.transformedSelector=p._transformRuleCss(t,p._transformComplexSelector,e.is,s)),l=t.transformedSelector||t.parsedSelector),o&&"html"===s&&(l=t.transformedSelector||t.parsedSelector),r({selector:l,isHost:a,isRoot:o})}}},hostAndRootPropertiesForScope:function(r){var s={},i={},o=this;return u.forActiveRulesInStyles(r._styles,function(n,e){o.whenHostOrRootRule(r,n,e,function(e){var t=r._element||r;h.call(t,e.selector)&&(e.isHost?o.collectProperties(n,s):o.collectProperties(n,i))})}),{rootProps:i,hostProps:s}},transformStyles:function(t,n,r){var s=this,i=p._calcHostScope(t.is,t.extends),e=t.extends?"\\"+i.slice(0,-1)+"\\]":i,o=new RegExp(this.rx.HOST_PREFIX+e+this.rx.HOST_SUFFIX),a=this._elementKeyframeTransforms(t,r);return p.elementStyles(t,function(e){s.applyProperties(e,n),c.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(e)||!e.cssText||(s.applyKeyframeTransforms(e,a),s._scopeSelector(e,o,i,t._scopeCssViaAttr,r))})},_elementKeyframeTransforms:function(e,t){var n=e._styles._keyframes,r={};if(!c.useNativeShadow&&n)for(var s=0,i=n[s];s<n.length;i=n[++s])this._scopeKeyframes(i,t),r[i.keyframesName]=this._keyframesRuleTransformer(i);return r},_keyframesRuleTransformer:function(t){return function(e){return e.replace(t.keyframesNameRx,t.transformedKeyframesName)}},_scopeKeyframes:function(e,t){e.keyframesNameRx=new RegExp("\\b"+e.keyframesName+"(?!\\B|-)","g"),e.transformedKeyframesName=e.keyframesName+"-"+t,e.transformedSelector=e.transformedSelector||e.selector,e.selector=e.transformedSelector.replace(e.keyframesName,e.transformedKeyframesName)},_hasDirOrHostContext:function(e){return/:host-context|:dir/.test(e)},_scopeSelector:function(e,t,n,r,s){e.transformedSelector=e.transformedSelector||e.selector;for(var i,o=e.transformedSelector,a=p._calcElementScope(s,r),l=p._calcElementScope(n,r),c=o.split(","),h=this._hasDirOrHostContext(e.parsedSelector),u=0,f=c.length;u<f&&(i=c[u]);u++)c[u]=i.match(t)?i.replace(n,a):h?i.replace(l,a+" "+l):a+" "+i;e.selector=c.join(",")},applyElementScopeSelector:function(e,t,n,r){var s=r?e.getAttribute(p.SCOPE_NAME):e.getAttribute("class")||"",i=n?s.replace(n,t):(s?s+" ":"")+this.XSCOPE_NAME+" "+t;s!==i&&(r?e.setAttribute(p.SCOPE_NAME,i):e.setAttribute("class",i))},applyElementStyle:function(e,t,n,r){var s=r?r.textContent||"":this.transformStyles(e,t,n),i=e._customStyle;return i&&!c.useNativeShadow&&i!==r&&(i._useCount--,i._useCount<=0&&i.parentNode&&i.parentNode.removeChild(i)),c.useNativeShadow?e._customStyle?(e._customStyle.textContent=s,r=e._customStyle):s&&(r=u.applyCss(s,n,e.root,e._scopeStyle)):r?r.parentNode||(o&&-1<s.indexOf("@media")&&(r.textContent=s),u.applyStyle(r,null,e._scopeStyle)):s&&(r=u.applyCss(s,n,null,e._scopeStyle)),r&&(r._useCount=r._useCount||0,e._customStyle!=r&&r._useCount++,e._customStyle=r),r},mixinCustomStyle:function(e,t){var n;for(var r in t)((n=t[r])||0===n)&&(e[r]=n)},updateNativeStyleProperties:function(e,t){var n=e.__customStyleProperties;if(n)for(var r=0;r<n.length;r++)e.style.removeProperty(n[r]);var s=[];for(var i in t)null!==t[i]&&(e.style.setProperty(i,t[i]),s.push(i));e.__customStyleProperties=s},rx:u.rx,XSCOPE_NAME:"x-scope"}}(),Polymer.StyleCache=function(){this.cache={}},Polymer.StyleCache.prototype={MAX:100,store:function(e,t,n,r){t.keyValues=n,t.styles=r;var s=this.cache[e]=this.cache[e]||[];s.push(t),s.length>this.MAX&&s.shift()},retrieve:function(e,t,n){var r=this.cache[e];if(r)for(var s,i=r.length-1;0<=i;i--)if(n===(s=r[i]).styles&&this._objectsEqual(t,s.keyValues))return s},clear:function(){this.cache={}},_objectsEqual:function(e,t){var n,r;for(var s in e)if(n=e[s],r=t[s],!("object"==typeof n&&n?this._objectsStrictlyEqual(n,r):n===r))return!1;return!Array.isArray(e)||e.length===t.length},_objectsStrictlyEqual:function(e,t){return this._objectsEqual(e,t)&&this._objectsEqual(t,e)}},Polymer.StyleDefaults=function(){var r=Polymer.StyleProperties,e=Polymer.StyleCache,s=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new e,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(e){this._styles.push(e),this._properties=null},get _styleProperties(){return this._properties||(r.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=r.hostAndRootPropertiesForScope(this).rootProps,r.mixinCustomStyle(this._properties,this.customStyle),r.reify(this._properties)),this._properties},hasStyleProperties:function(){return Boolean(this._properties)},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(e){this._properties=null,e&&Polymer.Base.mixin(this.customStyle,e),this._styleCache.clear();for(var t,n=0;n<this._styles.length;n++)(t=(t=this._styles[n]).__importElement||t)._apply();s&&r.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}(),function(){"use strict";var s=Polymer.Base.serializeValueToAttribute,a=Polymer.StyleProperties,r=Polymer.StyleTransformer,n=Polymer.StyleDefaults,l=Polymer.Settings.useNativeShadow,t=Polymer.Settings.useNativeCSSProperties;Polymer.Base._addFeature({_prepStyleProperties:function(){t||(this._ownStylePropertyNames=this._styles&&this._styles.length?a.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(e){return t||this._styleProperties||this._computeStyleProperties(),!t&&this._styleProperties&&this._styleProperties[e]||getComputedStyle(this).getPropertyValue(e)},_setupStyleProperties:function(){this.customStyle={},this._styleCache=null,this._styleProperties=null,this._scopeSelector=null,this._ownStyleProperties=null,this._customStyle=null},_needsStyleProperties:function(){return Boolean(!t&&this._ownStylePropertyNames&&this._ownStylePropertyNames.length)},_validateApplyShim:function(){if(this.__applyShimInvalid){Polymer.ApplyShim.transform(this._styles,this.__proto__);var e=r.elementStyles(this);if(l){var t=this._template.content.querySelector("style");t&&(t.textContent=e)}else{var n=this._scopeStyle&&this._scopeStyle.nextSibling;n&&(n.textContent=e)}}},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var e,t=this;e=Polymer.dom(t).getOwnerRoot();){if(Polymer.isInstance(e.host))return e.host;t=e.host}return n},_updateStyleProperties:function(){var e,t=this._findStyleHost();t._styleProperties||t._computeStyleProperties(),t._styleCache||(t._styleCache=new Polymer.StyleCache);var n=a.propertyDataFromStyles(t._styles,this),r=!this.__notStyleScopeCacheable;r&&(n.key.customStyle=this.customStyle,e=t._styleCache.retrieve(this.is,n.key,this._styles));var s=Boolean(e);s?this._styleProperties=e._styleProperties:this._computeStyleProperties(n.properties),this._computeOwnStyleProperties(),s||(e=c.retrieve(this.is,this._ownStyleProperties,this._styles));var i=Boolean(e)&&!s,o=this._applyStyleProperties(e);s||(e={style:o=o&&l?o.cloneNode(!0):o,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},r&&(n.key.customStyle={},this.mixin(n.key.customStyle,this.customStyle),t._styleCache.store(this.is,e,n.key,this._styles)),i||c.store(this.is,Object.create(e),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(e){var t=this._findStyleHost();t._styleProperties||t._computeStyleProperties();var n=Object.create(t._styleProperties),r=a.hostAndRootPropertiesForScope(this);this.mixin(n,r.hostProps),e=e||a.propertyDataFromStyles(t._styles,this).properties,this.mixin(n,e),this.mixin(n,r.rootProps),a.mixinCustomStyle(n,this.customStyle),a.reify(n),this._styleProperties=n},_computeOwnStyleProperties:function(){for(var e,t={},n=0;n<this._ownStylePropertyNames.length;n++)t[e=this._ownStylePropertyNames[n]]=this._styleProperties[e];this._ownStyleProperties=t},_scopeCount:0,_applyStyleProperties:function(e){var t=this._scopeSelector;this._scopeSelector=e?e._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;var n=a.applyElementStyle(this,this._styleProperties,this._scopeSelector,e&&e.style);return l||a.applyElementScopeSelector(this,this._scopeSelector,t,this._scopeCssViaAttr),n},serializeValueToAttribute:function(e,t,n){if(n=n||this,"class"===t&&!l){var r=n===this?this.domHost||this.dataHost:this;r&&(e=r._scopeElementClass(n,e))}n=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(n):n,s.call(this,e,t,n)},_scopeElementClass:function(e,t){return l||this._scopeCssViaAttr||(t=(t?t+" ":"")+i+" "+this.is+(e._scopeSelector?" "+o+" "+e._scopeSelector:"")),t},updateStyles:function(e){e&&this.mixin(this.customStyle,e),t?a.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(e){e=e||this.root;for(var t,n=Polymer.dom(e)._query(function(e){return e.shadyRoot||e.shadowRoot}),r=0,s=n.length;r<s&&(t=n[r]);r++)t.updateStyles&&t.updateStyles()}}),Polymer.updateStyles=function(e){n.updateStyles(e),Polymer.Base._updateRootStyles(document)};var c=new Polymer.StyleCache;Polymer.customStyleCache=c;var i=r.SCOPE_NAME,o=a.XSCOPE_NAME}(),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this.factoryImpl&&this._prepConstructor(),this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate(),this._prepShimStyles(),this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepPropertyInfo(),this._prepBindings(),this._prepShady()},_prepBehavior:function(e){this._addPropertyEffects(e.properties),this._addComplexObserverEffects(e.observers),this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._setupGestures(),this._setupConfigure(this.__data__),this._setupStyleProperties(),this._setupDebouncers(),this._setupShady(),this._registerHost(),this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences()),this._marshalInstanceEffects(),this._marshalBehaviors(),this._marshalHostAttributes(),this._marshalAttributes(),this._tryReady()},_marshalBehavior:function(e){e.listeners&&this._listenListeners(e.listeners)}}),function(){var e,r=Polymer.StyleProperties,a=Polymer.StyleUtil,s=Polymer.CssParse,i=Polymer.StyleDefaults,l=Polymer.StyleTransformer,c=Polymer.ApplyShim,t=Polymer.Debounce,h=Polymer.Settings;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this,this.__cssBuild=a.getCssBuildType(this),this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild),this.ownerDocument!==window.document&&this.__appliedElement===this&&document.head.appendChild(this),this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var e=this.__appliedElement;if(h.useNativeCSSProperties||(this.__needsUpdateStyles=i.hasStyleProperties(),i.addStyle(e)),e.textContent||this.include)this._apply(!0);else{var t=this,n=new MutationObserver(function(){n.disconnect(),t._apply(!0)});n.observe(e,{childList:!0})}}},_updateStyles:function(){Polymer.updateStyles()},_apply:function(e){var t=this.__appliedElement;if(this.include&&(t.textContent=a.cssFromModules(this.include,!0)+t.textContent),t.textContent){var n=this.__cssBuild,r=a.isTargetedBuild(n);if(!h.useNativeCSSProperties||!r){var s=a.rulesForStyle(t);if(r||(a.forEachRule(s,function(e){l.documentRule(e)}),h.useNativeCSSProperties&&!n&&c.transform([t])),h.useNativeCSSProperties)t.textContent=a.toCssText(s);else{var i=this,o=function(){i._flushCustomProperties()};e?Polymer.RenderStatus.whenReady(o):o()}}}},_flushCustomProperties:function(){this.__needsUpdateStyles?(this.__needsUpdateStyles=!1,e=t(e,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var e=this.__appliedElement;this._computeStyleProperties();var n=this._styleProperties,t=a.rulesForStyle(e);t&&(e.textContent=a.toCssText(t,function(e){var t=e.cssText=e.parsedCssText;e.propertyInfo&&e.propertyInfo.cssText&&(t=s.removeCustomPropAssignment(t),e.cssText=r.valueForProperties(t,n))}))}})}(),Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(e){if((this._templatized=e)._content||(e._content=e.content),e._content._ctor)return this.ctor=e._content._ctor,void this._prepParentProperties(this.ctor.prototype,e);var t=Object.create(Polymer.Base);this._customPrepAnnotations(t,e),this._prepParentProperties(t,e),t._prepEffects(),this._customPrepEffects(t),t._prepBehaviors(),t._prepPropertyInfo(),t._prepBindings(),t._notifyPathUp=this._notifyPathUpImpl,t._scopeElementClass=this._scopeElementClassImpl,t.listen=this._listenImpl,t._showHideChildren=this._showHideChildrenImpl,t.__setPropertyOrig=this.__setProperty,t.__setProperty=this.__setPropertyImpl;var n=this._constructorImpl,r=function(e,t){n.call(this,e,t)};(r.prototype=t).constructor=r,e._content._ctor=r,this.ctor=r},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(e){for(var t=this._children,n=0;n<t.length;n++){var r=t[n];Boolean(e)!=Boolean(r.__hideTemplateChildren__)&&(r.nodeType===Node.TEXT_NODE?e?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__:r.style&&(e?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__)),r.__hideTemplateChildren__=e}},__setPropertyImpl:function(e,t,n,r){r&&r.__hideTemplateChildren__&&"textContent"==e&&(e="__polymerTextContent__"),this.__setPropertyOrig(e,t,n,r)},_debounceTemplate:function(e){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",e))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(e){var t=e._parentProps;for(var n in t)e._addPropertyEffect(n,"function",this._createHostPropEffector(n));for(n in this._instanceProps)e._addPropertyEffect(n,"function",this._createInstancePropEffector(n))},_customPrepAnnotations:function(e,t){var n=(e._template=document.createElement("template"))._content=t._content;if(!n._notes){var r=e._rootDataHost;r&&(Polymer.Annotations.prepElement=function(){r._prepElement()}),n._notes=Polymer.Annotations.parseAnnotations(t),Polymer.Annotations.prepElement=null,this._processAnnotations(n._notes)}e._notes=n._notes,e._parentProps=n._parentProps},_prepParentProperties:function(e,t){var n=this._parentProps=e._parentProps;if(this._forwardParentProp&&n){var r,s=e._parentPropProto;if(!s){for(r in this._instanceProps)delete n[r];for(r in s=e._parentPropProto=Object.create(null),t!=this&&(Polymer.Bind.prepareModel(s),Polymer.Base.prepareModelNotifyPath(s)),n){var i=this._parentPropPrefix+r,o=[{kind:"function",effect:this._createForwardPropEffector(r),fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(i)+"-changed"}}];s._propertyEffects=s._propertyEffects||{},s._propertyEffects[i]=o,Polymer.Bind._createAccessors(s,i,o)}}var a=this;t!=this&&(Polymer.Bind.prepareInstance(t),t._forwardParentProp=function(e,t){a._forwardParentProp(e,t)}),this._extendTemplate(t,s),t._pathEffector=function(e,t,n){return a._pathEffectorImpl(e,t,n)}}},_createForwardPropEffector:function(n){return function(e,t){this._forwardParentProp(n,t)}},_createHostPropEffector:function(n){var r=this._parentPropPrefix;return function(e,t){this.dataHost._templatized[r+n]=t}},_createInstancePropEffector:function(s){return function(e,t,n,r){r||this.dataHost._forwardInstanceProp(this,s,t)}},_extendTemplate:function(e,t){var n=Object.getOwnPropertyNames(t);t._propertySetter&&(e._propertySetter=t._propertySetter);for(var r,s=0;s<n.length&&(r=n[s]);s++){var i=e[r];if(i&&"_propertyEffects"==r){var o=Polymer.Base.mixin({},i);e._propertyEffects=Polymer.Base.mixin(o,t._propertyEffects)}else{var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,a),void 0!==i&&e._propertySetter(r,i)}}},_showHideChildren:function(e){},_forwardInstancePath:function(e,t,n){},_forwardInstanceProp:function(e,t,n){},_notifyPathUpImpl:function(e,t){var n=this.dataHost,r=Polymer.Path.root(e);n._forwardInstancePath.call(n,this,e,t),r in n._parentProps&&n._templatized._notifyPath(n._parentPropPrefix+e,t)},_pathEffectorImpl:function(e,t,n){if(this._forwardParentPath&&0===e.indexOf(this._parentPropPrefix)){var r=e.substring(this._parentPropPrefix.length);Polymer.Path.root(r)in this._parentProps&&this._forwardParentPath(r,t)}Polymer.Base._pathEffector.call(this._templatized,e,t,n)},_constructorImpl:function(e,t){this._rootDataHost=t._getRootDataHost(),this._setupConfigure(e),this._registerHost(t),this._beginHosting(),this.root=this.instanceTemplate(this._template),this.root.__noContent=!this._notes._hasContent,this.root.__styleScoped=!0,this._endHosting(),this._marshalAnnotatedNodes(),this._marshalInstanceEffects(),this._marshalAnnotatedListeners();for(var n=[],r=this.root.firstChild;r;r=r.nextSibling)n.push(r),r._templateInstance=this;this._children=n,t.__hideTemplateChildren__&&this._showHideChildren(!0),this._tryReady()},_listenImpl:function(e,t,n){var r=this,s=this._rootDataHost,i=s._createEventHandler(e,t,n);s._listen(e,t,function(e){e.model=r,i(e)})},_scopeElementClassImpl:function(e,t){var n=this._rootDataHost;return n?n._scopeElementClass(e,t):t},stamp:function(e){if(e=e||{},this._parentProps){var t=this._templatized;for(var n in this._parentProps)void 0===e[n]&&(e[n]=t[this._parentPropPrefix+n])}return new this.ctor(e,this)},modelForElement:function(e){for(var t;e;)if(t=e._templateInstance){if(t.dataHost==this)return t;e=t.dataHost}else e=e.parentNode}},Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}}),Polymer._collections=new WeakMap,Polymer.Collection=function(e){Polymer._collections.set(e,this),this.userArray=e,this.store=e.slice(),this.initMap()},Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var e=this.omap=new WeakMap,t=this.pmap={},n=this.store,r=0;r<n.length;r++){var s=n[r];s&&"object"==typeof s?e.set(s,r):t[s]=r}},add:function(e){var t=this.store.push(e)-1;return e&&"object"==typeof e?this.omap.set(e,t):this.pmap[e]=t,"#"+t},removeKey:function(e){(e=this._parseKey(e))&&(this._removeFromMap(this.store[e]),delete this.store[e])},_removeFromMap:function(e){e&&"object"==typeof e?this.omap.delete(e):delete this.pmap[e]},remove:function(e){var t=this.getKey(e);return this.removeKey(t),t},getKey:function(e){var t;if(null!=(t=e&&"object"==typeof e?this.omap.get(e):this.pmap[e]))return"#"+t},getKeys:function(){return Object.keys(this.store).map(function(e){return"#"+e})},_parseKey:function(e){if(e&&"#"==e[0])return e.slice(1)},setItem:function(e,t){if(e=this._parseKey(e)){var n=this.store[e];n&&this._removeFromMap(n),t&&"object"==typeof t?this.omap.set(t,e):this.pmap[t]=e,this.store[e]=t}},getItem:function(e){if(e=this._parseKey(e))return this.store[e]},getItems:function(){var e=[],t=this.store;for(var n in t)e.push(t[n]);return e},_applySplices:function(e){for(var t,n,r={},s=0;s<e.length&&(n=e[s]);s++){n.addedKeys=[];for(var i=0;i<n.removed.length;i++)r[t=this.getKey(n.removed[i])]=r[t]?null:-1;for(i=0;i<n.addedCount;i++){var o=this.userArray[n.index+i];r[t=void 0===(t=this.getKey(o))?this.add(o):t]=r[t]?null:1,n.addedKeys.push(t)}}var a=[],l=[];for(t in r)r[t]<0&&(this.removeKey(t),a.push(t)),0<r[t]&&l.push(t);return[{removed:a,added:l}]}},Polymer.Collection.get=function(e){return Polymer._collections.get(e)||new Polymer.Collection(e)},Polymer.Collection.applySplices=function(e,t){var n=Polymer._collections.get(e);return n?n._applySplices(t):null},Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[],this._pool=[],this._limit=1/0;var e=this;this._boundRenderChunk=function(){e._renderChunk()}},detached:function(){this.__isDetached=!0;for(var e=0;e<this._instances.length;e++)this._detachInstance(e)},attached:function(){if(this.__isDetached){var e;this.__isDetached=!1;var t=Polymer.dom(this).parentNode;t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this;for(var n=Polymer.dom(t),r=0;r<this._instances.length;r++)this._attachInstance(r,n,e)}},ready:function(){this._instanceProps={__key__:!0},this._instanceProps[this.as]=!0,this._instanceProps[this.indexAs]=!0,this.ctor||this.templatize(this)},_sortChanged:function(e){var t=this._getRootDataHost();this._sortFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_filterChanged:function(e){var t=this._getRootDataHost();this._filterFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(e){return Math.ceil(1e3/e)},_initializeChunking:function(){this.initialCount&&(this._limit=this.initialCount,this._chunkCount=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var e=performance.now(),t=this._targetFrameTime/(e-this._lastChunkTime);this._chunkCount=Math.round(this._chunkCount*t)||1,this._limit+=this._chunkCount,this._lastChunkTime=e,this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(e){if("items"==e.path)Array.isArray(this.items)?this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render);else if("items.splices"==e.path)this._keySplices=this._keySplices.concat(e.value.keySplices),this._indexSplices=this._indexSplices.concat(e.value.indexSplices),this._debounceTemplate(this._render);else{var t=e.path.slice(6);this._forwardItemPath(t,e.value),this._checkObservedPaths(t)}},_checkObservedPaths:function(e){if(this._observePaths){e=e.substring(e.indexOf(".")+1);for(var t=this._observePaths,n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return this._needFullRefresh=!0,void(this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render))}},render:function(){this._needFullRefresh=!0,this._debounceTemplate(this._render),this._flushTemplates()},_render:function(){this._needFullRefresh?(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices)),this._keySplices=[],this._indexSplices=[];for(var e=this._keyToInstIdx={},t=this._instances.length-1;0<=t;t--){var n=this._instances[t];n.isPlaceholder&&t<this._limit?n=this._insertInstance(t,n.__key__):!n.isPlaceholder&&t>=this._limit&&(n=this._downgradeInstance(t,n.__key__)),e[n.__key__]=t,n.isPlaceholder||n.__setProperty(this.indexAs,t,!0)}this._pool.length=0,this._setRenderedItemCount(this._instances.length),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._tryRenderChunk()},_applyFullRefresh:function(){var e,n=this.collection;if(this._sortFn)e=n?n.getKeys():[];else{e=[];var t=this.items;if(t)for(var r=0;r<t.length;r++)e.push(n.getKey(t[r]))}var s=this;for(this._filterFn&&(e=e.filter(function(e){return s._filterFn(n.getItem(e))})),this._sortFn&&e.sort(function(e,t){return s._sortFn(n.getItem(e),n.getItem(t))}),r=0;r<e.length;r++){var i=e[r],o=this._instances[r];o?(o.__key__=i,!o.isPlaceholder&&r<this._limit&&o.__setProperty(this.as,n.getItem(i),!0)):r<this._limit?this._insertInstance(r,i):this._insertPlaceholder(r,i)}for(var a=this._instances.length-1;r<=a;a--)this._detachAndRemoveInstance(a)},_numericSort:function(e,t){return e-t},_applySplicesUserSort:function(e){for(var t,n,r=this.collection,s={},i=0;i<e.length&&(n=e[i]);i++){for(var o=0;o<n.removed.length;o++)s[t=n.removed[o]]=s[t]?null:-1;for(o=0;o<n.added.length;o++)s[t=n.added[o]]=s[t]?null:1}var a=[],l=[];for(t in s)-1===s[t]&&a.push(this._keyToInstIdx[t]),1===s[t]&&l.push(t);if(a.length)for(a.sort(this._numericSort),i=a.length-1;0<=i;i--){var c=a[i];void 0!==c&&this._detachAndRemoveInstance(c)}var h=this;if(l.length){this._filterFn&&(l=l.filter(function(e){return h._filterFn(r.getItem(e))})),l.sort(function(e,t){return h._sortFn(r.getItem(e),r.getItem(t))});var u=0;for(i=0;i<l.length;i++)u=this._insertRowUserSort(u,l[i])}},_insertRowUserSort:function(e,t){for(var n=this.collection,r=n.getItem(t),s=this._instances.length-1,i=-1;e<=s;){var o=e+s>>1,a=this._instances[o].__key__,l=this._sortFn(n.getItem(a),r);if(l<0)e=o+1;else{if(!(0<l)){i=o;break}s=o-1}}return i<0&&(i=s+1),this._insertPlaceholder(i,t),i},_applySplicesArrayOrder:function(e){for(var t,n=0;n<e.length&&(t=e[n]);n++){for(var r=0;r<t.removed.length;r++)this._detachAndRemoveInstance(t.index);for(r=0;r<t.addedKeys.length;r++)this._insertPlaceholder(t.index+r,t.addedKeys[r])}},_detachInstance:function(e){var t=this._instances[e];if(!t.isPlaceholder){for(var n=0;n<t._children.length;n++){var r=t._children[n];Polymer.dom(t.root).appendChild(r)}return t}},_attachInstance:function(e,t,n){var r=this._instances[e];r.isPlaceholder||t.insertBefore(r.root,n)},_detachAndRemoveInstance:function(e){var t=this._detachInstance(e);t&&this._pool.push(t),this._instances.splice(e,1)},_insertPlaceholder:function(e,t){this._instances.splice(e,0,{isPlaceholder:!0,__key__:t})},_stampInstance:function(e,t){var n={__key__:t};return n[this.as]=this.collection.getItem(t),n[this.indexAs]=e,this.stamp(n)},_insertInstance:function(e,t){var n=this._pool.pop();n?(n.__setProperty(this.as,this.collection.getItem(t),!0),n.__setProperty("__key__",t,!0)):n=this._stampInstance(e,t);var r=this._instances[e+1],s=r&&!r.isPlaceholder?r._children[0]:this,i=Polymer.dom(this).parentNode;return i.localName==this.is&&(s==this&&(s=i),i=Polymer.dom(i).parentNode),Polymer.dom(i).insertBefore(n.root,s),this._instances[e]=n},_downgradeInstance:function(e,t){var n=this._detachInstance(e);return n&&this._pool.push(n),n={isPlaceholder:!0,__key__:t},this._instances[e]=n},_showHideChildren:function(e){for(var t=0;t<this._instances.length;t++)this._instances[t].isPlaceholder||this._instances[t]._showHideChildren(e)},_forwardInstanceProp:function(e,t,n){var r;t==this.as&&(r=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(e.__key__)):e[this.indexAs],this.set("items."+r,n))},_forwardInstancePath:function(e,t,n){0===t.indexOf(this.as+".")&&this._notifyPath("items."+e.__key__+"."+t.slice(this.as.length+1),n)},_forwardParentProp:function(e,t){for(var n,r=this._instances,s=0;s<r.length&&(n=r[s]);s++)n.isPlaceholder||n.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){for(var n,r=this._instances,s=0;s<r.length&&(n=r[s]);s++)n.isPlaceholder||n._notifyPath(e,t,!0)},_forwardItemPath:function(e,t){if(this._keyToInstIdx){var n=e.indexOf("."),r=e.substring(0,n<0?e.length:n),s=this._keyToInstIdx[r],i=this._instances[s];i&&!i.isPlaceholder&&(0<=n?(e=this.as+"."+e.substring(n+1),i._notifyPath(e,t,!0)):i.__setProperty(this.as,t,!0))}},itemForElement:function(e){var t=this.modelForElement(e);return t&&t[this.as]},keyForElement:function(e){var t=this.modelForElement(e);return t&&t.__key__},indexForElement:function(e){var t=this.modelForElement(e);return t&&t[this.indexAs]}}),Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var e=0;e<this.selected.length;e++)this.unlinkPaths("selected."+e);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");this.multi?this.selected&&!this.selected.length||(this.selected=[],this._selectedColl=Polymer.Collection.get(this.selected)):(this.selected=null,this._selectedColl=null),this.selectedItem=null},isSelected:function(e){return this.multi?void 0!==this._selectedColl.getKey(e):this.selected==e},deselect:function(e){if(this.multi){if(this.isSelected(e)){var t=this._selectedColl.getKey(e);this.arrayDelete("selected",e),this.unlinkPaths("selected."+t)}}else this.selected=null,this.selectedItem=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(e){var t=Polymer.Collection.get(this.items).getKey(e);if(this.multi)if(this.isSelected(e))this.toggle&&this.deselect(e);else{this.push("selected",e);var n=this._selectedColl.getKey(e);this.linkPaths("selected."+n,"items."+t)}else this.toggle&&e==this.selected?this.deselect():(this.selected=e,this.selectedItem=e,this.linkPaths("selected","items."+t),this.linkPaths("selectedItem","items."+t))}}),Polymer({is:"dom-if",extends:"template",_template:null,properties:{if:{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var e=this.parentNode;e&&e.localName==this.is&&(e=Polymer.dom(e).parentNode),e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&e instanceof ShadowRoot)||this._teardownInstance()},attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance(),!this.restamp&&this._instance&&this._showHideChildren(),this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var e,t=Polymer.dom(this).parentNode;if(t&&t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,t)if(this._instance){var n=this._instance._children;if(n&&n.length)if(Polymer.dom(e).previousSibling!==n[n.length-1])for(var r,s=0;s<n.length&&(r=n[s]);s++)Polymer.dom(t).insertBefore(r,e)}else{this._instance=this.stamp();var i=this._instance.root;Polymer.dom(t).insertBefore(i,e)}},_teardownInstance:function(){if(this._instance){var e=this._instance._children;if(e&&e.length)for(var t,n=Polymer.dom(Polymer.dom(e[0]).parentNode),r=0;r<e.length&&(t=e[r]);r++)n.removeChild(t);this._instance=null}},_showHideChildren:function(){var e=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(e)},_forwardParentProp:function(e,t){this._instance&&this._instance.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){this._instance&&this._instance._notifyPath(e,t,!0)}}),Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){var e=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){e._markImportsReady()}):e._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0,this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var e,t=Polymer.dom(this).parentNode;t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,Polymer.dom(t).insertBefore(this.root,e)},_removeChildren:function(){if(this._children)for(var e=0;e<this._children.length;e++)this.root.appendChild(this._children[e])},_initFeatures:function(){},_scopeElementClass:function(e,t){return this.dataHost?this.dataHost._scopeElementClass(e,t):t},_configureInstanceProperties:function(){},_prepConfigure:function(){var e={};for(var t in this._propertyEffects)e[t]=this[t];var n=this._setupConfigure;this._setupConfigure=function(){n.call(this,e)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady(),this._children||((this._template=this)._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root)),this._insertChildren(),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}})</script><script>function MakePromise(t){function o(t){if("object"!=typeof this||"function"!=typeof t)throw new TypeError;this._state=null,this._value=null,this._deferreds=[],u(t,function t(e){try{if(e===this)throw new TypeError;if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void u(n.bind(e),t.bind(this),i.bind(this))}this._state=!0,this._value=e,r.call(this)}catch(t){i.call(this,t)}}.bind(this),i.bind(this))}function s(n){var i=this;null!==this._state?t(function(){var t=i._state?n.onFulfilled:n.onRejected;if("function"==typeof t){var e;try{e=t(i._value)}catch(t){return void n.reject(t)}n.resolve(e)}else(i._state?n.resolve:n.reject)(i._value)}):this._deferreds.push(n)}function i(t){this._state=!1,this._value=t,r.call(this)}function r(){for(var t=0,e=this._deferreds.length;t<e;t++)s.call(this,this._deferreds[t]);this._deferreds=null}function u(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(t){if(i)return;i=!0,n(t)}}return o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(n,i){var r=this;return new o(function(t,e){s.call(r,{onFulfilled:n,onRejected:i,resolve:t,reject:e})})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o}"undefined"!=typeof module&&(module.exports=MakePromise)</script><script>window.Promise||(window.Promise=MakePromise(Polymer.Base.async))</script><script>"use strict";Polymer({is:"iron-request",hostAttributes:{hidden:!0},properties:{xhr:{type:Object,notify:!0,readOnly:!0,value:function(){return new XMLHttpRequest}},response:{type:Object,notify:!0,readOnly:!0,value:function(){return null}},status:{type:Number,notify:!0,readOnly:!0,value:0},statusText:{type:String,notify:!0,readOnly:!0,value:""},completes:{type:Object,readOnly:!0,notify:!0,value:function(){return new Promise(function(e,t){this.resolveCompletes=e,this.rejectCompletes=t}.bind(this))}},progress:{type:Object,notify:!0,readOnly:!0,value:function(){return{}}},aborted:{type:Boolean,notify:!0,readOnly:!0,value:!1},errored:{type:Boolean,notify:!0,readOnly:!0,value:!1},timedOut:{type:Boolean,notify:!0,readOnly:!0,value:!1}},get succeeded(){if(this.errored||this.aborted||this.timedOut)return!1;var e=this.xhr.status||0;return 0===e||200<=e&&e<300},send:function(e){var t=this.xhr;if(0<t.readyState)return null;t.addEventListener("progress",function(e){this._setProgress({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})}.bind(this)),t.addEventListener("error",function(e){this._setErrored(!0),this._updateStatus(),this.rejectCompletes(e)}.bind(this)),t.addEventListener("timeout",function(e){this._setTimedOut(!0),this._updateStatus(),this.rejectCompletes(e)}.bind(this)),t.addEventListener("abort",function(){this._updateStatus(),this.rejectCompletes(new Error("Request aborted."))}.bind(this)),t.addEventListener("loadend",function(){this._updateStatus(),this._setResponse(this.parseResponse()),this.succeeded?this.resolveCompletes(this):this.rejectCompletes(new Error("The request failed with status code: "+this.xhr.status))}.bind(this)),this.url=e.url,t.open(e.method||"GET",e.url,!1!==e.async);var r={json:"application/json",text:"text/plain",html:"text/html",xml:"application/xml",arraybuffer:"application/octet-stream"}[e.handleAs],s=e.headers||Object.create(null),n=Object.create(null);for(var o in s)n[o.toLowerCase()]=s[o];if(s=n,r&&!s.accept&&(s.accept=r),Object.keys(s).forEach(function(e){/[A-Z]/.test(e)&&Polymer.Base._error("Headers must be lower case, got",e),t.setRequestHeader(e,s[e])},this),!1!==e.async){e.async&&(t.timeout=e.timeout);var i=e.handleAs;!e.jsonPrefix&&i||(i="text"),t.responseType=t._responseType=i,e.jsonPrefix&&(t._jsonPrefix=e.jsonPrefix)}t.withCredentials=!!e.withCredentials;var a=this._encodeBodyObject(e.body,s["content-type"]);return t.send(a),this.completes},parseResponse:function(){var e=this.xhr,t=e.responseType||e._responseType,r=!this.xhr.responseType,s=e._jsonPrefix&&e._jsonPrefix.length||0;try{switch(t){case"json":if(r||void 0===e.response)try{return JSON.parse(e.responseText)}catch(e){return null}return e.response;case"xml":return e.responseXML;case"blob":case"document":case"arraybuffer":return e.response;case"text":default:if(s)try{return JSON.parse(e.responseText.substring(s))}catch(e){return null}return e.responseText}}catch(e){this.rejectCompletes(new Error("Could not parse response. "+e.message))}},abort:function(){this._setAborted(!0),this.xhr.abort()},_encodeBodyObject:function(e,t){if("string"==typeof e)return e;var r=e;switch(t){case"application/json":return JSON.stringify(r);case"application/x-www-form-urlencoded":return this._wwwFormUrlEncode(r)}return e},_wwwFormUrlEncode:function(t){if(!t)return"";var r=[];return Object.keys(t).forEach(function(e){r.push(this._wwwFormUrlEncodePiece(e)+"="+this._wwwFormUrlEncodePiece(t[e]))},this),r.join("&")},_wwwFormUrlEncodePiece:function(e){return null===e?"":encodeURIComponent(e.toString().replace(/\r?\n/g,"\r\n")).replace(/%20/g,"+")},_updateStatus:function(){this._setStatus(this.xhr.status),this._setStatusText(void 0===this.xhr.statusText?"":this.xhr.statusText)}})</script><script>"use strict";Polymer({is:"iron-ajax",hostAttributes:{hidden:!0},properties:{url:{type:String},params:{type:Object,value:function(){return{}}},method:{type:String,value:"GET"},headers:{type:Object,value:function(){return{}}},contentType:{type:String,value:null},body:{type:Object,value:null},sync:{type:Boolean,value:!1},handleAs:{type:String,value:"json"},withCredentials:{type:Boolean,value:!1},timeout:{type:Number,value:0},auto:{type:Boolean,value:!1},verbose:{type:Boolean,value:!1},lastRequest:{type:Object,notify:!0,readOnly:!0},loading:{type:Boolean,notify:!0,readOnly:!0},lastResponse:{type:Object,notify:!0,readOnly:!0},lastError:{type:Object,notify:!0,readOnly:!0},activeRequests:{type:Array,notify:!0,readOnly:!0,value:function(){return[]}},debounceDuration:{type:Number,value:0,notify:!0},jsonPrefix:{type:String,value:""},bubbles:{type:Boolean,value:!1},_boundHandleResponse:{type:Function,value:function(){return this._handleResponse.bind(this)}}},observers:["_requestOptionsChanged(url, method, params.*, headers, contentType, body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)"],get queryString(){var e,t,s=[];for(e in this.params)if(t=this.params[e],e=window.encodeURIComponent(e),Array.isArray(t))for(var n=0;n<t.length;n++)s.push(e+"="+window.encodeURIComponent(t[n]));else null!==t?s.push(e+"="+window.encodeURIComponent(t)):s.push(e);return s.join("&")},get requestUrl(){var e=this.queryString,t=this.url||"";if(e){var s=0<=t.indexOf("?")?"&":"?";return t+s+e}return t},get requestHeaders(){var e,t={},s=this.contentType;if(null==s&&"string"==typeof this.body&&(s="application/x-www-form-urlencoded"),s&&(t["content-type"]=s),this.headers instanceof Object)for(e in this.headers)t[e]=this.headers[e].toString();return t},toRequestOptions:function(){return{url:this.requestUrl||"",method:this.method,headers:this.requestHeaders,body:this.body,async:!this.sync,handleAs:this.handleAs,jsonPrefix:this.jsonPrefix,withCredentials:this.withCredentials,timeout:this.timeout}},generateRequest:function(){var e=document.createElement("iron-request"),t=this.toRequestOptions();return this.push("activeRequests",e),e.completes.then(this._boundHandleResponse).catch(this._handleError.bind(this,e)).then(this._discardRequest.bind(this,e)),e.send(t),this._setLastRequest(e),this._setLoading(!0),this.fire("request",{request:e,options:t},{bubbles:this.bubbles}),this.fire("iron-ajax-request",{request:e,options:t},{bubbles:this.bubbles}),e},_handleResponse:function(e){e===this.lastRequest&&(this._setLastResponse(e.response),this._setLastError(null),this._setLoading(!1)),this.fire("response",e,{bubbles:this.bubbles}),this.fire("iron-ajax-response",e,{bubbles:this.bubbles})},_handleError:function(e,t){this.verbose&&Polymer.Base._error(t),e===this.lastRequest&&(this._setLastError({request:e,error:t,status:e.xhr.status,statusText:e.xhr.statusText,response:e.xhr.response}),this._setLastResponse(null),this._setLoading(!1)),this.fire("iron-ajax-error",{request:e,error:t},{bubbles:this.bubbles}),this.fire("error",{request:e,error:t},{bubbles:this.bubbles})},_discardRequest:function(e){var t=this.activeRequests.indexOf(e);-1<t&&this.splice("activeRequests",t,1)},_requestOptionsChanged:function(){this.debounce("generate-request",function(){null!=this.url&&this.auto&&this.generateRequest()},this.debounceDuration)}})</script><script>DataControlBehavior={attached:function(){this.fire("ready")},passData:function(a){for(var t=Polymer.dom(this).children,i=0;i<t.length;i++)this._passDataTo(t[i],a)},_passDataTo:function(i,s){var e=this;this.async(function(){if(!i.isDataSource)if(i.acceptData){var a=JSON.parse(JSON.stringify(s));i.receiveData(a)}else if(i.childNodes)for(var t=0;t<i.childNodes.length;t++)e._passDataTo(i.childNodes[t],s)})}}</script><script>DataSourceBehavior=[DataControlBehavior,{properties:{isDataSource:{type:Boolean,value:!0,readOnly:!0}},publishData:function(a){this.passData(a)}}]</script><dom-module id="ajax-wrapper" assetpath="src/data-control/"><template><style>#error-text{display:block}</style><iron-ajax id="ajaxCaller" url="[[dataUrl]]" handle-as="json" on-response="_handleResponse" on-error="_handleError" debounce-duration="300"></iron-ajax><template is="dom-if" if="[[_showErrorText]]" restamp=""><span id="error-text">[[errorText]]</span></template><template is="dom-if" if="[[!_showErrorText]]" restamp=""><content></content></template></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"ajax-wrapper",behaviors:[DataSourceBehavior],properties:{dataUrl:String,dataSchema:String,refreshInterval:Number,errorText:{type:String,value:null},_responseData:Object,_responseError:{type:Object,value:null},_showErrorText:{type:Boolean,computed:"_computeShowErrorText(errorText, _responseError)"}},attached:function(){this.$.ajaxCaller.generateRequest()},detached:function(){this._refreshTimeout&&clearTimeout(this._refreshTimeout)},_handleResponse:function(e){if(this._responseError=!e.detail.succeeded,!this._responseError){var r=JSON.parse(JSON.stringify(e.detail.response)),t=this._handlePagination(r);void 0!==t&&(this.publishData(this._parseData(t)),this.refreshInterval&&this._scheduleRefresh())}},_handlePagination:function(e){if("jsonapi"===this.dataSchema&&Array.isArray(e)){if(this._responseData=this._responseData||[],this._responseData=this._responseData.concat(e.data),e.links.next)return this.$.ajaxCaller.url=e.links.next,void this.$.ajaxCaller.generateRequest();var r=this._responseData;return this._responseData=[],this.$.ajaxCaller.url=this.dataUrl,r}return e},_parseData:function(e){return"jsonapi"===this.dataSchema&&Array.isArray(e)?e.map(function(e){return e.attributes}):e},_handleError:function(){this._responseError=!0,this.publishData(null),this.refreshInterval&&this._scheduleRefresh()},_scheduleRefresh:function(){var e=this;this._refreshTimeout=setTimeout(function(){e.$.ajaxCaller.generateRequest()},this.refreshInterval)},_computeShowErrorText:function(e,r){return null!==e&&r}})})</script></dom-module><script>!function(){var e=document.createElement("style");e.textContent="[hidden] { display: none !important; }",document.head.appendChild(e)}()</script><style is="custom-style">[hidden]{display:none!important}</style><style is="custom-style">:root{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex};--layout-horizontal:{@apply(--layout);-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row};--layout-horizontal-reverse:{@apply(--layout);-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse};--layout-vertical:{@apply(--layout);-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column};--layout-vertical-reverse:{@apply(--layout);-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap};--layout-no-wrap:{-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none};--layout-flex:{-ms-flex:1 1 .000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:.000000001px;flex-basis:.000000001px};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between};--layout-center-center:{@apply(--layout-center);@apply(--layout-center-justified);};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around};--layout-block:{display:block};--layout-invisible:{visibility:hidden!important};--layout-relative:{position:relative};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto};--layout-fullbleed:{margin:0;height:100vh};--layout-fixed-top:{position:fixed;top:0;left:0;right:0};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0};}</style><script>!function(){"use strict";var a={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},o={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},r={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},s=/[a-z0-9*]/,d=/U\+/,y=/^arrow/,h=/^space(bar)?/,c=/^escape$/;function u(e,t){var n="";if(e){var i=e.toLowerCase();" "===i||h.test(i)?n="space":c.test(i)?n="esc":1==i.length?t&&!s.test(i)||(n=i):n=y.test(i)?i.replace("arrow",""):"multiply"==i?"*":i}return n}function n(e,t){return e.key?u(e.key,t):e.detail&&e.detail.key?u(e.detail.key,t):(s=e.keyIdentifier,r="",s&&(s in a?r=a[s]:d.test(s)?(s=parseInt(s.replace("U+","0x"),16),r=String.fromCharCode(s).toLowerCase()):r=s.toLowerCase()),r||(n=e.keyCode,i="",Number(n)&&(i=65<=n&&n<=90?String.fromCharCode(32+n):112<=n&&n<=123?"f"+(n-112):48<=n&&n<=57?String(n-48):96<=n&&n<=105?String(n-96):o[n]),i)||"");var n,i,s,r}function v(e,t){return n(t,e.hasModifiers)===e.key&&(!e.hasModifiers||!!t.shiftKey==!!e.shiftKey&&!!t.ctrlKey==!!e.ctrlKey&&!!t.altKey==!!e.altKey&&!!t.metaKey==!!e.metaKey)}function f(e){return e.trim().split(" ").map(function(e){return 1===(t=e).length?{combo:t,key:t,event:"keydown"}:t.split("+").reduce(function(e,t){var n=t.split(":"),i=n[0],s=n[1];return i in r?(e[r[i]]=!0,e.hasModifiers=!0):(e.key=i,e.event=s||"keydown"),e},{combo:t.split(":").shift()});var t})}Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var n=f(t),i=0;i<n.length;++i)if(v(n[i],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map(function(e){return e.keyBindings});return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){for(var e in this._keyBindings={},this._collectKeyBindings().forEach(function(e){for(var t in e)this._addKeyBinding(t,e[t])},this),this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort(function(e,t){var n=e[0].hasModifiers;return n===t[0].hasModifiers?0:n?-1:1})},_addKeyBinding:function(e,t){f(e).forEach(function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(e){var t=this._keyBindings[e],n=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,n]),this.keyEventTarget.addEventListener(e,n)},this)},_unlistenKeyEventListeners:function(){for(var e,t,n,i;this._boundKeyHandlers.length;)t=(e=this._boundKeyHandlers.pop())[0],n=e[1],i=e[2],t.removeEventListener(n,i)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var i=e[n][0],s=e[n][1];if(v(i,t)&&(this._triggerKeyHandler(i,s,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,n){var i=Object.create(e);i.keyboardEvent=n;var s=new CustomEvent(e.event,{detail:i,cancelable:!0});this[t].call(this,s),s.defaultPrevented&&n.preventDefault()}}}()</script><script>Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){if(e.target===this)this._setFocused("focus"===e.type);else if(!this.shadowRoot){var t=Polymer.dom(e).localTarget;this.isLightDescendant(t)||this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})}},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}}</script><script>Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var t=e.detail.keyboardEvent,i=Polymer.dom(t).localTarget;this.isLightDescendant(i)||(t.preventDefault(),t.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){var t=e.detail.keyboardEvent,i=Polymer.dom(t).localTarget;this.isLightDescendant(i)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl]</script><dom-module id="paper-ripple" assetpath="../paper-ripple/"><template><style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none}:host([animating]){-webkit-transform:translate(0,0);transform:translate3d(0,0,0)}#background,#waves,.wave,.wave-container{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%}#background,.wave{opacity:0}#waves,.wave{overflow:hidden}.wave,.wave-container{border-radius:50%}:host(.circle) #background,:host(.circle) #waves{border-radius:50%}:host(.circle) .wave-container{overflow:hidden}</style><div id="background"></div><div id="waves"></div></template></dom-module><script>!function(){var o={distance:function(t,i,e,n){var s=t-e,a=i-n;return Math.sqrt(s*s+a*a)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function t(t){this.element=t,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function r(t){this.element=t,this.color=window.getComputedStyle(t).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}t.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(t,i){var e=o.distance(t,i,0,0),n=o.distance(t,i,this.width,0),s=o.distance(t,i,0,this.height),a=o.distance(t,i,this.width,this.height);return Math.max(e,n,s,a)}},r.MAX_RADIUS=300,r.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var t;return this.mouseDownStart?(t=o.now()-this.mouseDownStart,this.mouseUpStart&&(t-=this.mouseUpElapsed),t):0},get mouseUpElapsed(){return this.mouseUpStart?o.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var t=this.containerMetrics.width*this.containerMetrics.width,i=this.containerMetrics.height*this.containerMetrics.height,e=1.1*Math.min(Math.sqrt(t+i),r.MAX_RADIUS)+5,n=1.1-e/r.MAX_RADIUS*.2,s=this.mouseInteractionSeconds/n,a=e*(1-Math.pow(80,-s));return Math.abs(a)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var t=.3*this.mouseUpElapsedSeconds,i=this.opacity;return Math.max(0,Math.min(t,i))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,r.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,r.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new t(this.element)},draw:function(){var t,i,e;this.wave.style.opacity=this.opacity,t=this.radius/(this.containerMetrics.size/2),i=this.xNow-this.containerMetrics.width/2,e=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+i+"px, "+e+"px)",this.waveContainer.style.transform="translate3d("+i+"px, "+e+"px, 0)",this.wave.style.webkitTransform="scale("+t+","+t+")",this.wave.style.transform="scale3d("+t+","+t+",1)"},downAction:function(t){var i=this.containerMetrics.width/2,e=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=o.now(),this.center?(this.xStart=i,this.yStart=e,this.slideDistance=o.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=t?t.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=t?t.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=i,this.yEnd=e,this.slideDistance=o.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(t){this.isMouseDown&&(this.mouseUpStart=o.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==this.parentNode.nodeType?this.keyEventTarget=Polymer.dom(this).getOwnerRoot().host:this.keyEventTarget=this.parentNode;var t=this.keyEventTarget;this.listen(t,"up","uiUpAction"),this.listen(t,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var t=0;t<this.ripples.length;++t)if(!this.ripples[t].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(t){this.noink||this.downAction(t)},downAction:function(t){this.holdDown&&0<this.ripples.length||(this.addRipple().downAction(t),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(t){this.noink||this.upAction(t)},upAction:function(i){this.holdDown||(this.ripples.forEach(function(t){t.upAction(i)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire("transitionend")},addRipple:function(){var t=new r(this);return Polymer.dom(this.$.waves).appendChild(t.waveContainer),this.$.background.style.backgroundColor=t.color,this.ripples.push(t),this._setAnimating(!0),t},removeRipple:function(t){var i=this.ripples.indexOf(t);i<0||(this.ripples.splice(i,1),t.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var t,i;for(t=0;t<this.ripples.length;++t)(i=this.ripples[t]).draw(),this.$.background.style.opacity=i.outerOpacity,i.isOpacityFullyDecayed&&!i.isRestingAtMaxRadius&&this.removeRipple(i);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(t,i){void 0!==i&&(t?this.downAction():this.upAction())}})}()</script><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Polymer.IronButtonStateImpl._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var i=this._rippleContainer||this.root;if(i&&Polymer.dom(i).appendChild(this._ripple),e){var n=Polymer.dom(this._rippleContainer||this),t=Polymer.dom(e).rootTarget;n.deepContains(t)&&this._ripple.uiDownAction(e)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}}</script><script>Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl]</script><style is="custom-style">:root{--shadow-transition:{transition:box-shadow .28s cubic-bezier(.4,0,.2,1)};--shadow-none:{box-shadow:none};--shadow-elevation-2dp:{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)};--shadow-elevation-3dp:{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12),0 3px 3px -2px rgba(0,0,0,.4)};--shadow-elevation-4dp:{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.4)};--shadow-elevation-6dp:{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.4)};--shadow-elevation-8dp:{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.4)};--shadow-elevation-12dp:{box-shadow:0 12px 16px 1px rgba(0,0,0,.14),0 4px 22px 3px rgba(0,0,0,.12),0 6px 7px -4px rgba(0,0,0,.4)};--shadow-elevation-16dp:{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.4)};--shadow-elevation-24dp:{box-shadow:0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12),0 11px 15px -7px rgba(0,0,0,.4)};}</style><dom-module id="paper-material-shared-styles" assetpath="../paper-material/"><template><style>:host{display:block;position:relative}:host([elevation="1"]){@apply(--shadow-elevation-2dp);}:host([elevation="2"]){@apply(--shadow-elevation-4dp);}:host([elevation="3"]){@apply(--shadow-elevation-6dp);}:host([elevation="4"]){@apply(--shadow-elevation-8dp);}:host([elevation="5"]){@apply(--shadow-elevation-16dp);}</style></template></dom-module><dom-module id="paper-button" assetpath="../paper-button/"><template strip-whitespace=""><style include="paper-material-shared-styles">:host{@apply(--layout-inline);@apply(--layout-center-center);position:relative;box-sizing:border-box;min-width:5.14em;margin:0 .29em;background:0 0;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:.7em .57em;@apply(--paper-font-common-base);@apply(--paper-button);}:host([hidden]){display:none!important}:host([raised].keyboard-focus){font-weight:700;@apply(--paper-button-raised-keyboard-focus);}:host(:not([raised]).keyboard-focus){font-weight:700;@apply(--paper-button-flat-keyboard-focus);}:host([disabled]){background:#eaeaea;color:#a8a8a8;cursor:auto;pointer-events:none;@apply(--paper-button-disabled);}:host([animated]){@apply(--shadow-transition);}paper-ripple{color:var(--paper-button-ink-color)}</style><content></content></template><script>Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}})</script></dom-module><script>DataReceiverBehavior=[DataControlBehavior,{properties:{data:Object,acceptData:{type:Boolean,value:!0},hasReceivedData:{type:Boolean,value:!1},_receivingData:{type:Boolean,value:!1}},observers:["_dataChanged(data.*)"],attached:function(){this.update()},receiveData:function(a){this.acceptData&&(this._receivingData=!0,this.data=a,this._receivingData=!1)},update:function(){if(this.isAttached&&void 0!==this.data){this.hasReceivedData=!0;var a=JSON.parse(JSON.stringify(this.data));this.dataChanged(a)}},_dataChanged:function(){if(this.isAttached){this._receivingData||(this.acceptData=!1),this.hasReceivedData=!0;var a=JSON.parse(JSON.stringify(this.data));this.dataChanged(a)}},dataChanged:function(a){}}]</script><script>DataTransformerBehavior=[DataReceiverBehavior,{dataChanged:function(a){try{a=this.transformData(a)}catch(a){console.error(a)}this.passData(a)},transformData:function(a){return a}}]</script><dom-module id="data-filter" assetpath="src/data-control/"><template><style>:host{display:block}#filterBar{margin-bottom:20px}#filterBar paper-button[active]{font-weight:700}</style><div id="filterBar"><template is="dom-repeat" items="[[data]]"><paper-button toggles="" raised="" active="[[_isActive(item)]]" on-tap="_handleTap">[[item.name]]</paper-button></template></div><content id="chartingElement"></content></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"data-filter",behaviors:[DataTransformerBehavior],properties:{exclusive:{type:Boolean,value:!1},activeSeries:{type:Array,value:[],reflectToAttribute:!0}},observers:["update(activeSeries.*)"],transformData:function(e){return e.forEach(function(e,t){e.name=e.name||"Data "+t}),e.filter(this._isActive.bind(this))},_isActive:function(t){return!!this.activeSeries&&this.activeSeries.some(function(e){return t.name===e})},_handleTap:function(e){var t=e.model.item.name,i=this.activeSeries.indexOf(t);if(e.srcElement.active&&-1===i)if(this.exclusive){for(var r=this.$.filterBar.querySelectorAll("paper-button"),a=0;a<r.length;a++)r[a]!==e.srcElement&&(r[a].active=!1);this.set("activeSeries",[t])}else this.push("activeSeries",t);else e.srcElement.active||-1===i||this.splice("activeSeries",i,1)}})})</script></dom-module><dom-module id="data-selector" assetpath="src/data-control/"><template><content id="chartingElement"></content></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"data-selector",behaviors:[DataTransformerBehavior],properties:{key:{type:String,observer:"update"},keys:{type:Array}},observers:["update(keys.*)"],transformData:function(e){if(void 0!==e){var t=this.keys||(this.key?[this.key]:[]);return this._selectData(e,t)}},_selectData:function(t,r){if(Array.isArray(t)&&void 0===t[r[0]]){var a=this;return t.map(function(e){return a._selectData(e,r)})}return r.forEach(function(e){if("object"!=typeof t)return t;t=t[e]}),t}})})</script></dom-module><dom-module id="schema-transformer" assetpath="src/data-control/"><template><content id="chartingElement"></content></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"schema-transformer",behaviors:[DataTransformerBehavior],properties:{mappings:Array,noMerge:Boolean},observers:["update(mapping.*)"],transformData:function(n){if(Array.isArray(n)||(n=[n]),this.noMerge){var r=this;return this._flatten(n.map(function(n){return r._applyMappings(n)}))}return this._applyMappings(n)},_applyMappings:function(e){var p=this;return this.mappings.map(function(n){var r={};for(var a in n){var t=n[a].type;r[a]=p._applyTransformation(t,e,n[a])}return r})},_applyTransformation:function(n,r,a){switch(n){case"constant":return this._applyConstantMapping(a,r);case"collect":return this._applyCollectMapping(a,r);case"keys":return this._applyKeysMapping(a,r);case"values":return this._applyValuesMapping(a,r)}},_applyConstantMapping:function(n){return n.value},_applyCollectMapping:function(r,n){return Array.isArray(n)?n.map(function(n){return n[r.sourceKey]}):n[r.sourceKey]},_applyKeysMapping:function(n,r){return Array.isArray(r)||(r=[r]),this._flatten(r.map(function(n){return Object.keys(n)}))},_applyValuesMapping:function(n,r){return Array.isArray(r)||(r=[r]),this._flatten(r.map(function(r){return Object.keys(r).map(function(n){return r[n]})}))},_flatten:function(n){return[].concat.apply([],n)}})})</script></dom-module><script>PlotlyBehavior=[DataReceiverBehavior,{properties:{width:{type:Number,observer:"update"},height:{type:Number,observer:"update"}},attached:function(){var e=this;window.addEventListener("resize",function(){var t=e.getDiagram().children[0];t&&Plotly.Plots.resize(t)})},dataChanged:function(t){var e=Plotly.d3.select(this.getDiagram());e.selectAll("*").remove(),this.width&&e.style("width",this.width+"px"),this.height&&e.style("height",this.height+"px");var i=e.append("div").style({width:"100%","margin-left":"0%",height:"100%","margin-top":"0%"}).node(),a=this.getConfig();a.displayModeBar=!1,Plotly.newPlot(i,this.getPlotData(t),this.getLayout(),a)},getDiagram:function(){},getPlotData:function(t){return t},getLayout:function(){return{}},getConfig:function(){return{}}}]</script><dom-module id="barchart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"barchart-basic",behaviors:[PlotlyBehavior],properties:{primarycolor:{type:String,value:"rgba(0,0,0,1)",reflectToAttribute:!0},accentcolor:{type:String,value:"rgba(0,0,0,1)",reflectToAttribute:!0},scrollzoom:{type:Boolean,value:!1,reflectToAttribute:!0},scrollrange:{type:Number,value:100,reflectToAttribute:!0},stackedbar:{type:Boolean,value:!1,reflectToAttribute:!0},xTitle:String,yTitle:String},getDiagram:function(){return this.$.diagram},getPlotData:function(t){return t.forEach(function(t){t.type="bar"}),t[0].marker={color:this.primarycolor},t},getLayout:function(){var t={xaxis:{title:this.xTitle,type:"category",tickmode:"auto",tickfont:{size:14,color:this.accentcolor}},yaxis:{title:this.yTitle,tickfont:{size:14,color:this.accentcolor}},margin:{l:50,r:10,t:10,b:80}};if(this.stackedbar&&(t.barmode="stack"),this.scrollzoom){var e=data[0].x[data[0].x.length-1],r=data[0].x[Math.round(data[0].x.length*(1-this.scrollrange/100))];t.xaxis.rangeslider={},t.xaxis.range=[r,e]}return t},getConfig:function(){return this.scrollzoom?{scrollZoom:!0}:{}}})})</script></dom-module><dom-module id="piechart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"piechart-basic",behaviors:[PlotlyBehavior],properties:{colors:Array,hideLegend:Boolean},getDiagram:function(){return this.$.diagram},getPlotData:function(e){return Array.isArray(e)&&(e=e[0]),[{type:"pie",values:e.values,labels:e.labels,showlegend:!this.hideLegend,marker:{colors:this.colors}}]},getLayout:function(){return{margin:{l:0,r:0,t:0,b:0}}}})})</script></dom-module><dom-module id="linechart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"linechart-basic",behaviors:[PlotlyBehavior],properties:{accentcolor:{type:String,value:"rgba(0,0,0,1)",reflectToAttribute:!0},scrollzoom:{type:Boolean,value:!1,reflectToAttribute:!0},scrollrange:{type:Number,value:100,reflectToAttribute:!0},mode:{type:String,value:"lines"},highlightLatest:{type:Boolean,value:!1}},getDiagram:function(){return this.$.diagram},getPlotData:function(t){var e=this;return t.forEach(function(o){o.mode=o.mode||e.mode,e.highlightLatest&&(o.mode=o.mode+"+text",o.textposition="middle right",o.textfont={size:16},o.text=o.y.map(function(t,e){return e==o.y.length-1?t:""}))}),t},getLayout:function(){var t={xaxis:{tickmode:"auto",tickfont:{size:14,color:this.accentcolor}},yaxis:{fixedrange:!0,tickfont:{size:14,color:this.accentcolor}},margin:{l:40,r:10,t:10,b:40}};if(this.scrollzoom){var e=data[0].x[data[0].x.length-1],o=data[0].x[Math.round(data[0].x.length*(1-this.scrollrange/100))];t.xaxis.rangeslider={},t.xaxis.range=[o,e]}return t},getConfig:function(){return this.scrollzoom?{scrollZoom:!0}:{}}})})</script></dom-module><dom-module id="circular-progress" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"circular-progress",behaviors:[DataReceiverBehavior],properties:{width:{type:Number,value:200},height:{type:Number,value:200},primarycolor:{type:String,value:"#f2503f"},primarytextcolor:{type:String,value:"#000000"},secondarycolor:{type:String,value:"#ffa64c"},secondarytextcolor:{type:String,value:"#ffa64c"},accentcolor:{type:String,value:"#404F70"}},attached:function(){var t,e=this;window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){e.ignoreFirst&&e.update(),e.ignoreFirst=!0},250)})},dataChanged:function(t){var g=Plotly.d3,e=g.select(this.$.diagram),r=e.selectAll("*").remove();e.style("width",this.width+"px"),e.style("height",this.height+"px"),r=e.append("div").style("width","100%").style("margin-left","0%").style("height","100%").style("margin-top","0%");var a=this.offsetWidth,i=this.offsetHeight,f=Math.min(a,i),n=f/3,o=n+f/10,v=r.append("svg").attr("width",a).attr("height",i).append("g").attr("transform","translate("+a/2+","+i/2+")"),s=g.svg.arc().innerRadius(n).outerRadius(o).startAngle(0).endAngle(2*Math.PI),m=g.svg.arc().innerRadius(n).outerRadius(o).startAngle(0);v.append("path").attr("d",s).style("fill",this.accentcolor);function l(n,t,e,r,a,i,o,s,l,d){if(null!=n){100==n&&(o-=2);var p,c,h=n/100;p=r,c=t,v.append("svg:defs").append("svg:linearGradient").attr("id",p).attr("x1","0%").attr("y1","0%").attr("x2","50%").attr("y2","100%").attr("spreadMethod","pad").append("svg:stop").attr("offset","50%").attr("stop-color",c).attr("stop-opacity",1);var y=v.append("path").datum({endAngle:0}).attr("d",m).style("fill","url(#"+r+")"),u=v.append("text").text(function(t){return t}).attr("text-anchor","middle").attr("dy",f/i).attr("dx",f/a).style("fill",e).style("font-size",l*f+"px");v.append("text").text("%").attr("text-anchor","middle").attr("dy",f/s).attr("dx",f/o).style("fill",e).style("font-size",d*f+"px");y.transition().duration(750).ease("cubic").call(function(t,i){t.attrTween("d",function(e){var r=g.interpolate(e.endAngle,i),a=g.interpolate(0,n);return function(t){return e.endAngle=r(t),u.text(Math.floor(a(t))),m(e)}})},2*Math.PI*h)}}Array.isArray(t)?(l(t[0],this.primarycolor,this.primarytextcolor,"gradient1",-20,25,6,-20,.3,.15),l(t[1],this.secondarycolor,this.secondarytextcolor,"gradient2",-40,4,8,6,.2,.1)):l(t,this.primarycolor,this.primarytextcolor,"gradient1",-20,10,6,-60,.3,.15)}})})</script></dom-module><dom-module id="circular-stacked" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"circular-stacked",behaviors:[DataReceiverBehavior],properties:{width:{type:Number,value:200},height:{type:Number,value:200},primarycolor:{type:String,value:"#f2503f"}},dataChanged:function(t){var e=Plotly.d3,a=2*Math.PI,r=this.width,i=this.height,n=Math.min(r,i),d=t.length,h=n/8,l=(3*h-h)/d;50<l&&(l=50);var o=l-10;var s=e.select(this.$.diagram);s.selectAll("*").remove();for(var v,p,g,c,u=s.append("svg").attr("width",r).attr("height",i).append("g").attr("transform","translate("+r/2+","+i/2+")"),m=h,y=m+l,f=l+o,w=0;w<d;w++){var b=(v=m,p=y,g=t[w],void 0,c=g/100*a,e.svg.arc().innerRadius(v).outerRadius(p).startAngle(0).endAngle(c));u.append("path").attr("d",b).attr("fill",this.primarycolor),m+=f,y+=f}}})})</script></dom-module><dom-module id="bubblechart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"bubblechart-basic",behaviors:[PlotlyBehavior],properties:{primarycolor:{type:String,value:"rgba(0,0,0,1)",reflectToAttribute:!0},accentcolor:{type:String,value:"rgba(0,0,0,1)",reflectToAttribute:!0}},getDiagram:function(){return this.$.diagram},getPlotData:function(t){return t[0].mode="markers",t[0].marker.color=this.primarycolor,t},getLayout:function(){return{xaxis:{tickfont:{size:14,color:this.accentcolor}},yaxis:{tickfont:{size:14,color:this.accentcolor}},margin:{l:40,r:10,t:10,b:20}}}})})</script></dom-module><dom-module id="activitychart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}#diagram{display:flex;overflow:hidden}#left-part,#right-part-wrapper{float:left}#right-part-wrapper{overflow-y:auto}</style><div id="diagram"><svg id="left-part"></svg><div id="right-part-wrapper"><svg id="right-part"></svg></div></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"activitychart-basic",behaviors:[DataReceiverBehavior],properties:{primarycolor:{type:String,value:"#930517",observer:"update"},accentcolor:{type:String,value:"#F5E8BB",observer:"update"},cellWidth:{type:Number,value:15,observer:"update"},cellHeight:{type:Number,value:15,observer:"update"},cellSpacing:{type:Number,value:5,observer:"update"},labelPadding:{type:Number,value:3,observer:"update"},labelTextSize:{type:Number,value:14,observer:"update"},rotateXLabels:{type:Boolean,value:!1,observer:"update"},labelBackgroundColor:{type:String,value:"white",observer:"update"},xTitle:{type:String,value:"x",observer:"update"},yTitle:{type:String,value:"y",observer:"update"},axisTitleTextSize:{type:Number,value:14,observer:"update"},axisLabelsTextSize:{type:Number,value:12,observer:"update"},xLabelFrequency:{type:Number,value:1,observer:"update"},yLabelFrequency:{type:Number,value:1,observer:"update"},hideYAxis:{type:Boolean,value:!1,observer:"update"},xLabelFormatter:{type:Object,observer:"update"},yLabelFormatter:{type:Object,observer:"update"},cellLabelFormatter:{type:Object,observer:"update"},sortXValues:{type:String,observer:"update"},sortYValues:{type:String,observer:"update"},_xValues:Array,_yValues:Array,_yAxisOffset:{type:Number,computed:"_computeYAxesOffset(cellSpacing, axisTitleTextSize)"},_cellOuterWidth:{type:Number,computed:"_computeCellOuterSize(cellSpacing, cellWidth)"},_cellOuterHeight:{type:Number,computed:"_computeCellOuterSize(cellSpacing, cellHeight)"},_cellsPerColumn:{type:Number,computed:"_computeCellsPerColumn(_yValues)"}},_computeYAxesOffset:function(e,t){return t+2*e},_computeCellOuterSize:function(e,t){return t+e},_computeCellsPerColumn:function(e){return e.length},dataChanged:function(e){var t=d3.select(this.$.diagram);t.select("#left-part").selectAll("*").remove(),t.select("#right-part").selectAll("*").remove(),this._xValues=this._extractValues(e,"x"),this._yValues=this._extractValues(e,"y").reverse(),this._plotYAxis(t,e),this._plotXAxis(t,e),this._plotCells(t,e),this.$["right-part-wrapper"].scrollLeft=this._getBounds(t,"right-part").width},_extractValues:function(e,t){var l=this._distinct(e.map(function(e){return e[t]})),i="x"===t?this.sortXValues:this.sortYValues;return i&&(l="number"==typeof l[0]?l.sort(function(e,t){return e-t}):l.sort(),"desc"===i&&(l=l.reverse())),l},_plotYAxis:function(e,t){var l=this;e.select("#left-part").style("margin-right",this.cellSpacing);var i=e.select("#left-part").append("g").attr("id","y-axis");i.append("text").text(this.yTitle).style("font-size",this.axisTitleTextSize+"px").attr("x",0).attr("y",this.axisTitleTextSize);var a=i.append("g");a.selectAll("text").data(this._yValues.filter(function(e,t){return t%l.yLabelFrequency==0})).enter().append("text").text(this._getAxisLabel.bind(this,this.yLabelFormatter)).style("font-size",this.axisLabelsTextSize+"px").attr("x",0).attr("y",function(e){return l._getCellPosY(e)+l.cellSpacing/2+l.cellHeight/2}).attr("alignment-baseline","middle"),a.attr("transform","translate(0, "+this._yAxisOffset+")"),e.select("#left-part").attr("height",this._getBounds(e,"y-axis").height).attr("width",this.hideYAxis?0:this._getBounds(e,"y-axis").width)},_plotXAxis:function(e,t){var l=this,i=e.select("#right-part").append("g").attr("id","x-axis");i.append("text").text(this.xTitle).style("font-size",this.axisTitleTextSize+"px").attr("x",this._xValues.length*this._cellOuterWidth+this.cellSpacing).attr("y",this.axisTitleTextSize).attr("alignment-baseline","after-edge"),i.append("g").selectAll("text").data(this._xValues.filter(function(e,t){return t%l.xLabelFrequency==0})).enter().append("text").text(this._getAxisLabel.bind(this,this.xLabelFormatter)).style("font-size",this.axisLabelsTextSize+"px").attr("transform",function(e){return"translate("+(l._getCellPosX(e)+l.cellWidth/2)+", "+(l.rotateXLabels?0:l.axisLabelsTextSize)+")rotate("+(l.rotateXLabels?-90:0)+")"}).attr("text-anchor",this.rotateXLabels?"end":"middle").attr("alignment-baseline",this.rotateXLabels?"middle":"after-edge"),i.attr("transform","translate(0, "+(this._yAxisOffset+this._cellsPerColumn*this._cellOuterHeight)+")")},_plotCells:function(e,t){var l=this,i=t.map(function(e){return e.value}),a=Math.min.apply(null,i),r=Math.max.apply(null,i),s=d3.scale.linear().domain([a,r]).range([this.accentcolor,this.primarycolor]),n=(this._cellsPerColumn,this._cellOuterHeight);e.select("#right-part").append("g").attr("transform","translate(0, "+this._yAxisOffset+")").attr("id","cells").selectAll("rect").data(t).enter().append("rect").attr("width",this.cellWidth).attr("height",this.cellHeight).attr("x",function(e){return l._getCellPosX(e.x)}).attr("y",function(e){return l._getCellPosY(e.y)}).attr("fill",function(e){return s(e.value)}).on("mouseover",this._showLabel.bind(this,e)).on("mouseout",this._hideLabel.bind(this,e));var u=this._getBounds(e,"x-axis"),o=(this._getBounds(e,"y-axis"),u.x+u.width);n=this._yAxisOffset+this._cellsPerColumn*this._cellOuterHeight+u.height;e.select("#right-part-wrapper").style("width",o+"px"),e.select("#right-part").attr("height",n).attr("width",o)},_showLabel:function(e,t,l){var i=e.select("#cells").append("g").attr("id","label-"+l),a=i.append("text").text(this._getCellLabel(t)).style("font-size",this.labelTextSize+"px").attr("dominant-baseline","text-after-edge"),r=a.node().getBBox().width;a.attr("x",this._getLabelPosX(e,t,r)).attr("y",this._getLabelPosY(t)),i.insert("rect","text").attr("x",a.attr("x")-this.labelPadding).attr("y",a.attr("y")-this.labelTextSize-this.labelPadding).attr("fill",this.labelBackgroundColor).attr("width",r+2*this.labelPadding).attr("height",this.labelTextSize+2*this.labelPadding)},_hideLabel:function(e,t,l){e.select("#label-"+l).remove()},_distinct:function(e){return e.filter(function(e,t,l){return l.indexOf(e)==t})},_getCellLabel:function(e){if("function"==typeof this.cellLabelFormatter)return this.cellLabelFormatter(e);var t=this._getAxisLabel(this.xLabelFormatter,e.x),l=this._getAxisLabel(this.yLabelFormatter,e.y);return e.value+" ("+t+", "+l+")"},_getAxisLabel:function(e,t){return"function"==typeof e?e(t):t},_getBounds:function(e,t){return e.select("#"+t).node().getBBox()},_getLabelPosX:function(e,t,l){var i=this._getCellPosX(t.x)+this.labelPadding,a=this._getBounds(e,"cells").width-l-this.labelPadding;return Math.min(i,a)},_getLabelPosY:function(e){var t=this._getCellPosY(e.y),l=this.labelTextSize+this.labelPadding,i=this.cellHeight+l,a=t-this.labelPadding,r=t+this.cellHeight+l;return i<=a?a:r},_getCellPosX:function(e){return Math.max(0,this._cellOuterWidth*this._xValues.indexOf(e))},_getCellPosY:function(e){return Math.max(0,this._cellOuterHeight*this._yValues.indexOf(e))}})})</script></dom-module><script>!function(a,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):a.CountUp=n()}(this,function(a,n,t){return function(a,n,t,e,i,r){function o(a){return"number"==typeof a&&!isNaN(a)}var u=this;if(u.version=function(){return"1.9.3"},u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:function(a,n,t,e){return t*(1-Math.pow(2,-10*a/e))*1024/1023+n},formattingFn:function(a){var n,t,e,i,r,o,s=a<0;if(a=Math.abs(a).toFixed(u.decimals),t=(n=(a+="").split("."))[0],e=1<n.length?u.options.decimal+n[1]:"",u.options.useGrouping){for(i="",r=0,o=t.length;r<o;++r)0!==r&&r%3==0&&(i=u.options.separator+i),i=t[o-r-1]+i;t=i}return u.options.numerals.length&&(t=t.replace(/[0-9]/g,function(a){return u.options.numerals[+a]}),e=e.replace(/[0-9]/g,function(a){return u.options.numerals[+a]})),(s?"-":"")+u.options.prefix+t+e+u.options.suffix},prefix:"",suffix:"",numerals:[]},r&&"object"==typeof r)for(var s in u.options)r.hasOwnProperty(s)&&null!==r[s]&&(u.options[s]=r[s]);""===u.options.separator?u.options.useGrouping=!1:u.options.separator=""+u.options.separator;for(var l=0,m=["webkit","moz","ms","o"],d=0;d<m.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[m[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m[d]+"CancelAnimationFrame"]||window[m[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,n){var t=(new Date).getTime(),e=Math.max(0,16-(t-l)),i=window.setTimeout(function(){a(t+e)},e);return l=t+e,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),u.initialize=function(){return!(!u.initialized&&(u.error="",u.d="string"==typeof a?document.getElementById(a):a,u.d?(u.startVal=Number(n),u.endVal=Number(t),o(u.startVal)&&o(u.endVal)?(u.decimals=Math.max(0,e||0),u.dec=Math.pow(10,u.decimals),u.duration=1e3*Number(i)||2e3,u.countDown=u.startVal>u.endVal,u.frameVal=u.startVal,u.initialized=!0,0):(u.error="[CountUp] startVal ("+n+") or endVal ("+t+") is not a number",1)):u.error="[CountUp] target is null or undefined"))},u.printValue=function(a){var n=u.options.formattingFn(a);"INPUT"===u.d.tagName?this.d.value=n:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=n:this.d.innerHTML=n},u.count=function(a){u.startTime||(u.startTime=a);var n=(u.timestamp=a)-u.startTime;u.remaining=u.duration-n,u.options.useEasing?u.countDown?u.frameVal=u.startVal-u.options.easingFn(n,0,u.startVal-u.endVal,u.duration):u.frameVal=u.options.easingFn(n,u.startVal,u.endVal-u.startVal,u.duration):u.countDown?u.frameVal=u.startVal-(u.startVal-u.endVal)*(n/u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(n/u.duration),u.countDown?u.frameVal=u.frameVal<u.endVal?u.endVal:u.frameVal:u.frameVal=u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),n<u.duration?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},u.start=function(a){u.initialize()&&(u.callback=a,u.rAF=requestAnimationFrame(u.count))},u.pauseResume=function(){u.paused?(u.paused=!1,delete u.startTime,u.duration=u.remaining,u.startVal=u.frameVal,requestAnimationFrame(u.count)):(u.paused=!0,cancelAnimationFrame(u.rAF))},u.reset=function(){u.paused=!1,delete u.startTime,u.initialized=!1,u.initialize()&&(cancelAnimationFrame(u.rAF),u.printValue(u.startVal))},u.update=function(a){if(u.initialize()){if(!o(a=Number(a)))return void(u.error="[CountUp] update() - new endVal is not a number: "+a);u.error="",a!==u.frameVal&&(cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=a,u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count))}},u.initialize()&&u.printValue(u.startVal)}})</script><dom-module id="count-up" assetpath="../count-up/"><template><style>:host{display:inline-block}:host([hidden]){display:none}#value{@apply --count-up-value;}</style><span id="value"></span></template><script>!function(){"use strict";Polymer({is:"count-up",properties:{startValue:{type:Number,value:null},_startValue:{type:Number,computed:"_computeStartValue(_previousEndValue, startValue, updateTo)"},endValue:{type:Number,observer:"_endValueChanged"},updateTo:{type:Number,value:null,observer:"_updateToChanged"},noAutostart:{type:Boolean,value:!1},decimals:{type:Number,value:0,observer:"_optionChanged"},duration:{type:Number,value:2.5},noEasing:{type:Boolean,value:!1},easingFn:{type:Function,value:null},noGrouping:{type:Boolean,value:!1,observer:"_optionChanged"},separator:{type:String,value:","},decimal:{type:String,value:"."},suffix:{type:String,value:null},prefix:{type:String,value:null},restartOnOptionsChanged:{type:Boolean,value:!1},_countup:{type:Function,observer:"_countupChanged",computed:"_setCountUp(_startValue, endValue, decimals, duration, prefix, suffix, separator, noGrouping, easingFn, noEasing)"}},_setCountUp:function(t,e,n,u){return new CountUp(this.$.value,Number(t),Number(e),n,u,{useEasing:!this.noEasing,easingFn:this.easingFn||null,useGrouping:!this.noGrouping,separator:this.separator,decimal:this.decimal,prefix:this.prefix||null,suffix:this.suffix||null})},_countupChanged:function(t){this.updateTo&&!this._updated&&this.start(),this._updated&&this.restartOnOptionsChanged&&!this._noUpdate&&this.start(),this._noUpdate=!1,this._updated=!0},start:function(t){this._countup.start(t)},restart:function(t){this.reset(),this.start(t)},reset:function(){this._countup.reset()},update:function(t){this._countup.update(t)},pauseResume:function(){this._countup.pauseResume()},_computeStartValue:function(t,e,n){return n?e||t:e},_updateToChanged:function(t){this._noUpdate=!0,this.endValue=t},_endValueChanged:function(t,e){this._previousEndValue=void 0!==e?e:0,this.noAutostart||!this._countup||this.restartOnOptionsChanged||this.start()},_optionChanged:function(t,e){var n=this;void 0!==e&&setTimeout(function(){return n.update(n.endValue)},1)}})}()</script></dom-module><dom-module id="counter-basic" assetpath="src/visualizations/"><template><template is="dom-if" if="[[hasReceivedData]]"><template is="dom-if" if="[[_isNumericData]]"><count-up update-to="[[_value]]" prefix="[[prefix]]" suffix="[[suffix]]" decimals="[[decimals]]" duration="[[animationDuration]]"></count-up></template><template is="dom-if" if="[[_isTextData]]"><span>[[_value]]</span></template></template><template is="dom-if" if="[[_showSpinner]]"><i id="spinner" class="fa fas fa-spinner fa-spin"></i></template></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"counter-basic",behaviors:[DataReceiverBehavior],properties:{prefix:String,suffix:String,decimals:{type:Number,value:0},defaultValue:{type:String,value:"n/a"},valueFormatter:{type:Object,value:null},animationDuration:{type:Number,value:1},hideSpinner:{type:Boolean,value:!1},_showSpinner:{type:Boolean,computed:"_computeShowSpinner(hideSpinner, hasReceivedData)"},_value:{type:Object,computed:"_computeValue(hasReceivedData, data, defaultValue, valueFormatter)"},_isNumericData:{type:Boolean,computed:"_computeIsNumericValue(_value)"},_isTextData:{type:Boolean,computed:"_computeIsTextValue(_value)"}},_computeShowSpinner:function(e,t){return!e&&!t},_computeValue:function(e,t,u,a){return e&&null!=t?"function"==typeof a?a(t):t:u},_computeIsNumericValue:function(e){return"number"==typeof e},_computeIsTextValue:function(e){return"string"==typeof e}})})</script></dom-module><dom-module id="score-card" assetpath="src/visualizations/"><template><style>:host{display:block}#container{display:flex;width:100%}#icon-container{display:flex;flex-grow:0;flex-shrink:0;align-items:center;justify-content:center;min-width:50px;min-height:50px;border-radius:2px 0 0 2px}#content-container{position:relative;width:100%;padding:5px 10px;overflow:hidden}#name{display:block;font-size:14px;overflow:hidden;text-overflow:ellipsis;margin-bottom:3px}#value{display:block;font-weight:700;font-size:18px}#link-container{position:absolute;bottom:5px;font-size:14px}#link-icon{margin-right:3px}</style><div id="container"><div id="icon-container" style$="background-color: [[primarycolor]]; height: [[height]]px; flex-basis: [[height]]px;"><span id="icon" class$="[[iconClasses]]" style$="font-size: [[iconSize]]px"></span></div><div id="content-container"><span id="name">[[name]]</span><counter-basic id="value" data="[[data]]" prefix="[[prefix]]" suffix="[[suffix]]" decimals="[[decimals]]" default-value="[[defaultValue]]" value-formatter="[[valueFormatter]]" animation-duration="[[animationDuration]]" hide-spinner="[[hideSpinner]]"></counter-basic><div id="link-container"><template is="dom-if" if="[[link]]"><a href="[[link]]"><i id="link-icon" class="fa fas fa-arrow-circle-right"></i>[[linkText]]</a></template></div></div></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"score-card",behaviors:[DataReceiverBehavior],properties:{height:{type:Number,value:100},iconSize:{type:Number,value:50},primarycolor:String,iconClasses:String,name:String,prefix:String,suffix:String,decimals:{type:Number,value:0},defaultValue:{type:String,value:"n/a"},animationDuration:{type:Number,value:1},hideSpinner:{type:Boolean,value:!1},link:String,linkText:String,valueFormatter:Object},ready:function(){this.scopeSubtree(this.$.icon,!0)}})})</script></dom-module><dom-module id="loading-spinner" assetpath="src/visualizations/"><template><style>:host{display:block}#spinnerContainer{width:100%;height:100%;vertical-align:middle;text-align:center}#spinner{font-size:40px}</style><template is="dom-if" if="[[!hasReceivedData]]"><div id="spinnerContainer"><i id="spinner" class="fa fas fa-spinner fa-spin"></i></div></template><template is="dom-if" if="[[hasReceivedData]]"><content id="chartingElement"></content></template></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"loading-spinner",behaviors:[DataTransformerBehavior]})})</script></dom-module><dom-module id="worldmap-basic" assetpath="src/visualizations/"><template><style>:host{display:block}#diagram{width:100%;height:100%}</style><div id="diagram"></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"worldmap-basic",behaviors:[PlotlyBehavior],properties:{type:{type:String,value:"choropleth"},primarycolor:{type:String,value:"rgb(237, 237, 237)"},accentcolor:{type:String,value:"rgba(164,14,24,1)"}},getDiagram:function(){return this.$.diagram},getPlotData:function(t){var r=this;return t.map(function(t){var o={type:t.type||r.type,z:t.z,marker:{color:r.accentcolor}};return t.locations?o.locations=t.locations:(o.lat=t.lat,o.lon=t.lon),t.text&&(o.hoverinfo="text",o.text=t.text),o})},getLayout:function(){return{geo:{showframe:!1,showland:!0,landcolor:this.primarycolor,showcountries:!0,projection:{type:"Mercator"}},margin:{l:0,r:0,t:0,b:0}}}})})</script></dom-module><dom-module id="vennchart-basic" assetpath="src/visualizations/"><template><style>:host{display:block}#container{position:relative;width:100%;height:100%}#diagram{width:100%;height:100%}#diagram svg{width:100%;height:100%}#diagram path{stroke-opacity:0;stroke:#fff;stroke-width:3}#tooltip{position:absolute;text-align:center;background:#333;color:#ddd;padding:5px 10px;border:0;border-radius:8px;opacity:0}</style><div id="container"><div id="diagram" class="svg-container oneten-height"></div><div id="tooltip"></div></div></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"vennchart-basic",behaviors:[DataReceiverBehavior],properties:{width:{type:Number,value:400},height:{type:Number,value:300},padding:{type:Number,value:10},labelFormatter:{type:Object,observer:"update"},valueFormatter:{type:Object,observer:"update"},blacklist:{type:Array,value:[],observer:"update"},hideIntersectionLabels:Boolean},dataChanged:function(t){if(Array.isArray(t)&&0!==t.length){var a=this;t.forEach(function(t){void 0!==t.label&&(a.hideIntersectionLabels&&1<t.sets.length?t.label="":"function"==typeof a.labelFormatter&&(t.label=a.labelFormatter(t.label)),"string"!=typeof t.label&&(t.label=t.label.toString()))}),t=t.filter(function(t){for(var e=0;e<a.blacklist.length;e++)if(0<=t.sets.indexOf(a.blacklist[e]))return!1;return!0});var e=venn.VennDiagram().width(this.width).height(this.height).padding(this.padding),s=d3.select(this.$.diagram),r=d3.select(this.$.tooltip);s.datum(t).call(e),this.width&&s.style("width",this.width+"px"),this.height&&s.style("height",this.height+"px");var i=this.$.diagram.querySelector("svg");i.removeAttribute("height"),i.removeAttribute("width"),i.setAttribute("viewBox","0 0 "+this.width+" "+this.height),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("class","svg-content-responsive");a=this;s.selectAll("g").on("mouseover",function(t,e){venn.sortAreas(s,t),r.transition().duration(400).style("opacity",.9);var i="function"==typeof a.valueFormatter?a.valueFormatter(t.size):t.size;r.text(i),d3.select(this).transition("tooltip").duration(400).select("path").style("fill-opacity",1==t.sets.length?.4:.1).style("stroke-opacity",1)}).on("mousemove",function(){var t=r.node().getBoundingClientRect(),e=Math.min(d3.event.offsetX+5,a.width-t.width),i=Math.max(d3.event.offsetY-35,0);r.style("left",e+"px").style("top",i+"px")}).on("mouseout",function(t,e){r.transition().duration(400).style("opacity",0),d3.select(this).transition("tooltip").duration(400).select("path").style("fill-opacity",1==t.sets.length?.25:0).style("stroke-opacity",0)}),this.scopeSubtree(this.$.diagram,!0)}}})})</script></dom-module><dom-module id="fallback-text" assetpath="src/visualizations/"><template><style>:host{display:block}</style><template is="dom-if" if="[[_hasEmptyData]]"><span>[[emptyDataText]]</span></template><template is="dom-if" if="[[!_hasEmptyData]]"><content></content></template></template><script>window.addEventListener("WebComponentsReady",function(){Polymer({is:"fallback-text",behaviors:[DataTransformerBehavior],properties:{emptyDataText:String,_hasEmptyData:{type:Boolean,computed:"_computeHasEmptyData(hasReceivedData, data)"}},_computeHasEmptyData:function(t,e){return!!t&&(Array.isArray(e)?0===e.length:null!==e&&"object"==typeof e?0===Object.keys(e).length:null==e)}})})</script></dom-module>