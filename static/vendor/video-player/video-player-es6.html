<!-- video-player v1.3.2 -->
<div hidden="" by-polymer-bundler=""><script>!function(){"use strict";const o=window.Polymer;window.Polymer=function(o){return window.Polymer._polymerFn(o)},o&&Object.assign(Polymer,o),window.Polymer._polymerFn=function(o){throw new Error("Load polymer.html to use the Polymer() function.")},window.Polymer.version="2.6.0",window.JSCompiler_renameProperty=function(o,n){return o}}();</script><script>!function(){"use strict";function e(e,r){if(e&&a.test(e))return e;if(void 0===t){t=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",t="http://a/c%20d"===e.href}catch(e){}}return r||(r=document.baseURI||window.location.href),t?new URL(e,r).href:(n||((n=document.implementation.createHTMLDocument("temp")).base=n.createElement("base"),n.head.appendChild(n.base),n.anchor=n.createElement("a"),n.body.appendChild(n.anchor)),n.base.href=r,n.anchor.href=e,n.anchor.href||e)}let t,n,r=/(url\()([^)]*)(\))/g,a=/(^\/)|(^#)|(^[\w-\d]*:)/;Polymer.ResolveUrl={resolveCss:function(t,n){return t.replace(r,function(t,r,a,c){return r+"'"+e(a.replace(/["']/g,""),n)+"'"+c})},resolveUrl:e,pathFromUrl:function(e){return e.substring(0,e.lastIndexOf("/")+1)}}}();</script><script>!function(){"use strict";Polymer.Settings=Polymer.Settings||{},Polymer.Settings.useShadow=!window.ShadyDOM,Polymer.Settings.useNativeCSSProperties=Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),Polymer.Settings.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback;let e=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=e,Polymer.setRootPath=function(e){Polymer.rootPath=e};let o=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=o,Polymer.setSanitizeDOMValue=function(e){Polymer.sanitizeDOMValue=e};Polymer.passiveTouchGestures=!1,Polymer.setPassiveTouchGestures=function(e){Polymer.passiveTouchGestures=e}}();</script><script>!function(){"use strict";function t(){}let i=0;t.prototype.__mixinApplications,t.prototype.__mixinSet,Polymer.dedupingMixin=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let n=i++;return function(i){let _=i.__mixinSet;if(_&&_[n])return i;let l=e,o=l.get(i);o||(o=t(i),l.set(i,o));let p=Object.create(o.__mixinSet||_||null);return p[n]=!0,o.__mixinSet=p,o}}}();</script><script>!function(){"use strict";function t(t){const e=customElements.get("dom-module");return e?e.import(t):null}function e(t){let e=t.body?t.body:t;const s=Polymer.ResolveUrl.resolveCss(e.textContent,t.baseURI),o=document.createElement("style");return o.textContent=s,o}const s={stylesFromModules(t){const e=t.trim().split(/\s+/),s=[];for(let t=0;t<e.length;t++)s.push(...this.stylesFromModule(e[t]));return s},stylesFromModule(e){const s=t(e);if(!s)return console.warn("Could not find style data in module named",e),[];if(void 0===s._styles){const t=[];t.push(...this._stylesFromModuleImports(s));const e=s.querySelector("template");e&&t.push(...this.stylesFromTemplate(e,s.assetpath)),s._styles=t}return s._styles},stylesFromTemplate(t,e){if(!t._styles){const s=[],o=t.content.querySelectorAll("style");for(let t=0;t<o.length;t++){let l=o[t],r=l.getAttribute("include");r&&s.push(...this.stylesFromModules(r).filter(function(t,e,s){return s.indexOf(t)===e})),e&&(l.textContent=Polymer.ResolveUrl.resolveCss(l.textContent,e)),s.push(l)}t._styles=s}return t._styles},stylesFromModuleImports(e){let s=t(e);return s?this._stylesFromModuleImports(s):[]},_stylesFromModuleImports(t){const s=[],o=t.querySelectorAll("link[rel=import][type~=css]");for(let t=0;t<o.length;t++){let l=o[t];if(l.import){const t=l.import,o=l.hasAttribute("shady-unscoped");if(o&&!t._unscopedStyle){const s=e(t);s.setAttribute("shady-unscoped",""),t._unscopedStyle=s}else t._style||(t._style=e(t));s.push(o?t._unscopedStyle:t._style)}}return s},cssFromModules(t){let e=t.trim().split(/\s+/),s="";for(let t=0;t<e.length;t++)s+=this.cssFromModule(e[t]);return s},cssFromModule(e){let s=t(e);if(s&&void 0===s._cssText){let t=this._cssFromModuleImports(s),e=s.querySelector("template");e&&(t+=this.cssFromTemplate(e,s.assetpath)),s._cssText=t||null}return s||console.warn("Could not find style data in module named",e),s&&s._cssText||""},cssFromTemplate(t,e){let s="";const o=this.stylesFromTemplate(t,e);for(let t=0;t<o.length;t++){let e=o[t];e.parentNode&&e.parentNode.removeChild(e),s+=e.textContent}return s},cssFromModuleImports(e){let s=t(e);return s?this._cssFromModuleImports(s):""},_cssFromModuleImports(t){let e="",s=this._stylesFromModuleImports(t);for(let t=0;t<s.length;t++)e+=s[t].textContent;return e}};Polymer.StyleGather=s}();</script><script>!function(){"use strict";let t={},e={};class s extends HTMLElement{static get observedAttributes(){return["id"]}static import(s,r){if(s){let o=function(s){return t[s]||e[s.toLowerCase()]}(s);return o&&r?o.querySelector(r):o}return null}attributeChangedCallback(t,e,s){e!==s&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=Polymer.ResolveUrl.resolveUrl(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(e)}return this.__assetpath}register(s){(s=s||this.id)&&(this.id=s,t[s]=this,e[s.toLowerCase()]=this,function(t){t.querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}(this))}}s.prototype.modules=t,customElements.define("dom-module",s),Polymer.DomModule=s}();</script><script>!function(){"use strict";const t={isPath:function(t){return t.indexOf(".")>=0},root:function(t){let n=t.indexOf(".");return-1===n?t:t.slice(0,n)},isAncestor:function(t,n){return 0===t.indexOf(n+".")},isDescendant:function(t,n){return 0===n.indexOf(t+".")},translate:function(t,n,e){return n+e.slice(t.length)},matches:function(t,n){return t===n||this.isAncestor(t,n)||this.isDescendant(t,n)},normalize:function(t){if(Array.isArray(t)){let n=[];for(let e=0;e<t.length;e++){let i=t[e].toString().split(".");for(let t=0;t<i.length;t++)n.push(i[t])}return n.join(".")}return t},split:function(t){return Array.isArray(t)?this.normalize(t).split("."):t.toString().split(".")},get:function(t,n,e){let i=t,r=this.split(n);for(let t=0;t<r.length;t++){if(!i)return;i=i[r[t]]}return e&&(e.path=r.join(".")),i},set:function(t,n,e){let i=t,r=this.split(n),s=r[r.length-1];if(r.length>1){for(let t=0;t<r.length-1;t++){if(!(i=i[r[t]]))return}i[s]=e}else i[n]=e;return r.join(".")}};t.isDeep=t.isPath,Polymer.Path=t}();</script><script>!function(){"use strict";const e={},a=/-[a-z]/g,s=/([A-Z])/g,o={dashToCamelCase:s=>e[s]||(e[s]=s.indexOf("-")<0?s:s.replace(a,e=>e[1].toUpperCase())),camelToDashCase:a=>e[a]||(e[a]=a.replace(s,"-$1").toLowerCase())};Polymer.CaseMap=o}();</script><script>!function(){"use strict";let e=0,n=0,t=[],i=0,o=document.createTextNode("");new window.MutationObserver(function(){const e=t.length;for(let n=0;n<e;n++){let e=t[n];if(e)try{e()}catch(e){setTimeout(()=>{throw e})}}t.splice(0,e),n+=e}).observe(o,{characterData:!0}),Polymer.Async={timeOut:{after:e=>({run:n=>window.setTimeout(n,e),cancel(e){window.clearTimeout(e)}}),run:(e,n)=>window.setTimeout(e,n),cancel(e){window.clearTimeout(e)}},animationFrame:{run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e)}},idlePeriod:{run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},microTask:{run:n=>(o.textContent=i++,t.push(n),e++),cancel(e){const i=e-n;if(i>=0){if(!t[i])throw new Error("invalid async handle: "+e);t[i]=null}}}}}();</script><script>!function(){"use strict";const t=Polymer.Async.microTask;Polymer.PropertiesChanged=Polymer.dedupingMixin(e=>{class s extends e{static createProperties(t){const e=this.prototype;for(let s in t)s in e||e._createPropertyAccessor(s)}static attributeNameForProperty(t){return t.toLowerCase()}static typeForProperty(t){}_createPropertyAccessor(t,e){this._addPropertyToAttributeMap(t),this.hasOwnProperty("__dataHasAccessor")||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[t]||(this.__dataHasAccessor[t]=!0,this._definePropertyAccessor(t,e))}_addPropertyToAttributeMap(t){if(this.hasOwnProperty("__dataAttributes")||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[t]){const e=this.constructor.attributeNameForProperty(t);this.__dataAttributes[e]=t}}_definePropertyAccessor(t,e){Object.defineProperty(this,t,{get(){return this._getProperty(t)},set:e?function(){}:function(e){this._setProperty(t,e)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let t in this.__dataHasAccessor)this.hasOwnProperty(t)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[t]=this[t],delete this[t])}_initializeInstanceProperties(t){Object.assign(this,t)}_setProperty(t,e){this._setPendingProperty(t,e)&&this._invalidateProperties()}_getProperty(t){return this.__data[t]}_setPendingProperty(t,e,s){let a=this.__data[t],i=this._shouldPropertyChange(t,e,a);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||t in this.__dataOld||(this.__dataOld[t]=a),this.__data[t]=e,this.__dataPending[t]=e),i}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,t.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const t=this.__data,e=this.__dataPending,s=this.__dataOld;this._shouldPropertiesChange(t,e,s)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(t,e,s))}_shouldPropertiesChange(t,e,s){return Boolean(e)}_propertiesChanged(t,e,s){}_shouldPropertyChange(t,e,s){return s!==e&&(s==s||e==e)}attributeChangedCallback(t,e,s){e!==s&&this._attributeToProperty(t,s),super.attributeChangedCallback&&super.attributeChangedCallback(t,e,s)}_attributeToProperty(t,e,s){if(!this.__serializing){const a=this.__dataAttributes,i=a&&a[t]||t;this[i]=this._deserializeValue(e,s||this.constructor.typeForProperty(i))}}_propertyToAttribute(t,e,s){this.__serializing=!0,s=arguments.length<3?this[t]:s,this._valueToNodeAttribute(this,s,e||this.constructor.attributeNameForProperty(t)),this.__serializing=!1}_valueToNodeAttribute(t,e,s){const a=this._serializeValue(e);void 0===a?t.removeAttribute(s):t.setAttribute(s,a)}_serializeValue(t){switch(typeof t){case"boolean":return t?"":void 0;default:return null!=t?t.toString():void 0}}_deserializeValue(t,e){switch(e){case Boolean:return null!==t;case Number:return Number(t);default:return t}}}return s})}();</script><script>!function(){"use strict";let e=Polymer.CaseMap;const t={};let r=HTMLElement.prototype;for(;r;){let e=Object.getOwnPropertyNames(r);for(let r=0;r<e.length;r++)t[e[r]]=!0;r=Object.getPrototypeOf(r)}Polymer.PropertyAccessors=Polymer.dedupingMixin(r=>{const a=Polymer.PropertiesChanged(r);class o extends a{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let r=0;r<t.length;r++)this.prototype._createPropertyAccessor(e.dashToCamelCase(t[r]))}static attributeNameForProperty(t){return e.camelToDashCase(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const r=this;r.hasAttribute(e)||this._valueToNodeAttribute(r,t,e)}_serializeValue(e){switch(typeof e){case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return super._serializeValue(e)}}_deserializeValue(e,t){let r;switch(t){case Object:try{r=JSON.parse(e)}catch(t){r=e}break;case Array:try{r=JSON.parse(e)}catch(t){r=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${e}`)}break;case Date:r=isNaN(e)?String(e):Number(e),r=new Date(r);break;default:r=super._deserializeValue(e,t)}return r}_definePropertyAccessor(e,r){!function(e,r){if(!t[r]){let t=e[r];void 0!==t&&(e.__data?e._setPendingProperty(r,t):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[r]=t))}}(this,e),super._definePropertyAccessor(e,r)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}return o})}();</script><script>!function(){"use strict";function e(e){let t=e.getAttribute("is");if(t&&a[t]){let n=e;for(n.removeAttribute("is"),e=n.ownerDocument.createElement(t),n.parentNode.replaceChild(e,n),e.appendChild(n);n.attributes.length;)e.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return e}function t(e,n){let r=n.parentInfo&&t(e,n.parentInfo);if(!r)return e;for(let e=r.firstChild,t=0;e;e=e.nextSibling)if(n.parentIndex===t++)return e}function n(e,t,n,r){r.id&&(t[r.id]=n)}function r(e,t,n){if(n.events&&n.events.length)for(let r,o=0,a=n.events;o<a.length&&(r=a[o]);o++)e._addMethodEventListenerToNode(t,r.name,r.value,e)}function o(e,t,n){n.templateInfo&&(t._templateInfo=n.templateInfo)}const a={"dom-if":!0,"dom-repeat":!0};Polymer.TemplateStamp=Polymer.dedupingMixin(a=>{class i extends a{static _parseTemplate(e,t){if(!e._templateInfo){let n=e._templateInfo={};n.nodeInfoList=[],n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,n){return this._parseTemplateNode(e.content,t,n)}static _parseTemplateNode(e,t,n){let r,o=e;return"template"!=o.localName||o.hasAttribute("preserve-content")?"slot"===o.localName&&(t.hasInsertionPoint=!0):r=this._parseTemplateNestedTemplate(o,t,n)||r,o.firstChild&&(r=this._parseTemplateChildNodes(o,t,n)||r),o.hasAttributes&&o.hasAttributes()&&(r=this._parseTemplateNodeAttributes(o,t,n)||r),r}static _parseTemplateChildNodes(t,n,r){if("script"!==t.localName&&"style"!==t.localName)for(let o,a=t.firstChild,i=0;a;a=o){if("template"==a.localName&&(a=e(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let e=o;for(;e&&e.nodeType===Node.TEXT_NODE;)a.textContent+=e.textContent,o=e.nextSibling,t.removeChild(e),e=o;if(n.stripWhiteSpace&&!a.textContent.trim()){t.removeChild(a);continue}}let s={parentIndex:i,parentInfo:r};this._parseTemplateNode(a,n,s)&&(s.infoIndex=n.nodeInfoList.push(s)-1),a.parentNode&&i++}}static _parseTemplateNestedTemplate(e,t,n){let r=this._parseTemplate(e,t);return(r.content=e.content.ownerDocument.createDocumentFragment()).appendChild(e.content),n.templateInfo=r,!0}static _parseTemplateNodeAttributes(e,t,n){let r=!1,o=Array.from(e.attributes);for(let a,i=o.length-1;a=o[i];i--)r=this._parseTemplateNodeAttribute(e,t,n,a.name,a.value)||r;return r}static _parseTemplateNodeAttribute(e,t,n,r,o){return"on-"===r.slice(0,3)?(e.removeAttribute(r),n.events=n.events||[],n.events.push({name:r.slice(3),value:o}),!0):"id"===r&&(n.id=o,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let a=this.constructor._parseTemplate(e),i=a.nodeInfoList,s=a.content||e.content,l=document.importNode(s,!0);l.__noInsertionPoint=!a.hasInsertionPoint;let p=l.nodeList=new Array(i.length);l.$={};for(let e,a=0,s=i.length;a<s&&(e=i[a]);a++){let i=p[a]=t(l,e);n(0,l.$,i,e),o(0,i,e),r(this,i,e)}return l=l}_addMethodEventListenerToNode(e,t,n,r){let o=function(e,t,n){return e=e._methodHost||e,function(t){e[n]?e[n](t,t.detail):console.warn("listener method `"+n+"` not defined")}}(r=r||e,0,n);return this._addEventListenerToNode(e,t,o),o}_addEventListenerToNode(e,t,n){e.addEventListener(t,n)}_removeEventListenerFromNode(e,t,n){e.removeEventListener(t,n)}}return i})}();</script><script>!function(){"use strict";function t(t,e){let a=t[e];if(a){if(!t.hasOwnProperty(e)){a=t[e]=Object.create(t[e]);for(let t in a){let e=a[t],r=a[t]=Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[t]}}}else a=t[e]={};return a}function e(t,e,r,i,s,n){if(e){let o=!1,l=E++;for(let h in r)a(t,e,l,h,r,i,s,n)&&(o=!0);return o}return!1}function a(t,e,a,r,i,s,n,o){let l=!1,h=e[n?Polymer.Path.root(r):r];if(h)for(let e,_=0,d=h.length;_<d&&(e=h[_]);_++)e.info&&e.info.lastRun===a||n&&!function(t,e){if(e){let a=e.name;return a==t||e.structured&&Polymer.Path.isAncestor(a,t)||e.wildcard&&Polymer.Path.isDescendant(a,t)}return!0}(r,e.trigger)||(e.info&&(e.info.lastRun=a),e.fn(t,r,i,s,e.info,n,o),l=!0);return l}function r(t,e,a,r,i){let s="string"==typeof i.method?t[i.method]:i.method,n=i.property;s?s.call(t,t.__data[n],r[n]):i.dynamicFn||console.warn("observer method `"+i.method+"` not defined")}function i(t,e,r,i,n){let o,l=t[C.NOTIFY],h=E++;for(let _ in e)e[_]&&(l&&a(t,l,h,_,r,i,n)?o=!0:n&&function(t,e,a){let r=Polymer.Path.root(e);if(r!==e){let i=Polymer.CaseMap.camelToDashCase(r)+"-changed";return s(t,i,a[e],e),!0}return!1}(t,_,r)&&(o=!0));let _;o&&(_=t.__dataHost)&&_._invalidateProperties&&_._invalidateProperties()}function s(t,e,a,r){let i={value:a,queueProperty:!0};r&&(i.path=r),t.dispatchEvent(new CustomEvent(e,{detail:i}))}function n(t,e,a,r,i,n){let o=(n?Polymer.Path.root(e):e)!=e?e:null,l=o?Polymer.Path.get(t,o):t.__data[e];o&&void 0===l&&(l=a[e]),s(t,i.eventName,l,o)}function o(t,e,a,r,i){let s=t.__data[e];Polymer.sanitizeDOMValue&&(s=Polymer.sanitizeDOMValue(s,i.attrName,"attribute",t)),t._propertyToAttribute(e,i.attrName,s)}function l(t,e,a,r,i){let s=f(t,e,a,r,i),n=i.methodInfo;t.__dataHasAccessor&&t.__dataHasAccessor[n]?t._setPendingProperty(n,s,!0):t[n]=s}function h(t,e,a,r,i,s,n){a.bindings=a.bindings||[];let o={kind:r,target:i,parts:s,literal:n,isCompound:1!==s.length};if(a.bindings.push(o),function(t){return Boolean(t.target)&&"attribute"!=t.kind&&"text"!=t.kind&&!t.isCompound&&"{"===t.parts[0].mode}(o)){let{event:t,negate:e}=o.parts[0];o.listenerEvent=t||g.camelToDashCase(i)+"-changed",o.listenerNegate=e}let l=e.nodeInfoList.length;for(let a=0;a<o.parts.length;a++){let r=o.parts[a];r.compoundIndex=a,function(t,e,a,r,i){if(!r.literal)if("attribute"===a.kind&&"-"===a.target[0])console.warn("Cannot set attribute "+a.target+' because "-" is not a valid attribute starting character');else{let s=r.dependencies,n={index:i,binding:a,part:r,evaluator:t};for(let a=0;a<s.length;a++){let r=s[a];"string"==typeof r&&((r=P(r)).wildcard=!0),t._addTemplatePropertyEffect(e,r.rootProperty,{fn:_,info:n,trigger:r})}}}(t,e,o,r,l)}}function _(t,e,a,r,i,s,n){let o=n[i.index],l=i.binding,h=i.part;if(s&&h.source&&e.length>h.source.length&&"property"==l.kind&&!l.isCompound&&o.__isPropertyEffectsClient&&o.__dataHasAccessor&&o.__dataHasAccessor[l.target]){let r=a[e];e=Polymer.Path.translate(h.source,l.target,e),o._setPendingPropertyOrPath(e,r,!1,!0)&&t._enqueueClient(o)}else{!function(t,e,a,r,i){i=function(t,e,a,r){if(a.isCompound){let i=t.__dataCompoundStorage[a.target];i[r.compoundIndex]=e,e=i.join("")}return"attribute"!==a.kind&&("textContent"!==a.target&&("value"!==a.target||"input"!==t.localName&&"textarea"!==t.localName)||(e=void 0==e?"":e)),e}(e,i,a,r),Polymer.sanitizeDOMValue&&(i=Polymer.sanitizeDOMValue(i,a.target,a.kind,e));if("attribute"==a.kind)t._valueToNodeAttribute(e,i,a.target);else{let r=a.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[r]?e[C.READ_ONLY]&&e[C.READ_ONLY][r]||e._setPendingProperty(r,i)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,r,i)}}(t,o,l,h,i.evaluator._evaluateBinding(t,h,e,a,r,s))}}function d(t,e){let{nodeList:a,nodeInfoList:r}=e;if(r.length)for(let e=0;e<r.length;e++){let i=r[e],s=a[e],n=i.bindings;if(n)for(let e=0;e<n.length;e++){let a=n[e];!function(t,e){if(e.isCompound){let a=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),r=e.parts,i=new Array(r.length);for(let t=0;t<r.length;t++)i[t]=r[t].literal;let s=e.target;a[s]=i,e.literal&&"property"==e.kind&&(t[s]=e.literal)}}(s,a),function(t,e,a){if(a.listenerEvent){let r=a.parts[0];t.addEventListener(a.listenerEvent,function(t){!function(t,e,a,r,i){let s,n=t.detail,o=n&&n.path;o?(r=Polymer.Path.translate(a,r,o),s=n&&n.value):s=t.target[a],s=i?!s:s,e[C.READ_ONLY]&&e[C.READ_ONLY][r]||!e._setPendingPropertyOrPath(r,s,!0,Boolean(o))||n&&n.queueProperty||e._invalidateProperties()}(t,e,a.target,r.source,r.negate)})}}(s,t,a)}s.__dataHost=t}}function p(t,e,a,r,i,s){s=e.static||s&&("object"!=typeof s||s[e.methodName]);let n={methodName:e.methodName,args:e.args,methodInfo:i,dynamicFn:s};for(let i,s=0;s<e.args.length&&(i=e.args[s]);s++)i.literal||t._addPropertyEffect(i.rootProperty,a,{fn:r,info:n,trigger:i});s&&t._addPropertyEffect(e.methodName,a,{fn:r,info:n})}function f(t,e,a,r,i){let s=t._methodHost||t,n=s[i.methodName];if(n){let r=function(t,e,a,r){let i=[];for(let s=0,n=e.length;s<n;s++){let n,o=e[s],l=o.name;if(o.literal?n=o.value:o.structured?void 0===(n=Polymer.Path.get(t,l))&&(n=r[l]):n=t[l],o.wildcard){let t=0===l.indexOf(a+"."),e=0===a.indexOf(l)&&!t;i[s]={path:e?a:l,value:e?r[a]:n,base:n}}else i[s]=n}return i}(t.__data,i.args,e,a);return n.apply(s,r)}i.dynamicFn||console.warn("method `"+i.methodName+"` not defined")}function c(t){let e="";for(let a=0;a<t.length;a++){e+=t[a].literal||""}return e}function u(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let t={methodName:e[1],static:!0,args:b};if(e[2].trim()){return function(t,e){return e.args=t.map(function(t){let a=P(t);return a.literal||(e.static=!1),a},this),e}(e[2].replace(/\\,/g,"&comma;").split(","),t)}return t}return null}function P(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),a={name:e,value:"",literal:!1},r=e[0];switch("-"===r&&(r=e[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':a.value=e.slice(1,-1),a.literal=!0;break;case"#":a.value=Number(e),a.literal=!0}return a.literal||(a.rootProperty=Polymer.Path.root(e),a.structured=Polymer.Path.isPath(e),a.structured&&(a.wildcard=".*"==e.slice(-2),a.wildcard&&(a.name=e.slice(0,-2)))),a}function m(t,e,a,r){let i=a+".splices";t.notifyPath(i,{indexSplices:r}),t.notifyPath(a+".length",e.length),t.__data[i]={indexSplices:null}}function y(t,e,a,r,i,s){m(t,e,a,[{index:r,addedCount:i,removed:s,object:e,type:"splice"}])}const g=Polymer.CaseMap;let E=0;const C={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},O=/[A-Z]/;let T;const b=[],N=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");Polymer.PropertyEffects=Polymer.dedupingMixin(a=>{const s=Polymer.TemplateStamp(Polymer.PropertyAccessors(a));class _ extends s{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataCounter=0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return C}_initializeProperties(){super._initializeProperties(),v.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(t){this.__data=Object.create(t),this.__dataPending=Object.create(t),this.__dataOld={}}_initializeInstanceProperties(t){let e=this[C.READ_ONLY];for(let a in t)e&&e[a]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[a]=this.__dataPending[a]=t[a])}_addPropertyEffect(e,a,r){this._createPropertyAccessor(e,a==C.READ_ONLY);let i=t(this,a)[e];i||(i=this[a][e]=[]),i.push(r)}_removePropertyEffect(e,a,r){let i=t(this,a)[e],s=i.indexOf(r);s>=0&&i.splice(s,1)}_hasPropertyEffect(t,e){let a=this[e];return Boolean(a&&a[t])}_hasReadOnlyEffect(t){return this._hasPropertyEffect(t,C.READ_ONLY)}_hasNotifyEffect(t){return this._hasPropertyEffect(t,C.NOTIFY)}_hasReflectEffect(t){return this._hasPropertyEffect(t,C.REFLECT)}_hasComputedEffect(t){return this._hasPropertyEffect(t,C.COMPUTE)}_setPendingPropertyOrPath(t,e,a,r){if(r||Polymer.Path.root(Array.isArray(t)?t[0]:t)!==t){if(!r){let a=Polymer.Path.get(this,t);if(!(t=Polymer.Path.set(this,t,e))||!super._shouldPropertyChange(t,e,a))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(t,e,a))return function(t,e,a){let r=t.__dataLinkedPaths;if(r){let i;for(let s in r){let n=r[s];Polymer.Path.isDescendant(s,e)?(i=Polymer.Path.translate(s,n,e),t._setPendingPropertyOrPath(i,a,!0,!0)):Polymer.Path.isDescendant(n,e)&&(i=Polymer.Path.translate(n,s,e),t._setPendingPropertyOrPath(i,a,!0,!0))}}}(this,t,e),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[t])return this._setPendingProperty(t,e,a);this[t]=e}return!1}_setUnmanagedPropertyToNode(t,e,a){a===t[e]&&"object"!=typeof a||(t[e]=a)}_setPendingProperty(t,e,a){let r=this.__dataHasPaths&&Polymer.Path.isPath(t),i=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(t,e,i[t])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),t in this.__dataOld||(this.__dataOld[t]=this.__data[t]),r?this.__dataTemp[t]=e:this.__data[t]=e,this.__dataPending[t]=e,(r||this[C.NOTIFY]&&this[C.NOTIFY][t])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[t]=a),!0)}_setProperty(t,e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(t){this.__dataPendingClients=this.__dataPendingClients||[],t!==this&&this.__dataPendingClients.push(t)}_flushProperties(){this.__dataCounter++,super._flushProperties(),this.__dataCounter--}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let t=this.__dataPendingClients;if(t){this.__dataPendingClients=null;for(let e=0;e<t.length;e++){let a=t[e];a.__dataEnabled?a.__dataPending&&a._flushProperties():a._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(t,e){for(let a in t)!e&&this[C.READ_ONLY]&&this[C.READ_ONLY][a]||this._setPendingPropertyOrPath(a,t[a],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(t,a,r){let s=this.__dataHasPaths;this.__dataHasPaths=!1,function(t,a,r,i){let s=t[C.COMPUTE];if(s){let n=a;for(;e(t,s,n,r,i);)Object.assign(r,t.__dataOld),Object.assign(a,t.__dataPending),n=t.__dataPending,t.__dataPending=null}}(this,a,r,s);let n=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(a,r,s),this._flushClients(),e(this,this[C.REFLECT],a,r,s),e(this,this[C.OBSERVE],a,r,s),n&&i(this,n,a,r,s),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(t,a,r){this[C.PROPAGATE]&&e(this,this[C.PROPAGATE],t,a,r);let i=this.__templateInfo;for(;i;)e(this,i.propertyEffects,t,a,r,i.nodeList),i=i.nextTemplateInfo}linkPaths(t,e){t=Polymer.Path.normalize(t),e=Polymer.Path.normalize(e),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[t]=e}unlinkPaths(t){t=Polymer.Path.normalize(t),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[t]}notifySplices(t,e){let a={path:""};m(this,Polymer.Path.get(this,t,a),a.path,e)}get(t,e){return Polymer.Path.get(e||this,t)}set(t,e,a){a?Polymer.Path.set(a,t,e):this[C.READ_ONLY]&&this[C.READ_ONLY][t]||this._setPendingPropertyOrPath(t,e,!0)&&this._invalidateProperties()}push(t,...e){let a={path:""},r=Polymer.Path.get(this,t,a),i=r.length,s=r.push(...e);return e.length&&y(this,r,a.path,i,e.length,[]),s}pop(t){let e={path:""},a=Polymer.Path.get(this,t,e),r=Boolean(a.length),i=a.pop();return r&&y(this,a,e.path,a.length,0,[i]),i}splice(t,e,a,...r){let i={path:""},s=Polymer.Path.get(this,t,i);e<0?e=s.length-Math.floor(-e):e&&(e=Math.floor(e));let n;return n=2===arguments.length?s.splice(e):s.splice(e,a,...r),(r.length||n.length)&&y(this,s,i.path,e,r.length,n),n}shift(t){let e={path:""},a=Polymer.Path.get(this,t,e),r=Boolean(a.length),i=a.shift();return r&&y(this,a,e.path,0,0,[i]),i}unshift(t,...e){let a={path:""},r=Polymer.Path.get(this,t,a),i=r.unshift(...e);return e.length&&y(this,r,a.path,0,e.length,[]),i}notifyPath(t,e){let a;if(1==arguments.length){let r={path:""};e=Polymer.Path.get(this,t,r),a=r.path}else a=Array.isArray(t)?Polymer.Path.normalize(t):t;this._setPendingPropertyOrPath(a,e,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(t,e){this._addPropertyEffect(t,C.READ_ONLY),e&&(this["_set"+function(t){return t[0].toUpperCase()+t.substring(1)}(t)]=function(e){this._setProperty(t,e)})}_createPropertyObserver(t,e,a){let i={property:t,method:e,dynamicFn:Boolean(a)};this._addPropertyEffect(t,C.OBSERVE,{fn:r,info:i,trigger:{name:t}}),a&&this._addPropertyEffect(e,C.OBSERVE,{fn:r,info:i,trigger:{name:e}})}_createMethodObserver(t,e){let a=u(t);if(!a)throw new Error("Malformed observer expression '"+t+"'");p(this,a,C.OBSERVE,f,null,e)}_createNotifyingProperty(t){this._addPropertyEffect(t,C.NOTIFY,{fn:n,info:{eventName:g.camelToDashCase(t)+"-changed",property:t}})}_createReflectedProperty(t){let e=this.constructor.attributeNameForProperty(t);"-"===e[0]?console.warn("Property "+t+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(t,C.REFLECT,{fn:o,info:{attrName:e}})}_createComputedProperty(t,e,a){let r=u(e);if(!r)throw new Error("Malformed computed expression '"+e+"'");p(this,r,C.COMPUTE,l,t,a)}static addPropertyEffect(t,e,a){this.prototype._addPropertyEffect(t,e,a)}static createPropertyObserver(t,e,a){this.prototype._createPropertyObserver(t,e,a)}static createMethodObserver(t,e){this.prototype._createMethodObserver(t,e)}static createNotifyingProperty(t){this.prototype._createNotifyingProperty(t)}static createReadOnlyProperty(t,e){this.prototype._createReadOnlyProperty(t,e)}static createReflectedProperty(t){this.prototype._createReflectedProperty(t)}static createComputedProperty(t,e,a){this.prototype._createComputedProperty(t,e,a)}static bindTemplate(t){return this.prototype._bindTemplate(t)}_bindTemplate(t,e){let a=this.constructor._parseTemplate(t),r=this.__templateInfo==a;if(!r)for(let t in a.propertyEffects)this._createPropertyAccessor(t);if(e&&(a=Object.create(a),a.wasPreBound=r,!r&&this.__templateInfo)){let t=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=t.nextTemplateInfo=a,a.previousTemplateInfo=t,a}return this.__templateInfo=a}static _addTemplatePropertyEffect(t,e,a){(t.hostProps=t.hostProps||{})[e]=!0;let r=t.propertyEffects=t.propertyEffects||{};(r[e]=r[e]||[]).push(a)}_stampTemplate(t){v.beginHosting(this);let a=super._stampTemplate(t);v.endHosting(this);let r=this._bindTemplate(t,!0);if(r.nodeList=a.nodeList,!r.wasPreBound){let t=r.childNodes=[];for(let e=a.firstChild;e;e=e.nextSibling)t.push(e)}return a.templateInfo=r,d(this,r),this.__dataReady&&e(this,r.propertyEffects,this.__data,null,!1,r.nodeList),a}_removeBoundDom(t){let e=t.templateInfo;e.previousTemplateInfo&&(e.previousTemplateInfo.nextTemplateInfo=e.nextTemplateInfo),e.nextTemplateInfo&&(e.nextTemplateInfo.previousTemplateInfo=e.previousTemplateInfo),this.__templateInfoLast==e&&(this.__templateInfoLast=e.previousTemplateInfo),e.previousTemplateInfo=e.nextTemplateInfo=null;let a=e.childNodes;for(let t=0;t<a.length;t++){let e=a[t];e.parentNode.removeChild(e)}}static _parseTemplateNode(t,e,a){let r=super._parseTemplateNode(t,e,a);if(t.nodeType===Node.TEXT_NODE){let i=this._parseBindings(t.textContent,e);i&&(t.textContent=c(i)||" ",h(this,e,a,"text","textContent",i),r=!0)}return r}static _parseTemplateNodeAttribute(t,e,a,r,i){let s=this._parseBindings(i,e);if(s){let i=r,n="property";O.test(r)?n="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),n="attribute");let o=c(s);return o&&"attribute"==n&&t.setAttribute(r,o),"input"===t.localName&&"value"===i&&t.setAttribute(i,""),t.removeAttribute(i),"property"===n&&(r=Polymer.CaseMap.dashToCamelCase(r)),h(this,e,a,n,r,s,o),!0}return super._parseTemplateNodeAttribute(t,e,a,r,i)}static _parseTemplateNestedTemplate(t,e,a){let r=super._parseTemplateNestedTemplate(t,e,a),i=a.templateInfo.hostProps;for(let t in i){h(this,e,a,"property","_host_"+t,[{mode:"{",source:t,dependencies:[t]}])}return r}static _parseBindings(t,e){let a,r=[],i=0;for(;null!==(a=N.exec(t));){a.index>i&&r.push({literal:t.slice(i,a.index)});let s=a[1][0],n=Boolean(a[2]),o=a[3].trim(),l=!1,h="",_=-1;"{"==s&&(_=o.indexOf("::"))>0&&(h=o.substring(_+2),o=o.substring(0,_),l=!0);let d=u(o),p=[];if(d){let{args:t,methodName:a}=d;for(let e=0;e<t.length;e++){let a=t[e];a.literal||p.push(a)}let r=e.dynamicFns;(r&&r[a]||d.static)&&(p.push(a),d.dynamicFn=!0)}else p.push(o);r.push({source:o,mode:s,negate:n,customEvent:l,signature:d,dependencies:p,event:h}),i=N.lastIndex}if(i&&i<t.length){let e=t.substring(i);e&&r.push({literal:e})}return r.length?r:null}static _evaluateBinding(t,e,a,r,i,s){let n;return n=e.signature?f(t,a,r,0,e.signature):a!=e.source?Polymer.Path.get(t,e.source):s&&Polymer.Path.isPath(a)?Polymer.Path.get(t,a):t.__data[a],e.negate&&(n=!n),n}}return T=_,_});let v={stack:[],registerHost(t){if(this.stack.length){this.stack[this.stack.length-1]._enqueueClient(t)}},beginHosting(t){this.stack.push(t)},endHosting(t){let e=this.stack.length;e&&this.stack[e-1]==t&&this.stack.pop()}}}();</script><script>!function(){"use strict";Polymer.PropertiesMixin=Polymer.dedupingMixin(e=>{function t(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof s?t:null}function r(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;e.hasOwnProperty(JSCompiler_renameProperty("properties",e))&&e.properties&&(t=function(e){const t={};for(let r in e){const i=e[r];t[r]="function"==typeof i?{type:i}:i}return t}(e.properties)),e.__ownProperties=t}return e.__ownProperties}const i=Polymer.PropertiesChanged(e);class s extends i{static get observedAttributes(){const e=this._properties;return e?Object.keys(e).map(e=>this.attributeNameForProperty(e)):[]}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=t(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=r(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=t(this);this.__properties=Object.assign({},e&&e._properties,r(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return s})}();</script><script>!function(){"use strict";Polymer.ElementMixin=Polymer.dedupingMixin(t=>{function e(t,e,r,o){r.computed&&(r.readOnly=!0),r.computed&&!t._hasReadOnlyEffect(e)&&t._createComputedProperty(e,r.computed,o),r.readOnly&&!t._hasReadOnlyEffect(e)&&t._createReadOnlyProperty(e,!r.computed),r.reflectToAttribute&&!t._hasReflectEffect(e)&&t._createReflectedProperty(e),r.notify&&!t._hasNotifyEffect(e)&&t._createNotifyingProperty(e),r.observer&&t._createPropertyObserver(e,r.observer,o[r.observer]),t._addPropertyToAttributeMap(e)}const r=Polymer.PropertiesMixin(Polymer.PropertyEffects(t));class o extends r{static _finalizeClass(){super._finalizeClass(),this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&this.is&&Polymer.telemetry.register(this.prototype);const t=function(t){return t.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",t))||(t.__ownObservers=t.hasOwnProperty(JSCompiler_renameProperty("observers",t))?t.observers:null),t.__ownObservers}(this);t&&this.createObservers(t,this._properties);let e=this.template;if(e)if("string"==typeof e){let t=document.createElement("template");t.innerHTML=e,e=t}else e=e.cloneNode(!0);this.prototype._template=e}static createProperties(t){for(let r in t)e(this.prototype,r,t[r],t)}static createObservers(t,e){const r=this.prototype;for(let o=0;o<t.length;o++)r._createMethodObserver(t[o],e)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,"template")||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=t?t.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){Polymer.telemetry.instanceCount++,this.constructor.finalize();const t=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Polymer.rootPath,this.importPath=t;let e=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let r in e){let o=e[r];"value"in o&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[r]=o)}}return t.__propertyDefaults}(this.constructor);if(e)for(let t in e){let r=e[t];if(!this.hasOwnProperty(t)){let e="function"==typeof r.value?r.value.call(this):r.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}static _processStyleText(t,e){return Polymer.ResolveUrl.resolveCss(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const r=this.importPath;!function(t,e,r,o){const s=e.content.querySelectorAll("style"),i=Polymer.StyleGather.stylesFromTemplate(e),l=Polymer.StyleGather.stylesFromModuleImports(r),a=e.content.firstElementChild;for(let r=0;r<l.length;r++){let s=l[r];s.textContent=t._processStyleText(s.textContent,o),e.content.insertBefore(s,a)}let n=0;for(let e=0;e<i.length;e++){let r=i[e],l=s[n];l!==r?(r=r.cloneNode(!0),l.parentNode.insertBefore(r,l)):n++,r.textContent=t._processStyleText(r.textContent,o)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,r)}(this,e,t,r?Polymer.ResolveUrl.resolveUrl(r):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){if(this.attachShadow)return t?(this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t),this.shadowRoot):null;throw new Error("ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(t,e)}static _parseTemplateContent(t,e,r){return e.dynamicFns=e.dynamicFns||this._properties,super._parseTemplateContent(t,e,r)}}return o}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(t){console.log("["+t.is+"]: registered")},register:function(t){this.registrations.push(t),Polymer.log&&this._regLog(t)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(t){window.ShadyCSS&&window.ShadyCSS.styleDocument(t)}}();</script><script>!function(){"use strict";function e(e){if(e instanceof t)return e.value;throw new Error(`non-literal value passed to Polymer.htmlLiteral: ${e}`)}class t{constructor(e){this.value=e.toString()}toString(){return this.value}}Polymer.html=function(n,...r){const o=document.createElement("template");return o.innerHTML=r.reduce((r,o,l)=>r+function(n){if(n instanceof HTMLTemplateElement)return n.innerHTML;if(n instanceof t)return e(n);throw new Error(`non-template value passed to Polymer.html: ${n}`)}(o)+n[l+1],n[0]),o},Polymer.htmlLiteral=function(n,...r){return new t(r.reduce((t,r,o)=>t+e(r)+n[o+1],n[0]))}}();</script><script>!function(){"use strict";const e=Polymer.ElementMixin(HTMLElement);Polymer.Element=e,Polymer.html=Polymer.html}();</script><script>this._backupDefine=this.define;</script><script>!function(e){"use strict";function r(e,r,i){i=i||r||e,Array.isArray(r)||(r=Array.isArray(e)?e:[]);var o=function(){var e=document.currentScript;if(e.hasAttribute("as"))return e.getAttribute("as");var r=e&&e.ownerDocument||document;if(!r.baseURI)throw new Error("Unable to determine a module id: No baseURI for the document");if(e.hasAttribute("src"))return new URL(e.getAttribute("src"),r.baseURI).toString();return r.baseURI}();if("string"!=typeof e&&(e=o),-1!==e.indexOf("\\"))throw new TypeError("Please use / as module path delimiters");if(e in n)throw new Error('The module "'+e+'" has already been defined');var u=o.match(/^(.*?)[^\/]*$/)[1];return n[e]=function(e,r,n,i){if("function"!=typeof i)return i;var o,u,a=n.map(function(n){return"exports"===n?o={}:"require"===n?t:"module"===n?u={id:e}:(n=function(e,r){if("."!==r[0])return r;for(var t=e.match(/^([^\/]*\/\/[^\/]+\/)?(.*?)\/?$/),n=t[1]||"",i=t[2]?t[2].split("/"):[],o=r.match(/^\/?(.*?)\/?$/)[1].split("/"),u=0;u<o.length;u++){var a=o[u];"."!==a&&(".."===a?i.pop():i.push(a))}return n+i.join("/")}(r,n),t(n))}),s=i.apply(null,a);return u&&u.exports||o||s}(e,u,r,i),n[e]}function t(e){if(!(e in n))throw new ReferenceError('The module "'+e+'" has not been loaded');return n[e]}var n=Object.create(null);r._modules=n,r.amd={},e.define=r}(this);</script><script>this.IMD={define:this.define},this.define=this._backupDefine;</script><script>(function(){"use strict";function t(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function e(e){var r=n,i=e=e.replace(V,"").replace(T,""),o=new t;o.start=0,o.end=i.length;for(var s=o,a=0,l=i.length;a<l;a++)if("{"===i[a]){s.rules||(s.rules=[]);var p=s,u=p.rules[p.rules.length-1]||null;(s=new t).start=a+1,s.parent=p,s.previous=u,p.rules.push(s)}else"}"===i[a]&&(s.end=a+1,s=s.parent||o);return r(o,e)}function n(t,e){var r=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=r.trim(),t.parent&&(r=e.substring(t.previous?t.previous.end:t.parent.start,t.start-1),r=function(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,function(t,e){for(e=6-(t=e).length;e--;)t="0"+t;return"\\"+t})}(r),r=r.replace(I," "),r=r.substring(r.lastIndexOf(";")+1),r=t.parsedSelector=t.selector=r.trim(),t.atRule=0===r.indexOf("@"),t.atRule?0===r.indexOf("@media")?t.type=x:r.match(j)&&(t.type=b,t.keyframesName=t.selector.split(I).pop()):t.type=0===r.indexOf("--")?_:C),r=t.rules)for(var i,o=0,s=r.length;o<s&&(i=r[o]);o++)n(i,e);return t}function r(t,e,n){n=void 0===n?"":n;var i="";if(t.cssText||t.rules){var o,s=t.rules;if((o=s)&&(o=s[0],o=!(o&&o.selector&&0===o.selector.indexOf("--"))),o){o=0;for(var a,l=s.length;o<l&&(a=s[o]);o++)i=r(a,e,i)}else e?e=t.cssText:(e=t.cssText,e=e.replace(O,"").replace(N,""),e=e.replace(R,"").replace(A,"")),(i=e.trim())&&(i="  "+i+"\n")}return i&&(t.selector&&(n+=t.selector+" {\n"),n+=i,t.selector&&(n+="}\n\n")),n}function i(t){(t=w[t])&&(t._applyShimCurrentVersion=t._applyShimCurrentVersion||0,t._applyShimValidatingVersion=t._applyShimValidatingVersion||0,t._applyShimNextVersion=(t._applyShimNextVersion||0)+1)}function o(t){return t._applyShimCurrentVersion===t._applyShimNextVersion}function s(t){g=(!t||!t.shimcssproperties)&&(E||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}function a(t){return t?("string"==typeof t&&(t=e(t)),r(t,q)):""}function l(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=e(t.textContent)),t.__cssRules||null}function p(t,e,n,r){if(t){var i=!1,o=t.type;if(r&&o===x){var s=t.selector.match($);s&&(window.matchMedia(s[1]).matches||(i=!0))}if(o===C?e(t):n&&o===b?n(t):o===_&&(i=!0),(t=t.rules)&&!i){i=0,o=t.length;for(var a;i<o&&(a=t[i]);i++)p(a,e,n,r)}}}function u(t,e){var n=t.indexOf("var(");if(-1===n)return e(t,"","","");t:{for(var r=0,i=n+3,o=t.length;i<o;i++)if("("===t[i])r++;else if(")"===t[i]&&0==--r)break t;i=-1}return r=t.substring(n+4,i),n=t.substring(0,n),t=u(t.substring(i+1),e),-1===(i=r.indexOf(","))?e(n,r.trim(),"",t):e(n,r.substring(0,i).trim(),r.substring(i+1).trim(),t)}function c(){this.a={}}function d(){this.b=this.c=null,this.a=new c}function h(t,e){return e=e.replace(P,function(e,n,r,i){return function(t,e,n,r,i){if(r&&u(r,function(e,n){n&&t.a.get(n)&&(i="@apply "+n+";")}),!i)return e;var o=f(t,""+i),s=e.slice(0,e.indexOf("--")),a=o=y(t,o),l=t.a.get(n),p=l&&l.h;p?a=Object.assign(Object.create(p),o):t.a.set(n,a);var c,d=[],h=!1;for(c in a){var m=o[c];void 0===m&&(m="initial"),!p||c in p||(h=!0),d.push(n+"_-_"+c+": "+m)}return h&&function(t,e){if(H)for(var n in e.i)n!==t.c&&H(n)}(t,l),l&&(l.h=a),r&&(s=e+";"+s),""+s+d.join("; ")+";"}(t,e,n,r,i)}),f(t,e)}function f(t,e){for(var n;n=M.exec(e);){var r=n[0],i=n[1];n=n.index;var o=e.slice(0,n+r.indexOf("@apply"));e=e.slice(n+r.length);var s=y(t,o);r=void 0;var a=t;i=i.replace(W,"");var l=[],p=a.a.get(i);if(p||(a.a.set(i,{}),p=a.a.get(i)),p){a.c&&(p.i[a.c]=!0);var u=p.h;for(r in u)a=s&&s[r],p=[r,": var(",i,"_-_",r],a&&p.push(",",a.replace(L,"")),p.push(")"),L.test(u[r])&&p.push(" !important"),l.push(p.join(""))}e=""+o+(r=l.join("; "))+e,M.lastIndex=n+r.length}return e}function y(t,e){e=e.split(";");for(var n,r,i,o={},s=0;s<e.length;s++)if((n=e[s])&&1<(i=n.split(":")).length){var a=t;r=n=i[0].trim(),i=i.slice(1).join(":");var l=F.exec(i);l&&(l[1]?(a.b||(a.b=document.createElement("meta"),a.b.setAttribute("apply-shim-measure",""),a.b.style.all="initial",document.head.appendChild(a.b)),r=window.getComputedStyle(a.b).getPropertyValue(r)):r="apply-shim-inherit",i=r),r=i,o[n]=r}return o}function m(){var t=this;this.a=null,function(t){requestAnimationFrame(function(){U?U(t):(K||(K=new Promise(function(t){B=t}),"complete"===document.readyState?B():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&B()})),K.then(function(){t&&t()}))})}(function(){S(t)}),z.invalidCallback=i}function S(t){t.a||(t.a=window.ShadyCSS.CustomStyleInterface,t.a&&(t.a.transformCallback=function(t){z.f(t)},t.a.validateCallback=function(){requestAnimationFrame(function(){t.a.enqueued&&v(t)})}))}function v(t){if(S(t),t.a){var e=t.a.processStyles();if(t.a.enqueued){for(var n=0;n<e.length;n++){var r=t.a.getStyleForCustomStyle(e[n]);r&&z.f(r)}t.a.enqueued=!1}}}var g,w={},C=1,b=7,x=4,_=1e3,V=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,T=/@import[^;]*;/gim,O=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,N=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,R=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,A=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,j=/^@[^\s]*keyframes/,I=/\s+/g,k=Promise.resolve(),E=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?g=window.ShadyCSS.nativeCss:window.ShadyCSS?(s(window.ShadyCSS),window.ShadyCSS=void 0):s(window.WebComponents&&window.WebComponents.flags);var q=g,P=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,M=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,$=/@media\s(.*)/,D=new Set,W=/;\s*/m,F=/^\s*(initial)|(inherit)\s*$/,L=/\s*!important/;c.prototype.set=function(t,e){t=t.trim(),this.a[t]={h:e,i:{}}},c.prototype.get=function(t){return t=t.trim(),this.a[t]||null};var H=null;d.prototype.o=function(t){return t=M.test(t)||P.test(t),M.lastIndex=0,P.lastIndex=0,t},d.prototype.m=function(t,e){if(void 0===t.a){for(var n=[],r=t.content.querySelectorAll("style"),i=0;i<r.length;i++){var o=r[i];if(o.hasAttribute("shady-unscoped")){if(!E){var s=o.textContent;D.has(s)||(D.add(s),s=o.cloneNode(!0),document.head.appendChild(s)),o.parentNode.removeChild(o)}}else n.push(o.textContent),o.parentNode.removeChild(o)}(n=n.join("").trim())?(r=document.createElement("style"),r.textContent=n,t.content.insertBefore(r,t.content.firstChild),n=r):n=null,t.a=n}return(t=t.a)?this.j(t,e):null},d.prototype.j=function(t,e){e=void 0===e?"":e;var n=l(t);return this.l(n,e),t.textContent=a(n),n},d.prototype.f=function(t){var e=this,n=l(t);return p(n,function(t){":root"===t.selector&&(t.selector="html"),e.g(t)}),t.textContent=a(n),n},d.prototype.l=function(t,e){var n=this;this.c=e,p(t,function(t){n.g(t)}),this.c=null},d.prototype.g=function(t){t.cssText=h(this,t.parsedCssText),":root"===t.selector&&(t.selector=":host > *")},d.prototype.detectMixin=d.prototype.o,d.prototype.transformStyle=d.prototype.j,d.prototype.transformCustomStyle=d.prototype.f,d.prototype.transformRules=d.prototype.l,d.prototype.transformRule=d.prototype.g,d.prototype.transformTemplate=d.prototype.m,d.prototype._separator="_-_",Object.defineProperty(d.prototype,"invalidCallback",{get:function(){return H},set:function(t){H=t}});var B,K=null,U=window.HTMLImports&&window.HTMLImports.whenReady||null,z=new d;if(m.prototype.prepareTemplate=function(t,e){S(this),w[e]=t,e=z.m(t,e),t._styleAst=e},m.prototype.styleSubtree=function(t,e){if(S(this),e)for(var n in e)null===n?t.style.removeProperty(n):t.style.setProperty(n,e[n]);if(t.shadowRoot)for(this.styleElement(t),t=t.shadowRoot.children||t.shadowRoot.childNodes,e=0;e<t.length;e++)this.styleSubtree(t[e]);else for(t=t.children||t.childNodes,e=0;e<t.length;e++)this.styleSubtree(t[e])},m.prototype.styleElement=function(t){S(this);var e,n=t.localName;e=n?-1<n.indexOf("-")?n:t.getAttribute&&t.getAttribute("is")||"":t.is,(n=w[e])&&!o(n)&&((o(n)||n._applyShimValidatingVersion!==n._applyShimNextVersion)&&(this.prepareTemplate(n,e),function(t){t._applyShimValidatingVersion=t._applyShimNextVersion,t.b||(t.b=!0,k.then(function(){t._applyShimCurrentVersion=t._applyShimNextVersion,t.b=!1}))}(n)),(t=t.shadowRoot)&&(t=t.querySelector("style"))&&(t.__cssRules=n._styleAst,t.textContent=a(n._styleAst)))},m.prototype.styleDocument=function(t){S(this),this.styleSubtree(document.body,t)},!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var G=new m,J=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(t,e){v(G),G.prepareTemplate(t,e)},styleSubtree:function(t,e){v(G),G.styleSubtree(t,e)},styleElement:function(t){v(G),G.styleElement(t)},styleDocument:function(t){v(G),G.styleDocument(t)},getComputedStyleValue:function(t,e){return(t=window.getComputedStyle(t).getPropertyValue(e))?t.trim():""},nativeCss:q,nativeShadow:E},J&&(window.ShadyCSS.CustomStyleInterface=J)}window.ShadyCSS.ApplyShim=z}).call(this);</script><script>!function(){"use strict";function e(e){window.HTMLImports?HTMLImports.whenReady(e):e()}Polymer.importHref=function(t,n,r,o){let d=document.head.querySelector('link[href="'+t+'"][import-href]');d||((d=document.createElement("link")).rel="import",d.href=t,d.setAttribute("import-href","")),o&&d.setAttribute("async","");let i=function(){d.removeEventListener("load",a),d.removeEventListener("error",m)},a=function(t){i(),d.__dynamicImportLoaded=!0,n&&e(()=>{n(t)})},m=function(t){i(),d.parentNode&&d.parentNode.removeChild(d),r&&e(()=>{r(t)})};return d.addEventListener("load",a),d.addEventListener("error",m),null==d.parentNode?document.head.appendChild(d):d.__dynamicImportLoaded&&d.dispatchEvent(new Event("load")),d}}();</script><script>!function(){"use strict";function e(e,t,a,r,n){let l;n&&(l="object"==typeof a&&null!==a)&&(r=e.__dataTemp[t]);let u=r!==a&&(r==r||a==a);return l&&u&&(e.__dataTemp[t]=a),u}Polymer.MutableData=Polymer.dedupingMixin(t=>{class a extends t{_shouldPropertyChange(t,a,r){return e(this,t,a,r,!0)}}return a}),Polymer.OptionalMutableData=Polymer.dedupingMixin(t=>{class a extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,a,r){return e(this,t,a,r,this.mutableData)}}return a}),Polymer.MutableData._mutablePropertyChange=e}();</script><script>!function(){"use strict";function t(){return r}function e(t,e,o){let r=o.mutableData?a:l,_=class extends r{};return _.prototype.__templatizeOptions=o,_.prototype._bindTemplate(t),function(t,e,o,r){let _=o.hostProps||{};for(let e in r.instanceProps){delete _[e];let o=r.notifyInstanceProp;o&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e){return function(t,o,r){e.call(t.__templatizeOwner,t,o,r[o])}}(0,o)})}if(r.forwardHostProp&&e.__dataHost)for(let e in _)t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,o){t.__dataHost._setPendingPropertyOrPath("_host_"+e,o[e],!0,!0)}})}(_,t,e,o),_}function o(t,e,o){let s=o.forwardHostProp;if(s){let l=e.templatizeTemplateClass;if(!l){let t=o.mutableData?n:_;l=e.templatizeTemplateClass=class extends t{};let r=e.hostProps;for(let t in r)l.prototype._addPropertyEffect("_host_"+t,l.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:function(t,e){return function(t,o,r){e.call(t.__templatizeOwner,o.substring("_host_".length),r[o])}}(0,s)}),l.prototype._createNotifyingProperty("_host_"+t)}!function(t,e){r=t,Object.setPrototypeOf(t,e.prototype),new e,r=null}(t,l),t.__dataProto&&Object.assign(t.__data,t.__dataProto),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties()}}let r=null;t.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:t,writable:!0}});const _=Polymer.PropertyEffects(t),n=Polymer.MutableData(_),s=Polymer.PropertyEffects(class{});class l extends s{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=this.children=[];for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let o=this.__templatizeOptions;(t&&o.instanceProps||!o.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,o){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,t=>{t.model=this,o(t)});else{let r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(t,e,o)}}_showHideChildren(t){let e=this.children;for(let o=0;o<e.length;o++){let r=e[o];if(Boolean(t)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)t?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if("slot"===r.localName)if(t)r.__polymerReplaced__=document.createComment("hidden-slot"),r.parentNode.replaceChild(r.__polymerReplaced__,r);else{const t=r.__polymerReplaced__;t&&t.parentNode.replaceChild(r,t)}else r.style&&(t?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=t,r._showHideChildren&&r._showHideChildren(t)}}_setUnmanagedPropertyToNode(t,e,o){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=o:super._setUnmanagedPropertyToNode(t,e,o)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}l.prototype.__dataHost,l.prototype.__templatizeOptions,l.prototype._methodHost,l.prototype.__templatizeOwner,l.prototype.__hostProps;const a=Polymer.MutableData(l);Polymer.Templatize={templatize(t,r,_){if(_=_||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=r;let n=(r?r.constructor:l)._parseTemplate(t),s=n.templatizeInstanceClass;s||(s=e(t,n,_),n.templatizeInstanceClass=s),o(t,n,_);let a=class extends s{};return a.prototype._methodHost=function(t){let e=t.__dataHost;return e&&e._methodHost||e}(t),a.prototype.__dataHost=t,a.prototype.__templatizeOwner=r,a.prototype.__hostProps=n.hostProps,a=a},modelForElement(t,e){let o;for(;e;)if(o=e.__templatizeInstance){if(o.__dataHost==t)return o;e=o.__dataHost}else e=e.parentNode;return null}},Polymer.TemplateInstanceBase=l}();</script><script>!function(){"use strict";class t{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,i){this._asyncModule=t,this._callback=i,this._timer=this._asyncModule.run(()=>{this._timer=null,this._callback()})}cancel(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(i,s,c){return i instanceof t?i.cancel():i=new t,i.setConfig(s,c),i}}Polymer.Debouncer=t}();</script><script>!function(){"use strict";function n(){const n=Boolean(o.length);for(;o.length;)try{o.shift().flush()}catch(n){setTimeout(()=>{throw n})}return n}let o=[];Polymer.enqueueDebouncer=function(n){o.push(n)},Polymer.flush=function(){let o,h;do{o=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),h=n()}while(o||h)}}();</script><script>!function(){"use strict";Polymer.TemplateInstanceBase;const e=Polymer.OptionalMutableData(Polymer.Element);class t extends e{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__limit=1/0,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),this.style.display="none",this.__isDetached){this.__isDetached=!1;let e=this.parentNode;for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){let e=this.template=this.querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}let t={};t[this.as]=!0,t[this.indexAs]=!0,t[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:t,forwardHostProp:function(e,t){let s=this.__instances;for(let i,n=0;n<s.length&&(i=s[n]);n++)i.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,s){if(Polymer.Path.matches(this.as,t)){let i=e[this.itemsIndexAs];t==this.as&&(this.items[i]=s);let n=Polymer.Path.translate(this.as,"items."+i,t);this.notifyPath(n,s)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,s=this.__getMethodHost();return function(){return s[t].apply(s,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let e=performance.now(),t=this._targetFrameTime/(e-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*t)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=e,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let s=0;s<t.length;s++)0===e.indexOf(t[s])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__debounceRender(e,t=0){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,t>0?Polymer.Async.timeOut.after(t):Polymer.Async.microTask,e.bind(this)),Polymer.enqueueDebouncer(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Polymer.flush()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let e=this.items||[],t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=s;this.__filterFn&&(t=t.filter((t,s,i)=>this.__filterFn(e[t],s,i))),this.__sortFn&&t.sort((t,s)=>this.__sortFn(e[t],e[s]));const s=this.__itemsIdxToInstIdx={};let i=0;const n=Math.min(t.length,this.__limit);for(;i<n;i++){let n=this.__instances[i],r=t[i],_=e[r];s[r]=i,n?(n._setPendingProperty(this.as,_),n._setPendingProperty(this.indexAs,i),n._setPendingProperty(this.itemsIndexAs,r),n._flushProperties()):this.__insertInstance(_,i,r)}for(let e=this.__instances.length-1;e>=i;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];for(let e=0;e<t.children.length;e++){let s=t.children[e];t.root.appendChild(s)}return t}__attachInstance(e,t){let s=this.__instances[e];t.insertBefore(s.root,this)}__detachAndRemoveInstance(e){let t=this.__detachInstance(e);t&&this.__pool.push(t),this.__instances.splice(e,1)}__stampInstance(e,t,s){let i={};return i[this.as]=e,i[this.indexAs]=t,i[this.itemsIndexAs]=s,new this.__ctor(i)}__insertInstance(e,t,s){let i=this.__pool.pop();i?(i._setPendingProperty(this.as,e),i._setPendingProperty(this.indexAs,t),i._setPendingProperty(this.itemsIndexAs,s),i._flushProperties()):i=this.__stampInstance(e,t,s);let n=this.__instances[t+1],r=n?n.children[0]:this;return this.parentNode.insertBefore(i.root,r),this.__instances[t]=i,i}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let s=e.slice(6),i=s.indexOf("."),n=i<0?s:s.substring(0,i);if(n==parseInt(n,10)){let e=i<0?"":s.substring(i+1);this.__handleObservedPaths(e);let r=this.__itemsIdxToInstIdx[n],_=this.__instances[r];if(_){let s=this.as+(e?"."+e:"");_._setPendingPropertyOrPath(s,t,!1,!0),_._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return Polymer.Templatize.modelForElement(this.template,e)}}customElements.define(t.is,t),Polymer.DomRepeat=t}();</script><script>!function(){"use strict";class e extends Polymer.Element{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null}__debounceRender(){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,()=>this.__render()),Polymer.enqueueDebouncer(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback(),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),this.style.display="none",this.if&&this.__debounceRender()}render(){Polymer.flush()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let e=this.parentNode;if(e){if(!this.__ctor){let e=this.querySelector("template");if(!e){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(e,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(e)]=!0))}})}if(this.__instance){this.__syncHostProperties();let t=this.__instance.children;if(t&&t.length){if(this.previousSibling!==t[t.length-1])for(let i,s=0;s<t.length&&(i=t[s]);s++)e.insertBefore(i,this)}}else this.__instance=new this.__ctor,e.insertBefore(this.__instance.root,this)}return!0}__syncHostProperties(){let e=this.__invalidProps;if(e){for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=e[0].parentNode;for(let i,s=0;s<e.length&&(i=e[s]);s++)t.removeChild(i)}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let e=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(e)}}customElements.define(e.is,e),Polymer.DomIf=e}();</script><script>(function(){"use strict";function t(t){a=(!t||!t.shimcssproperties)&&(i||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}function e(t,e){for(var n in e)null===n?t.style.removeProperty(n):t.style.setProperty(n,e[n])}function n(){this.customStyles=[],this.enqueued=!1}function o(t){!t.enqueued&&y&&(t.enqueued=!0,function(){var t=y;requestAnimationFrame(function(){d?d(t):(s||(s=new Promise(function(t){S=t}),"complete"===document.readyState?S():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&S()})),s.then(function(){t&&t()}))})}())}var a,i=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?a=window.ShadyCSS.nativeCss:window.ShadyCSS?(t(window.ShadyCSS),window.ShadyCSS=void 0):t(window.WebComponents&&window.WebComponents.flags);var S,r=a,s=null,d=window.HTMLImports&&window.HTMLImports.whenReady||null,u=null,y=null;n.prototype.c=function(t){t.__seenByShadyCSS||(t.__seenByShadyCSS=!0,this.customStyles.push(t),o(this))},n.prototype.b=function(t){if(t.__shadyCSSCachedStyle)return t.__shadyCSSCachedStyle;return t.getStyle?t.getStyle():t},n.prototype.a=function(){for(var t=this.customStyles,e=0;e<t.length;e++){var n=t[e];if(!n.__shadyCSSCachedStyle){var o=this.b(n);o&&(o=o.__appliedElement||o,u&&u(o),n.__shadyCSSCachedStyle=o)}}return t},n.prototype.addCustomStyle=n.prototype.c,n.prototype.getStyleForCustomStyle=n.prototype.b,n.prototype.processStyles=n.prototype.a,Object.defineProperties(n.prototype,{transformCallback:{get:function(){return u},set:function(t){u=t}},validateCallback:{get:function(){return y},set:function(t){var e=!1;y||(e=!0),y=t,e&&o(this)}}});var l=new n;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},styleSubtree:function(t,n){l.a(),e(t,n)},styleElement:function(){l.a()},styleDocument:function(t){l.a(),e(document.body,t)},getComputedStyleValue:function(t,e){return(t=window.getComputedStyle(t).getPropertyValue(e))?t.trim():""},nativeCss:r,nativeShadow:i}),window.ShadyCSS.CustomStyleInterface=l}).call(this);</script><script>!function(){"use strict";const t=window.ShadyCSS.CustomStyleInterface;class e extends HTMLElement{constructor(){super(),this._style=null,t.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const e=t.getAttribute("include");return e&&(t.removeAttribute("include"),t.textContent=Polymer.StyleGather.cssFromModules(e)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",e),Polymer.CustomStyle=e}();</script><script>IMD.define("ioc-kernel",()=>{class t{constructor(){this._bindings={}}bind(t){let s=this._getKey(t);if("string"==typeof t)return new e(this,s);if(this._isClassDeclaration(t))return new i(this,s,t);throw new Error('Argument "key" must be string or class declaration.')}has(t){return this._bindings.hasOwnProperty(this._getKey(t))}get(t){let e=this._bindings[this._getKey(t)];if(e)return e()}_getKey(t){return"string"==typeof t?t:this._isClassDeclaration(t)?t.prototype.constructor.name:void 0}_isClassDeclaration(t){return t.prototype&&t.prototype.constructor}_createBinding(t,e){this._bindings[t]=e}}class e{constructor(t,e){this._iocKernel=t,this._key=e}toFunction(t){return new s(this._iocKernel,this._key,t)}}class i extends e{constructor(t,e,i){super(t,e),this._classDeclaration=i}as(t){return new i(this._iocKernel,t,this._classDeclaration)}toSelf(...t){return new s(this._iocKernel,this._key,()=>(t=t.map(t=>"function"==typeof t?t():t),new this._classDeclaration(...t)))}}class s{constructor(t,e,i){this._iocKernel=t,this._key=e,this._resolveFunction=i}inTransientScope(){this._iocKernel._createBinding(this._key,this._resolveFunction)}inSingletonScope(){let t;this._iocKernel._createBinding(this._key,()=>(void 0===t&&(t=this._resolveFunction()),t))}}return t});</script><script>IMD.define("ioc-provider",["ioc-kernel"],e=>{return t=>class extends t{static get properties(){return{_iocKernel:{type:Object,value:()=>new e,readOnly:!0}}}constructor(){super(),this.bindServices(this._iocKernel),this.addEventListener("ioc-request",e=>{this._iocKernel.has(e.detail.key)&&(e.detail.result=this._iocKernel.get(e.detail.key),e.stopPropagation())})}bindServices(){}_getService(e){return this._iocKernel.get(e)}}});</script><script>IMD.define("ioc-requester",()=>{return e=>class extends e{connectedCallback(){super.connectedCallback();let e=this._getProperties(this.constructor);for(let[t,r]of Object.entries(e))void 0!==r.inject&&this.set(t,this._getService(r.inject));this.servicesInjectedCallback()}servicesInjectedCallback(){}_getProperties(e){let t=e.properties;if(!e.__proto__||"HTMLElement"===e.__proto__.name)return t;let r=this._getProperties(e.__proto__);return Object.assign({},t,r)}_getService(e){let t=new CustomEvent("ioc-request",{detail:{key:e},bubbles:!0,composed:!0,cancelable:!0});return this.dispatchEvent(t),t.detail.result}}});</script><script>IMD.define("binding-helpers",()=>{return e=>class extends e{static get properties(){return{showIf:{type:Boolean,observer:"_showIfChanged"}}}_showIfChanged(e){e?this.classList.remove("-hidden"):this.classList.add("-hidden")}equals(...e){return e.reduce((e,t)=>e===t)}less(e,t){return e<t}lessEquals(e,t){return e<=t}greater(e,t){return e>t}greaterEquals(e,t){return e>=t}and(...e){return Boolean(e.reduce((e,t)=>e&&t))}or(...e){return Boolean(e.reduce((e,t)=>e||t))}exists(e){return!!e}hasItems(e,t=1){return null!=e&&e.length>=t}ifThen(e,t){return this.ifThenElse(e,t,"")}ifNotThen(e,t){return this.ifThen(!e,t)}ifThenElse(e,t,r){return e?t:r}ifEqualsThen(e,t,r){return this.ifEqualsThenElse(e,t,r,"")}ifNotEqualsThen(e,t,r){return this.ifNotEqualsThenElse(e,t,r,"")}ifEqualsThenElse(e,t,r,s){return this.equals(e,t)?r:s}ifNotEqualsThenElse(e,t,r,s){return this.equals(e,t)?s:r}toStringOrEmpty(e){return void 0===e?"":e.toString()}toFixedOrEmpty(e,t){return void 0===e?"":e.toFixed(t)}secondsToHms(e,t){t=t||e;let r=e<0?"-":"";e=Math.abs(e);let s=this.pad(Math.floor(e/3600),2),n=this.pad(Math.floor(e%3600/60),2),i=this.pad(Math.floor(e%3600%60),2);return Math.abs(t)<3600?`${r}${n}:${i}`:`${r}${s}:${n}:${i}`}pad(e,t){let r=Math.abs(e),s=t-r.toString().length+1;return Array(s).join(0)+r}}});</script><script>this._backupDefine=this.define,this.define=this.IMD.define;</script><script as="hls-js" type="text/javascript">!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=8)}([function(t,e,r){"use strict";function i(){}function a(t){var e=self.console[t];return e?function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];i[0]&&(i[0]=function(t,e){return e="["+t+"] > "+e}(t,i[0])),e.apply(self.console,i)}:i}r.d(e,"a",function(){return l}),r.d(e,"b",function(){return d});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={trace:i,debug:i,log:i,warn:i,info:i,error:i},s=o,l=function(t){if(!0===t||"object"===(void 0===t?"undefined":n(t))){!function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach(function(e){s[e]=t[e]?t[e].bind(t):a(e)})}(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=o}}else s=o},d=s},function(t,e,r){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"a",function(){return a});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},a={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e){},function(t,e,r){"use strict";var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var i=r,a=0;t.isHeader(e,r);)a+=10,a+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(a+=10),r+=a;if(a>0)return e.subarray(i,i+a)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),i=0;i<r.length;i++){var a=r[i];if(t.isTimeStampFrame(a))return t._readTimeStamp(a)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4);return{type:r,size:i,data:e.subarray(10,10+i)}},t.getID3Frames=function(e){for(var r=0,i=[];t.isHeader(e,r);){for(var a=t._readSize(e,r+6),n=(r+=10)+a;r+8<n;){var o=t._getFrameData(e.subarray(r)),s=t._decodeFrame(o);s&&i.push(s),r+=o.size+10}t.isFooter(e,r)&&(r+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var a=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:a}}var n=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:n}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,i=t._utf8ArrayToStr(e.data.subarray(r));r+=i.length+1;var a=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:i,data:a}}var n=t._utf8ArrayToStr(e.data);return{key:e.type,data:n}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.length,i=void 0,a=void 0,n=void 0,o="",s=0;s<r;){if(0===(i=t[s++])&&e)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:a=t[s++],o+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=t[s++],n=t[s++],o+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&n)<<0)}}return o},t}();i._utf8ArrayToStr,e.a=i},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function n(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,s,l,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r=this._events[t],n(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),d=r.slice(),o=d.length,l=0;l<o;l++)d[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var o;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(o=n(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),a||(a=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var a=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,n,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){!function(e){var r=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var a=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var n=this.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(d.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var u=s.path,h=u.substring(0,u.lastIndexOf("/")+1)+n.path;d.path=o.normalizePath(h)}else d.path=s.path,n.params||(d.params=s.params,n.query||(d.query=s.query));return null===d.path&&(d.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(d)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(n,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}()},function(t,e,r){"use strict";function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function a(t,e){return 1&t[e+1]?7:9}function n(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function o(t,e){return!!(e+1<t.length&&i(t,e))}function s(t,e){if(e+1<t.length&&i(t,e)){var r=a(t,e);e+5<t.length&&(r=n(t,e));var o=e+r;if(o===t.length||o+1<t.length&&i(t,o))return!0}return!1}function l(t,e,r,i,a){if(!t.samplerate){var n=function(t,e,r,i){var a,n,o,s,l,d=navigator.userAgent.toLowerCase(),u=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=1+((192&e[r+2])>>>6),(n=(60&e[r+2])>>>2)>h.length-1?void t.trigger(Event.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+n}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,m.b.log("manifest codec:"+i+",ADTS data:type:"+a+",sampleingIndex:"+n+"["+h[n]+"Hz],channelConfig:"+s),/firefox/i.test(d)?n>=6?(a=5,l=new Array(4),o=n-3):(a=2,l=new Array(2),o=n):-1!==d.indexOf("android")?(a=2,l=new Array(2),o=n):(a=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&n>=6?o=n-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(n>=6&&1===s||/vivaldi/i.test(d))||!i&&1===s)&&(a=2,l=new Array(2)),o=n)),l[0]=a<<3,l[0]|=(14&n)>>1,l[1]|=(1&n)<<7,l[1]|=s<<3,5===a&&(l[1]|=(14&o)>>1,l[2]=(1&o)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:h[n],channelCount:s,codec:"mp4a.40."+a,manifestCodec:u})}(e,r,i,a);t.config=n.config,t.samplerate=n.samplerate,t.channelCount=n.channelCount,t.codec=n.codec,t.manifestCodec=n.manifestCodec,m.b.log("parsed codec:"+t.codec+",rate:"+n.samplerate+",nb channel:"+n.channelCount)}}function d(t){return 9216e4/t}function u(t,e,r,i,o){var s,l,d,u=t.length;if(s=a(t,e),l=n(t,e),(l-=s)>0&&e+s+l<=u)return d=r+i*o,{headerLength:s,frameLength:l,stamp:d}}function h(t,e,r,i,a){var n=u(e,r,i,a,d(t.samplerate));if(n){var o=n.stamp,s=n.headerLength,l=n.frameLength,h={unit:e.subarray(r+s,r+s+l),pts:o,dts:o};return t.samples.push(h),t.len+=l,{sample:h,length:l+s}}}var f=r(1),c=r(2),p=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.aesIV=r}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),v=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.key=r}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),g=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],o=r[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],h=s[3],f=new Uint32Array(256),c=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[c]=g,e[g]=c;var m=f[c],y=f[m],b=f[y],E=257*f[g]^16843008*g;i[c]=E<<24|E>>>8,a[c]=E<<16|E>>>16,n[c]=E<<8|E>>>24,o[c]=E,E=16843009*b^65537*y^257*m^16843008*c,l[g]=E<<24|E>>>8,d[g]=E<<16|E>>>16,u[g]=E<<8|E>>>24,h[g]=E,c?(c=m^f[f[f[b^m]]],p^=f[f[p]]):c=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n=this.ksRows=4*(a+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(n),d=this.invKeySchedule=new Uint32Array(n),u=this.sBox,h=this.rcon,f=this.invSubMix,c=f[0],p=f[1],v=f[2],g=f[3],m=void 0,y=void 0;for(o=0;o<n;o++)o<a?m=l[o]=e[o]:(y=m,o%a==0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=h[o/a|0]<<24):a>6&&o%a==4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[o]=m=(l[o-a]^y)>>>0);for(s=0;s<n;s++)o=n-s,y=3&s?l[o]:l[o-4],d[s]=s<4||o<=4?y:c[u[y>>>24]]^p[u[y>>>16&255]]^v[u[y>>>8&255]]^g[u[255&y]],d[s]=d[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r){for(var i,a,n=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,d=l[0],u=l[1],h=l[2],f=l[3],c=this.uint8ArrayToUint32Array_(r),p=c[0],v=c[1],g=c[2],m=c[3],y=new Int32Array(t),b=new Int32Array(y.length),E=void 0,R=void 0,A=void 0,T=void 0,S=void 0,L=void 0,_=void 0,w=void 0,D=void 0,O=void 0,x=void 0,I=void 0,k=this.networkToHostOrderSwap;e<y.length;){for(D=k(y[e]),O=k(y[e+1]),x=k(y[e+2]),I=k(y[e+3]),S=D^o[0],L=I^o[1],_=x^o[2],w=O^o[3],i=4,a=1;a<n;a++)E=d[S>>>24]^u[L>>16&255]^h[_>>8&255]^f[255&w]^o[i],R=d[L>>>24]^u[_>>16&255]^h[w>>8&255]^f[255&S]^o[i+1],A=d[_>>>24]^u[w>>16&255]^h[S>>8&255]^f[255&L]^o[i+2],T=d[w>>>24]^u[S>>16&255]^h[L>>8&255]^f[255&_]^o[i+3],S=E,L=R,_=A,w=T,i+=4;E=s[S>>>24]<<24^s[L>>16&255]<<16^s[_>>8&255]<<8^s[255&w]^o[i],R=s[L>>>24]<<24^s[_>>16&255]<<16^s[w>>8&255]<<8^s[255&S]^o[i+1],A=s[_>>>24]<<24^s[w>>16&255]<<16^s[S>>8&255]<<8^s[255&L]^o[i+2],T=s[w>>>24]<<24^s[S>>16&255]<<16^s[L>>8&255]<<8^s[255&_]^o[i+3],i+=3,b[e]=k(E^p),b[e+1]=k(T^v),b[e+2]=k(A^g),b[e+3]=k(R^m),p=D,v=O,g=x,m=I,e+=4}return b.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),m=r(0),y=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=r,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(m.b.log("JS AES decrypt"),this.logEnabled=!1);var n=this.decryptor;n||(this.decryptor=n=new g),n.expandKey(e),i(n.decrypt(t,0,r))}else{this.logEnabled&&(m.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new v(o,e)),this.fastAesKey.expandKey().then(function(n){new p(o,r).decrypt(t,n).catch(function(n){a.onWebCryptoError(n,t,e,r,i)}).then(function(t){i(t)})}).catch(function(n){a.onWebCryptoError(n,t,e,r,i)})}},t.prototype.onWebCryptoError=function(t,e,r,i,a){this.config.enableSoftwareAES?(m.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,i,a)):(m.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),b=r(4),E=function(){function t(e,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=i,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(b.a.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(s(t,e))return m.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var a=this._audioTrack,n=b.a.getID3Data(t,0)||[],s=b.a.getTimeStamp(n),d=s?90*s:9e4*e,u=0,f=d,c=t.length,p=n.length,v=[{pts:f,dts:f,data:n}];p<c-1;)if(o(t,p)&&p+5<c){l(a,this.observer,t,p,a.manifestCodec);var g=h(a,t,p,d,u);if(!g){m.b.log("Unable to parse AAC frame");break}p+=g.length,f=g.sample.pts,u++}else b.a.isHeader(t,p)?(n=b.a.getID3Data(t,p),v.push({pts:f,dts:f,data:n}),p+=n.length):p++;this.remuxer.remux(a,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}(),R=Math.pow(2,32)-1,A=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.remuxer=r}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,i,a){if(e&&e.byteLength){var n=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var o={};n.audio&&n.video?o.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:a?e:null}:(n.audio&&(o.audio={container:"audio/mp4",codec:r,initSegment:a?e:null}),n.video&&(o.video={container:"video/mp4",codec:i,initSegment:a?e:null})),this.observer.trigger(f.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var i,a,n,o,s,l,d,u=[];if(e.data?(l=e.start,o=e.end,e=e.data):(l=0,o=e.byteLength),!r.length)return null;for(i=l;i<o;)a=t.readUint32(e,i),n=t.bin2str(e.subarray(i+4,i+8)),d=a>1?i+a:o,n===r[0]&&(1===r.length?u.push({data:e,start:i+8,end:d}):(s=t.findBox({data:e,start:i+8,end:d},r.slice(1))).length&&(u=u.concat(s))),i=d;return u},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var a=i.data[i.start],n=0===a?12:20,o=t.readUint32(i,n),s=t.findBox(e,["mdia","mdhd"])[0];if(s){a=s.data[s.start];var l=t.readUint32(s,n=0===a?12:20),d=t.findBox(e,["mdia","hdlr"])[0];if(d){var u={soun:"audio",vide:"video"}[t.bin2str(d.data.subarray(d.start+8,d.start+12))];if(u){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));m.b.log("MP4Demuxer:"+u+":"+f+" found")}r[o]={timescale:l,type:u},r[u]={timescale:l,id:o}}}}}}),r},t.getStartDTS=function(e,r){var i,a,n;return i=t.findBox(r,["moof","traf"]),a=[].concat.apply([],i.map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var a,n;return a=t.readUint32(i,4),n=e[a].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r,i;return r=e.data[e.start],i=t.readUint32(e,4),1===r&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i})[0]/n})})),n=Math.min.apply(null,a),isFinite(n)?n:0},t.offsetStartDTS=function(e,r,i){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(a){var n=t.readUint32(a,4),o=e[n].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],a=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,a-i*o);else{a*=Math.pow(2,32),a+=t.readUint32(e,8),a-=i*o,a=Math.max(a,0);var n=Math.floor(a/(R+1)),s=Math.floor(a%(R+1));t.writeUint32(e,4,n),t.writeUint32(e,8,s)}})})})},t.prototype.append=function(e,r,i,a){var n=this.initData;n||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),n=this.initData);var o=void 0,s=this.initPTS;if(void 0===s){var l=t.getStartDTS(n,e);this.initPTS=s=l-r,this.observer.trigger(f.a.INIT_PTS_FOUND,{initPTS:s})}t.offsetStartDTS(n,e,s),o=t.getStartDTS(n,e),this.remuxer.remux(n.audio,n.video,null,null,o,i,a,e)},t.prototype.destroy=function(){},t}(),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,i,a){if(!(r+24>e.length)){var n=this.parseHeader(e,r);if(n&&r+n.frameLength<=e.length){var o=i+a*(9e4*n.samplesPerFrame/n.sampleRate),s={unit:e.subarray(r,r+n.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=n.channelCount,t.samplerate=n.sampleRate,t.samples.push(s),t.len+=n.frameLength,{sample:s,length:n.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,a=t[e+2]>>4&15,n=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==n){var s=3===r?3-i:3===i?3:4,l=1e3*T.BitratesMap[14*s+a-1],d=3===r?0:2===r?1:2,u=T.SamplingRateMap[3*d+n],h=t[e+3]>>6==3?1:2,f=T.SamplesCoefficients[r][i],c=T.BytesInSlot[i],p=8*f*c;return{sampleRate:u,channelCount:h,frameLength:parseInt(f*l/u+o,10)*c,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),i=4;r&&r.frameLength&&(i=r.frameLength);var a=e+i;if(a===t.length||a+1<t.length&&this.isHeaderPattern(t,a))return!0}return!1}},S=T,L=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");i.set(t.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&m.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,r,i=8,a=8;for(e=0;e<t;e++)0!==a&&(r=this.readEG(),a=(i+r+256)%256),i=0===a?i:a},t.prototype.readSPS=function(){var t,e,r,i,a,n,o,s=0,l=0,d=0,u=0,h=this.readUByte.bind(this),f=this.readBits.bind(this),c=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(h(),t=h(),f(5),v(3),h(),m(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=c();if(3===b&&v(1),m(),m(),v(1),p())for(n=3!==b?8:12,o=0;o<n;o++)p()&&y(o<6?16:64)}m();var E=c();if(0===E)c();else if(1===E)for(v(1),g(),g(),e=c(),o=0;o<e;o++)g();m(),v(1),r=c(),i=c(),0===(a=f(1))&&v(1),v(1),p()&&(s=c(),l=c(),d=c(),u=c());var R=[1,1];if(p()&&p())switch(h()){case 1:R=[1,1];break;case 2:R=[12,11];break;case 3:R=[10,11];break;case 4:R=[16,11];break;case 5:R=[40,33];break;case 6:R=[24,11];break;case 7:R=[20,11];break;case 8:R=[32,11];break;case 9:R=[80,33];break;case 10:R=[18,11];break;case 11:R=[15,11];break;case 12:R=[64,33];break;case 13:R=[160,99];break;case 14:R=[4,3];break;case 15:R=[3,2];break;case 16:R=[2,1];break;case 255:R=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-a)*(i+1)*16-(a?2:4)*(d+u),pixelRatio:R}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),_=function(){function t(e,r,i,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.decryptdata=i,this.discardEPB=a,this.decrypter=new y(e,r)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,i){var a=t[e].unit,n=a.subarray(16,a.length-a.length%16),o=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),s=this;this.decryptBuffer(o,function(n){n=new Uint8Array(n),a.set(n,16),i||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,i),!i)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,a=32;a<=t.length-16;a+=160,i+=16)r.set(t.subarray(a,a+16),i);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,i=32;i<=t.length-16;i+=160,r+=16)t.set(e.subarray(r,r+16),i);return t},t.prototype.decryptAvcSample=function(t,e,r,i,a,n){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){a.data=l.getAvcDecryptedUnit(o,s),n||l.decryptAvcSamples(t,e,r+1,i)})},t.prototype.decryptAvcSamples=function(t,e,r,i){for(;;e++,r=0){if(e>=t.length)return void i();for(var a=t[e].units;!(r>=a.length);r++){var n=a[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,i,n,o),!o)return}}}},t}(),w={video:0,audio:1,id3:2,text:3},D=function(){function t(e,r,i,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=i,this.typeSupported=a,this.remuxer=r,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new _(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0||(r&&m.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:w[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,i,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=a},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,i,a){var n,o,s,l,d,u=e.length,h=!1;this.contiguous=i;var p=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,y=this._id3Track,b=v.pid,E=g.pid,R=y.pid,A=this._pmtId,T=v.pesData,S=g.pesData,L=y.pesData,_=this._parsePAT,w=this._parsePMT,D=this._parsePES,O=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),P=t._syncOffset(e);for(u-=(u+P)%188,n=P;n<u;n+=188)if(71===e[n]){if(o=!!(64&e[n+1]),s=((31&e[n+1])<<8)+e[n+2],(48&e[n+3])>>4>1){if((l=n+5+e[n+4])===n+188)continue}else l=n+4;switch(s){case b:o&&(T&&(d=D(T))&&O(d,!1),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,n+188)),T.size+=n+188-l);break;case E:o&&(S&&(d=D(S))&&(g.isAAC?x(d):I(d)),S={data:[],size:0}),S&&(S.data.push(e.subarray(l,n+188)),S.size+=n+188-l);break;case R:o&&(L&&(d=D(L))&&k(d),L={data:[],size:0}),L&&(L.data.push(e.subarray(l,n+188)),L.size+=n+188-l);break;case 0:o&&(l+=e[l]+1),A=this._pmtId=_(e,l);break;case A:o&&(l+=e[l]+1);var C=w(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=C.avc)>0&&(v.pid=b),(E=C.audio)>0&&(g.pid=E,g.isAAC=C.isAAC),(R=C.id3)>0&&(y.pid=R),h&&!p&&(m.b.log("reparse from beginning"),h=!1,n=P-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(d=D(T))?(O(d,!0),v.pesData=null):v.pesData=T,S&&(d=D(S))?(g.isAAC?x(d):I(d),g.pesData=null):(S&&S.size&&m.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=S),L&&(d=D(L))?(k(d),y.pesData=null):y.pesData=L,null==this.sampleAes?this.remuxer.remux(g,v,y,this._txtTrack,r,i,a):this.decryptAndRemux(g,v,y,this._txtTrack,r,i,a)},t.prototype.decryptAndRemux=function(t,e,r,i,a,n,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,i,a,n,o)})}else this.decryptAndRemuxAvc(t,e,r,i,a,n,o)},t.prototype.decryptAndRemuxAvc=function(t,e,r,i,a,n,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,i,a,n,o)})}else this.remuxer.remux(t,e,r,i,a,n,o)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,i){var a,n,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){switch(n=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){m.b.log("unkown stream type:"+t[e]);break}case 15:-1===o.audio&&(o.audio=n);break;case 21:-1===o.id3&&(o.id3=n);break;case 219:if(!i){m.b.log("unkown stream type:"+t[e]);break}case 27:-1===o.avc&&(o.avc=n);break;case 3:case 4:r?-1===o.audio&&(o.audio=n,o.isAAC=!1):m.b.log("MPEG audio found, not supported in this browser for now");break;case 36:m.b.warn("HEVC stream type found, not supported for now");break;default:m.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},t.prototype._parsePES=function(t){var e,r,i,a,n,o,s,l,d=0,u=t.data;if(!t||0===t.size)return null;for(;u[0].length<19&&u.length>1;){var h=new Uint8Array(u[0].length+u[1].length);h.set(u[0]),h.set(u[1],u[0].length),u[0]=h,u.splice(1,1)}if(1===((e=u[0])[0]<<16)+(e[1]<<8)+e[2]){if((i=(e[4]<<8)+e[5])&&i>t.size-6)return null;192&(r=e[7])&&((o=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)>4294967295&&(o-=8589934592),64&r?((s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>4294967295&&(s-=8589934592),o-s>54e5&&(m.b.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s)):s=o),l=(a=e[8])+9,t.size-=l,n=new Uint8Array(t.size);for(var f=0,c=u.length;f<c;f++){var p=(e=u[f]).byteLength;if(l){if(l>p){l-=p;continue}e=e.subarray(l),p-=l,l=0}n.set(e,d),d+=p}return i&&(i-=a+3),{data:n,pts:o,dts:s,len:i}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,r.push(t)):e.dropped++}t.debug.length&&m.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r,i,a,n=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),l=this.avcSample,d=!1,u=this.pushAccesUnit.bind(this),h=function(t,e,r,i){return{key:t,pts:e,dts:r,units:[],debug:i}};t.data=null,l&&s.length&&!o.audFound&&(u(l,o),l=this.avcSample=h(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:i=!0,l||(l=n.avcSample=h(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(d&&s.length>4){var f=new L(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:i=!0,l||(l=n.avcSample=h(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(r=new L(n.discardEPB(e.data))).readUByte();for(var c=0,p=0,v=!1,g=0;!v&&r.bytesAvailable>1;){c=0;do{c+=g=r.readUByte()}while(255===g);p=0;do{p+=g=r.readUByte()}while(255===g);if(4===c&&0!==r.bytesAvailable){if(v=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var m=r.readUByte(),y=31&m,b=[m,r.readUByte()];for(a=0;a<y;a++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(p<r.bytesAvailable)for(a=0;a<p;a++)r.readUByte()}break;case 7:if(i=!0,d=!0,!o.sps){var E=(r=new L(e.data)).readSPS();o.width=E.width,o.height=E.height,o.pixelRatio=E.pixelRatio,o.sps=[e.data],o.duration=n._duration;var R=e.data.subarray(1,4),A="avc1.";for(a=0;a<3;a++){var T=R[a].toString(16);T.length<2&&(T="0"+T),A+=T}o.codec=A}break;case 8:i=!0,o.pps||(o.pps=[e.data]);break;case 9:i=!1,o.audFound=!0,l&&u(l,o),l=n.avcSample=h(!1,t.pts,t.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&i&&l.units.push(e)}),e&&l&&(u(l,o),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var i=r-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,r,i,a,n,o=0,s=t.byteLength,l=this._avcTrack,d=l.naluState||0,u=d,h=[],f=-1;for(-1===d&&(f=0,n=31&t[0],d=0,o=1);o<s;)if(e=t[o++],d)if(1!==d)if(e)if(1===e){if(f>=0)i={data:t.subarray(f,o-d-1),type:n},h.push(i);else{var c=this._getLastNalUnit();if(c&&(u&&o<=4-u&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-u)),(r=o-d-1)>0)){var p=new Uint8Array(c.data.byteLength+r);p.set(c.data,0),p.set(t.subarray(0,r),c.data.byteLength),c.data=p}}o<s?(a=31&t[o],f=o,n=a,d=0):d=-1}else d=0;else d=3;else d=e?0:2;else d=e?0:1;if(f>=0&&d>=0&&(i={data:t.subarray(f,s),type:n,state:d},h.push(i)),0===h.length){var v=this._getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+t.byteLength);g.set(v.data,0),g.set(t,v.data.byteLength),v.data=g}}return l.naluState=d,h},t.prototype.discardEPB=function(t){for(var e,r,i=t.byteLength,a=[],n=1;n<i-2;)0===t[n]&&0===t[n+1]&&3===t[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return t;e=i-a.length,r=new Uint8Array(e);var o=0;for(n=0;n<e;o++,n++)o===a[0]&&(o++,a.shift()),r[n]=t[o];return r},t.prototype._parseAACPES=function(t){var e,r,i,a,n,s=this._audioTrack,u=t.data,p=t.pts,v=this.aacOverFlow,g=this.aacLastPTS;if(v){var y=new Uint8Array(v.byteLength+u.byteLength);y.set(v,0),y.set(u,v.byteLength),u=y}for(i=0,n=u.length;i<n-1&&!o(u,i);i++);if(i){var b,E;if(i<n-1?(b="AAC PES did not start with ADTS header,offset:"+i,E=!1):(b="no ADTS header found in AAC PES",E=!0),m.b.warn("parsing error:"+b),this.observer.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:E,reason:b}),E)return}if(l(s,this.observer,u,i,this.audioCodec),r=0,e=d(s.samplerate),v&&g){var R=g+e;Math.abs(R-p)>1&&(m.b.log("AAC: align PTS for overlapping frames by "+Math.round((R-p)/90)),p=R)}for(;i<n;)if(o(u,i)&&i+5<n){var A=h(s,u,i,p,r);if(!A)break;i+=A.length,a=A.sample.pts,r++}else i++;v=i<n?u.subarray(i,n):null,this.aacOverFlow=v,this.aacLastPTS=a},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,i=0,a=0,n=t.pts;a<r;)if(S.isHeader(e,a)){var o=S.appendFrame(this._audioTrack,e,a,n,i);if(!o)break;a+=o.length,i++}else a++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),O=function(){function t(e,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=i,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,r,i=b.a.getID3Data(t,0);if(i&&void 0!==b.a.getTimeStamp(i))for(e=i.length,r=Math.min(t.length-1,e+100);e<r;e++)if(S.probe(t,e))return m.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var a=b.a.getID3Data(t,0),n=b.a.getTimeStamp(a),o=n?90*n:9e4*e,s=a.length,l=t.length,d=0,u=0,h=this._audioTrack,f=[{pts:o,dts:o,data:a}];s<l;)if(S.isHeader(t,s)){var c=S.appendFrame(h,t,s,o,d);if(!c)break;s+=c.length,u=c.sample.pts,d++}else b.a.isHeader(t,s)?(a=b.a.getID3Data(t,s),f.push({pts:u,dts:u,data:a}),s+=a.length):s++;this.remuxer.remux(h,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}(),x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),I=Math.pow(2,32)-1,k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=n,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,a))},t.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),i=8,a=r.length,n=a;a--;)i+=r[a].byteLength;for((e=new Uint8Array(i))[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),a=0,i=8;a<n;a++)e.set(r[a],i),i+=r[a].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(I+1)),a=Math.floor(r%(I+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(I+1)),a=Math.floor(r%(I+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,n)},t.sdtp=function(e){var r,i,a=e.samples||[],n=new Uint8Array(4+a.length);for(i=0;i<a.length;i++)r=a[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,n)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,i,a,n=[],o=[];for(r=0;r<e.sps.length;r++)i=e.sps[r],a=i.byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)i=e.pps[r],a=i.byteLength,o.push(a>>>8&255),o.push(255&a),o=o.concat(Array.prototype.slice.call(i));var s=t.box(t.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(o))),l=e.width,d=e.height,u=e.pixelRatio[0],h=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,h>>24,h>>16&255,h>>8&255,255&h])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,a=e.width,n=e.height,o=Math.floor(i/(I+1)),s=Math.floor(i%(I+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,n>>8&255,255&n,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),a=e.id,n=Math.floor(r/(I+1)),o=Math.floor(r%(I+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i,a,n,o,s,l,d=e.samples||[],u=d.length,h=12+16*u,f=new Uint8Array(h);for(r+=8+h,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<u;i++)a=d[i],n=a.duration,o=a.size,s=a.flags,l=a.cts,f.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var r,i=t.moov(e);return(r=new Uint8Array(t.FTYP.byteLength+i.byteLength)).set(t.FTYP),r.set(i,t.FTYP.byteLength),r},t}(),P=function(){function t(e,r,i,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=r,this.typeSupported=i;var n=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,i,a,n,o){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var s=t.samples.length,l=e.samples.length,d=a,u=a;if(s&&l){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;d+=Math.max(0,h),u+=Math.max(0,-h)}if(s){t.timescale||(m.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var c=this.remuxAudio(t,d,n,o);if(l){var p=void 0;c&&(p=c.endPTS-c.startPTS),e.timescale||(m.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,u,n,p,o)}}else{var v=void 0;l&&(v=this.remuxVideo(e,u,n,o)),v&&t.codec&&this.remuxEmptyAudio(t,d,n,v)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(f.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var i,a,n=this.observer,o=t.samples,s=e.samples,l=this.typeSupported,d="audio/mp4",u={},h={tracks:u},p=void 0===this._initPTS;if(p&&(i=a=1/0),t.config&&o.length&&(t.timescale=t.samplerate,m.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(d="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),u.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:k.initSegment([t]),metadata:{channelCount:t.channelCount}},p&&(i=a=o[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&s.length){var v=e.inputTimeScale;e.timescale=v,u.video={container:"video/mp4",codec:e.codec,initSegment:k.initSegment([e]),metadata:{width:e.width,height:e.height}},p&&(i=Math.min(i,s[0].pts-v*r),a=Math.min(a,s[0].dts-v*r),this.observer.trigger(f.a.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(u).length?(n.trigger(f.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,p&&(this._initPTS=i,this._initDTS=a)):n.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,i,a){var n,o,s,l,d,u,h,p=8,v=t.timescale,g=t.samples,y=[],b=g.length,E=this._PTSNormalize,R=this._initDTS,A=this.nextAvcDts,T=this.isSafari;T&&(r|=g.length&&A&&(a&&Math.abs(e-A/v)<.1||Math.abs(g[0].pts-A-R)<v/5)),r||(A=e*v),g.forEach(function(t){t.pts=E(t.pts-R,A),t.dts=E(t.dts-R,A)}),g.sort(function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i||t.id-e.id});var S=g.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(S<0){m.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var L=0;L<g.length;L++)g[L].dts+=S}var _=g[0];d=Math.max(_.dts,0),l=Math.max(_.pts,0);var w=Math.round((d-A)/90);r&&w&&(w>1?m.b.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&m.b.log("AVC:"+-w+" ms overlapping between fragments detected"),d=A,g[0].dts=d,l=Math.max(l-w,A),g[0].pts=l,m.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(d/90)+",delta:"+w+" ms")),_=g[g.length-1],h=Math.max(_.dts,0),u=Math.max(_.pts,0,h),T&&(n=Math.round((h-d)/(g.length-1)));for(var D=0,O=0,x=0;x<b;x++){for(var I=g[x],P=I.units,C=P.length,F=0,M=0;M<C;M++)F+=P[M].data.length;O+=F,D+=C,I.length=F,I.dts=T?d+x*n:Math.max(I.dts,d),I.pts=Math.max(I.pts,I.dts)}var N=O+4*D+8;try{o=new Uint8Array(N)}catch(t){return void this.observer.trigger(f.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var U=new DataView(o.buffer);U.setUint32(0,N),o.set(k.types.mdat,4);for(var B=0;B<b;B++){for(var G=g[B],H=G.units,j=0,V=void 0,W=0,K=H.length;W<K;W++){var Y=H[W],z=Y.data,X=Y.data.byteLength;U.setUint32(p,X),p+=4,o.set(z,p),p+=X,j+=4+X}if(T)V=Math.max(0,n*Math.round((G.pts-G.dts)/n));else{if(B<b-1)n=g[B+1].dts-G.dts;else{var q=this.config,Q=G.dts-g[B>0?B-1:B].dts;if(q.stretchShortVideoTrack){var J=q.maxBufferHole,Z=q.maxSeekHole,$=Math.floor(Math.min(J,Z)*v),tt=(i?l+i*v:this.nextAudioPts)-G.pts;tt>$?((n=tt-Q)<0&&(n=Q),m.b.log("It is approximately "+tt/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=Q}else n=Q}V=Math.round(G.pts-G.dts)}y.push({size:j,duration:n,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=h+n;var et=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var rt=y[0].flags;rt.dependsOn=2,rt.isNonSync=0}t.samples=y,s=k.moof(t.sequenceNumber++,d,t),t.samples=[];var it={data1:s,data2:o,startPTS:l/v,endPTS:(u+n)/v,startDTS:d/v,endDTS:this.nextAvcDts/v,type:"video",nb:y.length,dropped:et};return this.observer.trigger(f.a.FRAG_PARSING_DATA,it),it},t.prototype.remuxAudio=function(t,e,r,i){var a,n,o,s,l,d,u,h=t.inputTimeScale,p=t.timescale,v=h/p,g=(t.isAAC?1024:1152)*v,y=this._PTSNormalize,b=this._initDTS,E=!t.isAAC&&this.typeSupported.mpeg,R=t.samples,A=[],T=this.nextAudioPts;if(r|=R.length&&T&&(i&&Math.abs(e-T/h)<.1||Math.abs(R[0].pts-T-b)<20*g),R.forEach(function(t){t.pts=t.dts=y(t.pts-b,e*h)}),0!==(R=R.filter(function(t){return t.pts>=0})).length){if(r||(T=i?e*h:R[0].pts),t.isAAC)for(var S=this.config.maxAudioFramesDrift,L=0,_=T;L<R.length;){var w,D=R[L];w=D.pts-_;var O=Math.abs(1e3*w/h);if(w<=-S*g)m.b.warn("Dropping 1 audio frame @ "+(_/h).toFixed(3)+"s due to "+Math.round(O)+" ms overlap."),R.splice(L,1),t.len-=D.unit.length;else if(w>=S*g&&O<1e4&&_){var I=Math.round(w/g);m.b.warn("Injecting "+I+" audio frame @ "+(_/h).toFixed(3)+"s due to "+Math.round(1e3*w/h)+" ms gap.");for(var P=0;P<I;P++){var C=Math.max(_,0);(o=x.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(m.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),o=D.unit.subarray()),R.splice(L,0,{unit:o,pts:C,dts:C}),t.len+=o.length,_+=g,L++}D.pts=D.dts=_,_+=g,L++}else Math.abs(w),D.pts=D.dts=_,_+=g,L++}for(var F=0,M=R.length;F<M;F++){var N=R[F],U=N.unit,B=N.pts;if(void 0!==u)n.duration=Math.round((B-u)/v);else{var G=Math.round(1e3*(B-T)/h),H=0;if(r&&t.isAAC&&G){if(G>0&&G<1e4)H=Math.round((B-T)/g),m.b.log(G+" ms hole between AAC samples detected,filling it"),H>0&&((o=x.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o=U.subarray()),t.len+=H*o.length);else if(G<-12){m.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/h).toFixed(3)+"s/"+(B/h).toFixed(3)+"s/"+-G+"ms"),t.len-=U.byteLength;continue}B=T}if(d=B,!(t.len>0))return;var j=E?t.len:t.len+8;a=E?0:8;try{s=new Uint8Array(j)}catch(t){return void this.observer.trigger(f.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}E||(new DataView(s.buffer).setUint32(0,j),s.set(k.types.mdat,4));for(var V=0;V<H;V++)(o=x.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(m.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),o=U.subarray()),s.set(o,a),a+=o.byteLength,n={size:o.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(n)}s.set(U,a);var W=U.byteLength;a+=W,n={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(n),u=B}var K=0,Y=A.length;if(Y>=2&&(K=A[Y-2].duration,n.duration=K),Y){this.nextAudioPts=T=u+v*K,t.len=0,t.samples=A,l=E?new Uint8Array:k.moof(t.sequenceNumber++,d/v,t),t.samples=[];var z=d/h,X=T/h,q={data1:l,data2:s,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",nb:Y};return this.observer.trigger(f.a.FRAG_PARSING_DATA,q),q}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var a=t.inputTimeScale,n=a/(t.samplerate?t.samplerate:a),o=this.nextAudioPts,s=(void 0!==o?o:i.startDTS*a)+this._initDTS,l=i.endDTS*a+this._initDTS,d=1024*n,u=Math.ceil((l-s)/d),h=x.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(m.b.warn("remux empty Audio"),h){for(var f=[],c=0;c<u;c++){var p=s+c*d;f.push({unit:h,pts:p,dts:p}),t.len+=h.length}t.samples=f,this.remuxAudio(t,e,r)}else m.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.prototype.remuxID3=function(t,e){var r,i=t.samples.length,a=t.inputTimeScale,n=this._initPTS,o=this._initDTS;if(i){for(var s=0;s<i;s++)r=t.samples[s],r.pts=(r.pts-n)/a,r.dts=(r.dts-o)/a;this.observer.trigger(f.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r,i=t.samples.length,a=t.inputTimeScale,n=this._initPTS;if(i){for(var o=0;o<i;o++)r=t.samples[o],r.pts=(r.pts-n)/a;this.observer.trigger(f.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}(),C=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,i,a,n,o,s){var l=this.observer,d="";t&&(d+="audio"),e&&(d+="video"),l.trigger(f.a.FRAG_PARSING_DATA,{data1:s,startPTS:a,startDTS:a,type:d,nb:1,dropped:0}),l.trigger(f.a.FRAG_PARSED)},t}(),F=function(){function t(e,r,i,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.typeSupported=r,this.config=i,this.vendor=a}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,i,a,n,o,s,l,d,u,h){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var c=this.decrypter;null==c&&(c=this.decrypter=new y(this.observer,this.config));var p,v=this;try{p=performance.now()}catch(t){p=Date.now()}c.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var c;try{c=performance.now()}catch(t){c=Date.now()}v.observer.trigger(f.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:c}}),v.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,n,o,s,l,d,u,h)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,n,o,s,l,d,u,h)},t.prototype.pushDecrypted=function(t,e,r,i,a,n,o,s,l,d,u,h){var p=this.demuxer;if(!p||o&&!this.probe(t)){for(var v=this.observer,g=this.typeSupported,m=this.config,y=[{demux:D,remux:P},{demux:A,remux:C},{demux:E,remux:P},{demux:O,remux:P}],b=0,R=y.length;b<R;b++){var T=y[b],S=T.demux.probe;if(S(t)){var L=this.remuxer=new T.remux(v,m,g,this.vendor);p=new T.demux(v,L,m,g),this.probe=S;break}}if(!p)return void v.trigger(f.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var _=this.remuxer;(o||s)&&(p.resetInitSegment(r,i,a,d),_.resetInitSegment()),o&&(p.resetTimeStamp(h),_.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,n,l,u)},t}();e.a=F},function(t,e,r){"use strict";function i(t,e){var r=A[e];return!!r&&!0===r[t.slice(0,4)]}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)return null;for(var r=null,i=0;i<t.length;i++){var a=t[i];a.id===e&&(r=a)}return r}function s(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function l(t,e,r){var i=t[e],a=t[r],n=a.startPTS;isNaN(n)?a.start=r>e?i.start+i.duration:Math.max(i.start-a.duration,0):r>e?(i.duration=n-i.start,i.duration<0&&g.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-n,a.duration<0&&g.b.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}function d(t,e,r,i,a,n){var o=r;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-r);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),o=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),i=Math.max(i,e.endPTS),a=Math.min(a,e.startDTS),n=Math.max(n,e.endDTS)}var d=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=o,e.endPTS=i,e.startDTS=a,e.endDTS=n,e.duration=i-r;var u=e.sn;if(!t||u<t.startSN||u>t.endSN)return 0;var h,f,c;for(h=u-t.startSN,(f=t.fragments)[h]=e,c=h;c>0;c--)l(f,c,c-1);for(c=h;c<f.length-1;c++)l(f,c,c+1);return t.PTSKnown=!0,d}function u(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function h(t,e,r){if(function(t,e,r){var i=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(i=!0),i}(t,e,r)){var i=function(t,e){var r=t.fragments,i=e.fragments;if(i.length&&r.length){var a=function(t,e){for(var r=null,i=0;i<t.length;i+=1){var a=t[i];if(a&&a.cc===e){r=a;break}}return r}(r,i[0].cc);return!a||a&&!a.startPTS?void g.b.log("No frag in previous level to align on"):a}g.b.log("No fragments to align")}(e.details,r);i&&(g.b.log("Adjusting PTS using last level due to CC increase within current level"),u(i.start,r))}if(!1===r.PTSKnown&&e&&e.details){var a=e.details.programDateTime,n=(r.programDateTime-a)/1e3+e.details.fragments[0].start;isNaN(n)||(g.b.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),u(n,r))}}Object.defineProperty(e,"__esModule",{value:!0});var f=r(6),c=r.n(f),p=r(1),v=r(2),g=r(0),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===m(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){try{(function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}).call(this,t,e).call()}catch(e){g.b.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(p.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),b=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,R=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=b.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(E.lastIndex=0;null!==(e=E.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},t}(),A={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},T=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),S=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,L=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,D=function(){function t(){n(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return T(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=c.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),O=function(){function t(){n(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new D,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},T(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=c.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),x=function(t){function e(r){n(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MANIFEST_LOADING,p.a.LEVEL_LOADING,p.a.AUDIO_TRACK_LOADING,p.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},y.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var r=this.loaders[e.type];if(void 0!==r){var i=r.context;if(i&&i.url===t)return void g.b.trace("playlist request ongoing");g.b.warn("abort previous loader for type:"+e.type),r.abort()}var a=this.hls.config,n=void 0,o=void 0,s=void 0,l=void 0;"manifest"===e.type?(n=a.manifestLoadingMaxRetry,o=a.manifestLoadingTimeOut,s=a.manifestLoadingRetryDelay,l=a.manifestLoadingMaxRetryTimeout):"level"===e.type?(n=0,o=a.levelLoadingTimeOut):(n=a.levelLoadingMaxRetry,o=a.levelLoadingTimeOut,s=a.levelLoadingRetryDelay,l=a.levelLoadingMaxRetryTimeout,g.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),r=this.loaders[e.type]=e.loader=void 0!==a.pLoader?new a.pLoader(a):new a.loader(a),e.url=t,e.responseType="";var d=void 0,u=void 0;d={timeout:o,maxRetry:n,retryDelay:s,maxRetryDelay:l},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(e,d,u)},e.prototype.resolve=function(t,e){return c.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){var r=[],a=void 0;for(S.lastIndex=0;null!=(a=S.exec(t));){var n={},o=n.attrs=new R(a[1]);n.url=this.resolve(a[2],e);var s=o.decimalResolution("RESOLUTION");s&&(n.width=s.width,n.height=s.height),n.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),n.name=o.NAME,function(t,e){["video","audio"].forEach(function(r){var a=t.filter(function(t){return i(t,r)});if(a.length){var n=a.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=n.length>0?n[0]:a[0],t=t.filter(function(t){return-1===a.indexOf(t)})}}),e.unknownCodecs=t}([].concat((o.CODECS||"").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf("avc1")&&(n.videoCodec=this.avc1toavcoti(n.videoCodec)),r.push(n)}return r},e.prototype.parseMasterPlaylistMedia=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=void 0,n=[],s=0;for(L.lastIndex=0;null!==(a=L.exec(t));){var l={},d=new R(a[1]);if(d.TYPE===r){if(l.groupId=d["GROUP-ID"],l.name=d.NAME,l.type=r,l.default="YES"===d.DEFAULT,l.autoselect="YES"===d.AUTOSELECT,l.forced="YES"===d.FORCED,d.URI&&(l.url=this.resolve(d.URI,e)),l.lang=d.LANGUAGE,l.name||(l.name=l.lang),i.length){var u=o(i,l.groupId);l.audioCodec=u?u.codec:i[0].codec}l.id=s++,n.push(l)}}return n},e.prototype.avc1toavcoti=function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,r,i){var a,n,o=0,s=0,l={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},d=new D,u=0,h=null,f=new O;for(_.lastIndex=0;null!==(a=_.exec(t));){var c=a[1];if(c){f.duration=parseFloat(c);var p=(" "+a[2]).slice(1);f.title=p||null,f.tagList.push(p?["INF",c,p]:["INF",c])}else if(a[3]){if(!isNaN(f.duration)){var v=o++;f.type=i,f.start=s,f.levelkey=d,f.sn=v,f.level=r,f.cc=u,f.baseurl=e,f.relurl=(" "+a[3]).slice(1),l.fragments.push(f),h=f,s+=f.duration,f=new O}}else if(a[4]){if(f.rawByteRange=(" "+a[4]).slice(1),h){var m=h.byteRangeEndOffset;m&&(f.lastByteRangeEndOffset=m)}}else if(a[5])f.rawProgramDateTime=(" "+a[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(a[5]))-1e3*s));else{for(a=a[0].match(w),n=1;n<a.length&&void 0===a[n];n++);var y=(" "+a[n+1]).slice(1),b=(" "+a[n+2]).slice(1);switch(a[n]){case"#":f.tagList.push(b?[y,b]:[y]);break;case"PLAYLIST-TYPE":l.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":o=l.startSN=parseInt(y);break;case"TARGETDURATION":l.targetduration=parseFloat(y);break;case"VERSION":l.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(y);break;case"KEY":var E=new R(y),A=E.enumeratedString("METHOD"),T=E.URI,S=E.hexadecimalInteger("IV");A&&(d=new D,T&&["AES-128","SAMPLE-AES"].indexOf(A)>=0&&(d.method=A,d.baseuri=e,d.reluri=T,d.key=null,d.iv=S));break;case"START":var L=new R(y).decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(l.startTimeOffset=L);break;case"MAP":var x=new R(y);f.relurl=x.URI,f.rawByteRange=x.BYTERANGE,f.baseurl=e,f.level=r,f.type=i,f.sn="initSegment",l.initSegment=f,f=new O;break;default:g.b.warn("line parsed but not handled: "+a)}}}return(f=h)&&!f.relurl&&(l.fragments.pop(),s-=f.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=o-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=u,l},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.data,n=t.url,o=r.type,s=r.id,l=r.level,d=this.hls;if(this.loaders[o]=void 0,void 0!==n&&0!==n.indexOf("data:")||(n=r.url),e.tload=performance.now(),0===a.indexOf("#EXTM3U"))if(a.indexOf("#EXTINF:")>0){var u="audioTrack"!==o&&"subtitleTrack"!==o,h=isNaN(l)?isNaN(s)?0:s:l,f=this.parseLevelPlaylist(a,n,h,"audioTrack"===o?"audio":"subtitleTrack"===o?"subtitle":"main");f.tload=e.tload,"manifest"===o&&d.trigger(p.a.MANIFEST_LOADED,{levels:[{url:n,details:f}],audioTracks:[],url:n,stats:e,networkDetails:i}),e.tparsed=performance.now(),f.targetduration?u?d.trigger(p.a.LEVEL_LOADED,{details:f,level:l||0,id:s||0,stats:e,networkDetails:i}):"audioTrack"===o?d.trigger(p.a.AUDIO_TRACK_LOADED,{details:f,id:s,stats:e,networkDetails:i}):"subtitleTrack"===o&&d.trigger(p.a.SUBTITLE_TRACK_LOADED,{details:f,id:s,stats:e,networkDetails:i}):d.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"invalid targetduration",networkDetails:i})}else{var c=this.parseMasterPlaylist(a,n);if(c.length){var m=c.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),y=this.parseMasterPlaylistMedia(a,n,"AUDIO",m),b=this.parseMasterPlaylistMedia(a,n,"SUBTITLES");if(y.length){var E=!1;y.forEach(function(t){t.url||(E=!0)}),!1===E&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(g.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main"}))}d.trigger(p.a.MANIFEST_LOADED,{levels:c,audioTracks:y,subtitles:b,url:n,stats:e,networkDetails:i})}else d.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no level found in manifest",networkDetails:i})}else d.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no EXTM3U delimiter",networkDetails:i})},e.prototype.loaderror=function(t,e){var r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;switch(e.type){case"manifest":r=v.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":r=v.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":r=v.a.AUDIO_TRACK_LOAD_ERROR,i=!1}n&&(n.abort(),this.loaders[e.type]=void 0),this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:r,fatal:i,url:n.url,loader:n,response:t,context:e,networkDetails:a})},e.prototype.loadtimeout=function(t,e){var r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;switch(e.type){case"manifest":r=v.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":r=v.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":r=v.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}n&&(n.abort(),this.loaders[e.type]=void 0),this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:r,fatal:i,url:n.url,loader:n,context:e,networkDetails:a})},e}(y),I=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.FRAG_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var r=t[e];r&&r.destroy()}this.loaders={},y.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,i=this.loaders[r],a=this.hls.config;e.loaded=0,i&&(g.b.warn("abort previous fragment loader for type:"+r),i.abort()),i=this.loaders[r]=e.loader=void 0!==a.fLoader?new a.fLoader(a):new a.loader(a);var n=void 0,o=void 0,s=void 0;n={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var l=e.byteRangeStartOffset,d=e.byteRangeEndOffset;isNaN(l)||isNaN(d)||(n.rangeStart=l,n.rangeEnd=d),o={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(n,o,s)},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.data,n=r.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(p.a.FRAG_LOADED,{payload:a,frag:n,stats:e,networkDetails:i})},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},e.prototype.loadprogress=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.frag;a.loaded=t.loaded,this.hls.trigger(p.a.FRAG_LOAD_PROGRESS,{frag:a,stats:t,networkDetails:i})},e}(y),k=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},y.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,i=this.loaders[r],a=e.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;i&&(g.b.warn("abort previous key loader for type:"+r),i.abort()),e.loader=this.loaders[r]=new o.loader(o),this.decrypturl=n,this.decryptkey=null;var s=void 0,l=void 0,d=void 0;s={url:n,frag:e,responseType:"arraybuffer"},l={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,d)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(p.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(p.a.KEY_LOADED,{frag:i})},e.prototype.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(p.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(y),P={search:function(t,e){for(var r=0,i=t.length-1,a=null,n=null;r<=i;){var o=e(n=t[a=(r+i)/2|0]);if(o>0)r=a+1;else{if(!(o<0))return n;i=a-1}}return null}},C={isBuffered:function(t,e){try{if(t)for(var r=t.buffered,i=0;i<r.length;i++)if(e>=r.start(i)&&e<=r.end(i))return!0}catch(t){}return!1},bufferInfo:function(t,e,r){try{if(t){var i,a=t.buffered,n=[];for(i=0;i<a.length;i++)n.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(n,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,r){var i,a,n,o,s,l=[];for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),s=0;s<t.length;s++){var d=l.length;if(d){var u=l[d-1].end;t[s].start-u<r?t[s].end>u&&(l[d-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,i=0,a=n=e;s<l.length;s++){var h=l[s].start,f=l[s].end;if(e+r>=h&&e<f)a=h,n=f,i=n-e;else if(e+r<h){o=h;break}}return{len:i,start:a,end:n,nextStart:o}}},F=r(7),M=r(5),N=r.n(M),U=r(9),B=r.n(U),G=s(),H=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.id=r;var i=this.observer=new N.a,a=e.config;i.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];i.emit.apply(i,[t,t].concat(r))},i.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];i.removeListener.apply(i,[t].concat(r))};var n=function(t,r){(r=r||{}).frag=this.frag,r.id=this.id,e.trigger(t,r)}.bind(this);i.on(p.a.FRAG_DECRYPTED,n),i.on(p.a.FRAG_PARSING_INIT_SEGMENT,n),i.on(p.a.FRAG_PARSING_DATA,n),i.on(p.a.FRAG_PARSED,n),i.on(p.a.ERROR,n),i.on(p.a.FRAG_PARSING_METADATA,n),i.on(p.a.FRAG_PARSING_USERDATA,n),i.on(p.a.INIT_PTS_FOUND,n);var o={mp4:G.isTypeSupported("video/mp4"),mpeg:G.isTypeSupported("audio/mpeg"),mp3:G.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){g.b.log("demuxing in webworker");var l=void 0;try{l=this.w=B()(10),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(t){e.trigger(p.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:o,vendor:s,id:r,config:JSON.stringify(a)})}catch(t){g.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new F.a(i,o,a,s),this.w=void 0}}else this.demuxer=new F.a(i,o,a,s)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,r,i,a,n,o,s){var l=this.w,d=isNaN(a.startDTS)?a.start:a.startDTS,u=a.decryptdata,h=this.frag,f=!(h&&a.cc===h.cc),c=!(h&&a.level===h.level),p=h&&a.sn===h.sn+1,v=!c&&p;if(f&&g.b.log(this.id+":discontinuity detected"),c&&g.b.log(this.id+":switch detected"),this.frag=a,l)l.postMessage({cmd:"demux",data:t,decryptdata:u,initSegment:e,audioCodec:r,videoCodec:i,timeOffset:d,discontinuity:f,trackSwitch:c,contiguous:v,duration:n,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,u,e,r,i,d,f,c,v,n,o,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case p.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}(),j={toString:function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}},V=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),W={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},K=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MEDIA_ATTACHED,p.a.MEDIA_DETACHING,p.a.MANIFEST_LOADING,p.a.MANIFEST_PARSED,p.a.LEVEL_LOADED,p.a.KEY_LOADED,p.a.FRAG_LOADED,p.a.FRAG_LOAD_EMERGENCY_ABORTED,p.a.FRAG_PARSING_INIT_SEGMENT,p.a.FRAG_PARSING_DATA,p.a.FRAG_PARSED,p.a.ERROR,p.a.AUDIO_TRACK_SWITCHING,p.a.AUDIO_TRACK_SWITCHED,p.a.BUFFER_CREATED,p.a.BUFFER_APPENDED,p.a.BUFFER_FLUSHED));return i.config=r.config,i.audioCodecSwap=!1,i.ticks=0,i._state=W.STOPPED,i.ontick=i.tick.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),y.prototype.destroy.call(this),this.state=W.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(g.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=W.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=W.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=W.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){1==++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case W.ERROR:break;case W.BUFFER_FLUSHING:this.fragLoadError=0;break;case W.IDLE:this._doTickIdle();break;case W.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=W.IDLE);break;case W.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(g.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=W.IDLE);break;case W.ERROR:case W.STOPPED:case W.FRAG_LOADING:case W.PARSING:case W.PARSED:case W.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=t.nextLoadLevel,n=this.levels[a];if(n){var o=n.bitrate,s=void 0;s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=C.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,e.maxBufferHole),d=l.len;if(!(d>=s)){g.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=a;var u=n.details;if(void 0===u||!0===u.live&&this.levelLastLoaded!==a)return void(this.state=W.WAITING_LEVEL);var h=this.fragPrevious;if(!u.live&&h&&!h.backtracked&&h.sn===u.endSN&&!l.nextStart&&Math.min(r.duration,h.start+h.duration)-Math.max(l.end,h.start)<=Math.max(.2,h.duration)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(p.a.BUFFER_EOS,f),void(this.state=W.ENDED)}this._fetchPayloadOrEos(i,l,u)}}}},e.prototype._fetchPayloadOrEos=function(t,e,r){var i=this.fragPrevious,a=this.level,n=r.fragments,o=n.length;if(0!==o){var s=n[0].start,l=n[o-1].start+n[o-1].duration,d=e.end,u=void 0;if(r.initSegment&&!r.initSegment.data)u=r.initSegment;else if(r.live){var h=this.config.initialLiveManifestSize;if(o<h)return void g.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(u=this._ensureFragmentAtLivePoint(r,d,s,l,i,n,o)))return}else d<s&&(u=n[0]);u||(u=this._findFragment(s,i,o,n,d,l,r)),u&&this._loadFragmentOrKey(u,a,r,t,d)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,r,i,a,n,o){var s=this.hls.config,l=this.media,d=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-s.maxFragLookUpTolerance,i-u)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);g.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,l&&l.readyState&&l.duration>h&&(l.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>i&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(a){var f=a.sn+1;if(f>=t.startSN&&f<=t.endSN){var c=n[f-t.startSN];a.cc===c.cc&&(d=c,g.b.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=P.search(n,function(t){return a.cc-t.cc}))&&g.b.log("live playlist, switching playlist, load frag with same CC: "+d.sn)}d||(d=n[Math.min(o-1,Math.round(o/2))],g.b.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d},e.prototype._findFragment=function(t,e,r,i,a,n,o){var s=this.hls.config,l=void 0,d=void 0,u=s.maxFragLookUpTolerance,h=e?i[e.sn-i[0].sn+1]:void 0,f=function(t){var e=Math.min(u,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=a?1:t.start-e>a&&t.start?-1:0};if(a<n?(a>n-u&&(u=0),d=h&&!f(h)?h:P.search(i,f)):d=i[r-1],d){var c=(l=d).sn-o.startSN,p=e&&l.level===e.level,v=i[c-1],m=i[c+1];if(e&&l.sn===e.sn)if(p&&!l.backtracked)if(l.sn<o.endSN){var y=e.deltaPTS;y&&y>s.maxBufferHole&&e.dropped&&c?(l=v,g.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(l=m,g.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(m&&m.backtracked?(g.b.warn("Already backtracked from fragment "+m.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+m.sn),l=m):(g.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,v?(v.loadCounter&&v.loadCounter--,l=v,l.backtracked=!0):c&&(l=null)))}return l},e.prototype._loadFragmentOrKey=function(t,e,r,i,a){var n=this.hls,o=n.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(g.b.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e+", currentTime:"+i.toFixed(3)+",bufferEnd:"+a.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=o.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return void n.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=n.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),n.trigger(p.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new H(n,"main")),void(this.state=W.FRAG_LOADING)}g.b.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e),this.state=W.KEY_LOADING,n.trigger(p.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return P.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),C.isBuffered(r,e)?t=this.getBufferedFrag(e):C.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(p.a.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(p.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}},e.prototype.immediateLevelSwitch=function(){if(g.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,C.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,r=void 0,i=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)e=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=W.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(p.a.BUFFER_FLUSHING,r)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(g.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;isNaN(e)||g.b.log("media seeking to "+e.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,a=C.bufferInfo(i,e,this.config.maxBufferHole);if(this.state===W.FRAG_LOADING){var n=this.fragCurrent;if(0===a.len&&n){var o=r.maxFragLookUpTolerance,s=n.start-o,l=n.start+n.duration+o;e<s||e>l?(n.loader&&(g.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=W.IDLE):g.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===W.ENDED&&(0===a.len&&(this.fragPrevious=0),this.state=W.IDLE);t&&(this.lastCurrentTime=e),this.state!==W.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||g.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){g.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){g.b.log("trigger BUFFER_RESET"),this.hls.trigger(p.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,r=!1,i=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&g.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[r],n=e.totalduration,o=0;if(g.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+n),e.live){var s=a.details;s&&e.fragments.length>0?(function(t,e){var r,i=Math.max(t.startSN,e.startSN)-e.startSN,a=Math.min(t.endSN,e.endSN)-e.startSN,n=e.startSN-t.startSN,o=t.fragments,s=e.fragments,l=0;if(a<i)e.PTSKnown=!1;else{for(var u=i;u<=a;u++){var h=o[n+u],f=s[u];f&&h&&(l=h.cc-f.cc,isNaN(h.startPTS)||(f.start=f.startPTS=h.startPTS,f.endPTS=h.endPTS,f.duration=h.duration,f.backtracked=h.backtracked,f.dropped=h.dropped,r=f))}if(l)for(g.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<s.length;u++)s[u].cc+=l;if(r)d(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(n>=0&&n<o.length){var c=o[n].start;for(u=0;u<s.length;u++)s[u].start+=c}e.PTSKnown=t.PTSKnown}}(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&!isNaN(o)?g.b.log("live playlist sliding:"+o.toFixed(3)):(g.b.log("live playlist - outdated PTS, unknown sliding"),h(this.fragPrevious,i,e))):(g.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,h(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(a.details=e,this.levelLastLoaded=r,this.hls.trigger(p.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;isNaN(l)?e.live?(this.startPosition=this.computeLivePosition(o,e),g.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(g.b.log("negative start time offset "+l+", count from end of last fragment"),l=o+n+l),g.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===W.WAITING_LEVEL&&(this.state=W.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===W.KEY_LOADING&&(this.state=W.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===W.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var i=t.stats,a=this.levels[e.level],n=a.details;if(g.b.log("Loaded  "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=i,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=W.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(p.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=W.IDLE,i.tparsed=i.tbuffered=performance.now(),n.initSegment.data=t.payload,this.hls.trigger(p.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.tick();else{this.state=W.PARSING;var o=n.totalduration,s=e.level,l=e.sn,d=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&&(g.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,g.b.log("Parsing "+l+" of ["+n.startSN+" ,"+n.endSN+"],level "+s+", cc "+e.cc);var u=this.demuxer;u||(u=this.demuxer=new H(this.hls,"main"));var h=this.media,f=!(h&&h.seeking)&&(n.PTSKnown||!n.live),c=n.initSegment?n.initSegment.data:[];u.push(t.payload,c,d,a.videoCodec,e,o,f,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===W.PARSING){var i,a,n=t.tracks;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(g.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",g.b.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=t.id}(a=n.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=t.id),this.hls.trigger(p.a.BUFFER_CODECS,n);for(i in n){a=n[i],g.b.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(p.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===W.PARSING){var a=this.levels[this.level],n=r;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),g.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(n.dropped=t.dropped,n.dropped)if(n.backtracked)g.b.warn("Already backtracked on this fragment, appending with the gap");else{var o=a.details;if(!o||n.sn!==o.startSN)return g.b.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=W.IDLE,this.fragPrevious=n,void this.tick();g.b.warn("missing video frame(s) on first frag, appending with gap")}else n.backtracked=!1;var s=d(a.details,n,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(p.a.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(r){r&&r.length&&e.state===W.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(p.a.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===W.PARSING&&(this.stats.tparsed=performance.now(),this.state=W.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){g.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(g.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=W.IDLE}var a=this.hls;a.trigger(p.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(p.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(g.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,i=void 0,a=!1;for(var n in e){var o=e[n];"main"===o.id?(i=n,r=o,"video"===n&&(this.videoBuffer=e[n].buffer)):a=!0}a&&r?(g.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==W.PARSING&&e!==W.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==W.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;g.b.log("main buffered : "+j.toString(e.buffered));var r=this._bufferedFrags.filter(function(t){return C.isBuffered(e,(t.startPTS+t.endPTS)/2)});r.push(t),this._bufferedFrags=r.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(p.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.state=W.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&C.isBuffered(this.media,this.media.currentTime)&&C.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,g.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=W.FRAG_LOADING_WAITING_RETRY}else g.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=W.ERROR;break;case v.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(r?(this._reduceMaxBufferLength(e.duration),this.state=W.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=W.ERROR));break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==W.ERROR&&(t.fatal?(this.state=W.ERROR,g.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==W.WAITING_LEVEL||(this.state=W.IDLE));break;case v.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==W.PARSING&&this.state!==W.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=W.IDLE):(g.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,g.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var r=t.currentTime,i=this.mediaBuffer?this.mediaBuffer:t,a=i.buffered;if(!this.loadedmetadata&&a.length){this.loadedmetadata=!0;var n=t.seeking?r:this.startPosition,o=C.isBuffered(i,n),s=a.start(0),l=!o&&Math.abs(n-s)<e.maxSeekHole;(r!==n||l)&&(g.b.log("target start position:"+n),l&&(n=s,g.b.log("target start position not buffered, seek to buffered.start(0) "+n)),g.b.log("adjust currentTime from "+r+" to "+n),t.currentTime=n)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var d=C.bufferInfo(t,r,0),u=!(t.paused||t.ended||0===t.buffered.length);if(r!==this.lastCurrentTime)this.stallReported&&(g.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(u){var h=performance.now(),f=this.hls;if(this.stalled){var c=h-this.stalled,m=d.len,y=this.nudgeRetry||0;if(m<=.5&&c>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,g.b.warn("playback stalling in low buffer @"+r),f.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:m}));var b=d.nextStart,E=b-r;if(b&&E<e.maxSeekHole&&E>0){this.nudgeRetry=++y;var R=y*e.nudgeOffset;g.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+b+" + nudge "+R),t.currentTime=b+R,this.stalled=void 0,f.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:b+R-r})}}else if(m>.5&&c>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,g.b.warn("playback stalling in high buffer @"+r),f.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:m})),this.stalled=void 0,this.nudgeRetry=++y,y<e.nudgeMaxRetry){var A=t.currentTime,T=A+y*e.nudgeOffset;g.b.log("adjust currentTime from "+A+" to "+T),t.currentTime=T,f.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else g.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),f.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=W.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return C.isBuffered(t,(e.startPTS+e.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=W.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},V(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,g.b.log("main stream:"+e+"->"+t),this.hls.trigger(p.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(y),Y=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),z=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MANIFEST_LOADED,p.a.LEVEL_LOADED,p.a.FRAG_LOADED,p.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],r=void 0,i={},n=null,o=!1,s=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===l&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),void 0===(n=i[t.bitrate])?(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,e.push(t)):n.url.push(t.url)}),!0===o&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||a(e))&&(!r||a(r))}),t.audioTracks&&(d=t.audioTracks.filter(function(t){return!t.audioCodec||a(t.audioCodec,"audio")})),e.length>0){r=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var u=0;u<e.length;u++)if(e[u].bitrate===r){this._firstLevel=u,g.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(p.a.MANIFEST_PARSED,{levels:e,audioTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:d.length>0})}else this.hls.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){g.b.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,r.trigger(p.a.LEVEL_SWITCH,i),r.trigger(p.a.LEVEL_SWITCHING,i)}var a=e[t],n=a.details;if(!n||!0===n.live){var o=a.urlId;r.trigger(p.a.LEVEL_LOADING,{url:a.url[o],level:t,id:o})}}else r.trigger(p.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(!0!==t.fatal){var e=!1,r=!1,i=void 0;switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.FRAG_LOOP_LOADING_ERROR:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:i=t.frag.level,r=!0;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case v.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,r)}else t.type===v.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.recoverLevel=function(t,e,r,i){var a=this,n=this.hls.config,o=t.details,s=this._levels[e],l=void 0,d=void 0,u=void 0;if(s.loadError++,s.fragmentError=i,!0===r){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return g.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);d=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},d),t.levelRetry=!0,this.levelRetryCount++,g.b.warn("level controller, "+o+", retry in "+d+" ms, current retry count is "+this.levelRetryCount)}!0!==r&&!0!==i||((l=s.url.length)>1&&s.loadError<l?(g.b.warn("level controller, "+o+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(u=0===e?this._levels.length-1:e-1,g.b.warn("level controller, "+o+": switch to "+u),this.hls.nextAutoLevel=this.currentLevelIndex=u):!0===i&&(g.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var i=this._levels[r];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var a=t.details;if(a.live){var n=1e3*(a.averagetargetduration?a.averagetargetduration:a.targetduration),o=i.details;o&&a.endSN===o.endSN&&(n/=2,g.b.log("same live playlist, reload twice faster")),n-=performance.now()-t.stats.trequest,n=Math.max(1e3,Math.round(n)),g.b.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},n)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&t.url.length>0&&(e=t.urlId,this.hls.trigger(p.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},Y(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(y),X=r(4),q=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MEDIA_ATTACHED,p.a.MEDIA_DETACHING,p.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){y.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var n=X.a.getID3Frames(r[a].data);if(n){var o=r[a].pts,s=a<r.length-1?r[a+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var l=0;l<n.length;l++){var d=n[l];if(!X.a.isTimeStampFrame(d)){var u=new i(o,s,"");u.value=d,this.id3Track.addCue(u)}}}}},e}(y),Q=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),J=function(){function t(e,r,i,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Q(r),this.fast_=new Q(i)}return t.prototype.sample=function(t,e){var r=8e3*e/(t=Math.max(t,this.minDelayMs_)),i=t/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),Z=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),$=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.FRAG_LOADING,p.a.FRAG_LOADED,p.a.FRAG_BUFFERED,p.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=r,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.clearTimer(),y.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,i=t.frag.level,a=r.levels[i].details.live,n=r.config,o=void 0,s=void 0;a?(o=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new J(r,s,o,n.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent,i=r.loader,a=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return g.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(e&&n&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var o=performance.now()-n.trequest,s=Math.abs(e.playbackRate);if(o>500*r.duration/s){var l=t.levels,d=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/o),u=l[r.level],h=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,f=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*h/8)),c=e.currentTime,v=(f-n.loaded)/d,m=(C.bufferInfo(e,c,t.config.maxBufferHole).end-c)/s;if(m<2*r.duration/s&&v>m){var y=void 0,b=void 0;for(b=r.level-1;b>a;b--){var E=l[b].realBitrate?Math.max(l[b].realBitrate,l[b].bitrate):l[b].bitrate;if((y=r.duration*E/(6.4*d))<m)break}y<v&&(g.b.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+v.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=b,this._bwEstimator.sample(o,n.loaded),i.abort(),this.clearTimer(),t.trigger(p.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,a=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:a},r.realBitrate=Math.round(8*i/a)}if(t.frag.bitrateTest){var n=t.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!(!0===e.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&e.tload!==e.tbuffered)){var i=e.tparsed-e.trequest;g.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,r,i,a,n,o,s,l){for(var d=a;d>=i;d--){var u=l[d].details,h=u?u.totalduration/u.fragments.length:e,f=!!u&&u.live,c=void 0;c=d<=t?o*r:s*r;var p=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,v=p*h/c;if(g.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(c)+"/"+p+"/"+h+"/"+n+"/"+v),c>p&&(!v||f&&!this.bitrateTestDelay||v<n))return d}return-1},Z(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,i=t.config,a=t.minAutoLevel,n=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,d=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(C.bufferInfo(n,l,i.maxBufferHole).end-l)/d,f=this._findBestLevel(o,s,u,a,e,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(f>=0)return f;g.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var c=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(c=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,g.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*c)+" ms"),p=v=1)}return f=this._findBestLevel(o,s,u,a,e,h+c,p,v,r),Math.max(f,0)}}]),e}(y),tt=s(),et=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MEDIA_ATTACHING,p.a.MEDIA_DETACHING,p.a.MANIFEST_PARSED,p.a.BUFFER_RESET,p.a.BUFFER_APPENDING,p.a.BUFFER_CODECS,p.a.BUFFER_EOS,p.a.BUFFER_FLUSHING,p.a.LEVEL_PTS_UPDATED,p.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){y.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-t.start)>.1){var a=i.updating;try{i.abort()}catch(t){a=!0,g.b.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(g.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.audio,i=0;t.altAudio&&(e||r)&&(i=(e?1:0)+(r?1:0),g.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new tt;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(r),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){g.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){g.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):g.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(p.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){g.b.log("media source opened"),this.hls.trigger(p.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){g.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){g.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;g.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0);this.hls.trigger(p.a.BUFFER_APPENDED,{parent:e,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){g.b.error("sourceBuffer error:",t),this.hls.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var i in t)if(!e[i]){var a=t[i],n=a.levelCodec||a.codec,o=a.container+";codecs="+n;g.b.log("creating sourceBuffer("+o+")");try{var s=e[i]=r.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:n,container:a.container},a.buffer=s}catch(t){g.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(p.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){g.b.error("sourceBuffer error:",t.event),this.hls.trigger(p.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var i in e)r&&i!==r||e[i].ended||(e[i].ended=!0,g.b.log(i+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){var i=t[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}g.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){g.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(g.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(g.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var i in r)e+=r[i].buffered.length}catch(t){g.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(p.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void g.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var a=e[i.type];a?a.updating?r.unshift(i):(a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){g.b.error("error while trying to append buffer:"+e.message),r.unshift(i);var n={type:v.b.MEDIA_ERROR,parent:i.parent};if(22===e.code)return this.segments=[],n.details=v.a.BUFFER_FULL_ERROR,n.fatal=!1,void t.trigger(p.a.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=v.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return g.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void t.trigger(p.a.ERROR,n);n.fatal=!1,t.trigger(p.a.ERROR,n)}}}},e.prototype.flushBuffer=function(t,e,r){var i,a,n,o,s,l,d=this.sourceBuffer;if(Object.keys(d).length){if(g.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var u in d)if(!r||u===r){if(i=d[u],i.ended=!1,i.updating)return g.b.warn("cannot flush, sb updating in progress"),!1;try{for(a=0;a<i.buffered.length;a++)if(n=i.buffered.start(a),o=i.buffered.end(a),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(n,t),l=Math.min(o,e)),Math.min(l,o)-s>.5)return this.flushBufferCounter++,g.b.log("flush "+u+" ["+s+","+l+"], of ["+n+","+o+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(t){g.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else g.b.warn("abort flushing too many retries");g.b.log("buffer flushed")}return!0},e}(y),rt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),it=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.FPS_DROP_LEVEL_CAPPING,p.a.MEDIA_ATTACHING,p.a.MANIFEST_PARSED))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var r=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,a){return e.isLevelAllowed(a,r.restrictedLevels)&&a<=t});return e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var i=t.length-1,a=0;a<t.length;a+=1){var n=t[a];if((n.width>=e||n.height>=r)&&function(t,e){return!e||t.width!==e.width||t.height!==e.height}(n,t[a+1])){i=a;break}}return i},rt(e,[{key:"mediaWidth",get:function(){var t=void 0,r=this.media;return r&&(t=r.width||r.clientWidth||r.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,r=this.media;return r&&(t=r.height||r.clientHeight||r.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(y),at=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,p.a.MEDIA_ATTACHING))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*n/a,l=this.hls;if(l.trigger(p.a.FPS_DROP,{currentDropped:n,currentDecoded:o,totalDroppedFrames:r}),s>0&&n>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;g.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(p.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(y),nt=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(r){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,i=this.stats,a=this.context,n=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===r){var o=e.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===a.responseType?(s=e.response,l=s.byteLength):(s=e.responseText,l=s.length),i.loaded=i.total=l;var d={url:e.responseURL,data:s};this.callbacks.onSuccess(d,i,a,e)}else i.retry>=n.maxRetry||o>=400&&o<499?(g.b.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:e.statusText},a,e)):(g.b.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),n.timeout)},t.prototype.loadtimeout=function(){g.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,e)},t}(),ot=(r(3),{autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:nt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:$,bufferController:et,capLevelController:it,fpsController:at,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),st=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),lt=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in r||(r[a]=i[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(g.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var n=this.observer=new N.a;n.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.emit.apply(n,[t,t].concat(r))},n.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[t].concat(r))},this.on=n.on.bind(n),this.off=n.off.bind(n),this.trigger=n.trigger.bind(n);var o=this.abrController=new r.abrController(this),s=new r.bufferController(this),l=new r.capLevelController(this),d=new r.fpsController(this),u=new x(this),h=new I(this),f=new k(this),c=new q(this),p=[this.levelController=new z(this),this.streamController=new K(this)],v=r.audioStreamController;v&&p.push(new v(this)),this.networkControllers=p;var m=[u,h,f,o,s,l,d,c];if(v=r.audioTrackController){var y=new v(this);this.audioTrackController=y,m.push(y)}if(v=r.subtitleTrackController){var b=new v(this);this.subtitleTrackController=b,m.push(b)}[r.subtitleStreamController,r.timelineController].forEach(function(t){t&&m.push(new t(e))}),this.coreComponents=m}return t.isSupported=function(){return function(){var t=s(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i}()},st(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return p.a}},{key:"ErrorTypes",get:function(){return v.b}},{key:"ErrorDetails",get:function(){return v.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:ot},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){g.b.log("destroy"),this.trigger(p.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){g.b.log("attachMedia"),this.media=t,this.trigger(p.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){g.b.log("detachMedia"),this.trigger(p.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=c.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),g.b.log("loadSource:"+t),this.url=t,this.trigger(p.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;g.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){g.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){g.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){g.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},st(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){g.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){g.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){g.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){g.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){g.b.log("set startLevel:"+t);-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){g.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,r=t.config.minAutoBitrate,i=e?e.length:0,a=0;a<i;a++)if((e[a].realBitrate?Math.max(e[a].realBitrate,e[a].bitrate):e[a].bitrate)>r)return a;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=lt},function(t,e,r){function i(t){var e=[],r=t.toString(),i=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return e;for(var a,n=i[1],o=new RegExp("(\\\\n|\\W)"+function(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}(n)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");a=o.exec(r);)e.push(a[3]);return e}function a(t,e){for(var r=[e],a=[],n={};r.length;){var o=r.pop();if(!n[o]&&t[o]){n[o]=!0,a.push(o);var s=i(t[o]);r=r.concat(s)}}return a}t.exports=function(t,e){e=e||{};var i=r.m,n=e.all?Object.keys(i):a(i,t),o="("+function(t){function e(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n.map(function(t){return JSON.stringify(t)+": "+i[t].toString()}).join(",")+"})(self);",s=new window.Blob([o],{type:"text/javascript"});if(e.bare)return s;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(l);return d.objectURL=l,d}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7),a=r(1),n=r(0),o=r(5),s=r.n(o);e.default=function(t){var e=new s.a;e.trigger=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.removeListener.apply(e,[t].concat(i))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new i.a(e,o.typeSupported,s,o.vendor);try{Object(n.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),e.on(a.a.FRAG_DECRYPTED,r),e.on(a.a.FRAG_PARSING_INIT_SEGMENT,r),e.on(a.a.FRAG_PARSED,r),e.on(a.a.ERROR,r),e.on(a.a.FRAG_PARSING_METADATA,r),e.on(a.a.FRAG_PARSING_USERDATA,r),e.on(a.a.INIT_PTS_FOUND,r),e.on(a.a.FRAG_PARSING_DATA,function(e,r){var i=[],a={event:e,data:r};r.data1&&(a.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),t.postMessage(a,i)})}}]).default});</script><script>this.define=this._backupDefine;</script><script>IMD.define("hls-helper",["hls-js"],e=>{const p=""!==document.createElement("video").canPlayType("application/x-mpegURL"),s=e.isSupported();return{hasHlsSupport:p||s,hasNativeHlsSupport:p,hasHlsJsSupport:s}});</script><script>IMD.define("url-fragment-helper",()=>{const e=()=>{return document.location.hash.substring(1).split("&").reduce((e,r)=>{let t=r.split("=");return e[t[0]]=t[1],e},{})};return{getAllParameters:e,getParameter:r=>e()[r]}});</script><script>IMD.define("locales-en",()=>({"general--off":"off","general--cancel":"Cancel","live-indicator--label":"LIVE","quality-control--quality-hls":"Auto","quality-control--quality-hd":"HD","quality-control--quality-sd":"SD","next-video-overlay--next-video-label":"Next video"}));</script><script>IMD.define("locales-de",()=>({"general--off":"aus","general--cancel":"Abbrechen","live-indicator--label":"LIVE","quality-control--quality-hls":"Auto","quality-control--quality-hd":"HD","quality-control--quality-sd":"SD","next-video-overlay--next-video-label":"Nchstes Video"}));</script><script>IMD.define("locales",["locales-en","locales-de"],(e,l)=>({en:e,de:l}));</script><custom-style><style is="custom-style">video-player{--set-foreground-color:{color:#fff;color:var(--foreground-color)};--set-accent-color-foreground:{color:#dd6112;color:var(--accent-color)};--set-accent-color-background:{background-color:#dd6112;background-color:var(--accent-color)};--set-font-color-on-accent-color:{color:#fff;color:var(--font-color-on-accent-color)};--set-background-color:{background-color:#424242;background-color:var(--background-color)};--set-secondary-background-color:{background-color:#6d6d6d;background-color:var(--secondary-background-color)};--transition-duration-200:{-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease};--transition-duration-600:{-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-ms-transition:all .6s ease;-o-transition:all .6s ease;transition:all .6s ease};--box-sizing-border-box:{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box};}</style></custom-style><dom-module id="global--style-module" assetpath="src/styling/"><template><style type="text/css">*{box-sizing:content-box}.-hidden{display:none!important}</style></template></dom-module><script>IMD.define("constants",()=>{const o={PLAYING:"PLAYING",PAUSED:"PAUSED",WAITING:"WAITING",FINISHED:"FINISHED"};return{VERSION:"1.3.2",PLAY_STATES:o,PLAYBACK_RATES:[.7,1,1.3,1.5,1.8,2],QUALITY_MODES:{HLS:"hls",HD:"hd",SD:"sd"},SYNC_INTERVAL:1,SYNC_DIFF_THRESHOLD:.5,SEEK_DIFF_THRESHOLD:1,PLAYING_EVENT_NAME:"videoPlaying",DEFAULT_STATE:{alreadyPlayed:!1,playState:o.PAUSED,position:0,bufferPosition:0,duration:0,trimStart:0,trimEnd:0,live:!1,liveSync:!0,livePosition:0,liveStartPosition:0,liveFragmentDuration:0,playbackRate:1,volume:1,muted:!1,fullscreen:!1,isChapterListShown:!1,captionLanguage:"off",showCaptions:!1,showInteractiveTranscript:!1,mobileSettingsMenuOpen:!1,fallbackStreamActive:!1},DEFAULT_CONFIGURATION:{streams:[],chapters:[],captions:[],slides:[],relatedVideos:[],initialState:{},videoPreload:!0,loadFontAwesome:!0,liveDvr:!1,theme:"dark-orange",language:"en",videoAlignment:"width",mobileMenu:!0},USER_PREFERENCES_KEYS:["quality","playbackRate","volume"],USER_PREFERNECES_STORAGE_KEY:"videoplayerUserPreferences",THEMES:{"dark-orange":{foregroundColor:"#FFFFFF",accentColor:"#DD6112",fontColorOnAccentColor:"#000000",backgroundColor:"#424242",secondaryBackgroundColor:"#6D6D6D"},"dark-yellow":{foregroundColor:"#FFFFFF",accentColor:"#F5A704",fontColorOnAccentColor:"#000000",backgroundColor:"#424242",secondaryBackgroundColor:"#6D6D6D"},"dark-blue":{foregroundColor:"#FFFFFF",accentColor:"#0B72B5",fontColorOnAccentColor:"#FFFFFF",backgroundColor:"#424242",secondaryBackgroundColor:"#6D6D6D"},"light-green":{foregroundColor:"#001C3B",accentColor:"#ABB324",fontColorOnAccentColor:"#000000",backgroundColor:"#FFFFFF",secondaryBackgroundColor:"#AAAAAA"},"dark-red":{foregroundColor:"#FFFFFF",accentColor:"#B10438",fontColorOnAccentColor:"#FFFFFF",backgroundColor:"#424242",secondaryBackgroundColor:"#6D6D6D"}},ANALYTICS_TOPICS:{VIDEO_SEEK:"video_seek",PLAY_PAUSE:"play_pause",VIDEO_PAUSE:"video_pause",VIDEO_PLAY:"video_play",VIDEO_FULLSCREEN:"video_fullscreen",VIDEO_CHANGE_SPEED:"video_change_speed",VIDEO_END:"video_end",VIDEO_CLOSE:"video_close",VIDEO_CHANGE_QUALITY:"video_change_quality",VIDEO_CHANGE_SIZE:"video_change_size",VIDEO_LANDSCAPE:"video_landscape",VIDEO_PORTRAIT:"video_portrait",VIDEO_SLIDE_CHANGE:"video_slide_change",VIDEO_SLIDE_SEEK:"video_slide_seek",VIDEO_SUBTITLE:"video_subtitle",VIDEO_SUBTITLE_CHANGE:"video_subtitle_change",VIDEO_TRANSCRIPT:"video_transcript",VIDEO_TRANSCRIPT_SEEK:"video_transcript_seek",VIDEO_CHAPTER:"video_chapter",VIDEO_CHAPTER_SEEK:"video_chapter_seek",VIDEO_TIME_CHANGE:"video_time_change",VIDEO_DUAL_STREAM_CHANGE:"video_dual_stream_change",VIDEO_VOLUME_CHANGE:"video_volume_change"},SECONDS_TO_NEXT_VIDEO:5}});</script><script>IMD.define("state-manager",["constants"],t=>{const{PLAY_STATES:e,PLAYBACK_RATES:i,QUALITY_MODES:s}=t;class a{constructor(t,e,i){this.videoPlayer=t,this.statePath=e,this.configurationPath=i,this.stickyTrimEnd=!0}get state(){return this.videoPlayer[this.statePath]}get configuration(){return this.videoPlayer[this.configurationPath]}setState(t,e){this.videoPlayer.set(this.statePath+"."+t,e)}play(){this.state.playState===e.FINISHED&&this.setPosition(this.state.trimStart),this.setPlayState(e.PLAYING)}pause(){this.setPlayState(e.PAUSED)}setPlayState(t,i=!0){if(!Object.values(e).includes(t))throw new RangeError(`Value must be in [${Object.values(e).toString()}].`);i&&(!this.state.live||t!==e.PLAYING||this.state.alreadyPlayed&&this.videoPlayer.configuration.liveDvr||this.setLiveSync(!0),t===e.FINISHED&&this.state.position!==this.state.trimEnd&&this.setPosition(this.state.trimEnd)),this.setState("playState",t),this.state.live&&this.state.playState===e.PAUSED&&this.setLiveSync(!1)}togglePlayPause(){switch(this.state.playState){case e.PAUSED:case e.FINISHED:this.play();break;case e.PLAYING:this.pause()}}setAlreadyPlayed(t=!0){this.setState("alreadyPlayed",t)}setPosition(t,i=!0){if(t<this.state.trimStart||this.state.trimEnd&&t>this.state.trimEnd)throw new RangeError("Value must be between 0 and duration of the video and within the trimmed range.");if(this.setState("position",t),this.state.live&&i){let t=this.state.livePosition-this.state.position<1;this.setLiveSync(t)}this.state.position===this.state.trimEnd&&this.state.trimEnd>0?this.setPlayState(e.FINISHED):this.state.playState===e.FINISHED&&this.setPlayState(e.PAUSED)}skipSeconds(t){let e=Math.max(this.state.trimStart,Math.min(this.state.position+t,this.state.trimEnd));this.setPosition(e)}setBufferPosition(t){if(t<0||this.state.duration&&t>this.state.duration)throw new RangeError("Value must be between 0 and duration of the video.");this.setState("bufferPosition",t)}setDuration(t){if(t<0)throw new RangeError("Value must be positive.");t===1/0?this.setLive(!0):this.state.duration===1/0&&this.setLive(!1),this.setState("duration",t),this.state.trimEnd&&!this.stickyTrimEnd||(this.trimEnd(t),this.stickyTrimEnd=!0)}trimStart(t){if(t<0||this.state.duration&&t>this.state.duration)throw new RangeError("Value must be between 0 and duration of the video.");this.setState("trimStart",t||0),(t&&void 0===this.state.position||this.state.position<t)&&this.setPosition(t,!1)}trimEnd(t){if(t<=0||this.state.duration&&t>this.state.duration)throw new RangeError("Value must be between 0 and duration of the video.");t?(this.setState("trimEnd",t),this.stickyTrimEnd=!1):this.state.duration&&(this.setState("trimEnd",this.state.duration),this.stickyTrimEnd=!0),t&&this.state.position>t&&this.setPosition(t,!1)}setPlaybackRate(t){if(!i.includes(t))throw new RangeError(`Value must be in [${i.toString()}].`);this.state.live||this.setState("playbackRate",t)}toggleMute(){this.state.muted?this.unmute():this.mute()}mute(){this.setState("muted",!0)}unmute(){this.setState("muted",!1)}setVolume(t){if(t<0||t>1)throw new RangeError("Value must be between 0 and 1.");0===t?this.mute():this.unmute(),this.setState("volume",t)}setAvailableQualities(t){this.setState("availableQualities",t)}setQuality(t){if(!this.state.availableQualities.includes(t))throw new Error("No stream in specified quality available.");this.setState("quality",t)}toggleFullscreen(){this.setFullscreen(!this.state.fullscreen)}setFullscreen(t){this.setState("fullscreen",t)}toggleIsChapterListShown(){this.setState("isChapterListShown",!this.state.isChapterListShown)}setInteractiveTranscriptVisibility(t){this.setState("showInteractiveTranscript",t)}setCaptionsVisibility(t){this.setState("showCaptions",t)}setCaptionLanguage(t){if(!this.configuration.captions||!this.configuration.captions.map(t=>t.language).includes(t))throw new Error("No captions in specified language available.");this.setState("captionLanguage",t)}setActiveCaptions(t){this.setState("activeCaptions",t)}setMobileSettingsMenuOpen(t){this.setState("mobileSettingsMenuOpen",t)}toggleFallbackStream(){this.state.fallbackStreamActive?this.setFallbackStreamActive(!1):this.setFallbackStreamActive(!0)}setFallbackStreamActive(t){this.setState("fallbackStreamActive",t)}setLive(t){t&&this.setPlaybackRate(1),this.setState("live",t)}setLiveSync(t){t&&this.state.livePosition-this.state.position>this.state.liveFragmentDuration&&this.setPosition(this.state.livePosition),this.setState("liveSync",t)}setLivePosition(t){if(t<0||this.state.duration&&t>this.state.duration)throw new RangeError("Value must be between 0 and duration of the stream.");this.setState("livePosition",t)}setLiveStartPosition(t){if(t<0||this.state.duration&&t>this.state.duration)throw new RangeError("Value must be between 0 and duration of the stream.");this.setState("liveStartPosition",t)}setLiveFragmentDuration(t){if(t<0)throw new RangeError("Value must be greater or equal 0.");this.setState("liveFragmentDuration",t)}}return a});</script><script>IMD.define("configuration-validator",()=>{class e{constructor(e){this._schema=e}validate(e){return this._validateSubSchema(e,this._schema)}_validateSubSchema(e,t,r=null){return this._checkForMissingOptions(e,t,r)&&this._validatePresentOptions(e,t,r)}_checkForMissingOptions(e,t,r){let i=Object.keys(e),s=Object.entries(t).filter(([e,t])=>t.required).map(([e,t])=>e).filter(e=>!i.includes(e));if(0===s.length)return!0;let n=Object.values(s).map(e=>this._getPropertyPath(r,e));return this._error(`The following options are required, but missing: ${JSON.stringify(n)}`),!1}_validatePresentOptions(e,t,r){let i=!0;for(let[s,n]of Object.entries(e)){let e=this._getPropertyPath(r,s);if(null==n)continue;if(!Object.keys(t).includes(s)){this._warn(`Option "${e}" is unknown and therefore ignored.`),i=!1;continue}let a=t[s].type,o=this._getType(n);if(a===o)if(!t[s].options||t[s].options.includes(n))if(t[s].min&&n<t[s].min)this._error(`Option "${e}" must be at least ${t[s].min}.`),i=!1;else if(t[s].max&&n>t[s].max)this._error(`Option "${e}" must be not greater than ${t[s].max}.`),i=!1;else if(!t[s].pattern||t[s].pattern.test(n)){if(t[s].schema)if("object"===t[s].type)i=this._validateSubSchema(n,t[s].schema,e)&&i;else if("array"===t[s].type)for(let r=0;r<n.length;r++)i=this._validateSubSchema(n[r],t[s].schema,`${e}[${r}]`)&&i}else this._error(`Option "${e}" has an invalid value.`),i=!1;else this._error(`Option "${e}" must be one of ${JSON.stringify(t[s].options)}.`),i=!1;else this._error(`Option "${e}" must be of type ${a}, but is ${o}.`),i=!1}return i}_getType(e){return Array.isArray(e)?"array":typeof e}_getPropertyPath(e,t){return e?`${e}.${t}`:t}_error(e){console.error(this._formatMessage(e))}_warn(e){console.warn(this._formatMessage(e))}_formatMessage(e){return`[video-player] Invalid configuration! ${e}`}}return e});</script><script>IMD.define("fullscreen-manager",()=>{class e{constructor(e){this.fullscreenElement=e,this.fullscreenChangedCallbacks=new Set,this._oldBodyPosition="",this.fullscreenElement.addEventListener("fullscreenchange",()=>{this._fullScreenChanged(document.fullscreen)}),this.fullscreenElement.addEventListener("webkitfullscreenchange",()=>{this._fullScreenChanged(document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",()=>{this._fullScreenChanged(document.mozFullScreen)}),this.fullscreenElement.addEventListener("msfullscreenchange",()=>{this._fullScreenChanged(document.msFullscreenElement)})}enterFullscreen(){this.fullscreenElement.requestFullscreen?this.fullscreenElement.requestFullscreen():this.fullscreenElement.mozRequestFullScreen?this.fullscreenElement.mozRequestFullScreen():this.fullscreenElement.webkitRequestFullScreen?this.fullscreenElement.webkitRequestFullScreen():this.fullscreenElement.msRequestFullscreen?this.fullscreenElement.msRequestFullscreen():(this.fullscreenElement.classList.add("fake-fullscreen"),this._oldBodyPosition=document.body.style.position,document.body.style.position="fixed")}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():(this.fullscreenElement.classList.remove("fake-fullscreen"),document.body.style.position=this._oldBodyPosition)}onFullscreenChanged(e){this.fullscreenChangedCallbacks.add(e)}offFullscreenChanged(e){this.fullscreenChangedCallbacks.delete(e)}_fullScreenChanged(e){for(let l of this.fullscreenChangedCallbacks)l(e)}}return e});</script><script>IMD.define("synchronization-manager",["constants"],e=>{const{PLAY_STATES:t,SYNC_INTERVAL:i,SYNC_DIFF_THRESHOLD:s}=e;class a{constructor(e){this._stateManager=e,this._videos=[],this._videosWaiting=new Set,this._videoBufferPositions=new Map,this._readyCallbacks=[],this._videoWaiting=this._videoWaiting.bind(this),this._videoSeeking=this._videoSeeking.bind(this),this._videoReady=this._videoReady.bind(this),this._videoProgress=this._videoProgress.bind(this),this._videoTimeUpdate=this._videoTimeUpdate.bind(this),this._videoEnded=this._videoEnded.bind(this),this._videoDurationChanged=this._videoDurationChanged.bind(this),this._syncVideos()}registerVideo(e){this._videos.push(e),e.addEventListener("waiting",this._videoWaiting),e.addEventListener("seeking",this._videoSeeking),e.addEventListener("canplay",this._videoReady),e.addEventListener("canplaythrough",this._videoReady),e.addEventListener("seeked",this._videoReady),e.addEventListener("progress",this._videoProgress),e.addEventListener("ended",this._videoEnded),e.addEventListener("timeupdate",this._videoTimeUpdate),e.addEventListener("durationchange",this._videoDurationChanged)}unregisterVideo(e){this._videos=this._videos.filter(t=>t!==e),this._videosWaiting.delete(e),e.removeEventListener("waiting",this._videoWaiting),e.removeEventListener("seeking",this._videoSeeking),e.removeEventListener("canplay",this._videoReady),e.removeEventListener("canplaythrough",this._videoReady),e.removeEventListener("seeked",this._videoReady),e.removeEventListener("progress",this._videoProgress),e.removeEventListener("ended",this._videoEnded),e.removeEventListener("timeupdate",this._videoTimeUpdate),e.removeEventListener("durationchange",this._videoDurationChanged)}onVideosReady(e,t=!1){this._readyCallbacks.push({callback:e,once:t})}isMaster(e){return 0===this._videos.indexOf(e)}_videoTimeUpdate(e){let t=e.target;this.isMaster(t)&&!this._anyWaiting()&&(this._stateManager.state.trimStart&&t.currentTime<this._stateManager.state.trimStart?this._stateManager.setPosition(this._stateManager.state.trimStart,!1):this._stateManager.state.trimEnd&&t.currentTime>this._stateManager.state.trimEnd?this._stateManager.setPosition(this._stateManager.state.trimEnd,!1):this._stateManager.setPosition(t.currentTime,!1))}_videoEnded(e){let i=e.target;this.isMaster(i)&&!this._anyWaiting()&&this._stateManager.setPlayState(t.FINISHED)}_videoDurationChanged(e){let t=e.target;this.isMaster(t)&&this._stateManager.setDuration(t.duration)}_syncVideos(){if(!this._anyWaiting()&&!this._stateManager.state.live){let e=this._videos[0];this._stateManager.state.playState===t.PAUSED?this._videos.forEach(t=>t.currentTime=e.currentTime):this._videos.filter(t=>Math.abs(t.currentTime-e.currentTime)>s).forEach(t=>{this.setWaiting(t),t.currentTime=e.currentTime})}setTimeout(()=>this._syncVideos(),1e3*i)}_anyWaiting(){return this._videosWaiting.size>0}_videoWaiting(e){this.setWaiting(e.target)}_videoSeeking(e){let t=e.target,i=e.target.currentTime;for(let e=0;e<t.buffered.length;e++)if(i>=t.buffered.start(e)&&i<t.buffered.end(e))return;this.setWaiting(t)}setWaiting(e){this._anyWaiting()||this._backupPlayState(),this._videosWaiting.add(e),this._stateManager.state.playState!==t.FINISHED&&this._stateManager.setPlayState(t.WAITING)}_videoReady(e){this._videosWaiting.delete(e.target)&&!this._anyWaiting()&&(this._restorePlayState(),this._readyCallbacks.forEach(e=>e.callback()),this._readyCallbacks=this._readyCallbacks.filter(e=>!e.once))}_videoProgress(e){let t=e.target;if(t.buffered.length>0){for(let e=t.buffered.length-1;e>=0;e--)if(t.buffered.start(e)<=t.currentTime){let i=t.buffered.end(e);this._videoBufferPositions.set(t,i);break}if(this._videoBufferPositions.size>0){let e=Math.min(...Array.from(this._videoBufferPositions.values()));this._stateManager.setBufferPosition(e)}}}_backupPlayState(){let e=this._stateManager.state.playState;e!==t.WAITING&&(this.backupPlayState=e)}_restorePlayState(){this.backupPlayState&&(this._stateManager.state.playState===t.WAITING&&this._stateManager.setPlayState(this.backupPlayState,!1),this.backupPlayState=null)}}return a});</script><script>IMD.define("user-preferences-manager",["constants"],e=>{const{USER_PREFERENCES_KEYS:r,USER_PREFERNECES_STORAGE_KEY:t}=e;class s{setPreferences(e){let r=Object.assign(this.getPreferences(),this._filterPreferences(e));window.localStorage.setItem(t,JSON.stringify(r))}getPreferences(){return JSON.parse(window.localStorage.getItem(t))||{}}_filterPreferences(e){return e=Object.assign({},e),Object.keys(e).filter(e=>!r.includes(e)).forEach(r=>delete e[r]),e}}return s});</script><script>IMD.define("analytics-manager",["constants"],e=>{const{ANALYTICS_TOPICS:t,PLAY_STATES:a}=e;class i{constructor(e,t){this.videoPlayer=e,this.stateManager=t,window.onunload=this._handleWindowUnload.bind(this),this._bindOrientationChange()}newEvent(e,t){let a=this._getBaseEventData();this._fireEvent(e.verb,a,{},t)}changeState(e,i,n){let s=this._getBaseEventData(),r={};switch(n.verb){case t.VIDEO_SEEK:r.oldCurrentTime=this.stateManager.state.position;break;case t.PLAY_PAUSE:r.verb=this.stateManager.state.playState===a.PLAYING?t.VIDEO_PAUSE:t.VIDEO_PLAY;break;case t.VIDEO_CHANGE_SPEED:r.oldCurrentSpeed=this.stateManager.state.playbackRate;break;case t.VIDEO_CHANGE_QUALITY:r.oldCurrentQuality=this.stateManager.state.quality;break;case t.VIDEO_SLIDE_SEEK:r.oldCurrentTime=this.stateManager.state.position,r.oldCurrentSlide=this._getActiveSlide();break;case t.VIDEO_TRANSCRIPT_SEEK:r.oldCurrentTime=this.stateManager.state.position,r.oldCurrentSubtitleIdentifier=this._getCueIdentifier(this._getActiveCue()),r.currentTranscriptLanguage=this.stateManager.state.captionLanguage;break;case t.VIDEO_CHAPTER_SEEK:r.oldCurrentTime=this.stateManager.state.position,r.oldCurrentChapter=this._getActiveChapter();break;case t.VIDEO_VOLUME_CHANGE:r.oldCurrentVolume=this.stateManager.state.volume,r.oldCurrentMuted=this.stateManager.state.muted}this.stateManager[e](...i);let o={};switch(n.verb){case t.VIDEO_SEEK:o.newCurrentTime=this.stateManager.state.position;break;case t.VIDEO_FULLSCREEN:o.newCurrentFullscreen=this._getFullscreenMode();break;case t.VIDEO_CHANGE_SPEED:o.newCurrentSpeed=this.stateManager.state.playbackRate;break;case t.VIDEO_CHANGE_QUALITY:o.newCurrentQuality=this.stateManager.state.quality;break;case t.VIDEO_SLIDE_SEEK:o.newCurrentTime=this.stateManager.state.position,o.newCurrentSlide=this._getActiveSlide();break;case t.VIDEO_TRANSCRIPT_SEEK:o.newCurrentTime=this.stateManager.state.position,o.newCurrentSubtitleIdentifier=this._getCueIdentifier(this._getActiveCue());break;case t.VIDEO_CHAPTER:o.currentChapterStatus=this.stateManager.state.isChapterListShown;break;case t.VIDEO_CHAPTER_SEEK:o.newCurrentTime=this.stateManager.state.position,o.newCurrentChapter=this._getActiveChapter();break;case t.VIDEO_DUAL_STREAM_CHANGE:o.newCurrentDualStreamStatus=this._getDualStreamStatus();break;case t.VIDEO_VOLUME_CHANGE:o.newCurrentVolume=this.stateManager.state.volume,o.newCurrentMuted=this.stateManager.state.muted}this._fireEvent(n.verb,s,r,o)}_fireEvent(e,t,a,i){let n={detail:Object.assign(t,{verb:e},a,i)},s=new CustomEvent("analytics",n);this.videoPlayer.dispatchEvent(s)}_getBaseEventData(){return{currentTime:this.stateManager.state.position,currentSpeed:this.stateManager.state.playbackRate,currentQuality:this.stateManager.state.quality,currentSource:"online",currentOrientation:window.screen.msOrientation||window.screen.orientation&&window.screen.orientation.type,currentSlide:this._getActiveSlide(),currentChapter:this._getActiveChapter(),currentFullscreen:this._getFullscreenMode()}}_getActiveChapter(){if(this.videoPlayer.configuration.chapters){return this.videoPlayer.configuration.chapters.slice().reverse().find(e=>e.startPosition<=this.stateManager.state.position)}}_getActiveSlide(){if(this.videoPlayer.configuration.slides){let e=this.videoPlayer.configuration.slides,t=e.slice().reverse().find(e=>e.startPosition<=this.stateManager.state.position);return t&&(t.slide_number=e.slice().indexOf(t)),t}}_getFullscreenMode(){return!0===this.stateManager.state.fullscreen}_handleWindowUnload(e){e.preventDefault();let a=this._getBaseEventData();this._fireEvent(t.VIDEO_CLOSE,a)}_handleOrientationChange(){let e=this._getBaseEventData(),a=(window.screen.msOrientation||window.screen.orientation.type).includes("landscape")?t.VIDEO_LANDSCAPE:t.VIDEO_PORTRAIT;this._fireEvent(a,e)}_getCueIdentifier(e){return e&&""!==e.id?e.id:this.stateManager.state.activeCaptions.findIndex(t=>Object.is(e,t))}_getActiveCue(){if(this.stateManager.state.activeCaptions)return this.stateManager.state.activeCaptions.slice().reverse().find(e=>e.startTime<=this.stateManager.state.position)}_getDualStreamStatus(){return this.stateManager.state.fallbackStreamActive?"fallback_stream":"dual_stream"}_bindOrientationChange(){window.screen.orientation&&window.screen.orientation.onchange?window.screen.orientation.onchange=this._handleOrientationChange.bind(this):window.orientationchange?window.orientationchange=this._handleOrientationChange.bind(this):window.screen.onmsorientationchange&&(window.onmsorientationchange=this._handleOrientationChange.bind(this))}}return i});</script><script>IMD.define("localizer",()=>{class a{constructor(a,e="en",s=!0){this._locales=a,this._language=e,this._fallbackLanguage=e,this._useKeyIfMissing=s,this._languageChangedCallbacks=[]}setLanguage(a){this._language=a,this._languageChangedCallbacks.forEach(e=>e(a))}onLanguageChanged(a){this._languageChangedCallbacks.push(a)}localize(a){return this._getMessage(a,this._language)||this._getMessage(a,this._fallbackLanguage)||this._getFallbackMessage(a)}_getMessage(a,e){if(!(a&&this._locales&&this._language&&this._locales[e]))return;let s=this._locales[e][a];return s||void 0}_getFallbackMessage(a){return this._useKeyIfMissing?a:""}}return a});</script><dom-module id="video-stream" assetpath="src/components/"><template><style type="text/css" include="global--style-module">#container__video_stream{position:relative;width:100%;height:auto;line-height:0}video{width:inherit;height:inherit}#container__poster_overlay{position:absolute;left:0;top:0;right:0;bottom:0;z-index:4}#image__poster{width:100%;height:100%}</style><div id="container__video_stream"><video id="video" preload$="[[ifThenElse(preload, 'auto', 'metadata')]]" on-click="_handleClick" on-loadedmetadata="_handleLoadedMetadata" playsinline="true"><template is="dom-repeat" items="[[captions]]"><track src="[[item.url]]" kind="subtitles" srclang="[[item.language]]" label="[[item.language]]" on-load="_handleTrackLoaded" default$="[[equals(state.captionLanguage, item.language)]]"></template></video><template is="dom-if" if="[[and(props.poster, _isPosterVisible)]]"><div id="container__poster_overlay"><img id="image__poster" src="[[props.poster]]" alt="Poster" on-click="_handleClick"></div></template></div></template><script>IMD.define("video-stream",["binding-helpers","ioc-requester","hls-helper","hls-js","constants"],(t,e,i,a,s)=>{const{PLAY_STATES:n,QUALITY_MODES:o,SEEK_DIFF_THRESHOLD:h,ANALYTICS_TOPICS:r}=s;class d extends(t(e(Polymer.Element))){static get is(){return"video-stream"}static get properties(){return{state:Object,props:Object,captions:Array,preload:{type:Boolean,value:!0},_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_synchronizationManager:{type:Object,inject:"SynchronizationManager"},_currentUrl:String,_isRegistered:{type:Boolean,value:!1},_isInitializingVideo:{type:Boolean,value:!0},_hlsClient:Object,_isPosterVisible:{type:Boolean,computed:"_getIsPosterVisible(state.playState, state.live, state.position, state.trimStart, state.trimEnd)"}}}static get observers(){return["_playStateChanged(state.playState)","_positionChanged(state.position)","_playbackRateChanged(state.playbackRate)","_volumeChanged(state.volume)","_mutedChanged(state.muted, props.muted)","_captionLanguageChanged(state.captionLanguage, _stateManager)","_qualityChanged(props, state.quality, _isRegistered)"]}servicesInjectedCallback(){super.servicesInjectedCallback(),this._synchronizationManager.registerVideo(this.$.video),this._isRegistered=!0,this._synchronizationManager.onVideosReady(()=>{this.state.live&&this.state.liveSync&&this._stateManager.setPosition(this.state.livePosition)})}disconnectedCallback(){super.disconnectedCallback(),this._synchronizationManager.unregisterVideo(this.$.video),this._isRegistered=!1,this.$.video.pause(),this.$.video.src="",this.$.video.load()}_getIsPosterVisible(t,e,i,a,s){return!this.state.alreadyPlayed||t===n.FINISHED||!e&&t===n.PAUSED&&(i===a||i===s)}_playStateChanged(t){if(this._isInitializingVideo)return;let e;t===n.PLAYING?e=this.$.video.play():!this.$.video.paused&&this.$.video.readyState>2&&(e=this.$.video.pause()),e&&e.catch(()=>{this.$.video.paused?this._stateManager.pause():this._stateManager.play()})}_positionChanged(t){if(!this._isInitializingVideo)return Math.abs(this.$.video.currentTime-t)>h&&(this.$.video.currentTime=t,!0)}_playbackRateChanged(t){this._isInitializingVideo||(this.$.video.playbackRate=t)}_volumeChanged(t){this._isInitializingVideo||(this.$.video.volume=t)}_mutedChanged(t){this.props.muted?this.$.video.muted=!0:this._isInitializingVideo||(this.$.video.muted=t)}_qualityChanged(t,e,s){if(!s)return;let n=!this.$.video.src;this._isInitializingVideo=!0,this._synchronizationManager.setWaiting(this.$.video),this._synchronizationManager.onVideosReady(()=>{this._isInitializingVideo=!1,this._applyState(n)},!0),this._hlsClient&&this._hlsClient.destroy();let h=t[e];i.hasNativeHlsSupport||e!==o.HLS?(this.$.video.setAttribute("src",h),this.$.video.load()):(this._hlsClient=new a({nudgeMaxRetry:20,fragLoadingMaxRetry:20,levelLoadingMaxRetry:20,manifestLoadingMaxRetry:20}),this._hlsClient.on(a.Events.LEVEL_LOADED,this._handleHlsLevelLoaded.bind(this)),this._hlsClient.on(a.Events.ERROR,(t,e)=>{if("manifestLoadError"!==e.details){if(e.fatal)switch(e.type){case a.ErrorTypes.NETWORK_ERROR:this._hlsClient.startLoad();break;case a.ErrorTypes.MEDIA_ERROR:this._hlsClient.recoverMediaError()}}else setTimeout(()=>{this._hlsClient.url===h&&this._hlsClient.loadSource(h)},2e3)}),this._hlsClient.loadSource(h),this._hlsClient.attachMedia(this.$.video))}_captionLanguageChanged(t){if(this.captions&&this._stateManager){"off"===t&&this._stateManager.setActiveCaptions(null);for(let e=0;e<this.$.video.textTracks.length;e++){let i=this.$.video.textTracks[e];i.language===t?(i.mode="showing",this._stateManager.setActiveCaptions(Array.from(i.cues)),i.mode="hidden"):i.mode="disabled"}}}_handleTrackLoaded(t){let e=t.target.track;e.language===this.state.captionLanguage&&this._stateManager.setActiveCaptions(Array.from(e.cues)),e.mode="hidden"}_handleClick(){this._analyticsManager.changeState("togglePlayPause",[],{verb:r.PLAY_PAUSE})}_handleLoadedMetadata(){this.dispatchEvent(new CustomEvent("loaded-video",{detail:{resolution:{height:this.$.video.videoHeight,width:this.$.video.videoWidth}}}))}_handleHlsLevelLoaded(t,e){if(this._synchronizationManager&&!this._synchronizationManager.isMaster(this.$.video))return;let i=e.details.live,a=this._stateManager.state.live;if(this._stateManager.setLive(i),!i)return void(a&&this._stateManager.setPlayState(n.FINISHED));let s=this._hlsClient.liveSyncPosition,o=e.details.fragments[0].start,h=e.details.totalduration,r=e.details.targetduration;if(!s){let t=this._hlsClient.config.liveSyncDurationCount*r;s=Math.max(0,h-t)}this._stateManager.setLivePosition(s),this._stateManager.setLiveFragmentDuration(r),this._stateManager.setLiveStartPosition(o)}_applyState(t){this.$.video.addEventListener("seeked",()=>this._playStateChanged(this.state.playState),{once:!0});let e=this._positionChanged(this.state.position);this._playbackRateChanged(this.state.playbackRate),this._volumeChanged(this.state.volume),this._mutedChanged(this.state.muted),e||this._playStateChanged(this.state.playState),t&&this.state.live&&this._stateManager.setLiveSync(!0)}}window.customElements.define(d.is,d)});</script></dom-module><dom-module id="font-awesome" assetpath="node_modules/polymer-font-awesome/dist/"><template><style>/*!
 *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scale(1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:"\f000"}.fa-music:before{content:"\f001"}.fa-search:before{content:"\f002"}.fa-envelope-o:before{content:"\f003"}.fa-heart:before{content:"\f004"}.fa-star:before{content:"\f005"}.fa-star-o:before{content:"\f006"}.fa-user:before{content:"\f007"}.fa-film:before{content:"\f008"}.fa-th-large:before{content:"\f009"}.fa-th:before{content:"\f00a"}.fa-th-list:before{content:"\f00b"}.fa-check:before{content:"\f00c"}.fa-close:before,.fa-remove:before,.fa-times:before{content:"\f00d"}.fa-search-plus:before{content:"\f00e"}.fa-search-minus:before{content:"\f010"}.fa-power-off:before{content:"\f011"}.fa-signal:before{content:"\f012"}.fa-cog:before,.fa-gear:before{content:"\f013"}.fa-trash-o:before{content:"\f014"}.fa-home:before{content:"\f015"}.fa-file-o:before{content:"\f016"}.fa-clock-o:before{content:"\f017"}.fa-road:before{content:"\f018"}.fa-download:before{content:"\f019"}.fa-arrow-circle-o-down:before{content:"\f01a"}.fa-arrow-circle-o-up:before{content:"\f01b"}.fa-inbox:before{content:"\f01c"}.fa-play-circle-o:before{content:"\f01d"}.fa-repeat:before,.fa-rotate-right:before{content:"\f01e"}.fa-refresh:before{content:"\f021"}.fa-list-alt:before{content:"\f022"}.fa-lock:before{content:"\f023"}.fa-flag:before{content:"\f024"}.fa-headphones:before{content:"\f025"}.fa-volume-off:before{content:"\f026"}.fa-volume-down:before{content:"\f027"}.fa-volume-up:before{content:"\f028"}.fa-qrcode:before{content:"\f029"}.fa-barcode:before{content:"\f02a"}.fa-tag:before{content:"\f02b"}.fa-tags:before{content:"\f02c"}.fa-book:before{content:"\f02d"}.fa-bookmark:before{content:"\f02e"}.fa-print:before{content:"\f02f"}.fa-camera:before{content:"\f030"}.fa-font:before{content:"\f031"}.fa-bold:before{content:"\f032"}.fa-italic:before{content:"\f033"}.fa-text-height:before{content:"\f034"}.fa-text-width:before{content:"\f035"}.fa-align-left:before{content:"\f036"}.fa-align-center:before{content:"\f037"}.fa-align-right:before{content:"\f038"}.fa-align-justify:before{content:"\f039"}.fa-list:before{content:"\f03a"}.fa-dedent:before,.fa-outdent:before{content:"\f03b"}.fa-indent:before{content:"\f03c"}.fa-video-camera:before{content:"\f03d"}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:"\f03e"}.fa-pencil:before{content:"\f040"}.fa-map-marker:before{content:"\f041"}.fa-adjust:before{content:"\f042"}.fa-tint:before{content:"\f043"}.fa-edit:before,.fa-pencil-square-o:before{content:"\f044"}.fa-share-square-o:before{content:"\f045"}.fa-check-square-o:before{content:"\f046"}.fa-arrows:before{content:"\f047"}.fa-step-backward:before{content:"\f048"}.fa-fast-backward:before{content:"\f049"}.fa-backward:before{content:"\f04a"}.fa-play:before{content:"\f04b"}.fa-pause:before{content:"\f04c"}.fa-stop:before{content:"\f04d"}.fa-forward:before{content:"\f04e"}.fa-fast-forward:before{content:"\f050"}.fa-step-forward:before{content:"\f051"}.fa-eject:before{content:"\f052"}.fa-chevron-left:before{content:"\f053"}.fa-chevron-right:before{content:"\f054"}.fa-plus-circle:before{content:"\f055"}.fa-minus-circle:before{content:"\f056"}.fa-times-circle:before{content:"\f057"}.fa-check-circle:before{content:"\f058"}.fa-question-circle:before{content:"\f059"}.fa-info-circle:before{content:"\f05a"}.fa-crosshairs:before{content:"\f05b"}.fa-times-circle-o:before{content:"\f05c"}.fa-check-circle-o:before{content:"\f05d"}.fa-ban:before{content:"\f05e"}.fa-arrow-left:before{content:"\f060"}.fa-arrow-right:before{content:"\f061"}.fa-arrow-up:before{content:"\f062"}.fa-arrow-down:before{content:"\f063"}.fa-mail-forward:before,.fa-share:before{content:"\f064"}.fa-expand:before{content:"\f065"}.fa-compress:before{content:"\f066"}.fa-plus:before{content:"\f067"}.fa-minus:before{content:"\f068"}.fa-asterisk:before{content:"\f069"}.fa-exclamation-circle:before{content:"\f06a"}.fa-gift:before{content:"\f06b"}.fa-leaf:before{content:"\f06c"}.fa-fire:before{content:"\f06d"}.fa-eye:before{content:"\f06e"}.fa-eye-slash:before{content:"\f070"}.fa-exclamation-triangle:before,.fa-warning:before{content:"\f071"}.fa-plane:before{content:"\f072"}.fa-calendar:before{content:"\f073"}.fa-random:before{content:"\f074"}.fa-comment:before{content:"\f075"}.fa-magnet:before{content:"\f076"}.fa-chevron-up:before{content:"\f077"}.fa-chevron-down:before{content:"\f078"}.fa-retweet:before{content:"\f079"}.fa-shopping-cart:before{content:"\f07a"}.fa-folder:before{content:"\f07b"}.fa-folder-open:before{content:"\f07c"}.fa-arrows-v:before{content:"\f07d"}.fa-arrows-h:before{content:"\f07e"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:"\f080"}.fa-twitter-square:before{content:"\f081"}.fa-facebook-square:before{content:"\f082"}.fa-camera-retro:before{content:"\f083"}.fa-key:before{content:"\f084"}.fa-cogs:before,.fa-gears:before{content:"\f085"}.fa-comments:before{content:"\f086"}.fa-thumbs-o-up:before{content:"\f087"}.fa-thumbs-o-down:before{content:"\f088"}.fa-star-half:before{content:"\f089"}.fa-heart-o:before{content:"\f08a"}.fa-sign-out:before{content:"\f08b"}.fa-linkedin-square:before{content:"\f08c"}.fa-thumb-tack:before{content:"\f08d"}.fa-external-link:before{content:"\f08e"}.fa-sign-in:before{content:"\f090"}.fa-trophy:before{content:"\f091"}.fa-github-square:before{content:"\f092"}.fa-upload:before{content:"\f093"}.fa-lemon-o:before{content:"\f094"}.fa-phone:before{content:"\f095"}.fa-square-o:before{content:"\f096"}.fa-bookmark-o:before{content:"\f097"}.fa-phone-square:before{content:"\f098"}.fa-twitter:before{content:"\f099"}.fa-facebook-f:before,.fa-facebook:before{content:"\f09a"}.fa-github:before{content:"\f09b"}.fa-unlock:before{content:"\f09c"}.fa-credit-card:before{content:"\f09d"}.fa-feed:before,.fa-rss:before{content:"\f09e"}.fa-hdd-o:before{content:"\f0a0"}.fa-bullhorn:before{content:"\f0a1"}.fa-bell:before{content:"\f0f3"}.fa-certificate:before{content:"\f0a3"}.fa-hand-o-right:before{content:"\f0a4"}.fa-hand-o-left:before{content:"\f0a5"}.fa-hand-o-up:before{content:"\f0a6"}.fa-hand-o-down:before{content:"\f0a7"}.fa-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-circle-down:before{content:"\f0ab"}.fa-globe:before{content:"\f0ac"}.fa-wrench:before{content:"\f0ad"}.fa-tasks:before{content:"\f0ae"}.fa-filter:before{content:"\f0b0"}.fa-briefcase:before{content:"\f0b1"}.fa-arrows-alt:before{content:"\f0b2"}.fa-group:before,.fa-users:before{content:"\f0c0"}.fa-chain:before,.fa-link:before{content:"\f0c1"}.fa-cloud:before{content:"\f0c2"}.fa-flask:before{content:"\f0c3"}.fa-cut:before,.fa-scissors:before{content:"\f0c4"}.fa-copy:before,.fa-files-o:before{content:"\f0c5"}.fa-paperclip:before{content:"\f0c6"}.fa-floppy-o:before,.fa-save:before{content:"\f0c7"}.fa-square:before{content:"\f0c8"}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:"\f0c9"}.fa-list-ul:before{content:"\f0ca"}.fa-list-ol:before{content:"\f0cb"}.fa-strikethrough:before{content:"\f0cc"}.fa-underline:before{content:"\f0cd"}.fa-table:before{content:"\f0ce"}.fa-magic:before{content:"\f0d0"}.fa-truck:before{content:"\f0d1"}.fa-pinterest:before{content:"\f0d2"}.fa-pinterest-square:before{content:"\f0d3"}.fa-google-plus-square:before{content:"\f0d4"}.fa-google-plus:before{content:"\f0d5"}.fa-money:before{content:"\f0d6"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-up:before{content:"\f0d8"}.fa-caret-left:before{content:"\f0d9"}.fa-caret-right:before{content:"\f0da"}.fa-columns:before{content:"\f0db"}.fa-sort:before,.fa-unsorted:before{content:"\f0dc"}.fa-sort-desc:before,.fa-sort-down:before{content:"\f0dd"}.fa-sort-asc:before,.fa-sort-up:before{content:"\f0de"}.fa-envelope:before{content:"\f0e0"}.fa-linkedin:before{content:"\f0e1"}.fa-rotate-left:before,.fa-undo:before{content:"\f0e2"}.fa-gavel:before,.fa-legal:before{content:"\f0e3"}.fa-dashboard:before,.fa-tachometer:before{content:"\f0e4"}.fa-comment-o:before{content:"\f0e5"}.fa-comments-o:before{content:"\f0e6"}.fa-bolt:before,.fa-flash:before{content:"\f0e7"}.fa-sitemap:before{content:"\f0e8"}.fa-umbrella:before{content:"\f0e9"}.fa-clipboard:before,.fa-paste:before{content:"\f0ea"}.fa-lightbulb-o:before{content:"\f0eb"}.fa-exchange:before{content:"\f0ec"}.fa-cloud-download:before{content:"\f0ed"}.fa-cloud-upload:before{content:"\f0ee"}.fa-user-md:before{content:"\f0f0"}.fa-stethoscope:before{content:"\f0f1"}.fa-suitcase:before{content:"\f0f2"}.fa-bell-o:before{content:"\f0a2"}.fa-coffee:before{content:"\f0f4"}.fa-cutlery:before{content:"\f0f5"}.fa-file-text-o:before{content:"\f0f6"}.fa-building-o:before{content:"\f0f7"}.fa-hospital-o:before{content:"\f0f8"}.fa-ambulance:before{content:"\f0f9"}.fa-medkit:before{content:"\f0fa"}.fa-fighter-jet:before{content:"\f0fb"}.fa-beer:before{content:"\f0fc"}.fa-h-square:before{content:"\f0fd"}.fa-plus-square:before{content:"\f0fe"}.fa-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before{content:"\f102"}.fa-angle-double-down:before{content:"\f103"}.fa-angle-left:before{content:"\f104"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-angle-down:before{content:"\f107"}.fa-desktop:before{content:"\f108"}.fa-laptop:before{content:"\f109"}.fa-tablet:before{content:"\f10a"}.fa-mobile-phone:before,.fa-mobile:before{content:"\f10b"}.fa-circle-o:before{content:"\f10c"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-spinner:before{content:"\f110"}.fa-circle:before{content:"\f111"}.fa-mail-reply:before,.fa-reply:before{content:"\f112"}.fa-github-alt:before{content:"\f113"}.fa-folder-o:before{content:"\f114"}.fa-folder-open-o:before{content:"\f115"}.fa-smile-o:before{content:"\f118"}.fa-frown-o:before{content:"\f119"}.fa-meh-o:before{content:"\f11a"}.fa-gamepad:before{content:"\f11b"}.fa-keyboard-o:before{content:"\f11c"}.fa-flag-o:before{content:"\f11d"}.fa-flag-checkered:before{content:"\f11e"}.fa-terminal:before{content:"\f120"}.fa-code:before{content:"\f121"}.fa-mail-reply-all:before,.fa-reply-all:before{content:"\f122"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:"\f123"}.fa-location-arrow:before{content:"\f124"}.fa-crop:before{content:"\f125"}.fa-code-fork:before{content:"\f126"}.fa-chain-broken:before,.fa-unlink:before{content:"\f127"}.fa-question:before{content:"\f128"}.fa-info:before{content:"\f129"}.fa-exclamation:before{content:"\f12a"}.fa-superscript:before{content:"\f12b"}.fa-subscript:before{content:"\f12c"}.fa-eraser:before{content:"\f12d"}.fa-puzzle-piece:before{content:"\f12e"}.fa-microphone:before{content:"\f130"}.fa-microphone-slash:before{content:"\f131"}.fa-shield:before{content:"\f132"}.fa-calendar-o:before{content:"\f133"}.fa-fire-extinguisher:before{content:"\f134"}.fa-rocket:before{content:"\f135"}.fa-maxcdn:before{content:"\f136"}.fa-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before{content:"\f139"}.fa-chevron-circle-down:before{content:"\f13a"}.fa-html5:before{content:"\f13b"}.fa-css3:before{content:"\f13c"}.fa-anchor:before{content:"\f13d"}.fa-unlock-alt:before{content:"\f13e"}.fa-bullseye:before{content:"\f140"}.fa-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before{content:"\f142"}.fa-rss-square:before{content:"\f143"}.fa-play-circle:before{content:"\f144"}.fa-ticket:before{content:"\f145"}.fa-minus-square:before{content:"\f146"}.fa-minus-square-o:before{content:"\f147"}.fa-level-up:before{content:"\f148"}.fa-level-down:before{content:"\f149"}.fa-check-square:before{content:"\f14a"}.fa-pencil-square:before{content:"\f14b"}.fa-external-link-square:before{content:"\f14c"}.fa-share-square:before{content:"\f14d"}.fa-compass:before{content:"\f14e"}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:"\f150"}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:"\f151"}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:"\f152"}.fa-eur:before,.fa-euro:before{content:"\f153"}.fa-gbp:before{content:"\f154"}.fa-dollar:before,.fa-usd:before{content:"\f155"}.fa-inr:before,.fa-rupee:before{content:"\f156"}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:"\f157"}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:"\f158"}.fa-krw:before,.fa-won:before{content:"\f159"}.fa-bitcoin:before,.fa-btc:before{content:"\f15a"}.fa-file:before{content:"\f15b"}.fa-file-text:before{content:"\f15c"}.fa-sort-alpha-asc:before{content:"\f15d"}.fa-sort-alpha-desc:before{content:"\f15e"}.fa-sort-amount-asc:before{content:"\f160"}.fa-sort-amount-desc:before{content:"\f161"}.fa-sort-numeric-asc:before{content:"\f162"}.fa-sort-numeric-desc:before{content:"\f163"}.fa-thumbs-up:before{content:"\f164"}.fa-thumbs-down:before{content:"\f165"}.fa-youtube-square:before{content:"\f166"}.fa-youtube:before{content:"\f167"}.fa-xing:before{content:"\f168"}.fa-xing-square:before{content:"\f169"}.fa-youtube-play:before{content:"\f16a"}.fa-dropbox:before{content:"\f16b"}.fa-stack-overflow:before{content:"\f16c"}.fa-instagram:before{content:"\f16d"}.fa-flickr:before{content:"\f16e"}.fa-adn:before{content:"\f170"}.fa-bitbucket:before{content:"\f171"}.fa-bitbucket-square:before{content:"\f172"}.fa-tumblr:before{content:"\f173"}.fa-tumblr-square:before{content:"\f174"}.fa-long-arrow-down:before{content:"\f175"}.fa-long-arrow-up:before{content:"\f176"}.fa-long-arrow-left:before{content:"\f177"}.fa-long-arrow-right:before{content:"\f178"}.fa-apple:before{content:"\f179"}.fa-windows:before{content:"\f17a"}.fa-android:before{content:"\f17b"}.fa-linux:before{content:"\f17c"}.fa-dribbble:before{content:"\f17d"}.fa-skype:before{content:"\f17e"}.fa-foursquare:before{content:"\f180"}.fa-trello:before{content:"\f181"}.fa-female:before{content:"\f182"}.fa-male:before{content:"\f183"}.fa-gittip:before,.fa-gratipay:before{content:"\f184"}.fa-sun-o:before{content:"\f185"}.fa-moon-o:before{content:"\f186"}.fa-archive:before{content:"\f187"}.fa-bug:before{content:"\f188"}.fa-vk:before{content:"\f189"}.fa-weibo:before{content:"\f18a"}.fa-renren:before{content:"\f18b"}.fa-pagelines:before{content:"\f18c"}.fa-stack-exchange:before{content:"\f18d"}.fa-arrow-circle-o-right:before{content:"\f18e"}.fa-arrow-circle-o-left:before{content:"\f190"}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:"\f191"}.fa-dot-circle-o:before{content:"\f192"}.fa-wheelchair:before{content:"\f193"}.fa-vimeo-square:before{content:"\f194"}.fa-try:before,.fa-turkish-lira:before{content:"\f195"}.fa-plus-square-o:before{content:"\f196"}.fa-space-shuttle:before{content:"\f197"}.fa-slack:before{content:"\f198"}.fa-envelope-square:before{content:"\f199"}.fa-wordpress:before{content:"\f19a"}.fa-openid:before{content:"\f19b"}.fa-bank:before,.fa-institution:before,.fa-university:before{content:"\f19c"}.fa-graduation-cap:before,.fa-mortar-board:before{content:"\f19d"}.fa-yahoo:before{content:"\f19e"}.fa-google:before{content:"\f1a0"}.fa-reddit:before{content:"\f1a1"}.fa-reddit-square:before{content:"\f1a2"}.fa-stumbleupon-circle:before{content:"\f1a3"}.fa-stumbleupon:before{content:"\f1a4"}.fa-delicious:before{content:"\f1a5"}.fa-digg:before{content:"\f1a6"}.fa-pied-piper-pp:before{content:"\f1a7"}.fa-pied-piper-alt:before{content:"\f1a8"}.fa-drupal:before{content:"\f1a9"}.fa-joomla:before{content:"\f1aa"}.fa-language:before{content:"\f1ab"}.fa-fax:before{content:"\f1ac"}.fa-building:before{content:"\f1ad"}.fa-child:before{content:"\f1ae"}.fa-paw:before{content:"\f1b0"}.fa-spoon:before{content:"\f1b1"}.fa-cube:before{content:"\f1b2"}.fa-cubes:before{content:"\f1b3"}.fa-behance:before{content:"\f1b4"}.fa-behance-square:before{content:"\f1b5"}.fa-steam:before{content:"\f1b6"}.fa-steam-square:before{content:"\f1b7"}.fa-recycle:before{content:"\f1b8"}.fa-automobile:before,.fa-car:before{content:"\f1b9"}.fa-cab:before,.fa-taxi:before{content:"\f1ba"}.fa-tree:before{content:"\f1bb"}.fa-spotify:before{content:"\f1bc"}.fa-deviantart:before{content:"\f1bd"}.fa-soundcloud:before{content:"\f1be"}.fa-database:before{content:"\f1c0"}.fa-file-pdf-o:before{content:"\f1c1"}.fa-file-word-o:before{content:"\f1c2"}.fa-file-excel-o:before{content:"\f1c3"}.fa-file-powerpoint-o:before{content:"\f1c4"}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:"\f1c5"}.fa-file-archive-o:before,.fa-file-zip-o:before{content:"\f1c6"}.fa-file-audio-o:before,.fa-file-sound-o:before{content:"\f1c7"}.fa-file-movie-o:before,.fa-file-video-o:before{content:"\f1c8"}.fa-file-code-o:before{content:"\f1c9"}.fa-vine:before{content:"\f1ca"}.fa-codepen:before{content:"\f1cb"}.fa-jsfiddle:before{content:"\f1cc"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:"\f1cd"}.fa-circle-o-notch:before{content:"\f1ce"}.fa-ra:before,.fa-rebel:before,.fa-resistance:before{content:"\f1d0"}.fa-empire:before,.fa-ge:before{content:"\f1d1"}.fa-git-square:before{content:"\f1d2"}.fa-git:before{content:"\f1d3"}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:"\f1d4"}.fa-tencent-weibo:before{content:"\f1d5"}.fa-qq:before{content:"\f1d6"}.fa-wechat:before,.fa-weixin:before{content:"\f1d7"}.fa-paper-plane:before,.fa-send:before{content:"\f1d8"}.fa-paper-plane-o:before,.fa-send-o:before{content:"\f1d9"}.fa-history:before{content:"\f1da"}.fa-circle-thin:before{content:"\f1db"}.fa-header:before{content:"\f1dc"}.fa-paragraph:before{content:"\f1dd"}.fa-sliders:before{content:"\f1de"}.fa-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before{content:"\f1e1"}.fa-bomb:before{content:"\f1e2"}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:"\f1e3"}.fa-tty:before{content:"\f1e4"}.fa-binoculars:before{content:"\f1e5"}.fa-plug:before{content:"\f1e6"}.fa-slideshare:before{content:"\f1e7"}.fa-twitch:before{content:"\f1e8"}.fa-yelp:before{content:"\f1e9"}.fa-newspaper-o:before{content:"\f1ea"}.fa-wifi:before{content:"\f1eb"}.fa-calculator:before{content:"\f1ec"}.fa-paypal:before{content:"\f1ed"}.fa-google-wallet:before{content:"\f1ee"}.fa-cc-visa:before{content:"\f1f0"}.fa-cc-mastercard:before{content:"\f1f1"}.fa-cc-discover:before{content:"\f1f2"}.fa-cc-amex:before{content:"\f1f3"}.fa-cc-paypal:before{content:"\f1f4"}.fa-cc-stripe:before{content:"\f1f5"}.fa-bell-slash:before{content:"\f1f6"}.fa-bell-slash-o:before{content:"\f1f7"}.fa-trash:before{content:"\f1f8"}.fa-copyright:before{content:"\f1f9"}.fa-at:before{content:"\f1fa"}.fa-eyedropper:before{content:"\f1fb"}.fa-paint-brush:before{content:"\f1fc"}.fa-birthday-cake:before{content:"\f1fd"}.fa-area-chart:before{content:"\f1fe"}.fa-pie-chart:before{content:"\f200"}.fa-line-chart:before{content:"\f201"}.fa-lastfm:before{content:"\f202"}.fa-lastfm-square:before{content:"\f203"}.fa-toggle-off:before{content:"\f204"}.fa-toggle-on:before{content:"\f205"}.fa-bicycle:before{content:"\f206"}.fa-bus:before{content:"\f207"}.fa-ioxhost:before{content:"\f208"}.fa-angellist:before{content:"\f209"}.fa-cc:before{content:"\f20a"}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:"\f20b"}.fa-meanpath:before{content:"\f20c"}.fa-buysellads:before{content:"\f20d"}.fa-connectdevelop:before{content:"\f20e"}.fa-dashcube:before{content:"\f210"}.fa-forumbee:before{content:"\f211"}.fa-leanpub:before{content:"\f212"}.fa-sellsy:before{content:"\f213"}.fa-shirtsinbulk:before{content:"\f214"}.fa-simplybuilt:before{content:"\f215"}.fa-skyatlas:before{content:"\f216"}.fa-cart-plus:before{content:"\f217"}.fa-cart-arrow-down:before{content:"\f218"}.fa-diamond:before{content:"\f219"}.fa-ship:before{content:"\f21a"}.fa-user-secret:before{content:"\f21b"}.fa-motorcycle:before{content:"\f21c"}.fa-street-view:before{content:"\f21d"}.fa-heartbeat:before{content:"\f21e"}.fa-venus:before{content:"\f221"}.fa-mars:before{content:"\f222"}.fa-mercury:before{content:"\f223"}.fa-intersex:before,.fa-transgender:before{content:"\f224"}.fa-transgender-alt:before{content:"\f225"}.fa-venus-double:before{content:"\f226"}.fa-mars-double:before{content:"\f227"}.fa-venus-mars:before{content:"\f228"}.fa-mars-stroke:before{content:"\f229"}.fa-mars-stroke-v:before{content:"\f22a"}.fa-mars-stroke-h:before{content:"\f22b"}.fa-neuter:before{content:"\f22c"}.fa-genderless:before{content:"\f22d"}.fa-facebook-official:before{content:"\f230"}.fa-pinterest-p:before{content:"\f231"}.fa-whatsapp:before{content:"\f232"}.fa-server:before{content:"\f233"}.fa-user-plus:before{content:"\f234"}.fa-user-times:before{content:"\f235"}.fa-bed:before,.fa-hotel:before{content:"\f236"}.fa-viacoin:before{content:"\f237"}.fa-train:before{content:"\f238"}.fa-subway:before{content:"\f239"}.fa-medium:before{content:"\f23a"}.fa-y-combinator:before,.fa-yc:before{content:"\f23b"}.fa-optin-monster:before{content:"\f23c"}.fa-opencart:before{content:"\f23d"}.fa-expeditedssl:before{content:"\f23e"}.fa-battery-4:before,.fa-battery-full:before,.fa-battery:before{content:"\f240"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:"\f241"}.fa-battery-2:before,.fa-battery-half:before{content:"\f242"}.fa-battery-1:before,.fa-battery-quarter:before{content:"\f243"}.fa-battery-0:before,.fa-battery-empty:before{content:"\f244"}.fa-mouse-pointer:before{content:"\f245"}.fa-i-cursor:before{content:"\f246"}.fa-object-group:before{content:"\f247"}.fa-object-ungroup:before{content:"\f248"}.fa-sticky-note:before{content:"\f249"}.fa-sticky-note-o:before{content:"\f24a"}.fa-cc-jcb:before{content:"\f24b"}.fa-cc-diners-club:before{content:"\f24c"}.fa-clone:before{content:"\f24d"}.fa-balance-scale:before{content:"\f24e"}.fa-hourglass-o:before{content:"\f250"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:"\f251"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:"\f252"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:"\f253"}.fa-hourglass:before{content:"\f254"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:"\f255"}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:"\f256"}.fa-hand-scissors-o:before{content:"\f257"}.fa-hand-lizard-o:before{content:"\f258"}.fa-hand-spock-o:before{content:"\f259"}.fa-hand-pointer-o:before{content:"\f25a"}.fa-hand-peace-o:before{content:"\f25b"}.fa-trademark:before{content:"\f25c"}.fa-registered:before{content:"\f25d"}.fa-creative-commons:before{content:"\f25e"}.fa-gg:before{content:"\f260"}.fa-gg-circle:before{content:"\f261"}.fa-tripadvisor:before{content:"\f262"}.fa-odnoklassniki:before{content:"\f263"}.fa-odnoklassniki-square:before{content:"\f264"}.fa-get-pocket:before{content:"\f265"}.fa-wikipedia-w:before{content:"\f266"}.fa-safari:before{content:"\f267"}.fa-chrome:before{content:"\f268"}.fa-firefox:before{content:"\f269"}.fa-opera:before{content:"\f26a"}.fa-internet-explorer:before{content:"\f26b"}.fa-television:before,.fa-tv:before{content:"\f26c"}.fa-contao:before{content:"\f26d"}.fa-500px:before{content:"\f26e"}.fa-amazon:before{content:"\f270"}.fa-calendar-plus-o:before{content:"\f271"}.fa-calendar-minus-o:before{content:"\f272"}.fa-calendar-times-o:before{content:"\f273"}.fa-calendar-check-o:before{content:"\f274"}.fa-industry:before{content:"\f275"}.fa-map-pin:before{content:"\f276"}.fa-map-signs:before{content:"\f277"}.fa-map-o:before{content:"\f278"}.fa-map:before{content:"\f279"}.fa-commenting:before{content:"\f27a"}.fa-commenting-o:before{content:"\f27b"}.fa-houzz:before{content:"\f27c"}.fa-vimeo:before{content:"\f27d"}.fa-black-tie:before{content:"\f27e"}.fa-fonticons:before{content:"\f280"}.fa-reddit-alien:before{content:"\f281"}.fa-edge:before{content:"\f282"}.fa-credit-card-alt:before{content:"\f283"}.fa-codiepie:before{content:"\f284"}.fa-modx:before{content:"\f285"}.fa-fort-awesome:before{content:"\f286"}.fa-usb:before{content:"\f287"}.fa-product-hunt:before{content:"\f288"}.fa-mixcloud:before{content:"\f289"}.fa-scribd:before{content:"\f28a"}.fa-pause-circle:before{content:"\f28b"}.fa-pause-circle-o:before{content:"\f28c"}.fa-stop-circle:before{content:"\f28d"}.fa-stop-circle-o:before{content:"\f28e"}.fa-shopping-bag:before{content:"\f290"}.fa-shopping-basket:before{content:"\f291"}.fa-hashtag:before{content:"\f292"}.fa-bluetooth:before{content:"\f293"}.fa-bluetooth-b:before{content:"\f294"}.fa-percent:before{content:"\f295"}.fa-gitlab:before{content:"\f296"}.fa-wpbeginner:before{content:"\f297"}.fa-wpforms:before{content:"\f298"}.fa-envira:before{content:"\f299"}.fa-universal-access:before{content:"\f29a"}.fa-wheelchair-alt:before{content:"\f29b"}.fa-question-circle-o:before{content:"\f29c"}.fa-blind:before{content:"\f29d"}.fa-audio-description:before{content:"\f29e"}.fa-volume-control-phone:before{content:"\f2a0"}.fa-braille:before{content:"\f2a1"}.fa-assistive-listening-systems:before{content:"\f2a2"}.fa-american-sign-language-interpreting:before,.fa-asl-interpreting:before{content:"\f2a3"}.fa-deaf:before,.fa-deafness:before,.fa-hard-of-hearing:before{content:"\f2a4"}.fa-glide:before{content:"\f2a5"}.fa-glide-g:before{content:"\f2a6"}.fa-sign-language:before,.fa-signing:before{content:"\f2a7"}.fa-low-vision:before{content:"\f2a8"}.fa-viadeo:before{content:"\f2a9"}.fa-viadeo-square:before{content:"\f2aa"}.fa-snapchat:before{content:"\f2ab"}.fa-snapchat-ghost:before{content:"\f2ac"}.fa-snapchat-square:before{content:"\f2ad"}.fa-pied-piper:before{content:"\f2ae"}.fa-first-order:before{content:"\f2b0"}.fa-yoast:before{content:"\f2b1"}.fa-themeisle:before{content:"\f2b2"}.fa-google-plus-circle:before,.fa-google-plus-official:before{content:"\f2b3"}.fa-fa:before,.fa-font-awesome:before{content:"\f2b4"}.fa-handshake-o:before{content:"\f2b5"}.fa-envelope-open:before{content:"\f2b6"}.fa-envelope-open-o:before{content:"\f2b7"}.fa-linode:before{content:"\f2b8"}.fa-address-book:before{content:"\f2b9"}.fa-address-book-o:before{content:"\f2ba"}.fa-address-card:before,.fa-vcard:before{content:"\f2bb"}.fa-address-card-o:before,.fa-vcard-o:before{content:"\f2bc"}.fa-user-circle:before{content:"\f2bd"}.fa-user-circle-o:before{content:"\f2be"}.fa-user-o:before{content:"\f2c0"}.fa-id-badge:before{content:"\f2c1"}.fa-drivers-license:before,.fa-id-card:before{content:"\f2c2"}.fa-drivers-license-o:before,.fa-id-card-o:before{content:"\f2c3"}.fa-quora:before{content:"\f2c4"}.fa-free-code-camp:before{content:"\f2c5"}.fa-telegram:before{content:"\f2c6"}.fa-thermometer-4:before,.fa-thermometer-full:before,.fa-thermometer:before{content:"\f2c7"}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before{content:"\f2c8"}.fa-thermometer-2:before,.fa-thermometer-half:before{content:"\f2c9"}.fa-thermometer-1:before,.fa-thermometer-quarter:before{content:"\f2ca"}.fa-thermometer-0:before,.fa-thermometer-empty:before{content:"\f2cb"}.fa-shower:before{content:"\f2cc"}.fa-bath:before,.fa-bathtub:before,.fa-s15:before{content:"\f2cd"}.fa-podcast:before{content:"\f2ce"}.fa-window-maximize:before{content:"\f2d0"}.fa-window-minimize:before{content:"\f2d1"}.fa-window-restore:before{content:"\f2d2"}.fa-times-rectangle:before,.fa-window-close:before{content:"\f2d3"}.fa-times-rectangle-o:before,.fa-window-close-o:before{content:"\f2d4"}.fa-bandcamp:before{content:"\f2d5"}.fa-grav:before{content:"\f2d6"}.fa-etsy:before{content:"\f2d7"}.fa-imdb:before{content:"\f2d8"}.fa-ravelry:before{content:"\f2d9"}.fa-eercast:before{content:"\f2da"}.fa-microchip:before{content:"\f2db"}.fa-snowflake-o:before{content:"\f2dc"}.fa-superpowers:before{content:"\f2dd"}.fa-wpexplorer:before{content:"\f2de"}.fa-meetup:before{content:"\f2e0"}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}</style></template></dom-module><dom-module id="lists--style-module" assetpath="src/styling/"><template><style type="text/css" include="global--style-module">.container__list .list{margin:0;padding:0;overflow-y:auto;list-style-type:none;height:inherit}.container__list .list.sublist{overflow-y:visible}.container__list .list_item{padding:5px 5px 5px 20px;-webkit-font-smoothing:antialiased}.container__list .list_item.sublist_item{font-size:.9em;padding:2px 5px 2px 20px}.container__list .list_item .list_item__link{cursor:pointer;text-decoration:none}.container__list .list_item .list_item__link:before{font-family:FontAwesome}</style></template></dom-module><dom-module id="playlist-chapter-list" assetpath="src/components/"><template><style type="text/css" include="lists--style-module font-awesome">#container__playlist_chapter_list{position:absolute;top:0;right:0;border:3px solid #000;z-index:10;@apply --set-foreground-color;}#container__playlist_chapter_list .list{max-width:250px;max-height:250px}#container__playlist_chapter_list .list_item{@apply --set-background-color;}#container__playlist_chapter_list .list_item.active>.list_item__link{font-weight:700}#container__playlist_chapter_list .list_item>.list_item__link{@apply --set-foreground-color;}#container__playlist_chapter_list .list_item:nth-child(odd){@apply --set-secondary-background-color;}#container__playlist_chapter_list .list_item.sublist_item{background-color:inherit}</style><div id="container__playlist_chapter_list" class="container__list"><ul class="list"><template is="dom-if" if="[[_showPlaylist]]"><template is="dom-repeat" items="[[playlist.entries]]"><li class$="list_item [[ifEqualsThen(index, playlist.currentPosition, 'active')]]"><template is="dom-if" if="[[equals(index, playlist.currentPosition)]]"><i class="fa fa-caret-right"></i></template><a class="list_item__link" href="[[ifNotEqualsThen(index, playlist.currentPosition, item.url)]]">[[item.title]]</a><template is="dom-if" if="[[equals(index, playlist.currentPosition)]]"><ul class="list sublist"><template is="dom-repeat" items="[[_visibleChapters]]"><li class$="list_item sublist_item [[ifEqualsThen(item, _activeChapter, 'active')]]"><template is="dom-if" if="[[equals(item, _activeChapter)]]"><i class="fa fa-caret-right"></i></template><a class="list_item__link" on-click="_handleChapterClick" href="javascript:void(0)">[[item.title]]</a></li></template></ul></template></li></template></template><template is="dom-if" if="[[!_showPlaylist]]"><template is="dom-repeat" items="[[_visibleChapters]]"><li class$="list_item [[ifEqualsThen(item, _activeChapter, 'active')]]"><template is="dom-if" if="[[equals(item, _activeChapter)]]"><i class="fa fa-caret-right"></i></template><a class="list_item__link" on-click="_handleChapterClick" href="javascript:void(0)">[[item.title]]</a></li></template></template></ul></div></template><script>IMD.define("playlist-chapter-list",["binding-helpers","ioc-requester","constants"],(t,e,s)=>{const{ANALYTICS_TOPICS:i}=s;class a extends(t(e(Polymer.Element))){static get is(){return"playlist-chapter-list"}static get properties(){return{state:Object,chapters:Array,playlist:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_showPlaylist:{type:Boolean,value:!1,computed:"_getShowPlaylist(playlist)"},_visibleChapters:{type:Array,computed:"_getVisibleChapters(chapters, state.trimStart, state.trimEnd)"},_activeChapter:{type:Object,computed:"_getActiveChapter(_visibleChapters, state.position)"}}}static get observers(){return["_scrollToActivePlaylistItem(playlist.currentPosition, showIf)"]}_getShowPlaylist(t){return t&&this.hasItems(t.entries)&&!t.hideInList}_getVisibleChapters(t,e,s){if(t){let i=[];for(let a=0;a<t.length;a++){let r=t[a];(r.startPosition>=e||t[a+1]&&t[a+1].startPosition>e)&&r.startPosition<=s&&i.push(r)}return i}}_getActiveChapter(t,e){if(t)return t.slice().reverse().find(t=>t.startPosition<=e)}_handleChapterClick(t){let e=t.model.item.startPosition;this.state.trimStart&&(e=Math.max(this.state.trimStart,e)),this._analyticsManager.changeState("setPosition",[e],{verb:i.VIDEO_CHAPTER_SEEK})}_scrollToActivePlaylistItem(){let t=this.shadowRoot.querySelector(".list_item.active");t&&(t.parentNode.scrollTop=t.offsetTop)}}window.customElements.define(a.is,a)});</script></dom-module><dom-module id="interactive-transcript" assetpath="src/components/"><template><style type="text/css" include="lists--style-module font-awesome">#container__interactive_transcript{overflow:hidden;color:#000;height:200px;width:100%;border-top:1px solid grey}#container__interactive_transcript .list{perspective:300px;perspective-origin:50% 50%}#container__interactive_transcript .list_item{display:flex;padding:15px 5px 15px 20px;background-color:#eee;font-size:18px;overflow:hidden;@apply --transition-duration-600;}#container__interactive_transcript .list_item .list_item__link{color:#000}#container__interactive_transcript .list_item .list_item__prefix{white-space:nowrap;margin-right:15px}#container__interactive_transcript .list_item.-active,#container__interactive_transcript .list_item:nth-child(odd).-active{background-color:#bbb}#container__interactive_transcript .list_item:nth-child(odd){background-color:#fff}#container__interactive_transcript .list_item.-active:hover,#container__interactive_transcript .list_item:hover{@apply --set-accent-color-background;@apply --set-font-color-on-accent-color;@apply --transition-duration-200;cursor:pointer}</style><div id="container__interactive_transcript" class="container__list"><ul class="list"><template is="dom-repeat" items="[[_visibleCaptions]]"><li class$="list_item [[ifEqualsThen(item, _activeCue, '-active')]]" on-click="_handleClick"><span class$="list_item__prefix list_item__link [[ifEqualsThen(item, _activeCue, 'active fa-caret-right')]]">[[_formatSeconds(item.startTime, state.duration, state.trimStart, state.trimEnd)]] - [[_formatSeconds(item.endTime, state.duration, state.trimStart, state.trimEnd)]]: </span><span class="list_item__link">[[item.text]]</span></li></template></ul></div></template><script>IMD.define("interactive-transcript",["binding-helpers","ioc-requester","constants"],(e,t,i)=>{const{ANALYTICS_TOPICS:a}=i;class s extends(e(t(Polymer.Element))){static get is(){return"interactive-transcript"}static get properties(){return{state:Object,_analyticsManager:{type:Object,inject:"AnalyticsManager"},_stateManager:{type:Object,inject:"StateManager"},_visibleCaptions:{type:Array,computed:"_getVisibleCaptions(state.activeCaptions, state.trimStart, state.trimEnd)"},_activeCue:{type:Object,computed:"_getActiveCue(_visibleCaptions, state.position)"}}}static get observers(){return["_activeCueChanged(_activeCue, state.showInteractiveTranscript)"]}_getActiveCue(e,t){if(e)return e.slice().reverse().find(e=>e.startTime<=t&&e.endTime>t)}_getVisibleCaptions(e,t,i){if(e)return e.filter(e=>(!t||e.endTime>t)&&(!i||e.startTime<i))}_activeCueChanged(){let e=this.$.container__interactive_transcript.getElementsByClassName("-active")[0];e&&(e.parentNode.scrollTop=e.offsetTop)}_formatSeconds(e,t,i,a){return e=Math.min(Math.max(0,e-i),a),this.secondsToHms(e,t)}_handleClick(e){this._analyticsManager.changeState("setPosition",[e.model.item.startTime],{verb:a.VIDEO_TRANSCRIPT_SEEK})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="overlay--style-module" assetpath="src/styling/"><template><style type="text/css" include="global--style-module">.overlay{position:absolute;width:100%;height:100%;z-index:5;background-color:rgba(0,0,0,.25);@apply --set-foreground-color;}.overlay .button{cursor:pointer;padding:10px}.overlay .button:hover{background-color:rgba(148,148,148,.5)}</style></template></dom-module><dom-module id="waiting-overlay" assetpath="src/components/overlays/"><template><style type="text/css" include="overlay--style-module font-awesome">#container__waiting_overlay{display:flex;align-items:center;justify-content:center}#icon_spinner{opacity:.9;font-size:6vw;@apply --set-accent-color-foreground;animation-name:spin;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}@-ms-keyframes spin{from{-ms-transform:rotate(0)}to{-ms-transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0)}to{-moz-transform:rotate(360deg)}}@-webkit-keyframes spin{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}</style><div id="container__waiting_overlay" class="overlay" style$="visibility: [[ifThenElse(_isVisible, 'visible', 'hidden')]];"><i id="icon_spinner" class="fa fa-spinner" aria-hidden="true"></i></div></template><script>IMD.define("waiting-overlay",["binding-helpers","ioc-requester","constants"],(e,t,i)=>{const{PLAY_STATES:s}=i;class a extends(e(t(Polymer.Element))){static get is(){return"waiting-overlay"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_isVisible:{type:Boolean,value:!1},_timer:Object}}static get observers(){return["_playStateChanged(state.playState)"]}_playStateChanged(e){e===s.WAITING?this._timer=setTimeout(()=>{this._isVisible=e===s.WAITING},250):(this._isVisible=!1,clearTimeout(this._timer))}}window.customElements.define(a.is,a)});</script></dom-module><script>IMD.define("localization",()=>{return e=>class extends e{static get properties(){return{localize:{type:Function},_localizer:{type:Object,inject:"Localizer",observer:"_localizerChanged"}}}_localizerChanged(e){e&&e.localize&&(this.localize=e.localize.bind(e),e.onLanguageChanged(()=>this.localize=e.localize.bind(e)))}}});</script><dom-module id="next-video-overlay" assetpath="src/components/overlays/"><template><style type="text/css" include="overlay--style-module font-awesome">#container__next-video_overlay{display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:7;background-color:rgba(0,0,0,.85);color:#fff}.container__spinner{position:relative}.container__spinner #timer{position:absolute;top:calc(50% - 8px);left:calc(50% - 3px)}#icon_spinner{opacity:.9;font-size:6vw;@apply --set-accent-color-foreground;animation-name:spin;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}#container__next_video_text{display:flex;align-items:center;flex-direction:column;margin-bottom:20px}#text__next_video{font-size:20px}#text__next_video_title{margin-top:5px}#button__disable_next_video{margin-top:10px;text-decoration:none;color:#fff}@-ms-keyframes spin{from{-ms-transform:rotate(0)}to{-ms-transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0)}to{-moz-transform:rotate(360deg)}}@-webkit-keyframes spin{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width:768px){#text__next_video{font-size:15px}#icon_spinner{font-size:50px}}</style><div id="container__next-video_overlay" class="overlay" style$="visibility: [[ifThenElse(_isVisible, 'visible', 'hidden')]];"><div id="container__next_video_text"><span id="text__next_video">[[localize('next-video-overlay--next-video-label')]]</span><template is="dom-if" if="[[nextVideo.title]]"><span id="text__next_video_title">[[nextVideo.title]]</span></template></div><div class="container__spinner"><i id="icon_spinner" class="fa fa-spinner" aria-hidden="true"></i> <span id="timer">[[_secondsToNextVideo]]</span></div><a id="button__disable_next_video" class="button" on-click="_handleClick" href="javascript:void(0)">[[localize('general--cancel')]]</a></div></template><script>IMD.define("next-video-overlay",["binding-helpers","ioc-requester","localization","constants"],(e,t,i,s)=>{const{PLAY_STATES:a,SECONDS_TO_NEXT_VIDEO:n}=s;class r extends(e(t(i(Polymer.Element)))){static get is(){return"next-video-overlay"}static get properties(){return{state:Object,nextVideo:Object,_stateManager:{type:Object,inject:"StateManager"},_isVisible:{type:Boolean,computed:"_getIsVisible(state.playState, _isEnabled)"},_isEnabled:{type:Boolean,value:!0},_timer:Object,_secondsToNextVideo:Number}}static get observers(){return["_playStateChanged(state.playState)","_positionChanged(state.position, state.duration)"]}ready(){super.ready(),window.addEventListener("keydown",e=>{e.defaultPrevented||"Escape"!==e.key||(this._clearTimer(),e.preventDefault())})}_getIsVisible(e,t){return e===a.FINISHED&&t}_handleClick(){this._clearTimer(),this._isEnabled=!1}_playStateChanged(e){e===a.FINISHED&&this._isEnabled?this._startTimer():e===a.PLAYING&&this._clearTimer()}_positionChanged(e,t){e!==t&&this._clearTimer()}_startTimer(){this._timer||(this._secondsToNextVideo=n,this._timer=setInterval(()=>{this._secondsToNextVideo=this._secondsToNextVideo-1,0===this._secondsToNextVideo&&(window.open(this.nextVideo.url,"_self"),this._clearTimer())},1e3))}_clearTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}}window.customElements.define(r.is,r)});</script></dom-module><dom-module id="finished-overlay" assetpath="src/components/overlays/"><template><style type="text/css" include="overlay--style-module">#container__finished_overlay{display:flex;flex-wrap:wrap;padding:25px;background-color:rgba(0,0,0,.85);@apply --box-sizing-border-box;}.container__related_video{position:relative;background-size:cover;margin:4px}.container_related_overlay{display:none;position:absolute;top:0;width:100%;height:100%;padding:10px;@apply --box-sizing-border-box;font-size:.8vw;background:linear-gradient(rgba(0,0,0,.75),rgba(0,0,0,0) 75%);color:#fff}.container__related_video:hover .container_related_overlay{display:block}.container__related_video a:focus .container_related_overlay{display:block;outline:-webkit-focus-ring-color auto 5px}.related_video__time{position:absolute;bottom:3px;right:3px;background:rgba(0,0,0,.75);padding:3px}.related_video__time.empty{display:none!important}@media (max-width:768px){#container__finished_overlay{display:block;white-space:nowrap;overflow-x:auto;overflow-y:hidden}.container__related_video{display:inline-block;border:1px solid #fff;height:calc(100% - 8px)!important;width:50%;max-height:200px;top:calc(50% - 100px)}.container_related_overlay{display:block;font-size:12px;white-space:normal;overflow:hidden;text-overflow:ellipsis}}</style><div id="container__finished_overlay" class="overlay" style$="visibility: [[ifThenElse(_isVisible, 'visible', 'hidden')]];"><template is="dom-repeat" items="[[relatedVideos]]"><div class="container__related_video" style$="height: calc([[_getHeight()]]); flex-basis: calc([[_getFlexBasis()]]); background-image: url('[[item.thumbnail]]');"><a href="[[item.url]]"><div class="container_related_overlay"><span>[[item.title]]</span> <span class$="related_video__time [[ifNotThen(item.duration, 'empty')]]">[[secondsToHms(item.duration)]]</span></div></a></div></template></div></template><script>IMD.define("finished-overlay",["binding-helpers","ioc-requester","constants"],(e,t,s)=>{const{PLAY_STATES:i}=s;class r extends(e(t(Polymer.Element))){static get is(){return"finished-overlay"}static get properties(){return{state:Object,relatedVideos:Array,_isVisible:{type:Boolean,computed:"_getIsVisible(state.playState)"}}}_getIsVisible(e){return e===i.FINISHED}_getRows(){return Math.round(Math.sqrt(this.relatedVideos.length))}_getColumns(){return Math.ceil(Math.sqrt(this.relatedVideos.length))}_getFlexBasis(){return"(100% - 5px * 2 * "+this._getColumns()+") / "+this._getColumns()}_getHeight(){return"(100% - 5px * 2 * "+this._getRows()+") / "+this._getRows()}}window.customElements.define(r.is,r)});</script></dom-module><dom-module id="captions-display" assetpath="src/components/overlays/"><template><style type="text/css" include="overlay--style-module">#container__captions{visibility:visible;position:absolute;bottom:5px;width:calc(100% - 40px);margin:0 20px;text-align:center;color:#fff;z-index:3}.caption-cue-text{display:table;margin:0 auto;padding:3px 10px;background-color:rgba(0,0,0,.7);border-radius:5px;font-size:18px}@media (max-width:769px){.caption-cue-text{font-size:12px}}</style><div id="container__captions" class$="[[ifNotThen(_showCaptions, '-hidden')]]"><template is="dom-if" if="[[_activeCue]]"><div class="caption-cue-text">[[_activeCue.text]]</div></template></div></template><script>IMD.define("captions-display",["binding-helpers","ioc-requester","constants"],(t,e,a)=>{const{ANALYTICS_TOPICS:i,PLAY_STATES:s}=a;class n extends(t(e(Polymer.Element))){static get is(){return"captions-display"}static get properties(){return{state:Object,_analyticsManager:{type:Object,inject:"AnalyticsManager"},_stateManager:{type:Object,inject:"StateManager"},_activeCue:Object,_showCaptions:{type:Boolean,computed:"_getShowCaptions(state.showCaptions, state.playState, state.position, state.trimStart, state.trimEnd)"}}}static get observers(){return["_setActiveCue(state.position, state.activeCaptions)","_cueChanged(_activeCue)"]}_getShowCaptions(t,e,a,i,n){return!(!t||e===s.FINISHED)&&(e===s.PLAYING||e===s.PAUSED&&a>i&&a<n)}_setActiveCue(t,e){if(e){let a=e.find(e=>e.startTime<=t&&e.endTime>t);Object.is(this._activeCue,a)||(this._activeCue=a)}}_cueChanged(t){let e=this._analyticsManager._getCueIdentifier(t);this._analyticsManager.newEvent({verb:i.VIDEO_SUBTITLE_CHANGE},{currentSubtitleIdentifier:e,currentSubtitleLanguage:this.state.captionLanguage})}}window.customElements.define(n.is,n)});</script></dom-module><dom-module id="control-bar--style-module" assetpath="src/styling/"><template><style type="text/css" include="global--style-module">:host{display:flex;justify-content:center}.user_controls{display:flex;flex-grow:1;align-items:center;justify-content:inherit;padding:0 10px;height:40px;@apply --set-foreground-color;@apply --set-background-color;user-select:none;cursor:default}.user_controls.-no-padding-left{padding-left:0}.user_controls a{line-height:40px;vertical-align:middle;width:100%;text-align:center;text-decoration:none;@apply --set-foreground-color;}.user_controls a:hover{text-shadow:0 0 12px rgba(255,255,255,.5)}.user_controls i{line-height:inherit}.user_controls .button i{font-size:1.25em}.button{cursor:pointer;text-decoration:none}.button.inactive{color:grey!important}.button.inactive:after{display:none}</style></template></dom-module><dom-module id="playpause-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{min-width:48px}</style><div id="container__play_pause_control" class="user_controls"><a id="button__play_pause" class="button" on-click="_handleClick" href="javascript:void(0)"><i class$="fa [[iconClass]]"></i></a></div></template><script>IMD.define("playpause-control",["binding-helpers","ioc-requester","constants"],(e,t,a)=>{const{PLAY_STATES:n,ANALYTICS_TOPICS:s}=a,r={[n.PLAYING]:"fa-pause",[n.PAUSED]:"fa-play",[n.FINISHED]:"fa-refresh"};class i extends(e(t(Polymer.Element))){static get is(){return"playpause-control"}static get properties(){return{state:Object,iconClass:String,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"}}}static get observers(){return["_playStateChanged(state.playState)"]}_playStateChanged(e){let t=r[e];t&&(this.iconClass=t),e===n.FINISHED&&this._analyticsManager.newEvent({verb:s.VIDEO_END})}_handleClick(){this._analyticsManager&&this._analyticsManager.changeState("togglePlayPause",[],{verb:s.PLAY_PAUSE})}}window.customElements.define(i.is,i)});</script></dom-module><dom-module id="custom-progress" assetpath="src/components/base-components/"><template><style type="text/css" include="global--style-module">:host{flex-basis:100%}#container__progress_bar{position:relative;width:100%;height:15px;border:1px solid grey;@apply --set-background-color;}#container__progress_bar.-no-border{border:none}#container__progress{width:100%;height:100%}.progress-overlay{position:absolute;height:100%}#div__primary_progress{@apply --set-accent-color-background;z-index:2}#div__secondary_progress{@apply --set-secondary-background-color;z-index:1}#div__hover_box{display:none;position:absolute;background-color:rgba(0,0,0,.75);color:#fff;padding:2px;min-width:40px;text-align:center;z-index:10}#container__progress_bar:hover #div__hover_box{display:block}</style><div id="container__progress_bar" class$="[[ifThenElse(border, '', '-no-border')]]"><div id="container__progress" on-click="_handleClick" on-mouseover="_showHoverBox" on-mousemove="_updateHoverBoxPosition" on-mouseout="_hideHoverBox"><div id="div__primary_progress" class="progress-overlay" style$="width: [[_calcWidth(value, min, max)]]%;"></div><div id="div__secondary_progress" class="progress-overlay" style$="width: [[_calcWidth(secondaryValue, min, max)]]%;"></div></div><div id="container__hover_box" style$="visibility: [[ifThenElse(_hoverBoxVisible, 'visible', 'hidden')]];"><div id="div__hover_box">[[_hoverBoxContent]]</div></div></div></template><script>IMD.define("custom-progress",["binding-helpers"],e=>{const t={ABSOLUE:"abs",RELATIVE:"rel",HIDDEN:"hiden"};class i extends(e(Polymer.Element)){static get is(){return"custom-progress"}static get properties(){return{min:{type:Number,value:0},max:{type:Number,value:1},value:{type:Number,value:0},secondaryValue:{type:Number,value:0},border:{type:Boolean,value:!1},hoverBox:{type:String,value:t.HIDDEN},_hoverBoxVisible:{type:Boolean,value:!1},_hoverBoxContent:{type:String,value:0}}}_calcWidth(e,t,i){return Math.min(Math.max(0,(e-t)/i*100),100)}_handleClick(e){let t=this._getCursorPosition(e);t<=this.max&&(this.value=t,this.dispatchEvent(new CustomEvent("change")))}_showHoverBox(){this.hoverBox!==t.HIDDEN&&(this._hoverBoxVisible=!0)}_updateHoverBoxPosition(e){let i=this.$.div__hover_box,o=this.$.container__progress_bar;i.style.top=o.style.top-i.offsetHeight+"px";let s=this._getCursorPosition(e);this.hoverBox===t.RELATIVE&&(s-=this.max),this._hoverBoxContent=this.secondsToHms(s);e.pageX-o.getBoundingClientRect().left+i.offsetWidth>=o.offsetLeft+o.offsetWidth?(i.style.left="auto",i.style.right="0px"):(i.style.left=e.offsetX+"px",i.style.right="auto")}_hideHoverBox(){this._hoverBoxVisible=!1}_getCursorPosition(e){let t=parseInt(getComputedStyle(this.$.container__progress_bar,null).getPropertyValue("border-left-width"),10),i=e.pageX-this.getBoundingClientRect().left-t;this.getBoundingClientRect().width-i<=1&&(i=this.getBoundingClientRect().width);return Math.max(0,Math.min(this.max,i*this.max/this.getBoundingClientRect().width))}}window.customElements.define(i.is,i)});</script></dom-module><dom-module id="sound-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module">:host{flex-basis:5%;min-width:60px;position:relative;margin-left:-10px}</style><div id="container__sound_control" class="user_controls -no-padding-left"><custom-progress id="progress__sound_control" value$="[[toStringOrEmpty(_effectiveVolume)]]" on-change="_handleChange" border=""></custom-progress></div></template><script>IMD.define("sound-control",["binding-helpers","ioc-requester","constants"],(e,t,n)=>{const{ANALYTICS_TOPICS:a}=n;class s extends(e(t(Polymer.Element))){static get is(){return"sound-control"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_effectiveVolume:{type:Number,computed:"_getEffectiveVolume(state.volume, state.muted)"}}}_getEffectiveVolume(e,t){return void 0===e?"":t?0:e}_handleChange(e){this._analyticsManager.changeState("setVolume",[e.target.value],{verb:a.VIDEO_VOLUME_CHANGE})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="live-indicator" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">#span__live_indicator{width:initial;text-align:initial;font-weight:700;@apply --set-accent-color-foreground;}#span__live_indicator.inactive{color:grey}#span__live_indicator::before{content:'\f111';font-family:FontAwesome;margin-right:4px}</style><div id="container__live_indicator" class="user_controls"><a id="span__live_indicator" href="javascript:void(0)" class$="[[ifNotThen(state.liveSync, 'inactive')]]" on-click="_handleClick">[[localize('live-indicator--label')]]</a></div></template><script>IMD.define("live-indicator",["binding-helpers","ioc-requester","localization","constants"],(e,t,a,i)=>{const{ANALYTICS_TOPICS:n,PLAY_STATES:s}=i;class c extends(e(t(a(Polymer.Element)))){static get is(){return"live-indicator"}static get properties(){return{state:Object,_analyticsManager:{type:Object,inject:"AnalyticsManager"}}}_handleClick(){this._analyticsManager.changeState("setLiveSync",[!0],{verb:n.VIDEO_SEEK}),this.state.playState!==s.PLAYING&&this._analyticsManager.changeState("play",[],{verb:n.PLAY})}}window.customElements.define(c.is,c)});</script></dom-module><dom-module id="videotime-display" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module">#container__videotime_display{white-space:nowrap}#span__videotime_separator{margin:0 3px}</style><div id="container__videotime_display" class="user_controls"><span id="span__videotime_position">[[secondsToHms(_position, _duration)]]</span><template is="dom-if" if="[[!state.live]]"><span id="span__videotime_separator">/</span> <span id="span__videotime_duration">[[secondsToHms(_duration)]]</span></template></div></template><script>IMD.define("videotime-display",["binding-helpers","ioc-requester","localization"],(t,e,i)=>{class r extends(t(e(i(Polymer.Element)))){static get is(){return"videotime-display"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_position:{type:Number,computed:"_getPosition(state.position, state.trimStart)"},_duration:{type:Number,computed:"_getDuration(state.trimStart, state.trimEnd)"}}}_getPosition(t,e){return t-e}_getDuration(t,e){return e-t}}window.customElements.define(r.is,r)});</script></dom-module><dom-module id="select-control" assetpath="src/components/base-components/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{width:100%}#inner_container__select_control{position:relative;height:40px}.dropdown .dropdown-content{position:absolute;bottom:40px;left:-10px;right:-10px;z-index:10;border:1px solid #000;border-bottom:none;@apply --set-foreground-color;@apply --set-background-color;}.dropdown .dropdown-content a{display:inline-block;line-height:2;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.dropdown .dropdown-content a.selected,.dropdown .dropdown-content a:hover{background-color:grey}.dropdown #button__select.with-badge:after{content:attr(badge-value);position:absolute;top:6px;right:-12px;width:20px;@apply --set-accent-color-background;@apply --set-font-color-on-accent-color;border-radius:2px;line-height:1.5;font-size:9px;font-weight:lighter}#container__select_control.in-menu-entry{background-color:transparent}.in-menu-entry #inner_container__select_control{display:flex;justify-content:space-between;width:100%}.in-menu-entry #button__select{width:30px}.in-menu-entry #dropdown__select{display:flex}.in-menu-entry #button__select,.in-menu-entry #dropdown__select a{padding:0 5px;color:#fff}.in-menu-entry #dropdown__select a.selected{@apply --set-accent-color-background;@apply --set-font-color-on-accent-color;}</style><div id="container__select_control" class$="user_controls [[ifNotThen(isInMobileMenu, 'dropdown')]] [[ifThen(isInMobileMenu, 'in-menu-entry')]]"><div id="inner_container__select_control" on-mouseover="_handleMouseOver" on-mouseout="_handleMouseOut"><a id="button__select" class$="button [[ifThen(selectedItem.value, 'with-badge')]] [[ifNotThen(active, 'inactive')]]" badge-value$="[[selectedItem.text]]" href="javascript:void(0)" on-click="_handleClick"><i class$="[[iconClasses]]"></i></a><div id="dropdown__select" class$="dropdown-content [[ifNotThen(_isDropDownOpen, '-hidden')]]"><template is="dom-repeat" items="[[items]]"><a on-click="_handleDropDownElementClick" name="[[item.text]]" class$="[[ifEqualsThen(item.value, selectedValue, 'selected')]]" href="javascript:void(0)">[[item.text]]</a></template></div></div></div></template><script>IMD.define("select-control",["binding-helpers"],e=>{class t extends(e(Polymer.Element)){static get is(){return"select-control"}static get properties(){return{state:Object,items:{type:Array,value:()=>[]},selectedValue:Object,selectedItem:{type:Object,computed:"_getSelectedItem(items, selectedValue)"},iconClasses:{type:String,value:""},isInMobileMenu:{type:Boolean,value:!1},_isDropDownOpen:{type:Boolean,value:!1},active:{type:Boolean,value:!0}}}static get observers(){return["_mobileSettingsMenuChanged(state.mobileSettingsMenuOpen)"]}_handleMouseOver(){this.state.mobileSettingsMenuOpen||this._showDropDown()}_handleMouseOut(){this.state.mobileSettingsMenuOpen||this._hideDropDown()}_showDropDown(){this._isDropDownOpen=!0,this.$.container__select_control.classList.add("open")}_hideDropDown(){this._isDropDownOpen=!1,this.$.container__select_control.classList.remove("open")}_handleClick(){this._isDropDownOpen?this._hideDropDown():this._showDropDown()}_handleDropDownElementClick(e){this.selectedValue=e.model.item.value,this.dispatchEvent(new CustomEvent("change")),this.state.mobileSettingsMenuOpen||this._hideDropDown()}_getSelectedItem(e,t){if(e)return e.find(e=>e.value===t)}_mobileSettingsMenuChanged(e){e&&(this.isInMobileMenu?this._showDropDown():this._hideDropDown())}}window.customElements.define(t.is,t)});</script></dom-module><dom-module id="speed-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module">#container__speed_control{width:100%}</style><div id="container__speed_control"><select-control state="[[state]]" items="[[_items]]" selected-value="[[state.playbackRate]]" on-change="_selectionChanged" icon-classes="fa fa-tachometer" is-in-mobile-menu="[[isInMobileMenu]]"></select-control></div></template><script>IMD.define("speed-control",["binding-helpers","ioc-requester","constants"],(e,t,a)=>{const{PLAYBACK_RATES:s,ANALYTICS_TOPICS:n}=a;class r extends(e(t(Polymer.Element))){static get is(){return"speed-control"}static get properties(){return{state:Object,isInMobileMenu:{type:Boolean,value:!1},_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_items:{type:Array,computed:"_getItems()"}}}_getItems(){return s.sort().reverse().map(e=>({text:this.toFixedOrEmpty(e,1)+"x",value:e}))}_selectionChanged(e){this._analyticsManager.changeState("setPlaybackRate",[e.target.selectedValue],{verb:n.VIDEO_CHANGE_SPEED})}}window.customElements.define(r.is,r)});</script></dom-module><dom-module id="playlist-chapter-list-switch" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{min-width:48px}</style><div id="container__playlist_chapter_list_switch" class="user_controls"><a id="button__chapter_list" class$="button [[ifNotThen(state.isChapterListShown, 'inactive')]]" on-click="_handleClick" href="javascript:void(0)"><i class="fa fa-list"></i></a></div></template><script>IMD.define("playlist-chapter-list-switch",["binding-helpers","ioc-requester","constants"],(t,e,a)=>{const{ANALYTICS_TOPICS:s}=a;class n extends(t(e(Polymer.Element))){static get is(){return"playlist-chapter-list-switch"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"}}}_handleClick(){this._analyticsManager.changeState("toggleIsChapterListShown",[],{verb:s.VIDEO_CHAPTER})}}window.customElements.define(n.is,n)});</script></dom-module><dom-module id="interactive-transcript-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome"></style><select-control state="[[state]]" items="[[_items]]" selected-value="[[_selectedValue]]" on-change="_selectionChanged" icon-classes="fa fa-file-text" active="[[_isActive]]" is-in-mobile-menu="[[isInMobileMenu]]"></select-control></template><script>IMD.define("interactive-transcript-control",["binding-helpers","ioc-requester","localization","constants"],(e,t,a,n)=>{const{ANALYTICS_TOPICS:s}=n;class i extends(e(t(a(Polymer.Element)))){static get is(){return"interactive-transcript-control"}static get properties(){return{state:Object,languages:Array,isInMobileMenu:{type:Boolean,value:!1},_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_items:{type:Array,computed:"_getItems(languages.*, localize)"},_offValue:{readOnly:!0,value:null},_selectedValue:{type:Object,computed:"_getSelectedValue(state.showInteractiveTranscript, state.captionLanguage, languages)"},_isActive:{type:Boolean,computed:"_getIsActive(_selectedValue, _offValue, isInMobileMenu)"}}}_getItems(){if(this.localize){let e=this.languages.map(e=>({text:e,value:e}));return[{text:this.localize("general--off"),value:this._offValue}].concat(e)}}_getSelectedValue(e,t,a){return e&&a.includes(t)?t:this._offValue}_getIsActive(e,t,a){return a||e!==t}_selectionChanged(e){e.target.selectedValue!==this._offValue?(this._stateManager.setCaptionLanguage(e.target.selectedValue),this._stateManager.setInteractiveTranscriptVisibility(!0)):this._stateManager.setInteractiveTranscriptVisibility(!1),this._analyticsManager.newEvent({verb:s.VIDEO_TRANSCRIPT},{currentTranscriptStatus:this.state.showInteractiveTranscript,currentTranscriptLanguage:this.state.captionLanguage})}}window.customElements.define(i.is,i)});</script></dom-module><dom-module id="quality-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module">#container__quality_switch{width:100%}</style><div id="container__quality_switch"><select-control state="[[state]]" items="[[_items]]" selected-value="[[state.quality]]" on-change="_selectionChanged" icon-classes="fa fa-desktop" is-in-mobile-menu="[[isInMobileMenu]]"></select-control></div></template><script>IMD.define("quality-control",["binding-helpers","ioc-requester","localization","constants"],(e,t,a,i)=>{const{ANALYTICS_TOPICS:n}=i;class l extends(e(t(a(Polymer.Element)))){static get is(){return"quality-control"}static get properties(){return{state:Object,qualities:Array,isInMobileMenu:{type:Boolean,value:!1},_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_items:{type:Array,computed:"_getItems(qualities, localize)"}}}_getItems(e){if(this.localize)return e.map(e=>({text:this.localize(`quality-control--quality-${e}`),value:e}))}_selectionChanged(e){this._analyticsManager.changeState("setQuality",[e.target.selectedValue],{verb:n.VIDEO_CHANGE_QUALITY})}}window.customElements.define(l.is,l)});</script></dom-module><dom-module id="mute-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">#container__mute_control{border-right:none}:host{min-width:48px}</style><div id="container__mute_control" class="user_controls"><a id="button__mute" class="button" on-click="_handleClick" href="javascript:void(0)"><i class$="fa [[ifThenElse(_isMuted, 'fa-volume-off', 'fa-volume-up')]]"></i></a></div></template><script>IMD.define("mute-control",["binding-helpers","ioc-requester","constants"],(e,t,n)=>{const{ANALYTICS_TOPICS:a}=n;class s extends(e(t(Polymer.Element))){static get is(){return"mute-control"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_isMuted:{type:Boolean,computed:"_getIsMuted(state.muted, state.volume)"}}}_getIsMuted(e,t){return e||0===t}_handleClick(){this._analyticsManager.changeState("toggleMute",[],{verb:a.VIDEO_VOLUME_CHANGE})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="stream-switch-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{min-width:33px}</style><template is="dom-if" if="[[!isInMobileMenu]]"><div id="container__stream-switch_control" class="user_controls"><a id="button__stream-switch" class="button" on-click="_handleClick" href="javascript:void(0)"><i class$="fa [[iconClass]]"></i></a></div></template><template is="dom-if" if="[[isInMobileMenu]]"><select-control state="[[state]]" items="[[_getItems()]]" selected-value="[[_getSelectedValue()]]" on-change="_selectionChanged" icon-classes="fa fa-columns" is-in-mobile-menu="true"></select-control></template></template><script>IMD.define("stream-switch-control",["binding-helpers","ioc-requester","constants"],(e,t,a)=>{const{ANALYTICS_TOPICS:s}=a;class n extends(e(t(Polymer.Element))){static get is(){return"stream-switch-control"}static get properties(){return{state:Object,iconClass:String,numberOfStreams:Number,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},isInMobileMenu:{type:Boolean,value:!1}}}static get observers(){return["_streamChanged(state.fallbackStreamActive)"]}_getItems(){return[{text:"1",value:1},{value:this.numberOfStreams,text:""+this.numberOfStreams}]}_getSelectedValue(){return this.state.fallbackStreamActive?1:this.numberOfStreams}_streamChanged(e){this.iconClass=e?"fa-columns":"fa-clone"}_selectionChanged(e){this._getSelectedValue()!==e.target.selectedValue&&this._stateManager.toggleFallbackStream()}_handleClick(){this._analyticsManager.changeState("toggleFallbackStream",[],{verb:s.VIDEO_DUAL_STREAM_CHANGE})}}window.customElements.define(n.is,n)});</script></dom-module><dom-module id="full-screen-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">#container__fullscreen_control{border-right:none}:host{min-width:48px}</style><div id="container__fullscreen_control" class="user_controls"><a id="button__fullscreen" class="button" on-click="handleClick" href="javascript:void(0)"><i class$="fa [[ifThenElse(state.fullscreen, 'fa-compress', 'fa-expand')]]"></i></a></div></template><script>IMD.define("full-screen-control",["binding-helpers","ioc-requester","constants"],(e,t,n)=>{const{ANALYTICS_TOPICS:a}=n;class s extends(e(t(Polymer.Element))){static get is(){return"full-screen-control"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"}}}handleClick(){this._analyticsManager.changeState("toggleFullscreen",[],{verb:a.VIDEO_FULLSCREEN})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="caption-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome"></style><select-control state="[[state]]" items="[[_items]]" selected-value="[[_selectedValue]]" on-change="_selectionChanged" icon-classes="fa fa-cc" active="[[_isActive]]" is-in-mobile-menu="[[isInMobileMenu]]"></select-control></template><script>IMD.define("caption-control",["binding-helpers","ioc-requester","localization","constants"],(e,t,a,s)=>{const{ANALYTICS_TOPICS:n}=s;class i extends(e(t(a(Polymer.Element)))){static get is(){return"caption-control"}static get properties(){return{state:Object,languages:Array,isInMobileMenu:{type:Boolean,value:!1},_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_items:{type:Array,computed:"_getItems(languages.*, localize)"},_offValue:{readOnly:!0,value:null},_selectedValue:{type:Object,computed:"_getSelectedValue(state.showCaptions, state.captionLanguage, languages)"},_isActive:{type:Boolean,computed:"_getIsActive(_selectedValue, _offValue, isInMobileMenu)"}}}_getItems(){if(this.localize){let e=this.languages.map(e=>({text:e,value:e}));return[{text:this.localize("general--off"),value:this._offValue}].concat(e)}}_getSelectedValue(e,t,a){return e&&a.includes(t)?t:this._offValue}_getIsActive(e,t,a){return a||e!==t}_selectionChanged(e){e.target.selectedValue!==this._offValue?(this._stateManager.setCaptionLanguage(e.target.selectedValue),this._stateManager.setCaptionsVisibility(!0)):this._stateManager.setCaptionsVisibility(!1),this._analyticsManager.newEvent({verb:n.VIDEO_SUBTITLE},{currentSubtitleStatus:this.state.showCaptions,currentSubtitleLanguage:this.state.captionLanguage})}}window.customElements.define(i.is,i)});</script></dom-module><dom-module id="playlist-navigation-control" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{min-width:48px}</style><div id="container__playlist_navigation_control" class="user_controls"><a id="button__navigate_to_video" class="button" href="{{videoUrl}}"><i class$="fa fa-step-[[direction]]"></i></a></div></template><script>IMD.define("playlist-navigation-control",["binding-helpers"],t=>{class e extends(t(Polymer.Element)){static get is(){return"playlist-navigation-control"}static get properties(){return{videoUrl:String,direction:String}}}window.customElements.define(e.is,e)});</script></dom-module><dom-module id="mobile-settings-menu" assetpath="src/components/control-bar/"><template><style type="text/css" include="control-bar--style-module font-awesome">:host{min-width:48px}.mobile-settings-menu-content{position:absolute;top:0;left:0;right:0;z-index:10;overflow:auto;background-color:rgba(0,0,0,.7);display:flex;flex-direction:column;justify-content:flex-end}.user_controls.open{@apply --set-accent-color-background;}#mobile-settings-menu__select>[is-in-mobile-menu=true]{margin:4px 0;background-color:rgba(255,255,255,.4)}</style><div id="mobile-settings-menu" class="user_controls"><div class="mobile-settings-menu-container"><a id="button__select" class="button" on-click="_toggleMobileSettingsMenu"><i class="fa fa-cog"></i></a><div id="mobile-settings-menu__select" class$="mobile-settings-menu-content [[ifNotThen(_isMobileSettingsMenuOpen, '-hidden')]]" style$="bottom: [[_calcBottomValue(state.showInteractiveTranscript)]];"><template is="dom-if" if="[[captionLanguages]]"><caption-control is-in-mobile-menu="true" state="[[state]]" languages="[[captionLanguages]]"></caption-control></template><template is="dom-if" if="[[captionLanguages]]"><interactive-transcript-control is-in-mobile-menu="true" state="[[state]]" languages="[[captionLanguages]]"></interactive-transcript-control></template><speed-control is-in-mobile-menu="true" state="[[state]]"></speed-control><template is="dom-if" if="[[_hasMultipleQualities]]"><quality-control is-in-mobile-menu="true" state="[[state]]" qualities="[[availableQualities]]"></quality-control></template><template is="dom-if" if="[[hasFallbackStream]]"><stream-switch-control is-in-mobile-menu="true" state="[[state]]" number-of-streams="[[numberOfStreams]]" class="hidden-for-mobile"></stream-switch-control></template></div></div></div></template><script>IMD.define("mobile-settings-menu",["binding-helpers","ioc-requester"],(e,t)=>{class i extends(e(t(Polymer.Element))){static get is(){return"mobile-settings-menu"}static get properties(){return{state:Object,captionLanguages:Array,availableQualities:Boolean,hasFallbackStream:Boolean,numberOfStreams:Number,_isMobileSettingsMenuOpen:{type:Boolean,value:!1},_stateManager:{type:Object,inject:"StateManager"},_hasMultipleQualities:{type:Boolean,computed:"_getHasMultipleQualities(availableQualities)"}}}static get observers(){return["_mobileSettingsMenuChanged(state.mobileSettingsMenuOpen)"]}ready(){super.ready()}_toggleMobileSettingsMenu(){this._stateManager.setMobileSettingsMenuOpen(!this._isMobileSettingsMenuOpen)}_mobileSettingsMenuChanged(e){this._isMobileSettingsMenuOpen=e,this._isMobileSettingsMenuOpen?this.$["mobile-settings-menu"].classList.add("open"):this.$["mobile-settings-menu"].classList.remove("open")}_getHasMultipleQualities(){return this.availableQualities.length>1}_calcBottomValue(e){return e?"240px":"40px"}}window.customElements.define(i.is,i)});</script></dom-module><dom-module id="control-bar" assetpath="src/components/control-bar/"><template><style type="text/css" include="global--style-module">:host{display:block}#container__control_bar{display:flex;align-items:stretch;background-color:#fff}.-flex-grow{flex-grow:1;justify-content:flex-end;background-color:var(--background-color-for-primary)}@media (max-width:768px){.hidden-for-mobile{display:none}}@media (min-width:769px){.hidden-for-desktop{display:none}}</style><div id="container__control_bar"><template is="dom-if" if="[[previousVideo]]"><playlist-navigation-control direction="backward" video-url="[[previousVideo.url]]"></playlist-navigation-control></template><playpause-control state="[[state]]"></playpause-control><template is="dom-if" if="[[nextVideo]]"><playlist-navigation-control direction="forward" video-url="[[nextVideo.url]]"></playlist-navigation-control></template><template is="dom-if" if="[[state.live]]"><live-indicator state="[[state]]" class="-flex-grow"></live-indicator></template><template is="dom-if" if="[[_showVideoTime]]"><videotime-display state="[[state]]" class$="[[ifNotThen(state.live, '-flex-grow')]]"></videotime-display></template><template is="dom-if" if="[[hasItems(captionLanguages)]]"><caption-control state="[[state]]" languages="[[captionLanguages]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></caption-control></template><template is="dom-if" if="[[hasItems(captionLanguages)]]"><interactive-transcript-control state="[[state]]" languages="[[captionLanguages]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></interactive-transcript-control></template><template is="dom-if" if="[[!state.live]]"><speed-control state="[[state]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></speed-control></template><template is="dom-if" if="[[hasItems(availableQualities, 2)]]"><quality-control state="[[state]]" qualities="[[availableQualities]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></quality-control></template><template is="dom-if" if="[[hasChapters]]"><playlist-chapter-list-switch state="[[state]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></playlist-chapter-list-switch></template><template is="dom-if" if="[[hasFallbackStream]]"><stream-switch-control state="[[state]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></stream-switch-control></template><mute-control state="[[state]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></mute-control><sound-control state="[[state]]" class$="[[ifThen(mobileMenu, 'hidden-for-mobile')]]"></sound-control><template is="dom-if" if="[[mobileMenu]]"><mobile-settings-menu state="[[state]]" class="hidden-for-desktop" caption-languages="[[captionLanguages]]" available-qualities="[[availableQualities]]" has-fallback-stream="[[hasFallbackStream]]" number-of-streams="[[numberOfStreams]]"></mobile-settings-menu></template><full-screen-control state="[[state]]"></full-screen-control></div></template><script>IMD.define("control-bar",["binding-helpers","ioc-requester","constants"],(e,t,a)=>{const{ANALYTICS_TOPICS:n}=a,i=["INPUT","TEXTAREA"];class s extends(t(e(Polymer.Element))){static get is(){return"control-bar"}static get properties(){return{state:Object,live:Object,hasChapters:Boolean,hasFallbackStream:Boolean,previousVideo:Object,nextVideo:Object,captionLanguages:Array,availableQualities:Boolean,numberOfStreams:Number,mobileMenu:Boolean,liveDvr:Boolean,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_showVideoTime:Boolean}}static get observers(){return["_setShowVideoTime(state.live, liveDvr)"]}ready(){super.ready(),window.addEventListener("keydown",e=>{if(!(e.defaultPrevented||e.metaKey||e.ctrlKey||e.altKey||i.includes(document.activeElement.tagName))){if("ArrowRight"===e.key||"Right"===e.key)this._analyticsManager.changeState("skipSeconds",[15],{verb:n.VIDEO_SEEK});else if("ArrowLeft"===e.key||"Left"===e.key)this._analyticsManager.changeState("skipSeconds",[-15],{verb:n.VIDEO_SEEK});else if(" "===e.key||"Spacebar"===e.key||"p"===e.key)this._analyticsManager.changeState("togglePlayPause",[],{verb:n.PLAY_PAUSE});else{if("f"!==e.key)return;"ActiveXObject"in window&&!this.state.fullscreen||this._analyticsManager.changeState("toggleFullscreen",[],{verb:n.VIDEO_FULLSCREEN})}e.preventDefault()}})}_setShowVideoTime(e,t){this._showVideoTime=!e||t}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="progress-container--style-module" assetpath="src/styling/"><template><style type="text/css" include="global--style-module">.progress_indicator{display:flex;border-top:1px solid #000}</style></template></dom-module><dom-module id="video-progress" assetpath="src/components/progress-container/"><template><style type="text/css" include="progress-container--style-module"></style><div class="progress_indicator"><custom-progress id="progress__video_progress" max="[[_duration]]" value="[[_position]]" secondary-value="[[_bufferPosition]]" on-change="_handleChange" hover-box="[[ifThenElse(state.live, 'rel', 'abs')]]"></custom-progress></div></template><script>IMD.define("video-progress",["binding-helpers","ioc-requester","constants"],(t,e,i)=>{const{ANALYTICS_TOPICS:a}=i;class s extends(t(e(Polymer.Element))){static get is(){return"video-progress"}static get properties(){return{state:Object,_stateManager:{type:Object,inject:"StateManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_position:{type:Number,computed:"_getPosition(state.position, state.trimStart, state.trimEnd, state.live, state.liveSync, state.liveStartPosition, state.livePosition)"},_bufferPosition:{type:Number,computed:"_getPosition(state.bufferPosition, state.trimStart, state.trimEnd, state.live, state.liveSync, state.liveStartPosition, state.livePosition)"},_duration:{type:Number,computed:"_getDuration(state.duration, state.trimStart, state.trimEnd, state.live, state.liveStartPosition, state.livePosition)"}}}_getPosition(t,e,i,a,s,n,r){return a?s?r-n:Math.min(t,r)-n:Math.min(t-e,i)}_getDuration(t,e,i,a,s,n){return a?n-s:i-e}_handleChange(t){let e;e=this.state.live?this.state.liveStartPosition+t.target.value:this.state.trimStart+t.target.value,this._analyticsManager.changeState("setPosition",[e],{verb:a.VIDEO_SEEK})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="slide-thumbnail" assetpath="src/components/progress-container/"><template><style type="text/css" include="progress-container--style-module">#container__slide_thumbnail_element{position:absolute;right:0;z-index:6;border-left:1px solid #000;border-right:1px solid #000;@apply --set-secondary-background-color;height:10px}#container__slide_thumbnail_element:hover{background-color:#fff}#image__slide_preview{display:none;position:absolute;bottom:calc(100% + 1px);height:120px;border:1px solid #000;background-color:#fff}#container__slide_thumbnail_element.-left #image__slide_preview{left:0}#container__slide_thumbnail_element.-right #image__slide_preview{right:0}#container__slide_thumbnail_element:hover #image__slide_preview{display:block}</style><div id="container__slide_thumbnail_element" on-click="_handleClick" style$="left: [[_stylePercentage(slide.startPosition, state.duration, state.trimStart, state.trimEnd)]]%;" class$="[[_getSlidePosition(slide.startPosition, state.duration, state.trimStart, state.trimEnd)]]"><img id="image__slide_preview" src="[[slide.thumbnail]]"></div></template><script>IMD.define("slide-thumbnail",["binding-helpers","ioc-requester","constants"],(e,t,i)=>{const{ANALYTICS_TOPICS:n}=i;class s extends(e(t(Polymer.Element))){static get is(){return"slide-thumbnail"}static get properties(){return{state:Object,slide:Object,_analyticsManager:{type:Object,inject:"AnalyticsManager"},_stateManager:{type:Object,inject:"StateManager"}}}_stylePercentage(e,t,i,n){return void 0!==i&&(e-=i),void 0!==n&&(t=n-i),Math.max(0,Math.min(e/t*100,100))}_getSlidePosition(e,t,i,n){return this._stylePercentage(e,t,i,n)>85?"-right":"-left"}_handleClick(){this._analyticsManager.changeState("setPosition",[this.slide.startPosition],{verb:n.VIDEO_SLIDE_SEEK})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="slide-preview-bar" assetpath="src/components/progress-container/"><template><style type="text/css" include="progress-container--style-module">#container__slide_preview_bar{height:10px}</style><div id="container__slide_preview_bar" class="progress_indicator"><template is="dom-repeat" items="[[_visibleSlides]]"><slide-thumbnail state="[[state]]" slide="[[item]]"></slide-thumbnail></template></div></template><script>IMD.define("slide-preview-bar",["binding-helpers","ioc-requester","constants"],(e,t,i)=>{const{ANALYTICS_TOPICS:a}=i;class s extends(e(t(Polymer.Element))){static get is(){return"slide-preview-bar"}static get properties(){return{state:Object,slides:Array,activeSlide:{type:Object,value:()=>({})},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_stateManager:{type:Object,inject:"StateManager"},_visibleSlides:{type:Array,computed:"_getVisibleSlides(slides, state.trimStart, state.trimEnd)"}}}static get observers(){return["_checkSlideActivation(state.position)","_handleSlideChange(activeSlide)"]}_getVisibleSlides(e,t,i){let a=[];for(let s=0;s<e.length;s++){let n=e[s];(n.startPosition>=t||e[s+1]&&e[s+1].startPosition>t)&&n.startPosition<=i&&a.push(n)}return a}_checkSlideActivation(){if(this._analyticsManager){let e=this._analyticsManager._getActiveSlide();this.activeSlide!==e&&(this.activeSlide=e)}}_handleSlideChange(e){this._analyticsManager&&this._analyticsManager.newEvent({verb:a.VIDEO_SLIDE_CHANGE},{newCurrentSlide:e})}}window.customElements.define(s.is,s)});</script></dom-module><dom-module id="resizer-control" assetpath="src/components/"><template><style type="text/css" include="global--style-module font-awesome">:host{display:flex;z-index:5;visibility:hidden}#container__resizer_control{display:flex}#resizer{position:relative;border:2px solid #5a6065;border:2px solid var(--secondary-background-color);cursor:ew-resize;height:inherit}#resizer:after,#resizer:before{position:absolute;top:calc(50% - 15px);font-size:2em;color:var(--secondary-background-color);font-family:FontAwesome}#resizer:before{content:"\f053";margin-left:-1.25em}#resizer:after{content:"\f054";margin-left:.5em}</style><div id="container__resizer_control"><div id="resizer" draggable="true" on-dragstart="_handleDragStart" on-drag="_resizeVideos" on-dragend="_handleDragEnd" on-click="_handleClick"></div></div></template><script>IMD.define("resizer-control",["binding-helpers","ioc-requester","constants"],(e,t,i)=>{const{ANALYTICS_TOPICS:s}=i;class o extends(e(t(Polymer.Element))){static get is(){return"resizer-control"}static get properties(){return{state:Object,videoAlignment:String,_videos:Array,_videoResolutions:Object,_mousePositionX:Number,_globalFlexBasisGap:{type:Array,value:()=>[0,0]},_analyticsManager:{type:Object,inject:"AnalyticsManager"}}}static get observers(){return["_fullscreenChanged(state.fullscreen)"]}connectedCallback(){super.connectedCallback(),this._videos=[this._findPreviousVideo(),this._findNextVideo()],this._videoResolutions={};for(let e=0;e<this._videos.length;e++)this._videos[e].addEventListener("loaded-video",t=>{this._videoResolutions[e]=t.detail.resolution,Object.keys(this._videoResolutions).length===Object.keys(this._videos).length&&this._alignVideoHeights()})}_handleDragStart(e){e.dataTransfer.setData("text",""),this.parentElement.addEventListener("dragover",this._handleDragOver.bind(this));let t=document.createElement("p"),i=document.createTextNode("DragImage");t.appendChild(i),t.style.visibility="hidden",document.body.appendChild(t),window.StyleMedia?this.style.opacity="0":e.dataTransfer.setDragImage(t,-1e4,-1e4)}_handleDragEnd(){document.body.removeChild(document.body.lastChild),this.parentElement.removeEventListener("dragover",this._handleDragOver.bind(this)),this.style.opacity="1",this._analyticsManager.newEvent({verb:s.VIDEO_CHANGE_SIZE},this._getAnalyticsData())}_handleDragOver(e){this._mousePositionX=e.pageX-this.parentElement.getBoundingClientRect().left}_handleClick(e){this._videos||(this._videos=[this._findPreviousVideo(),this._findNextVideo()]);let t=.49*this.parentElement.offsetWidth/2;e.offsetX>=15?this._resizeToRight(t,30):e.offsetX<=-15&&this._resizeToLeft(t,30)}_resizeVideos(e){let t=(e.originalTarget||e.srcElement).offsetLeft,i=this._getMouseDirection(e,t),s=.49*this.parentElement.offsetWidth/2,o=Math.abs(this._mousePositionX-t);"left"===i?this._resizeToLeft(s,o):"right"===i&&this._resizeToRight(s,o)}_findNextVideo(){let e=this;for(;"VIDEO-STREAM"!==e.nodeName;)e=e.nextElementSibling;return e}_findPreviousVideo(){let e=this;for(;"VIDEO-STREAM"!==e.nodeName;)e=e.previousElementSibling;return e}_getMouseDirection(e,t){return 0===this._mousePositionX?"":this._mousePositionX<t?"left":this._mousePositionX>t?"right":void 0}_changeFlexBasis(e,t,i,s){let o=this._globalFlexBasisGap[i]+t;o=(o=o<=-s?-s:o)>=s?s:o,this._globalFlexBasisGap[i]=o,e.style.flexBasis="calc(49% + "+o+"px)"}_resizeToLeft(e,t){this._globalFlexBasisGap[1]<e&&(this._changeFlexBasis(this._videos[1],t,1,e),this._changeFlexBasis(this._videos[0],-t,0,e))}_resizeToRight(e,t){this._globalFlexBasisGap[0]<e&&(this._changeFlexBasis(this._videos[1],-t,1,e),this._changeFlexBasis(this._videos[0],t,0,e))}_alignVideoHeights(){let e=this._videoResolutions[0].height/this._videoResolutions[0].width,t=this._videoResolutions[1].height/this._videoResolutions[1].width,i=98*t/(e+t),s=98*e/(e+t);this._videos[0].style.flexBasis=i+"%",this._videos[1].style.flexBasis=s+"%"}_resetResizer(){this._videos&&this._videos.length>1&&(this._videos[0].style.flexBasis="49%",this._videos[1].style.flexBasis="49%")}_fullscreenChanged(e){e||this._resetResizer()}_getAnalyticsData(){let e=this._videos[0].offsetWidth/this._videos[1].offsetWidth,t=Array.from(this.parentElement.querySelectorAll("resizer-control"));return{newCurrentRatio:e,resizerIndex:t.indexOf(this),resizerCount:t.length}}}window.customElements.define(o.is,o)});</script></dom-module><dom-module id="video-object-renderer" assetpath="src/components/"><template><script type="application/ld+json">[[_stringifyVideoObject(videoObject)]]</script></template><script>IMD.define("video-object-renderer",()=>{class e extends Polymer.Element{static get is(){return"video-object-renderer"}static get properties(){return{videoObject:Object}}_stringifyVideoObject(e){return JSON.stringify(e,null,2)}}window.customElements.define(e.is,e)});</script></dom-module><script>const streamSchema={hls:{type:"string",description:"URL of the HLS video stream."},hd:{type:"string",description:"URL of the HD video stream."},sd:{type:"string",description:"URL of the SD video stream."},poster:{type:"string",description:"URL of the poster image."},muted:{type:"boolean",description:"Mutes the audio stream of the video.",default:!1}},stateSchema={playState:{type:"string",options:["PLAYING","PAUSED"],default:"PAUSED"},position:{type:"number",default:0,description:"Video position in seconds."},playbackRate:{type:"number",options:[.7,1,1.3,1.5,1.8,2],default:1},quality:{type:"string",options:["hls","hd","sd"],default:"best quality available"},volume:{type:"number",min:0,max:1,default:1},muted:{type:"boolean",default:!1},captionLanguage:{type:"string",default:"off"},showCaptions:{type:"boolean",default:!1,description:"Enables captions. Additionally, `captionLanguage` needs to be set."},showInteractiveTranscript:{type:"boolean",default:!1,description:"Enables interactive transcript. Additionally, `captionLanguage` needs to be set."}},configurationSchema={streams:{required:!0,type:"array",description:"List of URLs to the videos streams of different qualities and (optional) poster images. If there is only one quality, use `hd`.",schema:streamSchema,example:[{sd:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",hd:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",poster:"https://peach.blender.org/wp-content/uploads/bbb-splash.png"}]},fallbackStream:{type:"object",description:"Contains a fallback stream that the user can switch to, i.e. a single stream source.",schema:streamSchema},language:{type:"string",default:"en",description:"Language used for localizing messages."},initialState:{type:"object",description:"The initial state the player has when loaded.",schema:stateSchema},userPreferences:{type:"object",schema:stateSchema,description:"Override parts of the default/initial/saved state. Meant to be provided by the server based on the current user."},foregroundColor:{type:"string",pattern:/^#(?:[0-9a-f]{3}){1,2}$/i,description:"HEX code of the color for text and all other main content."},accentColor:{type:"string",pattern:/^#(?:[0-9a-f]{3}){1,2}$/i,description:"HEX code of the highlighting color."},fontColorOnAccentColor:{type:"string",pattern:/^#(?:[0-9a-f]{3}){1,2}$/i,description:"HEX code of the font color on the `accentColor`. Take care that the contrast ratio is high enough."},backgroundColor:{type:"string",pattern:/^#(?:[0-9a-f]{3}){1,2}$/i,description:"HEX code of the background for the `foregroundColor`."},secondaryBackgroundColor:{type:"string",pattern:/^#(?:[0-9a-f]{3}){1,2}$/i,description:"HEX code of another background color used for example for displaying the buffer. Take care that the `foregroundColor` has a high contrast to both background colors."},theme:{type:"string",options:["dark-orange","dark-yellow","dark-blue","light-green","dark-red"],default:"dark-orange",description:"Predefined color theme (can be adjusted by settings the colors explicitly)."},loadFontAwesome:{type:"boolean",default:!0,description:"[FontAwesome](http://fontawesome.io) is used for the icons of the player. If your site already loads FontAwesome, this can be set to false to save bandwidth."},videoPreload:{type:"boolean",default:!0,description:"Turns on/off preloading of the videos when the page loads."},trimVideo:{type:"object",description:"Restricts the playback on a specific segment of the video.",schema:{start:{type:"number",default:0,description:"The start position of the segment."},end:{type:"number",default:"duration of video",description:"The end position of the segment"}},example:{start:60,end:300}},chapters:{type:"array",description:"List of timestamps with chapter names.",schema:{title:{required:!0,type:"string",description:"Title of the chapter."},startPosition:{required:!0,type:"number",description:"Start position of the chapter in seconds."}},example:[{title:"Chapter 1",startPosition:0}]},captions:{type:"array",description:"List of caption files for different languages.",schema:{language:{required:!0,type:"string",description:"Language of the captions."},url:{required:!0,type:"string",description:"URL of the captions WebVTT file."}},example:[{language:"en",url:"/captions/en.vtt"}]},slides:{type:"array",description:"List of presentation slides and corresponding start times in seconds to show below the progress.",schema:{thumbnail:{required:!0,type:"string",description:"URL of the slide thumbnail."},startPosition:{required:!0,type:"number",description:"Start position of the slide in seconds."}},example:[{thumbnail:"/image/of/slide.jpg",startPosition:0}]},relatedVideos:{type:"array",description:"List of related videos that are shown after the video has ended.",schema:{title:{required:!0,type:"string",description:"Title of the video."},url:{required:!0,type:"string",description:"URL of the video page."},thumbnail:{required:!0,type:"string",description:"URL of the video thumbnail."},duration:{type:"number",description:"Duration of the video in seconds."}},example:[{title:"Title of related video.",url:"/url/of/video-page",thumbnail:"/image/of/thumbnail.jpg",duration:2259}]},playlist:{type:"object",description:"The playlist, the video is part of.",schema:{autoPlay:{type:"boolean",description:"If enabled, the user is redirected to the next video page after the video has ended.",default:!1},hideInList:{type:"boolean",description:"If enabled, the playlist entries are not shown in the playlist/chapter list.",default:!1},currentPosition:{required:!0,type:"number",description:"The current position in the playlist."},entries:{required:!0,type:"array",description:"Videos of the playlist.",schema:{title:{type:"string",description:"The title of the video."},url:{required:!0,type:"string",description:"The url of the page containing the video."}}}},example:{autoPlay:!0,currentPosition:1,entries:[{title:"Previous Video",url:"/url/of/previous/video"},{title:"Current Video",url:"/url/of/current/video"},{title:"Next Video",url:"/url/of/next/video"}]}},videoObject:{type:"object",description:"Video metadata defined in the [VideoObject](http://schema.org/VideoObject) schema as JSON-LD, which is rendered by the player.",example:{"@context":"http://schema.org/","@type":"VideoObject",name:"Name of the video",duration:"Duration of the video"}},videoAlignment:{type:"string",options:["width","height"],default:"width",description:"If there is more than one video this property decides whether they should have the same height or the same width."},liveDvr:{type:"boolean",description:"If given stream is a live stream that supports DVR, this flag must be enabled to make seeking possible.",default:!1},positionInUrlFragment:{type:"boolean",description:"If enabled, the initial video position is read from the URL fragment parameter `t` (e.g. `#t=25`).",default:!1},mobileMenu:{type:"boolean",description:"If disabled, the control bar icons are forced to be shown inline instead of being part of a separated mobile menu. This might cause the control bar content to overflow, if there are two much controls!",default:!0}};"undefined"==typeof window?exports.schema=configurationSchema:IMD.define("configuration-schema",()=>configurationSchema);</script><dom-module id="video-player" assetpath="src/"><template><style type="text/css" include="global--style-module">:host{display:block;border:1px solid grey;background-color:#000}#video-player-container:-webkit-full-screen #streams-container{align-items:stretch}#video-player-container:-moz-full-screen #streams-container{align-items:stretch}#video-player-container:-ms-fullscreen #streams-container{align-items:stretch}#video-player-container:-webkit-full-screen{width:100%}#video-player-container:-moz-full-screen{width:100%}#video-player-container:-ms-fullscreen{width:100%}#video-player-container{position:relative;height:100%}#video-player-container.fake-fullscreen{width:100vw;position:fixed;left:0;top:0;z-index:1050;background-color:#fff}#video-container{position:relative}#streams-container{display:flex;flex-wrap:wrap;overflow:hidden}.video-stream{flex:1 1 49%}#control-bar{border-top:1px solid #000}@media (max-width:768px){.hidden-for-mobile{display:none}@media screen and (orientation:portrait){.video-stream{flex-basis:100%!important;height:100%!important}}}</style><div id="video-player-container"><template is="dom-if" if="[[configuration.videoObject]]"><video-object-renderer video-object="[[configuration.videoObject]]"></video-object-renderer></template><div id="video-container"><waiting-overlay state="[[state]]"></waiting-overlay><template is="dom-if" if="[[and(_nextVideo, configuration.playlist.autoPlay)]]"><next-video-overlay state="[[state]]" next-video="[[_nextVideo]]"></next-video-overlay></template><template is="dom-if" if="[[hasItems(configuration.relatedVideos)]]"><finished-overlay state="[[state]]" related-videos="[[configuration.relatedVideos]]"></finished-overlay></template><div id="streams-container" style$="height: [[_calculateHeight(state.fullscreen, state.showInteractiveTranscript, configuration.slides)]];"><template is="dom-if" if="[[!state.fallbackStreamActive]]" restamp="true"><template is="dom-repeat" items="[[configuration.streams]]"><video-stream class="video-stream" state="[[state]]" props="[[item]]" preload="[[configuration.videoPreload]]" captions="[[ifEqualsThen(index, 0, configuration.captions)]]" style$="height: calc(100% / [[_rowCount(configuration.streams)]]);" ondragover="return false;" ondrag="return false;"></video-stream><template is="dom-if" if="[[_needResizer(index, configuration.streams.length)]]"><resizer-control state="[[state]]" style$="visibility: [[ifThenElse(_isResizerShown, 'visible', 'hidden')]]" class="hidden-for-mobile" video-alignment="[[configuration.videoAlignment]]"></resizer-control></template></template></template><template is="dom-if" if="[[state.fallbackStreamActive]]" restamp="true"><video-stream state="[[state]]" props="[[configuration.fallbackStream]]" preload="[[configuration.videoPreload]]" class="video-stream" captions="[[configuration.captions]]" style$="height: calc(100% / [[_rowCount(configuration.streams)]]);" is-fallback="true"></video-stream></template></div><captions-display state="[[state]]"></captions-display></div><template is="dom-if" if="[[_showProgressBar]]"><div id="progress-container"><template is="dom-if" if="[[hasItems(configuration.slides)]]"><slide-preview-bar state="[[state]]" slides="[[configuration.slides]]" class="hidden-for-mobile"></slide-preview-bar></template><video-progress state="[[state]]"></video-progress></div></template><control-bar id="control-bar" state="[[state]]" live="[[configuration.live]]" has-chapters="[[hasItems(configuration.chapters)]]" has-fallback-stream="[[_hasFallbackStream]]" caption-languages="[[_captionLanguages]]" available-qualities="[[state.availableQualities]]" previous-video="[[_previousVideo]]" next-video="[[_nextVideo]]" number-of-streams="[[configuration.streams.length]]" live-dvr="[[configuration.liveDvr]]" mobile-menu="[[configuration.mobileMenu]]"></control-bar><playlist-chapter-list state="[[state]]" chapters="[[configuration.chapters]]" playlist="[[configuration.playlist]]" show-if="[[state.isChapterListShown]]"></playlist-chapter-list><interactive-transcript state="[[state]]" show-if="[[and(state.activeCaptions, state.showInteractiveTranscript)]]"></interactive-transcript></div></template><script>IMD.define(["binding-helpers","ioc-provider","ioc-requester","state-manager","fullscreen-manager","synchronization-manager","user-preferences-manager","configuration-validator","localizer","hls-helper","url-fragment-helper","hls-js","analytics-manager","constants","locales","configuration-schema"],(e,t,a,n,i,o,r,s,l,c,g,u,d,h,_,f)=>{const{VERSION:p,DEFAULT_STATE:C,DEFAULT_CONFIGURATION:y,PLAY_STATES:m,QUALITY_MODES:S,PLAYING_EVENT_NAME:v,THEMES:b,ANALYTICS_TOPICS:M}=h;class P extends(e(a(t(Polymer.Element)))){static get is(){return"video-player"}static get properties(){return{configuration:{type:Object,value:()=>({})},state:{type:Object,value:()=>({})},isReady:{type:Boolean,value:()=>!1},version:{type:String,value:()=>p,readOnly:!0},_stateManager:{type:Object,inject:"StateManager"},_fullscreenManager:{type:Object,inject:"FullscreenManager"},_userPreferencesManager:{type:Object,inject:"UserPreferencesManager"},_analyticsManager:{type:Object,inject:"AnalyticsManager"},_configurationValidator:{type:Object,inject:"ConfigurationValidator"},_localizer:{type:Object,inject:"Localizer"},_isResizerShown:{type:Boolean,value:!1},_captionLanguages:{type:Array,computed:"_getCaptionLanguages(configuration.captions)"},_previousVideo:{type:Object,computed:"_getPreviousVideo(configuration.playlist.currentPosition, configuration.playlist.entries)"},_nextVideo:{type:Object,computed:"_getNextVideo(configuration.playlist.currentPosition, configuration.playlist.entries)"},_hasFallbackStream:{type:Boolean,computed:"_getHasFallbackStream(configuration.streams, configuration.fallbackStream, _isIOS)"},_isIOS:{type:Boolean,computed:"_getIsIOS()"},_showProgressBar:Boolean,_isConfigurationInitialized:Boolean,_isConfigurationObserverLocked:{type:Boolean,value:!1}}}static get observers(){return["_configurationChanged(configuration, _configurationValidator)","_isReadyChanged(isReady)","_setAvailableQualities(configuration.streams, state.fallbackStreamActive, configuration.fallbackStream, _stateManager)","_ensureValidQuality(state.availableQualities, state.quality)","_foregroundColorChanged(configuration.foregroundColor)","_accentColorChanged(configuration.accentColor)","_fontColorOnAccentColorChanged(configuration.fontColorOnAccentColor)","_backgroundColorChanged(configuration.backgroundColor)","_secondaryBackgroundColorChanged(configuration.secondaryBackgroundColor)","_themeChanged(configuration.theme)","_languageChanged(configuration.language, _localizer)","_trimStartChanged(configuration.trimVideo.start)","_trimEndChanged(configuration.trimVideo.end)","_playStateChanged(state.playState)","_fullscreenChanged(state.fullscreen)","_userPreferencesStateChanged(state.*)","_positionChanged(state.position)","_checkIfReady(state.playState, state.duration)","_setShowProgressBar(state.live, state.liveDvr)","_setShowProgressBar(state.live, configuration.liveDvr)"]}play(){this._stateManager.play()}pause(){this._stateManager.pause()}seek(e){this._stateManager.setPosition(e)}setPlaybackRate(e){this._stateManager.setPlaybackRate(e)}setQuality(e){this._stateManager.setQuality(e)}setVolume(e){this._stateManager.setVolume(e)}mute(){this._stateManager.mute()}unmute(){this._stateManager.unmute()}showCaptions(e){this._stateManager.setCaptionLanguage(e),this._stateManager.setCaptionsVisibility(!0)}hideCaptions(){this._stateManager.setCaptionsVisibility(!1)}showInteractiveTranscript(e){this._stateManager.setCaptionLanguage(e),this._stateManager.setInteractiveTranscriptVisibility(!0)}hideInteractiveTranscript(){this._stateManager.setInteractiveTranscriptVisibility(!1)}enterFullscreen(){this._stateManager.setFullscreen(!0)}exitFullscreen(){this._stateManager.setFullscreen(!1)}reloadConfiguration(){this.configuration=Object.assign({},this.configuration)}bindServices(e){super.bindServices(e),e.bind("StateManager").toFunction(()=>new n(this,"state","configuration")).inSingletonScope(),e.bind("UserPreferencesManager").toFunction(()=>new r).inSingletonScope(),e.bind("ConfigurationValidator").toFunction(()=>new s(f)).inSingletonScope(),e.bind("SynchronizationManager").toFunction(()=>new o(e.get("StateManager"))).inSingletonScope(),e.bind("FullscreenManager").toFunction(()=>new i(this.$["video-player-container"])).inSingletonScope(),e.bind("AnalyticsManager").toFunction(()=>new d(this,e.get("StateManager"))).inSingletonScope(),e.bind("Localizer").toFunction(()=>new l(_)).inSingletonScope()}servicesInjectedCallback(){if(super.servicesInjectedCallback(),this.configuration.positionInUrlFragment){let e=parseInt(g.getParameter("t"));e&&(this.configuration.initialState.position=e)}this.state=Object.assign({},C,this.state,this.configuration.initialState,this._userPreferencesManager.getPreferences(),this.configuration.userPreferences),this._fullscreenManager.onFullscreenChanged(e=>{this.state.fullscreen!==e&&this._analyticsManager.changeState("setFullscreen",[e],{verb:M.VIDEO_FULLSCREEN})}),window.orientation&&this._stateManager.setVolume(1)}ready(){super.ready(),this.$["streams-container"].addEventListener("mouseenter",()=>this._isResizerShown=!0),this.$["streams-container"].addEventListener("mouseleave",()=>this._isResizerShown=!1),window.addEventListener(v,e=>{e.detail&&e.detail.sender!==this&&this._analyticsManager.changeState("pause",[],{verb:M.VIDEO_PAUSE})})}_configurationInitialized(){this.configuration.loadFontAwesome&&Polymer.importHref(this.importPath+"../node_modules/polymer-font-awesome/dist/font-face.html"),this._isIOS&&this.hasItems(this.configuration.streams,2)&&this._stateManager.setFallbackStreamActive(!0)}_getCaptionLanguages(e){if(e)return e.map(e=>e.language)}_setAvailableQualities(e,t,a){if(this._stateManager&&e){let n=Object.values(S);c.hasHlsSupport||(n=n.filter(e=>e!==S.HLS));let i;i=t?n.filter(e=>Object.keys(a).includes(e)):n.filter(t=>e.every(e=>Object.keys(e).includes(t))),this._stateManager.setAvailableQualities(i)}}_getPreviousVideo(e,t){if(t&&e>0&&t.length>1)return t[e-1]}_getNextVideo(e,t){if(t&&e>=0&&e<t.length-1)return t[e+1]}_getHasFallbackStream(e,t,a){return!a&&this.hasItems(e,2)&&t}_getIsIOS(){const e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}_configurationChanged(e){if(this._configurationValidator&&!this._isConfigurationObserverLocked){for(let t in e)null==e[t]&&delete e[t];this._configurationValidator.validate(this.configuration),this._isConfigurationObserverLocked=!0,Object.keys(y).filter(t=>!Object.keys(e).includes(t)).length>0&&(this.configuration=Object.assign({},y,e)),c.hasNativeHlsSupport&&(this.configuration.liveDvr=!1),this._isConfigurationObserverLocked=!1,this._isConfigurationInitialized||(this._configurationInitialized(),this._isConfigurationInitialized=!0)}}_isReadyChanged(e){e&&this.dispatchEvent(new CustomEvent("ready"))}_ensureValidQuality(e,t){if(this._stateManager&&!e.includes(t)){let t=Object.values(S).find(t=>e.includes(t));this._stateManager.setQuality(t)}}_playStateChanged(e){if(e===m.PLAYING){this._stateManager.setAlreadyPlayed();let e=new CustomEvent(v,{detail:{sender:this}});window.dispatchEvent(e)}}_positionChanged(){this._analyticsManager&&this._analyticsManager.newEvent({verb:M.VIDEO_TIME_CHANGE},{})}_checkIfReady(e,t){e!==m.WAITING&&t>0&&(this.isReady=!0)}_fullscreenChanged(e){this._fullscreenManager&&(e?this._fullscreenManager.enterFullscreen():this._fullscreenManager.exitFullscreen())}_foregroundColorChanged(e){e&&Polymer.updateStyles({"--foreground-color":e})}_accentColorChanged(e){e&&Polymer.updateStyles({"--accent-color":e})}_fontColorOnAccentColorChanged(e){e&&Polymer.updateStyles({"--font-color-on-accent-color":e})}_backgroundColorChanged(e){e&&Polymer.updateStyles({"--background-color":e})}_secondaryBackgroundColorChanged(e){e&&Polymer.updateStyles({"--secondary-background-color":e})}_themeChanged(e){e in b&&(void 0===this.configuration.foregroundColor&&this._foregroundColorChanged(b[e].foregroundColor),void 0===this.configuration.accentColor&&this._accentColorChanged(b[e].accentColor),void 0===this.configuration.fontColorOnAccentColor&&this._fontColorOnAccentColorChanged(b[e].fontColorOnAccentColor),void 0===this.configuration.backgroundColor&&this._backgroundColorChanged(b[e].backgroundColor),void 0===this.configuration.secondaryBackgroundColor&&this._secondaryBackgroundColorChanged(b[e].secondaryBackgroundColor))}_languageChanged(e){this._localizer&&this._localizer.setLanguage(e)}_trimStartChanged(e){this._stateManager&&this._stateManager.trimStart(e)}_trimEndChanged(e){this._stateManager&&this._stateManager.trimEnd(e)}_userPreferencesStateChanged(){this._userPreferencesManager&&this._userPreferencesManager.setPreferences(this.state)}_setShowProgressBar(e,t){this._showProgressBar=!e||t}_needResizer(e,t){return e%2==0&&e!==t-1}_rowCount(e){return Math.ceil(e.length/2)}_calculateHeight(e,t,a){return e?"calc(100vh - "+[[this._bottomSpace(t,a)]]+"px)":"calc(100% - "+[[this._bottomSpace(t,a)]]+"px)"}_bottomSpace(e,t){let a;return a=56,e&&(a+=200),t&&(a+=11),"iPad"===window.navigator.platform?a+=63:"iPhone"===window.navigator.platform&&(90===window.orientation||-90===window.orientation?a+=33:a+=55),a}}window.customElements.define(P.is,P)});</script></dom-module></div>